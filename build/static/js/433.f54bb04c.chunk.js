"use strict";(self.webpackChunkschoolerp=self.webpackChunkschoolerp||[]).push([[433],{47302:(e,t,l)=>{l.r(t),l.d(t,{default:()=>cs});var a=l(65043),n=l(34535),i=l(26240),s=l(96446),o=l(94109),r=l(92314),d=l(55263),c=l(35721),m=l(55376),u=l(85865),h=l(39336),x=l(17392),p=l(89611),g=l(55896),A=l(91707),j=l(30681),f=l(38968),b=l(2050),y=l(26353),v=l(64912),S=l(77739),k=l(17830),C=l(70378),w=l(32143),I=l(30279),N=l(4598),D=l(35475),M=l(73216),F=l(75310),_=l(99792),R=l(1702),E=l(52177),T=l(67485),z=l(93787),P=l(97462),q=l(10631),B=l(59893),W=l(79641),Y=l(812),J=l(11634),V=l(79962),O=l(95283),U=l(46051),L=l(70579);const H={SIDE_MENU_DATA:[{name:"Dashboard",path:"/sch/dashboard",renderName:["Dashboard"],subMenus:[],icon:(0,L.jsx)(T.A,{color:"primary",fontSize:"small"})},{name:"Manage Institute",path:"/sch/manage-institute",renderName:["Manage Institute"],subMenus:[],icon:(0,L.jsx)(q.A,{color:"primary",fontSize:"small"})},{name:"Administrator",path:"",renderName:["Academic Year","Roles and Permissions","User Password Reset"],icon:(0,L.jsx)(B.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Academic Year",renderName:"Academic Year",path:"/sch/administrator/academicYear",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Roles & Permissions",renderName:"Roles and Permissions",path:"/sch/administrator/role-permission",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"User Password Reset",renderName:"User Password Reset",path:"/sch/administrator/reset-password",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})}]},{name:"Human Resource",path:"",renderName:["Designation","Department","Employee","Offer Letter","Relieving Letter","Off Boarding","Experience Letter","Teacher Activity"],icon:(0,L.jsx)(U.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Manage Designation",renderName:"Designation",path:"/sch/human-resource/manage-designation",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Manage Department",renderName:"Department",path:"/sch/human-resource/manage-department",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Employee",renderName:"Employee",path:"/sch/human-resource/employee",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Offer-Letter",renderName:"Offer Letter",path:"/sch/human-resource/offer-letter",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Relieving Letter",renderName:"Relieving Letter",path:"/sch/human-resource/relieving-letter",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Experience Letter",renderName:"Experience Letter",path:"/sch/human-resource/experience-letter",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Teacher Activity",renderName:"Teacher Activity",path:"/sch/human-resource/teacher-activity",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})}]},{name:"Academic",path:"",renderName:["Class","Section","Subject"],icon:(0,L.jsx)(W.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Class",renderName:"Class",path:"/sch/academic/class",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Section",renderName:"Section",path:"/sch/academic/section",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Subject",renderName:"Subject",path:"/sch/academic/subject",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})}]},{name:"Student",path:"",renderName:["Overview","Admit Student","Resuffle","Promotion","Bulk Admission","Credential","Quick Admit","ID card","Student Activity"],icon:(0,L.jsx)(Y.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Overview",renderName:"Overview",path:"/sch/student/overview",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Admit Student",renderName:"Admit Student",path:"/sch/student/admit-student",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Reshuffle",renderName:"Resuffle",path:"/sch/student/reshuffle",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Promotion",renderName:"Promotion",path:"/sch/student/promotion",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Bulk Admission",renderName:"Bulk Admission",path:"/sch/student/bulk-admission",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Credential",renderName:"Credential",path:"/sch/student/credential",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})}]},{name:"Communication",path:"",renderName:["Compose","Sms Report","Sms Credentials"],icon:(0,L.jsx)(J.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Compose",renderName:"Compose",path:"/sch/communication_compose",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Report",renderName:"Sms Report",path:"/sch/communication_report",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Credentials",renderName:"Sms Credentials",path:"/sch/communication_credentials",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})}]},{name:"Notifications",path:"/sch/notifications",renderName:["Notifications"],subMenus:[],icon:(0,L.jsx)(O.A,{color:"primary",fontSize:"small"})},{name:"Fees",path:"",renderName:["Receipt Book","Fee Map Category","Collect Fees","Balance Fee","Fee Overview","Reconciliation"],icon:(0,L.jsx)(V.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Receipt Book",renderName:"Receipt Book",path:"/sch/fees/receipt-book",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Fee Map Category",renderName:"Fee Map Category",path:"/sch/fees/feeMap-category",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Collect Fees",renderName:"Collect Fees",path:"/sch/fees/collect-fees",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Balance Fee",renderName:"Balance Fee",path:"/sch/fees/balance-fee",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Fee Overview",renderName:"Fee Overview",path:"/sch/fees/fee-overview",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Reconciliation",renderName:"Reconciliation",path:"/sch/fees/re-conciliation",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})}]},{name:"Hostel",path:"",renderName:["Manage Hostel","Manage Room Type","Manage Room Bed","Hostel Member"],icon:(0,L.jsx)(z.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Manage Hostel",renderName:"Manage Hostel",path:"/sch/hostel/manage-hostel",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Manage Room Type",renderName:"Manage Room Type",path:"/sch/hostel/manage-room-type",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Manage Room Bed",renderName:"Manage Room Bed",path:"/sch/hostel/manage-room-bed",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})},{name:"Hostel Member",renderName:"Hostel Member",path:"/sch/hostel/hostel-member",icon:(0,L.jsx)(P.A,{color:"primary",fontSize:"small"})}]}]};var G=l(81728);const Q=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",marginBottom:"20px",borderBottom:"1px solid",borderBottomColor:t.palette.primary.light}}));function K(e){let{title:t="",showTextField:l=!0}=e;return(0,L.jsx)(Q,{children:(0,L.jsx)(u.A,{component:"h1",sx:{fontWeight:"bold",color:e=>"dark"===e.palette.mode?"white":"black"},children:t})})}var Z=l(12110),X=l(63336),$=l(68903),ee=l(50108),te=l(75392),le=l(87734),ae=l(52185),ne=l(6026),ie=l(86150),se=l(21327),oe=l(22798),re=l(31883),de=l(87715),ce=l(13059);const me=()=>{const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),{ref:o,width:r}=(0,re.A)();return(0,a.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.student.getDashboardStudentDetails,{params:{schoolId:e._id}}),a=t.result.map((e=>{const t={className:e.className};return Object.keys(e.sections).forEach((l=>{t[l]=e.sections[l]})),t}));l(a);const n=new Set;t.result.forEach((e=>{Object.keys(e.sections).forEach((e=>{n.add(e)}))})),i([...n])}catch(t){console.log(t)}})()}),[e]),(0,L.jsx)(s.A,{sx:{display:"flex",flex:1},ref:o,children:(0,L.jsx)(ee.u,{width:"100%",height:"100%",children:(0,L.jsx)(X.A,{sx:{width:"100%",height:"100%"},children:(0,L.jsxs)(te.E,{width:r?r-10:700,height:373,data:t,margin:{top:20,right:5,left:0,bottom:5},children:[(0,L.jsx)(le.d,{strokeDasharray:"3 3"}),(0,L.jsx)(ae.W,{dataKey:"className"}),(0,L.jsx)(ne.h,{}),(0,L.jsx)(ie.m,{}),(0,L.jsx)(se.s,{}),n.map((e=>(0,L.jsx)(oe.y,{dataKey:e,fill:"#"+Math.floor(16777215*Math.random()).toString(16),stackId:"stack"},e)))]})})})})};(0,n.Ay)(Z.A)((e=>{let{theme:t}=e;return{marginBottom:"15px",padding:"20px 0",height:"auto",width:"100%",alignItems:"center",justifyContent:"center",[t.breakpoints.down("sm")]:{flexDirection:"column"},[t.breakpoints.down("xs")]:{flexDirection:"column"},[t.breakpoints.down("md")]:{flexDirection:"row"}}})),(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{alignSelf:"center",display:"flex",justifyContent:"center"}})),(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{alignSelf:"center",display:"flex",alignItems:"center",height:"100%",justifyContent:"center",fontSize:"16px",fontWeight:600}})),(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",textAlign:"center"}})),(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",marginTop:"3px"}}));function ue(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{var t,a;const[n,s]=await Promise.all([(0,de.Jt)(ce.r.studentAttendance.getAttendanceSummaryForToday,{params:{schoolId:e._id}}),(0,de.Jt)(ce.r.employeeAttendance.getEmployeeAttendanceSummaryForToday,{params:{schoolId:e._id}})]);l(null===(t=n.data)||void 0===t?void 0:t.result),i(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.result)}catch(n){console.log(n)}})()}),[e._id]);window.localStorage.getItem("isDarkMode");return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(X.A,{sx:{padding:{xs:2,sm:2,md:"0px 15px",lg:"0px 15px"},margin:"20px 0px",backgroundColor:e=>"dark"===e.palette.mode?"rgba(255,255,255,0.5)":"whitesmoke"},children:(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,children:(0,L.jsx)(me,{})})})})})}var he=l(24010),xe=l(80889);function pe(e){var t;let{module:l,permission:a,children:n}=e;if(!window.localStorage.getItem("ktech_access_token"))return null;const i=window.localStorage.getItem("ktech_current_user");if(!i)return null;let s=JSON.parse(i).role;if(!s)return null;if("super admin"===(null===(t=s.name)||void 0===t?void 0:t.toLowerCase()))return n;let o=s.permissions.find((e=>{var t;return(null===(t=e.module)||void 0===t?void 0:t.toLowerCase())===(null===l||void 0===l?void 0:l.toLowerCase())}));return o&&o.permissions.includes(null===a||void 0===a?void 0:a.toLowerCase())?(0,L.jsx)(L.Fragment,{children:n}):null}const ge=(0,n.Ay)(Z.A)((e=>{let{theme:t}=e;return{display:"flex",textAlign:"center",justifyContent:"space-evenly",padding:"25px 0px",flexDirection:"column"}})),Ae=(0,n.Ay)(he.A)((e=>{let{theme:t}=e;return{background:"#1b3779",color:"#fff","&:hover":{color:"#1b3779"}}}));function je(){return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(X.A,{sx:{padding:2,backgroundColor:e=>"dark"===e.palette.mode?"rgba(255,255,255,0.5)":"whitesmoke"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"center",children:(0,L.jsx)(u.A,{sx:{fontSize:18,fontWeight:"bold",color:e=>"dark"===e.palette.mode?"white":"black"},children:"Quick Links"})}),(0,L.jsxs)(pe,{module:"Admit Student",permission:"add",children:[" ",(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:4,children:(0,L.jsx)(D.N_,{to:"/sch/student/add-student",style:{textDecoration:"none"},children:(0,L.jsxs)(ge,{children:[(0,L.jsx)(s.A,{children:(0,L.jsx)(Ae,{size:"small",children:(0,L.jsx)(Y.A,{})})}),(0,L.jsx)(s.A,{children:"Admit Students"})]})})})]}),(0,L.jsx)(pe,{module:"Employee",permission:"add",children:(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:4,children:(0,L.jsx)(D.N_,{to:"/sch/human-resource/add-employee",style:{textDecoration:"none"},children:(0,L.jsxs)(ge,{children:[(0,L.jsx)(s.A,{children:(0,L.jsx)(Ae,{size:"small",children:(0,L.jsx)(Y.A,{})})}),(0,L.jsx)(s.A,{children:"Admit Employee"})]})})})}),(0,L.jsx)(pe,{module:"Compose",permission:"add",children:(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:4,children:(0,L.jsx)(D.N_,{to:"/sch/communication_compose",style:{textDecoration:"none"},children:(0,L.jsxs)(ge,{children:[(0,L.jsx)(s.A,{children:(0,L.jsx)(Ae,{size:"small",children:(0,L.jsx)(xe.A,{})})}),(0,L.jsx)(u.A,{children:"Communication"})]})})})})]})})})}var fe=l(24490),be=(l(66097),l(71995),l(60446)),ye=l.n(be),ve=l(73213);(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{borderRadius:"5px",margin:"18px",transform:"translateY(0%)",animation:"scroll 15s linear infinite",animationPlayState:"running","&:hover":{animationPlayState:"paused"},"@keyframes scroll":{from:{transform:"translateY(50%)"},to:{transform:"translateY(-100%)"}}}})),(0,n.Ay)(Z.A)((e=>{let{theme:t}=e;return{textAlign:"center",margin:"10px 0px",height:"100%"}})),(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"center",margin:"5px",padding:"5px",fontWeight:700}})),(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",textAlign:"center",height:"auto",width:"95%",marginLeft:"1rem",marginRight:"2rem",paddingBottom:"5px",position:"relative"}})),(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontWeight:"bold",cursor:"pointer",fontSize:"18px",borderLeft:"7px solid #ffeb3b",paddingLeft:t.spacing(1)}})),(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontWeight:700,"&:hover":{color:ve.A.darkPalette.primary.main,cursor:"pointer"}}}));function Se(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.notice.list,{params:{schoolId:e._id}});l(t.result)}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.holiday.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}})()}),[e._id]),(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(X.A,{sx:{padding:2,mt:2,backgroundColor:e=>"dark"===e.palette.mode?"rgba(255,255,255,0.5)":"whitesmoke"},children:(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{item:!0,xs:12,children:(0,L.jsx)(fe.Ay,{tileClassName:e=>{let{date:t}=e;const l=new Date;return t.toDateString()===l.toDateString()?"blue-day":""}})})})})})}var ke=l(78977),Ce=l(69652),we=l(63516);function Ie(){const{selectedSetting:e}=(0,a.useContext)(G.A),t=(0,M.Zp)(),[l,n]=(0,a.useState)([]),[i,s]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),d=(0,we.Wx)({initialValues:{class:"",section:"",student:""},onSubmit:e=>{e.student&&t("/sch/student/edit-student/".concat(e.student))},enableReinitialize:!0});return(0,a.useEffect)((()=>{d.values.class&&(async()=>{try{if("all"===d.values.class){const{data:t}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id}});s([{label:"All",value:"all"}]),d.setFieldValue("section","all")}else{const{data:t}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:d.values.class}}}),l=[{label:"All",value:"all"},...t.result.map((e=>({label:e.name,value:e._id})))];s(l),d.setFieldValue("section","all")}}catch(t){console.log(t)}})()}),[d.values.class,e._id]),(0,a.useEffect)((()=>{d.values.class&&d.values.section&&(async t=>{try{if("all"!==t.class&&"all"===t.section){const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.class":t.class}}});r(l.result.map((e=>({...e,label:"".concat(e.basicInfo.name,"  | ").concat(e.academicInfo.rollNumber," | ").concat(e.contactNumber," "),value:e._id}))))}else if("all"===t.class){const{data:t}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id}});r(t.result.map((e=>({...e,label:"".concat(e.basicInfo.name,"  | ").concat(e.academicInfo.rollNumber," | ").concat(e.contactNumber," "),value:e._id}))))}else{const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.class":t.class,"academicInfo.section":t.section}}});r(l.result.map((e=>({...e,label:"".concat(e.basicInfo.name,"  | ").concat(e.academicInfo.rollNumber," | ").concat(e.contactNumber," "),value:e._id}))))}}catch(l){console.log(l)}})(d.values)}),[d.values.class,d.values.section,e._id]),(0,a.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}}),l=[{label:"All",value:"all"},...t.result.map((e=>({label:e.name,value:e._id})))];n(l),d.setFieldValue("class","all")}catch(t){console.log(t)}})()}),[e._id]),(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(X.A,{sx:{padding:2},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:d.handleSubmit,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:d,label:"Select Class",options:l})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:d,label:"Select Section",options:i})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"student",formik:d,label:"Select Student",options:o,showSearch:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",type:"submit",children:"Find"})})]})})})}function Ne(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Welcome To School ERP "}),(0,L.jsx)(Ie,{}),(0,L.jsx)(ue,{}),(0,L.jsx)(je,{}),(0,L.jsx)(Se,{})]})}var De=l(52101),Me=l(58293);const Fe=l.p+"static/media/deleteicon.60b6f90a465370fb216b.png";var _e=l(42111),Re=l(22505);function Ee(e){let{module:t="",disabled:l,title:a,onAddClick:n=(()=>{})}=e;return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(pe,{module:t,permission:"add",children:(0,L.jsx)(s.A,{sx:{position:"fixed",width:"-moz-fit-content",width:"fit-content",right:"70px",bottom:"20px"},children:(0,L.jsx)(S.A,{title:a,children:(0,L.jsx)(he.A,{variant:"contained",onClick:n,disabled:l,sx:{color:"#ffff",background:ve.A.darkPalette.primary.main,":hover":{background:ve.A.darkPalette.primary.main}},children:(0,L.jsx)(Re.A,{})})})})})})}var Te=l(30344),ze=l(83462),Pe=l(4219),qe=l(35316),Be=l(29347),We=l(72812);function Ye(e){let{formTitle:t="",children:l,formik:a,open:n=!1,onClose:s=(()=>{}),submitButtonTitle:o="",styles:r={},adding:d=!1}=e;const c=(0,i.A)();let m=(0,Te.A)(c.breakpoints.down("sm"));return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(ze.A,{fullScreen:m,open:n,onClose:s,PaperProps:{sx:{width:"100%",maxWidth:650,...r},component:"form",onSubmit:a.handleSubmit},children:[(0,L.jsx)(Pe.A,{sx:{fontWeight:600},children:t}),(0,L.jsx)(h.A,{}),(0,L.jsx)(qe.A,{sx:{padding:"10px"},children:l}),(0,L.jsxs)(Be.A,{children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:s,children:"Close"}),(0,L.jsx)(We.A,{size:"small",loading:d,variant:"contained",type:"submit",children:o})]})]})})}var Je=l(79650),Ve=l(71806),Oe=l(84882),Ue=l(28076),Le=l(39652),He=l(73460),Ge=l(19090),Qe=l(73368),Ke=l(63471),Ze=l(95540);function Xe(e){let{dataPresent:t,title:l}=e;return t?null:(0,L.jsxs)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:[l.charAt(0).toUpperCase()+l.slice(1)," not found!"]})}var $e=l(93851),et=l(95915),tt=l(47968);const lt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:380,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:2},at=(0,n.Ay)(N.A)((e=>{let{}=e;return{"& .MuiSwitch-switchBase.Mui-checked":{color:"green"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"green"},"& .MuiSwitch-switchBase":{color:"red"},"& .MuiSwitch-switchBase + .MuiSwitch-track":{backgroundColor:"red"}}})),nt=(e,t)=>"boolean"===typeof e[t.key]?!0===e[t.key]?"Yes":"No":t.path&&Object.keys(e[t.path]||{}).length>0?e[t.path][t.key]||"NA":t.isDate?e[t.key]?new Date(e[t.key]).toDateString():"NA":"feedback"===t.key?e[t.key]?"".concat(e[t.key].substring(0,50),"..."):"NA":e[t.key];function it(e){let{bodyData:t=[],bodyDataModal:l="",tableKeys:n=[],actions:i=["edit","delete","view","card","switch"],onEditClick:o=(()=>{}),onDeleteClick:r=(()=>{}),onViewClick:d=(()=>{}),onCardClick:c=(()=>{}),onNavigateFeeMap:m=(()=>{}),onToggleSwitch:h=(()=>{}),toggleStatus:p=!1,isDataReady:g=!0,module:A="",CustomAction:j=(()=>{}),onUpdate:f=(()=>{}),onDownloadClick:b=(()=>{})}=e;const[y,v]=a.useState(0),[C,w]=a.useState(10),[I,N]=(0,a.useState)(!1),[D,M]=(0,a.useState)(null),F=()=>{N(!1)},_=e=>!0===e[p]?"Active":"Inactive";return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(Je.A,{component:X.A,children:[(0,L.jsxs)(Ve.A,{children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"S.No"}),n.map(((e,t)=>(0,L.jsx)(Le.A,{sx:{fontWeight:"bold"},align:"center",children:e.name},t+e.name))),i.length?(0,L.jsx)(Le.A,{sx:{fontWeight:"bold"},align:"center",children:"Action"}):null]})}),(0,L.jsx)(He.A,{children:t.length&&g?t.slice(y*C,y*C+C).map(((e,t)=>(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:t+1}),n.map(((t,l)=>"image"===t.type?(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,L.jsx)(k.A,{sx:{alignSelf:"center",objectFit:"contain"},src:e[t.key]})})},l):(0,L.jsx)(Le.A,{align:"center",children:nt(e,t)},l))),i.length?(0,L.jsxs)(Le.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",columnGap:"5px"},children:[(0,L.jsx)(pe,{module:A,permission:"update",children:i.includes("edit")&&!e.checkOut&&(0,L.jsx)(S.A,{title:"Edit",children:(0,L.jsx)(x.A,{onClick:()=>o(e),children:(0,L.jsx)(Ze.A,{color:"primary",fontSize:"small"})})})}),(0,L.jsx)(pe,{module:A,permission:"delete",children:i.includes("delete")&&(0,L.jsx)(S.A,{title:"Delete",children:(0,L.jsx)(x.A,{onClick:()=>(e=>{M(e),N(!0)})(e),children:(0,L.jsx)(Ke.A,{fontSize:"small",color:"error"})})})}),(0,L.jsx)(pe,{module:A,permission:"view",children:i.includes("view")&&(0,L.jsx)(S.A,{title:"View",children:(0,L.jsx)(x.A,{onClick:()=>d(e),children:(0,L.jsx)($e.A,{fontSize:"small",color:"primary"})})})}),i.includes("card")&&(0,L.jsx)(S.A,{title:"Unbundle",children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",onClick:()=>c(e),children:"Card"})}),(0,L.jsx)(pe,{module:A,permission:"update",children:i.includes("switch")&&(0,L.jsx)(S.A,{title:_(e),children:(0,L.jsx)(x.A,{size:"small",onClick:()=>h(e),children:(0,L.jsx)(at,{size:"small",checked:!0===e[p]})})})}),i.includes("custom")&&(0,L.jsx)(j,{onEditClick:o,data:e,onUpdate:f,onNavigateFeeMap:m}),(0,L.jsx)(pe,{module:A,permission:"view",children:i.includes("download")&&(0,L.jsx)(x.A,{size:"small",onClick:()=>b(e),children:(0,L.jsx)(tt.A,{fontSize:"small"})})})]}):null]},e._id||t))):null})]}),g?null:(0,L.jsx)(s.A,{sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"20px"},children:(0,L.jsx)(et.A,{size:30,color:"dodgerblue"})}),g?(0,L.jsx)(Xe,{dataPresent:t.length,title:l}):null,(0,L.jsx)(Ge.A,{size:"small",component:"div",count:t&&t.length?t.length:0,page:y,onPageChange:(e,t)=>{v(t)},rowsPerPage:C,onRowsPerPageChange:e=>{w(parseInt(e.target.value,10)),v(0)},sx:{display:"flex",justifyContent:"flex-start,"}})]}),(0,L.jsx)(Qe.A,{open:I,onClose:F,children:(0,L.jsxs)(s.A,{sx:lt,children:[(0,L.jsx)(s.A,{sx:{textAlign:"center",margin:"10px auto"},children:(0,L.jsx)("img",{src:Fe,width:50,height:50})}),(0,L.jsx)(u.A,{textAlign:"center",sx:{fontSize:"18px",fontWeight:700},children:"Delete Confirmation"}),(0,L.jsx)(u.A,{sx:{mt:2,textAlign:"center"},children:"Please note that deleting this item could lead to data inconsistencies if there are other documents dependent on it. Are you certain you wish to continue with the deletion?"}),(0,L.jsxs)(s.A,{my:3,sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"outlined",onClick:F,children:"Cancel"}),(0,L.jsx)(ke.A,{color:"error",size:"small",variant:"contained",onClick:()=>{r(D._id),N(!1)},children:"Delete"})]})]})})]})}const st=[{name:"Academic Year",key:"academicYear"},{name:"Active\t",key:"active"},{name:"Note\t",key:"note"}];var ot=l(95482);function rt(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!1),[s,o]=(0,a.useState)(null),[r,d]=(0,a.useState)(!1),c=async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.academicYear.list,{params:{schoolId:e._id}});l(t.result.map((e=>({...e,academicYear:"".concat(e.from,"-").concat(e.to)}))))}catch(t){console.log(t)}},m=()=>{i(!1),o(null)},u=(0,we.Wx)({initialValues:{from:(null===s||void 0===s?void 0:s.from)||"",to:(null===s||void 0===s?void 0:s.to)||"",note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async e=>{try{const t={...e};if(d(!0),s){const{data:e}=await(0,de.yJ)(ce.r.academicYear.update+"/"+s._id,t);c()}else{const{data:e}=await(0,de.bE)(ce.r.academicYear.create,t);c()}m()}catch(t){console.log(t)}d(!1)},enableReinitialize:!0});console.log(e,"0000000"),(0,a.useEffect)((()=>{c()}),[e._id]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Academic Year"}),(0,L.jsx)(it,{actions:["edit","switch"],module:"Academic Year",bodyDataModal:"academic year",bodyData:t,tableKeys:st,onEditClick:e=>{o(e),i(!0)},toggleStatus:"active",onToggleSwitch:async e=>{try{const{data:t}=await(0,de.yJ)(ce.r.academicYear.toggleActiveStatus+"/"+e._id);c()}catch(t){console.log(t)}}}),(0,L.jsx)(Ee,{module:"Academic Year",title:"Add Academic Year",onAddClick:()=>{i(!0)}}),(0,L.jsx)(Ye,{open:n,formik:u,formTitle:"Add Academic Year",onClose:m,submitButtonTitle:"Submit",adding:r,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:u,name:"from",label:"From Year",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:u,name:"to",label:"To Year",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,L.jsx)(ot.A,{type:"text",formik:u,name:"note",label:"Drop a note"})})]})})]})}const dt=[{name:"Designation",key:"name"},{name:"Note",key:"note"}];function ct(){const[e,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(!1),[o,r]=(0,a.useState)(null),d=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.designation.list);t(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{d()}),[]);const c=()=>{n(!1),r(null)},m=(0,we.Wx)({initialValues:{name:(null===o||void 0===o?void 0:o.name)||"",orderSequence:(null===o||void 0===o?void 0:o.orderSequence)||e.length+1,note:(null===o||void 0===o?void 0:o.note)||""},onSubmit:async e=>{try{const t={...e};if(s(!0),o){const{data:e}=await(0,de.yJ)(ce.r.designation.update+"/"+o._id,t);d()}else{const{data:e}=await(0,de.bE)(ce.r.designation.create,t);d()}c()}catch(t){console.log(t)}s(!1)},enableReinitialize:!0});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Designation"}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Designation",tableKeys:dt,bodyDataModal:"designation",bodyData:e,onEditClick:e=>{console.log(e),r(e),n(!0)},onDeleteClick:async e=>{try{const{data:t}=await(0,de.yH)(ce.r.designation.delete+"/"+e);d()}catch(t){console.log(t)}}}),(0,L.jsx)(Ee,{module:"Designation",title:"Add Desigation",onAddClick:()=>{n(!0)}}),(0,L.jsx)(Ye,{open:l,formik:m,formTitle:"Add Desigation",onClose:c,submitButtonTitle:o?"Update":"Add",children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{type:"text",formik:m,name:"name",label:"Desigation",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{disabled:!o,type:"number",formik:m,name:"orderSequence",label:"Order Sequence",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,L.jsx)(ot.A,{type:"text",formik:m,name:"note",label:"Drop a note"})})]})})]})}const mt=[{name:"Department",key:"name"},{name:"Note",key:"note"}];function ut(){const[e,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(null),[o,r]=(0,a.useState)(!1),d=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.department.list);t(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{d()}),[]);const c=()=>{n(!1),s(null)},m=(0,we.Wx)({initialValues:{name:null!==i&&void 0!==i&&i.name?null===i||void 0===i?void 0:i.name:"",orderSequence:null!==i&&void 0!==i&&i.orderSequence?null===i||void 0===i?void 0:i.orderSequence:e.length+1,note:(null===i||void 0===i?void 0:i.note)||""},onSubmit:async e=>{try{const t={...e};if(r(!0),i){await(0,de.yJ)(ce.r.department.update+"/"+i._id,t);d()}else{await(0,de.bE)(ce.r.department.create,t);d()}c()}catch(t){console.log(t)}r(!1)},enableReinitialize:!0});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Department"}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Department",tableKeys:mt,bodyDataModal:"department",bodyData:e,onEditClick:e=>{console.log(e),s(e),n(!0)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.department.delete+"/"+e);d()}catch(t){console.error(t)}}}),(0,L.jsx)(Ee,{module:"Department",title:"Add Department",onAddClick:()=>{n(!0)}}),(0,L.jsx)(Ye,{open:l,formik:m,formTitle:"Add Department",onClose:c,submitButtonTitle:i?"Update":"Add",adding:o,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{type:"text",formik:m,name:"name",label:"Department",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{type:"number",formik:m,name:"orderSequence",label:"Order Sequence",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,L.jsx)(ot.A,{type:"text",formik:m,name:"note",label:"Drop a note"})})]})})]})}var ht=l(69869),xt=l(24056);function pt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function gt(e){let{labels:t=[],onChange:l=(()=>{}),value:a=0}=e;return(0,L.jsx)(s.A,{component:X.A,sx:{marginBottom:"10px"},children:(0,L.jsx)(ht.A,{value:a,onChange:l,"aria-label":"basic tabs example",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:t.map(((e,t)=>(0,L.jsx)(xt.A,{sx:{fontWeight:"bold",fontSize:"12px"},label:e,...pt(t)},e)))})})}const At=function(e){const{children:t,value:l,index:a,...n}=e;return(0,L.jsx)("div",{role:"tabpanel",hidden:l!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),...n,children:l===a&&(0,L.jsx)(s.A,{children:t})})},jt=[{name:"Department",key:"name"},{name:"Male",key:"male"},{name:"Female",key:"female"},{name:"Total",key:"total"}],ft=[{name:"Employee Id",key:"empId",path:"basicInfo"},{name:"Photo",key:"photo",path:"basicInfo",type:"image"},{name:"Name",key:"name",path:"basicInfo"},{name:"Department",key:"name",path:"department"},{name:"Designation",key:"name",path:"designation"},{name:"Active",key:"active"}],bt=[{name:"Employee Id",key:"empId",path:"basicInfo"},{name:"Photo",key:"photo",path:"basicInfo",type:"image"},{name:"Name",key:"name",path:"basicInfo"},{name:"Department",key:"name",path:"department"},{name:"Designation",key:"name",path:"designation"},{name:"Active",key:"active"}];var yt=l(79484),vt=l(30513),St=l(62973),kt=l(67784),Ct=l(51787);function wt(){const{selectedSetting:e}=(0,a.useContext)(G.A),t=(0,M.Zp)(),[l,n]=(0,a.useState)(0),[i,o]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[A,j]=(0,a.useState)(""),f=async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:e._id}});h(t.result);const l=t.result.filter((e=>e.active)).map((e=>({...e,department:e.academicInfo.department,designation:e.basicInfo.designation}))),a=t.result.filter((e=>!e.active)).map((e=>({...e,department:e.academicInfo.department,designation:e.basicInfo.designation})));o(l),d(a)}catch(t){console.log(t)}};(0,a.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.department.list,{params:{schoolId:e._id}}),l=t.result.map((e=>{const t=u.filter((t=>"male"===t.basicInfo.gender&&!0===t.active&&t.academicInfo.department._id===e._id)).length||0,l=u.filter((t=>"female"===t.basicInfo.gender&&!0===t.active&&t.academicInfo.department._id===e._id)).length||0,a=t+l;return{...e,male:t,female:l,total:a}}));m(l)}catch(t){console.log(t)}})()}),[u,e._id]),(0,a.useEffect)((()=>{f()}),[e._id]);const b=async e=>{try{await(0,de.yH)(ce.r.employee.delete+"/"+e);f()}catch(t){console.error(t)}},y=e=>{t("/sch/human-resource/edit-employee/".concat(e._id))},v=e=>{const{value:t}=e.target;j(t.trim()),""!==t.trim()?i.length>0&&g(i.filter((e=>e.basicInfo.name.toLowerCase().includes(t.toLowerCase().trim())))):g([])};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Employee"}),(0,L.jsx)(gt,{onChange:(e,t)=>n(t),value:l,labels:["Overview","Employee List","Inactive Employee List"]}),(0,L.jsx)(At,{index:0,value:l,children:(0,L.jsx)(it,{actions:"",module:"Employee",tableKeys:jt,bodyData:c,bodyDataModal:"employee"})}),(0,L.jsxs)(At,{index:1,value:l,children:[(0,L.jsxs)(s.A,{sx:{display:"flex",gap:2,margin:"15px 0"},children:[(0,L.jsx)(kt.A,{sx:{ml:1},size:"small",value:A,onChange:v,placeholder:"Search here...",variant:"outlined",InputProps:{endAdornment:(0,L.jsx)(Ct.A,{position:"end",children:(0,L.jsx)(x.A,{edge:"end",type:"submit",children:(0,L.jsx)(yt.A,{})})})}}),(0,L.jsxs)(pe,{module:"Employee",permission:"view",children:[" ",(0,L.jsx)(S.A,{title:"Print",children:(0,L.jsx)(x.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,L.jsx)(vt.A,{})})}),(0,L.jsx)(S.A,{title:"Excel Sheet Download",children:(0,L.jsx)(x.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,L.jsx)(St.A,{})})})]})]}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Employee",tableKeys:ft,bodyData:A?p:i,bodyDataModal:"employee",onDeleteClick:b,onEditClick:y})]}),(0,L.jsxs)(At,{index:2,value:l,children:[(0,L.jsxs)(s.A,{sx:{display:"flex",gap:2,margin:"15px 0"},children:[(0,L.jsx)(kt.A,{sx:{ml:1},size:"small",value:A,onChange:v,placeholder:"Search here...",variant:"outlined",InputProps:{endAdornment:(0,L.jsx)(Ct.A,{position:"end",children:(0,L.jsx)(x.A,{edge:"end",type:"submit",children:(0,L.jsx)(yt.A,{})})})}}),(0,L.jsx)(S.A,{title:"Print",children:(0,L.jsx)(x.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,L.jsx)(vt.A,{})})}),(0,L.jsx)(S.A,{title:"Excel Sheet Download",children:(0,L.jsx)(x.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,L.jsx)(St.A,{})})})]}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Employee",tableKeys:bt,bodyDataModal:"employee",bodyData:A?p:r,onDeleteClick:b,onEditClick:y})]}),(0,L.jsx)(Ee,{module:"Employee",title:"Add Employee",onAddClick:e=>{t("/sch/human-resource/add-employee")}})]})}const It=[{name:"Employee Name",key:"name"},{name:"Joining Date",key:"joiningDate",isDate:!0},{name:"Created At",key:"createdAt",isDate:!0}];var Nt=l(58390),Dt=l(79344),Mt=l(89302);const Ft=function(e){let{name:t,label:l,formik:a,required:n,openTo:i="day",views:s=["year","month","day"],inputFormat:o="DD/MM/YYYY",disabled:r=!1,disableFutureDates:d=!1}=e;return(0,L.jsx)(Nt.$,{dateAdapter:Mt.R,children:(0,L.jsx)(Dt.l,{disableFuture:d,sx:{"& .MuiInputBase-input":{height:"8px"},marginTop:"16px",width:"100%"},required:n,name:t,variant:"outlined",size:"small",label:l,disabled:r,slotProps:{textField:{InputLabelProps:{fontSize:"90px"}}},openTo:i,closeOnSelect:!0,views:s,format:o,value:ye()(a.values[t])||null,onChange:e=>a.setFieldValue(t,ye()(e))})})};var _t=l(92823),Rt=l.n(_t),Et=(l(25884),l(74802)),Tt=l(63709),zt=l(93141),Pt=l.n(zt);function qt(e){let{open:t,content:l,onClose:n,onPrintClick:i,title:s}=e;const o=(0,a.useRef)(null);return(0,L.jsxs)(ze.A,{onClose:n,"aria-labelledby":"customized-dialog-title",open:t,children:[(0,L.jsx)(Pe.A,{sx:{m:0,p:2,fontWeight:600},id:"customized-dialog-title",children:s}),(0,L.jsx)(x.A,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8},children:(0,L.jsx)(Et.A,{})}),(0,L.jsx)(qe.A,{children:(0,L.jsx)(u.A,{gutterBottom:!0,children:(0,L.jsx)("div",{class:"printContainer",ref:o,dangerouslySetInnerHTML:{__html:l}})})}),(0,L.jsx)(Be.A,{children:(0,L.jsx)(Pt(),{trigger:()=>(0,L.jsx)(ke.A,{variant:"contained",size:"small",sx:{background:"#1b3779",":hover":{background:"#1b3779"}},onClick:i,startIcon:(0,L.jsx)(Tt.A,{}),children:"Print"}),content:()=>o.current})})]})}function Bt(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)(0),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)(null),[r,d]=(0,a.useState)(!1),c=(0,a.useRef)(),m=(0,zt.useReactToPrint)({content:()=>c.current}),[u,h]=(0,a.useState)({open:!1,containt:""}),x=async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.offerLetter.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}};(0,a.useEffect)((()=>{x()}),[e._id]);const p=(0,we.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",joiningDate:null!==s&&void 0!==s&&s.joiningDate?ye()(null===s||void 0===s?void 0:s.joiningDate).format("YYYY/MM/DD"):null,offerLetter:(null===s||void 0===s?void 0:s.offerLetter)||" <strong>Congratulations! You've Been Selected for the Role of [Job Title]</strong>\n          <p>[Company Name]</p>\n          <p>[Address eg. Excellent English Medium Primary & High School Ittangihal road, Vijaypur, Karnataka 586103]</p>\n          <p>[City, State, ZIP Code]</p>\n          <p>Date: [DD, MM, YY]</p>\n          <strong>Dear [Candidate's Full Name],</strong>\n          <p>We are thrilled to offer you the position of [Job Title] at [Company Name]. After careful consideration, we believe your skills, experience, and vision make you the perfect fit for our team.</p>\n          <strong>Position Details:</strong>\n            <p><strong>- Job Title:</strong> [Job Title]</p>\n            <p><strong>- Department:</strong> [Department]</p>\n            <p><strong>- Supervisor:</strong> [Supervisor/Manager Name]</p>\n            <p><strong>- Start Date:</strong> [Start Date]</p>\n            <p><strong>- Compensation:</strong> [Salary or Compensation Details]</p>\n        <strong>Work Hours:</strong>\n        <p>[Regular work hours, any flexible schedule options, etc.]</p>\n        <p>We believe that [Company Name] is a place where you can grow and thrive. Your role as [Job Title] will be pivotal in driving our company's success and we look forward to the innovative contributions you will bring to our team.</p>\n        <p>Please indicate your acceptance of this offer by signing and returning a copy of this letter by <strong>[Acceptance Deadline]</strong>. Should you have any questions or need further clarification, feel free to reach out to <strong>[HR Contact Name]</strong> at <strong>[HR Contact Email]</strong> or <strong>[HR Contact Phone Number]</strong>.</p>\n        <p>We eagerly await your positive response and look forward to welcoming you to the [Company Name] family.</p>\n        <p>Warm Regards,</p>\n        <p>[HR, Manager Name]</p>\n        <p>[Contact Information]</p>\n        <br/>\n        <p style=\"text-align:\"center;\">&copy; [Year] [Company Name]. All rights reserved.</p>\n      "},onSubmit:async(t,a)=>{let{resetForm:n}=a;try{const a={...t,schoolId:e._id};if(d(!0),s){await(0,de.yJ)(ce.r.offerLetter.update+"/"+s._id,a);x()}else{await(0,de.bE)(ce.r.offerLetter.create,a);x()}n(),l(0)}catch(i){console.log(i)}d(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{1===t&&(p.resetForm(),o(null))}),[t]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Offer Letter"}),(0,L.jsx)(gt,{onChange:(e,t)=>{l(t)},value:t,labels:s&&2===t?["Offer letter list","Add offer letter","Edit offer letter"]:["Offer letter list","Add offer Letter"]}),(0,L.jsxs)(At,{index:0,value:t,children:[(0,L.jsx)(it,{actions:["view","edit","delete"],module:"Offer Letter",tableKeys:It,bodyDataModal:"offer letter",bodyData:n,onEditClick:e=>{o(e),l(2)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.offerLetter.delete+"/"+e);x()}catch(t){console.error(t)}},onViewClick:e=>{h({...u,open:!0,containt:e.offerLetter})}}),(0,L.jsx)(qt,{title:"Offer Letter",open:u.open,content:u.containt,onClose:()=>{h({...u,open:!1})},onPrintClick:m})]}),(0,L.jsx)(At,{index:1,value:t,children:(0,L.jsx)("form",{onSubmit:p.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(Rt(),{theme:"snow",value:p.values.offerLetter,required:!0,onChange:e=>p.setFieldValue("offerLetter",e),style:{height:"220px"}})}),(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,L.jsx)(ke.A,{size:"small",onClick:()=>l(0),color:"error",variant:"contained",children:"Cancel"}),(0,L.jsx)(We.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})}),(0,L.jsx)(At,{index:2,value:t,children:(0,L.jsx)("form",{onSubmit:p.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.offerLetter,onChange:e=>p.setFieldValue("offerLetter",e),style:{height:"220px"}})}),(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,L.jsx)(ke.A,{size:"small",onClick:()=>l(0),color:"error",variant:"contained",children:"Cancel"}),(0,L.jsx)(We.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})})]})}const Wt=[{name:"Employee Name",key:"name"},{name:"Joining Date",key:"joiningDate",isDate:!0},{name:"Created At",key:"createdAt",isDate:!0}];function Yt(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)(0),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)(null),[r,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)({open:!1,containt:""}),u=(0,a.useRef)(),h=(0,zt.useReactToPrint)({content:()=>u.current}),x=async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.relievingLetter.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}};(0,a.useEffect)((()=>{x()}),[e._id]);const p=(0,we.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",joiningDate:null!==s&&void 0!==s&&s.joiningDate?ye()(null===s||void 0===s?void 0:s.joiningDate).format("YYYY/MM/DD"):null,relievingLetter:(null===s||void 0===s?void 0:s.relievingLetter)||"<strong>Relieving Letter</strong>\n        <p>[Company Name]</p>\n        <p>Excellent English Medium Primary & High School Ittangihal road, Vijaypur, Karnataka 586103</p>\n        <p>Date: DD, MM, YY\t</p>\n        <p>Dear [Employee's Full Name],</p>\n        <p>We hereby acknowledge receipt of your resignation letter dated <strong>[Resignation Date]</strong>, in which you requested to be relieved from your position as <strong>[Employee's Designation]</strong> at <strong>[Company Name]</strong>. We are pleased to provide you with your relieving letter.</p>\n        <p>This is to inform you that you <strong>[Employee ID]</strong> will be relieved after careful consideration and necessary formalities.</p>\n        <p>You have successfully completed your tenure at <strong>[Company Name]</strong> as <strong>[Job Title]</strong> from <strong>[Joining Date]</strong> to <strong>[Last Working Date]</strong>. We appreciate your dedicated service and commitment during your time with us.</p>\n        <p>Sincerely,</p>\n        <p>HR, Manager</p>\n        <p>[Contact Information]</p>\n        <br/>\n        <p>&copy; [Year] [Company Name]. All rights reserved.</p>\n      "},onSubmit:async(t,a)=>{let{resetForm:n}=a;try{const a={...t,schoolId:e._id};if(d(!0),s){await(0,de.yJ)(ce.r.relievingLetter.update+"/"+s._id,a);x()}else{await(0,de.bE)(ce.r.relievingLetter.create,a);x()}n(),l(0)}catch(i){console.log(i)}d(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{1===t&&(p.resetForm(),o(null))}),[t]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Relieving letter"}),(0,L.jsx)(gt,{onChange:(e,t)=>{l(t)},value:t,labels:s&&2===t?["Relieving letter list","Add relieving letter","Edit relieving letter"]:["Relieving letter list","Add relieving letter"]}),(0,L.jsxs)(At,{index:0,value:t,children:[(0,L.jsx)(it,{actions:["view","edit","delete"],module:"Relieving Letter",tableKeys:Wt,bodyDataModal:"relieving letter",bodyData:n,onEditClick:e=>{console.log(e),o(e),l(2)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.relievingLetter.delete+"/"+e);x()}catch(t){console.error(t)}},onViewClick:e=>{m({...c,open:!0,containt:e.relievingLetter})}}),(0,L.jsx)(qt,{title:"Relieving  Letter",open:c.open,content:c.containt,onClose:()=>{m({...c,open:!1})},onPrintClick:h})]}),(0,L.jsx)(At,{index:1,value:t,children:(0,L.jsx)("form",{onSubmit:p.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:p,label:"Date",name:"joiningDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.relievingLetter,onChange:e=>p.setFieldValue("relievingLetter",e),style:{height:"220px"}})}),(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,item:!0,gap:1,mt:6,display:"flex",justifyContent:"flex-end",children:[(0,L.jsx)(ke.A,{size:"small",onClick:()=>l(0),color:"error",variant:"contained",children:"Cancel"}),(0,L.jsx)(We.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})}),(0,L.jsx)(At,{index:2,value:t,children:(0,L.jsx)("form",{onSubmit:p.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:p,label:"Date",name:"joiningDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.relievingLetter,onChange:e=>p.setFieldValue("relievingLetter",e),style:{height:"220px"}})}),(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,L.jsx)(ke.A,{size:"small",onClick:()=>l(0),color:"error",variant:"contained",children:"Cancel"}),(0,L.jsx)(We.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})})]})}const Jt=[{name:"Employee Name",key:"name"},{name:"Joining Date",key:"joiningDate",isDate:!0},{name:"Created At",key:"createdAt",isDate:!0}];function Vt(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)(0),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)(null),[r,d]=(0,a.useState)(!1),c=(0,a.useRef)(),[m,u]=(0,a.useState)({open:!1,containt:""}),h=(0,zt.useReactToPrint)({content:()=>c.current}),x=async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.experienceLetter.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}};(0,a.useEffect)((()=>{x()}),[e._id]);const p=(0,we.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",joiningDate:null!==s&&void 0!==s&&s.joiningDate?ye()(null===s||void 0===s?void 0:s.joiningDate).format("YYYY/MM/DD"):null,experienceLetter:(null===s||void 0===s?void 0:s.experienceLetter)||" <strong>Experience Letter</strong>\n          <p>Webpruce Company</p>\n          <p>Date: 12, January 2024</p>\n          <p>Place: Excellent English Medium Primary & High School Ittangihal road, Vijaypur, Karnataka 586103</p>\n          <p>To Whom It May Concern,</p>\n          <p>This is to certify that <strong>[Employee's Full Name]</strong> was employed with us as a <strong>[Job Title]</strong> in the <strong>[Department]</strong> department from <strong>[Start Date]</strong> to <strong>[End Date]</strong>.</p>\n          <p>During their tenure with us, [Employee's Full Name] was responsible for:</p>\n          <p>- Key Responsibility 1</p>\n          <p>- Key Responsibility 2</p>\n          <p>We found [Employee's Full Name] to be a dedicated and reliable employee who consistently showed a high level of professionalism. They are leaving us due to [reason for leaving, if appropriate], and we wish them all the best in their future endeavors.</p>\n          <p>We highly recommend [Employee's Full Name] for any future employment opportunities and are confident that they will be an asset to any organization they join.</p>\n          <p>If you require any further information, please do not hesitate to contact us.</p>\n          <p>Warm Regards,</p>\n          <p><strong>[Your Name]</strong></p>\n          <p><strong>[Your Job Title]</strong></p>\n          <p><strong>[Contact Information]</strong></p>\n          <br/>\n          <p>&copy; [Year] [Company Name]. All rights reserved.</p>\n        "},onSubmit:async(t,a)=>{let{resetForm:n}=a;try{const a={...t,schoolId:e._id};if(d(!0),s){await(0,de.yJ)(ce.r.experienceLetter.update+"/"+s._id,a);x()}else{await(0,de.bE)(ce.r.experienceLetter.create,a);x()}l(0),n()}catch(i){console.log(i)}d(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{1===t&&(p.resetForm(),o(null))}),[t]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Experience Letter"}),(0,L.jsx)(gt,{onChange:(e,t)=>{l(t)},value:t,labels:s&&2===t?["Experience letter list","Add experience letter","Edit experience letter"]:["Experience letter list","Add experience Letter"]}),(0,L.jsxs)(At,{index:0,value:t,children:[(0,L.jsx)(it,{actions:["view","edit","delete"],module:"Experience Letter",tableKeys:Jt,bodyDataModal:"experience  letter",bodyData:n,onEditClick:e=>{console.log(e),o(e),l(2)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.experienceLetter.delete+"/"+e);x()}catch(t){console.error(t)}},onViewClick:e=>{u({...m,open:!0,containt:e.experienceLetter})}}),(0,L.jsx)(qt,{title:"Experience Letter",open:m.open,content:m.containt,onClose:()=>{u({...m,open:!1})},onPrintClick:h})]}),(0,L.jsx)(At,{index:1,value:t,children:(0,L.jsxs)("form",{onSubmit:p.handleSubmit,children:[" ",(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,type:"text",name:"name",formik:p,label:"Employee Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.experienceLetter,onChange:e=>p.setFieldValue("experienceLetter",e),onBlur:p.handleBlur("experienceLetter"),style:{height:"220px"}})}),(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,L.jsx)(ke.A,{size:"small",onClick:()=>l(0),color:"error",variant:"contained",children:"Cancel"}),(0,L.jsx)(We.A,{size:"small",loading:r,variant:"contained",type:"submit",children:"Submit"})]})]})]})}),(0,L.jsx)(At,{index:2,value:t,children:(0,L.jsxs)("form",{onSubmit:p.handleSubmit,children:[" ",(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,type:"text",name:"name",formik:p,label:"Employee Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.experienceLetter,onChange:e=>p.setFieldValue("experienceLetter",e),onBlur:p.handleBlur("experienceLetter"),style:{height:"220px"}})}),(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,gap:1,item:!0,mt:6,display:"flex",justifyContent:"flex-end",children:[(0,L.jsx)(ke.A,{size:"small",onClick:()=>l(0),color:"error",variant:"contained",children:"Cancel"}),(0,L.jsx)(We.A,{size:"small",loading:r,variant:"contained",type:"submit",children:"Submit"})]})]})]})})]})}const Ot=[{name:"Date",key:"createdAt",isDate:!0},{name:"Topic",key:"topic"}];function Ut(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)(0),[n,i]=(0,a.useState)(null),[s,o]=(0,a.useState)([]),[r,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[g,A]=(0,a.useState)([]),[j,f]=(0,a.useState)([]),[b,y]=(0,a.useState)([]);let v=window.localStorage.getItem("ktech_current_user"),S=JSON.parse(v);const k=async t=>{try{m(!0);const{data:l}=await(0,de.Jt)(ce.r.teacherActivity.list,{params:{schoolId:e._id,search:{teacher:t.teacher,class:t.class,section:t.section,subject:t.subject,fromDate:ye()(t.fromDate).format("YYYY/MM/DD"),toDate:ye()(t.toDate).format("YYYY/MM/DD")}}});o(l.result),m(!1)}catch(l){console.log(l),m(!1)}},C=()=>{l(0),i(null),k()},w=async t=>{try{const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:t}}});A(l.result.map((e=>({label:e.name,value:e._id}))))}catch(l){console.error(l)}},I=async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.subject.list,{params:{schoolId:e._id,search:{class:N.values.class||D.values.class}}});f(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.error(t)}};(0,a.useEffect)((()=>{(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:e._id}}),a=null===(t=l.result)||void 0===t?void 0:t.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))),n=[{label:"Me",value:S._id},...a];y(n)}catch(l){console.log(l)}})()}),[e]),(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);h(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),N.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});p(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.error(t)}})()}),[e]);const N=(0,we.Wx)({initialValues:{academicYear:(null===n||void 0===n?void 0:n.academicYear._id)||"",class:(null===n||void 0===n?void 0:n.class._id)||"",section:(null===n||void 0===n?void 0:n.section._id)||"",subject:(null===n||void 0===n?void 0:n.subject._id)||"",topic:(null===n||void 0===n?void 0:n.topic)||""},onSubmit:async t=>{try{const l={...t,schoolId:e._id};if(d(!0),n){const{data:e}=await(0,de.yJ)(ce.r.teacherActivity.update+"/"+n._id,l)}else{const{data:e}=await(0,de.bE)(ce.r.teacherActivity.create,l)}D.handleSubmit(),C(),d(!1)}catch(l){console.error(l),d(!1)}d(!1)},enableReinitialize:!0}),D=(0,we.Wx)({initialValues:{teacher:"",class:"",section:"",subject:"",fromDate:ye()(new Date),toDate:ye()(new Date)},onSubmit:k});(0,a.useEffect)((()=>{N.values.class&&(w(N.values.class),I(),D.resetForm())}),[N.values.class]),(0,a.useEffect)((()=>{D.values.class&&(w(D.values.class),I(),N.resetForm())}),[D.values.class]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Teacher Activity"}),(0,L.jsx)(gt,{onChange:(e,t)=>{1!==t&&i(null),l(t)},value:t,labels:["All Activity",n?"Edit Activity":"Add Activity"]}),(0,L.jsxs)(At,{index:0,value:t,children:[(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)("form",{onSubmit:D.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"teacher",formik:D,label:"Select Teacher",options:b})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:D,label:"Class",options:x})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:D,label:"Section",options:g})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"subject",formik:D,label:"Subject",options:j})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,L.jsx)(Ft,{formik:D,label:"From Date",name:"fromDate"})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,L.jsx)(Ft,{formik:D,label:"To Date",name:"toDate"})}),(0,L.jsxs)(pe,{module:"Teacher Activity",permission:"view",children:[" ",(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",justifyContent:"flex-end",children:(0,L.jsx)(We.A,{loading:c,size:"small",type:"submit",variant:"contained",children:"Find"})})]})]})})}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Teacher Activity",tableKeys:Ot,bodyDataModal:"teacher activity",bodyData:s,onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.teacherActivity.delete+"/"+e);k(),D.handleSubmit()}catch(t){console.error(t)}},onEditClick:e=>{i(e),l(1)}})]}),(0,L.jsx)(At,{index:1,value:t,children:(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)("form",{onSubmit:N.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:N,label:"Select Academic Year",options:u})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:N,label:"Select Class",options:x})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:N,label:"Select Section",options:g})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"subject",formik:N,label:"Select subject",options:j})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"topic",formik:N,label:"Topic covered"})}),(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,mt:1,display:"flex",justifyContent:"flex-end",gap:1,item:!0,children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:C,children:"Cancel"}),(0,L.jsx)(We.A,{loading:r,size:"small",type:"submit",variant:"contained",children:n?"Update":"Submit"})]})]})})})})]})}const Lt=[{name:"Role Name",key:"name"}],Ht=[{module:"Institute Selector",subModule:[{module:"Institute Selector",permissions:[]}]},{module:"Dashboard",subModule:[{module:"Dashboard",permissions:[]}]},{module:"Institute",subModule:[{module:"Institute",permissions:[]}]},{module:"Administrator",subModule:[{module:"Academic Year",permissions:[]},{module:"Roles and Permissions",permissions:[]},{module:"User Password Reset",permissions:[]}]},{module:"Human Resources",subModule:[{module:"Designation",permissions:[]},{module:"Department",permissions:[]},{module:"Employee",permissions:[]},{module:"Offer Letter",permissions:[]},{module:"Relieving Letter",permissions:[]},{module:"Off Boarding",permissions:[]},{module:"Experience-Letter",permissions:[]},{module:"Teacher Activity",permissions:[]}]},{module:"Pre-Admission",subModule:[{module:"Pre Addmission Enquiry",permissions:[]},{module:"Pre Addmission Exam",permissions:[]},{module:"Pre Addmission ExamSchedule",permissions:[]},{module:"Result",permissions:[]}]},{module:"Academic",subModule:[{module:"Class",permissions:[]},{module:"Section",permissions:[]},{module:"Subject",permissions:[]}]},{module:"Attendance",subModule:[{module:"Student Attendance",permissions:[]},{module:"Employee Attendance",permissions:[]}]},{module:"Class Routine",subModule:[{module:"Class Routine",permissions:[]}]},{module:"Student",subModule:[{module:"Overview",permissions:[]},{module:"Admit Student",permissions:[]},{module:"Reshuffle",permissions:[]},{module:"Promotion",permissions:[]},{module:"Bulk Admission",permissions:[]},{module:"Credential",permissions:[]},{module:"Quick Admit",permissions:[]},{module:"ID Card",permissions:[]},{module:"Student Activity",permissions:[]}]},{module:"Assignment",subModule:[{module:"Assignment",permissions:[]}]},{module:"Communication",subModule:[{module:"Compose",permissions:[]},{module:"Report",permissions:[]},{module:"Credential",permissions:[]}]},{module:"Announcement",subModule:[{module:"Notice",permissions:[]},{module:"News",permissions:[]},{module:"Holiday",permissions:[]},{module:"Awards",permissions:[]},{module:"Splash News",permissions:[]}]},{module:"Gallery",subModule:[{module:"Gallery",permissions:[]}]},{module:"Notification",subModule:[{module:"Notification",permissions:[]}]},{module:"Event",subModule:[{module:"Event",permissions:[]}]},{module:"Exam",subModule:[{module:"Exam Grade",permissions:[]},{module:"Exam Term",permissions:[]},{module:"Exam Schedule",permissions:[]},{module:"Exam Hall Ticket",permissions:[]}]},{module:"Exam Mark",subModule:[{module:"Exam Attendance",permissions:[]},{module:"Manage Mark",permissions:[]},{module:"Exam Result",permissions:[]},{module:"Marks Card",permissions:[]},{module:"Consolidated Marks Sheet",permissions:[]},{module:"Subject Wise Report",permissions:[]},{module:"Division Wise Report",permissions:[]}]},{module:"LMS",subModule:[{module:"Storage",permissions:[]},{module:"Courses",permissions:[]},{module:"Course Content",permissions:[]},{module:"Live",permissions:[]}]},{module:"Library",subModule:[{module:"Books",permissions:[]},{module:"Periodical",permissions:[]},{module:"Student Library Member",permissions:[]},{module:"Employee Library Member",permissions:[]},{module:"Issue and Returns",permissions:[]}]},{module:"Leave Management",subModule:[{module:"Leave Type",permissions:[]},{module:"Employee Leave",permissions:[]},{module:"Student Leave",permissions:[]},{module:"Leave Report",permissions:[]}]},{module:"Inventory",subModule:[{module:"Item",permissions:[]},{module:"Vendor",permissions:[]},{module:"In/Out Transaction",permissions:[]},{module:"Stock ist",permissions:[]},{module:"Issue",permissions:[]},{module:"Sell",permissions:[]}]},{module:"Certificate",subModule:[{module:"Study Certificate",permissions:[]},{module:"Transfer Certificate",permissions:[]}]},{module:"Fees",subModule:[{module:"Receipt Book",permissions:[]},{module:"Fee Map Category",permissions:[]},{module:"Collect Fees",permissions:[]},{module:"Balance Fee",permissions:[]},{module:"Fee Overview",permissions:[]},{module:"Reconciliation",permissions:[]}]},{module:"Hostel",subModule:[{module:"Manage Hostel",permissions:[]},{module:"Manage Room Type",permissions:[]},{module:"Manage Room Bed",permissions:[]},{module:"Hostel Member",permissions:[]}]},{module:"Transport",subModule:[{module:"Vehicle",permissions:[]},{module:"Manage Route And Trips",permissions:[]},{module:"Routes",permissions:[]},{module:"Transport Member",permissions:[]},{module:"Vehicle Log",permissions:[]},{module:"Vehicle Maintenance",permissions:[]}]},{module:"Payroll",subModule:[{module:"Salary Grade",permissions:[]},{module:"Make Payment",permissions:[]}]},{module:"Report",subModule:[{module:"Library Report",permissions:[]},{module:"Student Attendance",permissions:[]},{module:"Studnet Yearly Attendance",permissions:[]},{module:"Emplyee Attendance",permissions:[]},{module:"Employee Yearly Attendance",permissions:[]},{module:"Student Report",permissions:[]},{module:"Student Activity Report",permissions:[]}]},{module:"Visitor Info",subModule:[{module:"Visitor Info",permissions:[]},{module:"Student Checkout",permissions:[]}]},{module:"Help Desk",subModule:[{module:"Help Desk",permissions:[]}]},{module:"Guardian Feedback",subModule:[{module:"Guardian Feedback",permissions:[]}]}];var Gt=l(51962);function Qt(e,t){const l=e.indexOf(t);return-1===l?e.push(t):e.splice(l,1),e}function Kt(e,t){const l=e.indexOf(t);return-1!==l&&e.splice(l,1),e}const Zt=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),Xt=["view","add","update","delete"];function $t(){const[e,t]=a.useState(0),[l,n]=(0,a.useState)([]),[i,s]=(0,a.useState)(null),[o,r]=(0,a.useState)(!1),[d,c]=(0,a.useState)([]),[m,h]=(0,a.useState)(["view","add","update","delete"]);(0,a.useEffect)((()=>{x(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.role.getRoleKeys);if(i){let t=[...i.permissions];for(let l of e.result)t.find((e=>e.module==l.module))||t.push(l);c(t)}else c(e.result)}catch(e){console.log(e)}})(),0==e&&s(null)}),[e]);const x=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.role.list);n(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{x()}),[]);const p=async e=>{let l={...e,permissions:d};i||(l.permissions=d.map((e=>({...e,permissions:[]}))));try{if(i){const{data:e}=await(0,de.yJ)(ce.r.role.update+"/"+i._id,l);t(0),x()}else{const{data:e}=await(0,de.bE)(ce.r.role.create,l);t(0),x()}g.resetForm(),r(!1)}catch(a){console.log(a)}},g=(0,we.Wx)({initialValues:{name:""},onSubmit:p,enableReinitialize:!0}),A=(0,we.Wx)({initialValues:{name:(null===i||void 0===i?void 0:i.name)||""},onSubmit:p,enableReinitialize:!0}),j=e=>{c(d.map((t=>{return{...t,permissions:m.includes(e)?Kt(t.permissions,e):(l=t.permissions,a=e,l.includes(a)||l.push(a),l)};var l,a})))};(0,a.useEffect)((()=>{let e=[];for(let t of Xt)d.every((e=>e.permissions.includes(t.toLowerCase())))?e.push(t.toLowerCase()):e.filter((e=>e!==t));h(e)}),[d]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Role Permission"}),(0,L.jsx)(gt,{onChange:(e,l)=>{t(l)},value:e,labels:i&&1===e?["List","Edit"]:["List"]}),(0,L.jsxs)(At,{value:e,index:0,children:[(0,L.jsx)(it,{actions:["edit","delete"],module:"Roles and Permissions",bodyDataModal:"role permission",bodyData:l,onEditClick:e=>{s(e),t(1)},tableKeys:Lt,onDeleteClick:async e=>{try{const{data:t}=await(0,de.yH)(ce.r.role.delete+"/"+e);n(l.filter((t=>t._id!==e)))}catch(t){console.log(t)}}}),(0,L.jsx)(Ee,{module:"Roles and Permissions",title:"Add Role",onAddClick:()=>{t(0),r(!0)}})]}),(0,L.jsx)(Ye,{open:o,formik:g,formTitle:"Create Role",onClose:()=>r(!1),submitButtonTitle:"Create",children:(0,L.jsx)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,L.jsx)($.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,L.jsx)(ot.A,{type:"text",formik:g,name:"name",label:"Role Name",required:!0})})})}),i&&1==e&&(0,L.jsxs)(At,{value:e,index:1,children:[(0,L.jsxs)($.Ay,{container:!0,rowSpacing:1,columnSpacing:2,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,L.jsx)(ot.A,{required:!0,name:"name",type:"text",formik:A,label:"Role Name"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,L.jsxs)(u.A,{sx:{margin:"10px 0px",fontWeight:"500",fontSize:"16px",fontWeight:700},children:[" ","Set permission for this role"]})})]}),(0,L.jsx)(Je.A,{component:X.A,sx:{marginBottom:"60px",maxHeight:650},children:(0,L.jsxs)(Ve.A,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,L.jsx)(Oe.A,{children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700,paddingLeft:"15px"},children:"Module Name"}),(0,L.jsxs)(Le.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["View",(0,L.jsx)(Gt.A,{onChange:()=>j("view"),name:"view",checked:m.includes("view")})]}),(0,L.jsxs)(Le.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["Add"," ",(0,L.jsx)(Gt.A,{checked:m.includes("add"),onChange:()=>j("add"),name:"add"})," "]}),(0,L.jsxs)(Le.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["Update"," ",(0,L.jsx)(Gt.A,{checked:m.includes("update"),onChange:()=>j("update"),name:"update"})]}),(0,L.jsxs)(Le.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["Delete"," ",(0,L.jsx)(Gt.A,{checked:m.includes("delete"),onChange:()=>j("delete"),name:"delete"})]})]})}),(0,L.jsx)(He.A,{children:Ht.map(((e,t)=>{const{module:l,subModule:a}=e;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ue.A,{children:(0,L.jsx)(Le.A,{colSpan:5,sx:{backgroundColor:e=>"dark"===e.palette.mode?"rgba(32,33,32,1)":e.palette.grey[100]},children:(0,L.jsx)(u.A,{fontWeight:"bold",paddingLeft:"10px",children:l})})},t),a.map(((e,t)=>(0,L.jsxs)(Ue.A,{k:e.module+t.toString(),children:[(0,L.jsx)(Le.A,{align:"center",children:e.module}),Xt.map((t=>{var l,a;return(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(Gt.A,{onChange:()=>((e,t)=>{c(d.map((l=>l.module===e?{...l,permissions:Qt(l.permissions,t.toLowerCase())}:l)))})(e.module,t),checked:(null===(l=d.find((t=>t.module===e.module)))||void 0===l||null===(a=l.permissions)||void 0===a?void 0:a.includes(t))||!1})},t)}))]})))]})}))})]})}),(0,L.jsx)($.Ay,{container:!0,children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,children:(0,L.jsx)(Zt,{sx:{backgroundColor:e=>"dark"===e.palette.mode?"rgba(32,33,32,1)":e.palette.grey[100]},children:(0,L.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,L.jsx)(ke.A,{onClick:()=>{t(0)},variant:"contained",color:"error",size:"small",children:"Cancel"}),(0,L.jsx)(ke.A,{onClick:A.handleSubmit,variant:"contained",size:"small",children:"Update"})]})})})})]})]})}const el=[{name:"Role Name",key:"role"}];function tl(){const[e,t]=(0,a.useState)([]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"User Role"}),(0,L.jsx)(it,{actions:["edit"],bodyDataModal:"user role",bodyData:e,tableKeys:el})]})}const ll=[{label:"Student",value:"student"},{label:"Employee",value:"employee"}];function al(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)(!1),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),x=(0,we.Wx)({initialValues:{userType:"",employeeId:"",password:"",class:"",section:"",student:"",role:""},onSubmit:async(t,l)=>{let{resetForm:a}=l;console.log(t.userType,"kkkkk");try{const l={...t,schoolId:e._id,userType:t.userType,employeeId:t.employeeId,studentId:t.student,password:t.password};o(!0);const{data:n}=await(0,de.bE)(ce.r.account.changePasswordForUser,l);a(),o(!1)}catch(n){console.log(n),o(!1)}},enableReinitialize:!0});return(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.role.list),t=e.result.filter((e=>{var t;return"student"!==(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())})).map((e=>({label:e.name,value:e._id})));l(t)}catch(e){console.error(e)}})()}),[e]),(0,a.useEffect)((()=>{x.values.role&&(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:e._id,search:{role:x.values.role}}});i(t.result.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})()}),[x.values.role,e._id]),(0,a.useEffect)((()=>{x.values.class&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:x.values.class}}});x.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id),h(l.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(l){console.log(l)}})()}),[x.values.class]),(0,a.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});m(t.result.map((e=>({...e,label:e.name,value:e._id})))),x.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,a.useEffect)((()=>{x.values.class&&x.values.section&&e&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.class":x.values.class,"academicInfo.section":x.values.section}}});d(l.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),x.setFieldValue("student",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[x.values.class,x.values.section,e]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"User Password Reset"}),(0,L.jsx)(X.A,{sx:{padding:2},children:(0,L.jsx)("form",{onSubmit:x.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"userType",formik:x,label:"User Type",options:ll})}),"student"===x.values.userType&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:x,label:"Select Class",options:c})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:x,label:"Select Section",options:u})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"student",formik:x,label:"Select Student",options:r})})]}),"employee"===x.values.userType&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"role",formik:x,label:"Role",options:t})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"employeeId",formik:x,label:"Employees",options:n})})]}),(0,L.jsx)($.Ay,{xs:12,sm:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,formik:x,label:"Password",name:"password"})}),(0,L.jsxs)(pe,{module:"User Password Reset",permission:"update",children:[" ",(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,L.jsx)(We.A,{loading:s,size:"small",type:"submit",variant:"contained",children:"Change Password"})})]})]})})})]})}const nl=[{name:"Class",key:"name"},{name:"Active",key:"active"},{name:"View On Web",key:"isPublic"}],il=[{label:"Yes",value:!0},{label:"No",value:!1}],sl=[{label:"Yes",value:!0},{label:"No",value:!1}];function ol(){var e;const{selectedSetting:t}=(0,a.useContext)(G.A),[l,n]=(0,a.useState)([]),[i,s]=(0,a.useState)(null),[o,r]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)([]),h=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:t._id}});n(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{h(),(async()=>{try{var e;const{data:l}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:t._id}});u(null===(e=l.result)||void 0===e?void 0:e.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(l){console.log(l)}})()}),[t]);const x=()=>{r(!1),s(null)},p=(0,we.Wx)({initialValues:{name:(null===i||void 0===i?void 0:i.name)||"",classTeachers:(null===i||void 0===i||null===(e=i.classTeachers)||void 0===e?void 0:e.map((e=>e._id)))||[],active:(null===i||void 0===i?void 0:i.active)||!1,isPublic:(null===i||void 0===i?void 0:i.isPublic)||!1,orderSequence:(null===i||void 0===i?void 0:i.orderSequence)||l.length+1,numericName:(null===i||void 0===i?void 0:i.numericName)||"",note:(null===i||void 0===i?void 0:i.note)||""},onSubmit:async e=>{try{const l={...e,schoolId:t._id};if(c(!0),i){const{data:e}=await(0,de.yJ)(ce.r.class.update+"/"+i._id,l);h()}else{const{data:e}=await(0,de.bE)(ce.r.class.create,l);h()}x()}catch(l){console.log(l)}c(!1)},enableReinitialize:!0});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Classes"}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Class",tableKeys:nl,bodyDataModal:"class",bodyData:l,onEditClick:e=>{s(e),r(!0)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.class.delete+"/"+e);h()}catch(t){console.error(t)}}}),(0,L.jsx)(Ee,{module:"Class",title:"Add Class",onAddClick:()=>{r(!0)}}),(0,L.jsx)(Ye,{open:o,formik:p,formTitle:i?"Update Class":"Add Class",onClose:x,submitButtonTitle:i?"Update":"Submit",adding:d,children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:p,name:"name",label:"Class Name",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:p,name:"classTeachers",label:"Class Teachers - (".concat(p.values.classTeachers.length,")"),required:!1,showSearch:!0,multiple:!0,options:m})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:p,name:"active",label:"Active",options:il})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:p,name:"isPublic",label:"View On Web",options:sl})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{disabled:!i,formik:p,name:"orderSequence",label:"Order Sequence",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:p,name:"numericName",label:"Numeric Name"})}),(0,L.jsx)($.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,L.jsx)(ot.A,{formik:p,name:"note",label:"Note"})})]})})]})}const rl=[{name:"Section Name",key:"name"},{name:"Active",key:"active"},{name:"View On Web",key:"isPublic"}];var dl=l(53193),cl=l(18356),ml=l(72221),ul=l(90469),hl=l(66360);function xl(e){let{value:t,name:l="",label:n="",options:i=[],onChange:s=(()=>{}),disabled:o=!1,required:r=!1,multiple:d=!1,isSearch:c=!0}=e;const[m,u]=(0,a.useState)(!1);var h=(0,a.useRef)(void 0);const{isDarkMode:x}=(0,a.useContext)(_e.A),[p,g]=(0,a.useState)(""),A=(0,a.useMemo)((()=>i.filter((e=>((e,t)=>(null===e||void 0===e?void 0:e.toLowerCase().indexOf(null===t||void 0===t?void 0:t.toLowerCase()))>-1)(e.label,p)))),[p,i,m]);(0,a.useEffect)((()=>{g("")}),[m]);const j=o&&!x?"gray":!o&&x?"white":o||x?o&&x?"gray":"inherit":"black";return(0,L.jsxs)(dl.A,{margin:"normal",required:r,variant:"outlined",size:"small",fullWidth:!0,sx:{top:"4px"},children:[(0,L.jsx)(cl.A,{sx:{color:j},shrink:!0,id:n,children:n}),(0,L.jsxs)(ml.A,{disabled:o,notched:!0,name:l,multiple:d,labelId:n,value:t||"",label:n,onChange:s,onAnimationEnd:()=>{var e;return null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.focus()},MenuProps:{autoFocus:!1},onBlur:()=>u(!m),children:[c&&(0,L.jsx)(ul.A,{children:(0,L.jsx)(kt.A,{onBlur:()=>u(!m),size:"small",autoFocus:!0,placeholder:"Type to search...",fullWidth:!0,InputProps:{startAdornment:(0,L.jsx)(Ct.A,{position:"start",children:(0,L.jsx)(hl.A,{})})},onChange:e=>g(e.target.value),onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}})}),A.map(((e,t)=>(0,L.jsx)(w.A,{value:e.value,children:e.label},t)))]})]})}const pl=(0,a.memo)(xl),gl=[{label:"Yes",value:!0},{label:"No",value:!1}],Al=[{label:"Yes",value:!0},{label:"No",value:!1}];function jl(){var e,t;const{selectedSetting:l}=(0,a.useContext)(G.A),[n,i]=(0,a.useState)([]),[o,r]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)([]),[g,A]=(0,a.useState)([]),[j,f]=(0,a.useState)(""),[b,y]=(0,a.useState)([]),[v,S]=(0,a.useState)([]),k=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:l._id,search:{class:j}}});i(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:l._id}});A(null===(e=t.result)||void 0===e?void 0:e.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{var e;const{data:a}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:l._id}});var t;p(a.result.map((e=>({label:e.name,value:e._id})))),null!==(e=a.result)&&void 0!==e&&e.length&&(f(a.result[0]._id),w.setFieldValue("class",null===(t=a.result[0])||void 0===t?void 0:t._id))}catch(a){console.log(a)}})()}),[l]);const C=()=>{c(!1),r(null),w.resetForm(),S([])},w=(0,we.Wx)({initialValues:{name:(null===o||void 0===o?void 0:o.name)||"",class:(null===o||void 0===o||null===(e=o.class)||void 0===e?void 0:e._id)||"",sectionTeacher:(null===o||void 0===o||null===(t=o.sectionTeacher)||void 0===t?void 0:t._id)||"",active:(null===o||void 0===o?void 0:o.active)||!1,isPublic:(null===o||void 0===o?void 0:o.isPublic)||!1,note:(null===o||void 0===o?void 0:o.note)||"",subjectTeachers:(null===o||void 0===o?void 0:o.subjectTeachers)||[]},onSubmit:async e=>{try{const t={...e,class:j,schoolId:l._id};if(t.sectionTeacher||delete t.sectionTeacher,h(!0),o){const{data:e}=await(0,de.yJ)(ce.r.section.update+"/"+o._id,t)}else{const{data:e}=await(0,de.bE)(ce.r.section.create,t)}k(),C()}catch(t){console.log(t)}h(!1)},enableReinitialize:!0}),I=()=>{w.setValues({name:"",class:j||"",sectionTeacher:"",active:!1,isPublic:!1,note:"",subjectTeachers:[]})};(0,a.useEffect)((()=>{j&&k()}),[j,l]),(0,a.useEffect)((()=>{w.values.class&&(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.subject.list,{params:{schoolId:l._id,search:{class:w.values.class}}});y(t.result);const a=(null===o||void 0===o?void 0:o.subjectTeachers)||[],n=null===t||void 0===t||null===(e=t.result)||void 0===e?void 0:e.map((e=>{var t;return{subject:e._id,teacher:(null===a||void 0===a||null===(t=a.find((t=>t.subject===e._id)))||void 0===t?void 0:t.teacher)||""}}));S(n),w.setFieldValue("subjectTeachers",n)}catch(t){console.log(t)}})()}),[w.values.class,l]),(0,a.useEffect)((()=>{w.setFieldValue("class",j)}),[j]),(0,a.useEffect)((()=>{o&&(S((null===o||void 0===o?void 0:o.subjectTeachers)||[]),w.setFieldValue("subjectTeachers",o.subjectTeachers||[]))}),[o]);return console.log(o,"ooo"),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Section"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(pl,{required:!0,name:"selectedClass",value:j,onChange:e=>{f(e.target.value)},label:"Select Class",options:x})})})}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Section",tableKeys:rl,bodyDataModal:"section",bodyData:n,onEditClick:e=>{r(e),c(!0)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.section.delete+"/"+e);k()}catch(t){console.error(t)}}}),(0,L.jsx)(Ee,{module:"Section",title:"Add Section",onAddClick:()=>{c(!0),r(null),I()}}),(0,L.jsx)(Ye,{open:d,formik:w,formTitle:o?"Update Section":"Add Section",onClose:C,submitButtonTitle:o?"Update":"Add",adding:m,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:1,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:w,name:"name",label:"Section Name",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:w,name:"class",label:"Select Class",required:!0,options:x})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:w,name:"sectionTeacher",label:"Section Teacher",options:g,showSearch:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:w,name:"active",label:"Active",options:gl})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:w,name:"isPublic",label:"View On Web",options:Al})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:w,name:"note",label:"Note"})}),(0,L.jsx)($.Ay,{xs:12,item:!0,children:(0,L.jsxs)(s.A,{sx:{padding:"10px",border:"1px solid lightgray",borderRadius:"5px"},children:[(0,L.jsx)(u.A,{children:"Select subject teachers"}),v.map(((e,t)=>{var l;return(0,L.jsxs)($.Ay,{container:!0,spacing:2,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)($.Ay,{item:!0,xs:12,md:3,children:(0,L.jsx)(u.A,{sx:{fontSize:"14px",fontWeight:"bold"},children:null===(l=b.find((t=>t._id===e.subject)))||void 0===l?void 0:l.name})}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:8,children:(0,L.jsx)(pl,{value:e.teacher,label:"Select Teacher",onChange:e=>((e,t)=>{const l=v.map(((l,a)=>a===e?{...l,teacher:t}:l));S(l),w.setFieldValue("subjectTeachers",l)})(t,e.target.value),options:g,showSearch:!1})})]},t)}))]})})]})})]})}const fl=[{name:"Subject Name",key:"name"},{name:"Subject Code",key:"code"}],bl=[{label:"Mandatory",value:"mandatory"},{label:"Optional",value:"optional"}],yl=[{label:"Scholastic",value:"scholastic"},{label:"Co-scholastic",value:"co-scholastic"}];function vl(){var e,t;const{selectedSetting:l}=(0,a.useContext)(G.A),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)(null),[r,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[g,A]=(0,a.useState)(""),j=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.subject.list,{params:{schoolId:l._id,search:{class:g}}});i(e.result),console.log(e.result,"rrrrrrrrr")}catch(e){console.log(e)}};(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:l._id}});p(null===(e=t.result)||void 0===e?void 0:e.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:l._id}});h(t.result.map((e=>({label:e.name,value:e._id})))),null!==(e=t.result)&&void 0!==e&&e.length&&(A(t.result[0]._id),b.setFieldValue("class",t.result[0]._id))}catch(t){console.log(t)}})()}),[l,l._id]);const f=()=>{d(!1),o(null)},b=(0,we.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",code:(null===s||void 0===s?void 0:s.code)||"",subjectType:(null===s||void 0===s?void 0:s.subjectType)||"",subjectGroup:(null===s||void 0===s?void 0:s.subjectGroup)||"",class:(null===s||void 0===s||null===(e=s.class)||void 0===e?void 0:e._id)||"",subjectTeachers:(null===s||void 0===s||null===(t=s.subjectTeachers)||void 0===t?void 0:t.map((e=>e._id)))||[],note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async e=>{try{const t={...e,class:g,schoolId:l._id};if(m(!0),s){const{data:e}=await(0,de.yJ)(ce.r.subject.update+"/"+s._id,t);j()}else{const{data:e}=await(0,de.bE)(ce.r.subject.create,t);j()}f()}catch(t){console.log(t)}m(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{console.log(g,"000000"),g?(i([]),j()):i([])}),[g,l._id]);return(0,a.useEffect)((()=>{b.setFieldValue("class",g)}),[g]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Subject"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(pl,{required:!0,name:"selectedClass",value:g,onChange:e=>{A(e.target.value)},label:"Select Class",options:u})})})}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Subject",tableKeys:fl,bodyDataModal:"subject",bodyData:n,onEditClick:e=>{o(e),d(!0)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.subject.delete+"/"+e);j()}catch(t){console.error(t)}}}),(0,L.jsx)(Ee,{module:"Subject",title:"Add Subject",onAddClick:()=>{d(!0)}}),(0,L.jsx)(Ye,{open:r,formik:b,formTitle:s?"Update":"Add Subject",onClose:f,submitButtonTitle:s?"Update":"Add",adding:c,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:b,name:"name",label:"Subject Name",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:b,name:"code",label:"Subject Code",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,formik:b,name:"subjectType",label:"Subject Type",options:bl})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,formik:b,name:"subjectGroup",label:"Group",options:yl})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{showSearch:!0,multiple:!0,formik:b,name:"subjectTeachers",label:"Subject Teachers-(".concat(b.values.subjectTeachers.length,")"),required:!0,options:x})}),(0,L.jsx)($.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,L.jsx)(ot.A,{formik:b,name:"note",label:"Note"})})]})})]})}const Sl=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.dark,borderRadius:"5px",padding:"2px 5px",width:"60px",display:"flex",alignItems:"center",justifyContent:"center"}})),kl=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",alignItems:"center"}}));function Cl(e){let{title:t="",count:l=0,showTitle:a=!1}=e;return(0,L.jsxs)(v.A,{direction:"row",columnGap:a?1:0,children:[a?(0,L.jsx)(Sl,{children:(0,L.jsx)(u.A,{sx:{fontSize:"14px",color:"white",fontWeight:"bold"},children:t})}):null,(0,L.jsx)(kl,{children:(0,L.jsx)(u.A,{sx:{fontSize:"14px",fontWeight:"bold"},children:l})})]})}var wl=l(91036),Il=l(72450);function Nl(){let e=arguments.length>2?arguments[2]:void 0;const t=new Blob([arguments.length>1?arguments[1]:void 0],{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,Il.saveAs)(t,e)}function Dl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!0;for(const n in e)t.includes(n)||e[n]||(a=!1,l&&wl.oR.error('Value for "'.concat(n,'" is missing!')));return a}const Ml=(0,n.Ay)(Le.A)((e=>{let{theme:t}=e;return{borderRight:"1px solid grey"}})),Fl=(0,n.Ay)(h.A)((e=>{let{theme:t}=e;return{borderBottomColor:"grey",width:"100%"}})),_l=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{marginTop:"52px",display:"flex",rowGap:"2px",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingBottom:"10px"}}));function Rl(){var e;const{selectedSetting:t}=(0,a.useContext)(G.A),[l,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(""),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(0),[u,x]=(0,a.useState)(0),[p,g]=(0,a.useState)(0),[A,j]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.academicYear.list);n(t.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),o(null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[t]),(0,a.useEffect)((()=>{(async()=>{try{if(i){const{data:e}=await(0,de.Jt)(ce.r.student.overView,{params:{schoolId:t._id,academicYear:i}});d(null===e||void 0===e?void 0:e.result),m(e.result.totalStudentsCount),x(e.result.totalMaleStudentsCount),g(e.result.totalFemaleStudentsCount)}}catch(e){console.log(e)}})()}),[i,t]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Overview"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,L.jsx)(pl,{required:!0,name:"academicYear",value:i,onChange:e=>o(e.target.value),label:"Select Academic Year",options:l})}),(0,L.jsx)(pe,{module:"Overview",permission:"view",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center",mt:2},children:(0,L.jsx)(S.A,{title:"Download",children:(0,L.jsx)(We.A,{loading:A,size:"small",variant:"contained",onClick:async()=>{try{j(!0);Nl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,de.Jt)(ce.r.student.downloadAllStudentsExcel,{params:{schoolId:t._id,academicYearId:i},responseType:"blob"})).data,"student.xlsx"),j(!1)}catch(e){j(!1),console.log(e)}},children:"Download Students"})})})})]})}),(0,L.jsx)(s.A,{sx:{fontSize:{md:"15px",sm:"12px"},padding:"1.2rem"},children:(0,L.jsxs)(s.A,{sx:{display:"flex",gap:"1rem"},children:[(0,L.jsxs)(s.A,{children:["Total Students:",c]}),(0,L.jsxs)(s.A,{children:["Total Male Students:",u]}),(0,L.jsxs)(s.A,{children:["Total Female Students:",p]})]})}),(0,L.jsx)(Je.A,{component:X.A,children:(0,L.jsxs)(Ve.A,{children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Ml,{align:"center",sx:{fontWeight:"bold"},children:"Class"}),(0,L.jsx)(Ml,{align:"center",sx:{fontWeight:"bold"},children:"Students"}),(0,L.jsx)(Ml,{align:"center",sx:{fontWeight:"bold"},children:"Sections"})]})}),(0,L.jsx)(He.A,{children:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.map(((e,t)=>(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{sx:{borderRight:"1px solid grey"},align:"center",children:e.name}),(0,L.jsx)(Le.A,{sx:{borderRight:"1px solid grey",padding:0},align:"center",children:(0,L.jsxs)(_l,{children:[(0,L.jsx)(Cl,{showTitle:!0,title:"Male",count:e.maleStudents}),(0,L.jsx)(Fl,{}),(0,L.jsx)(Cl,{showTitle:!0,title:"Female",count:e.femaleStudents}),(0,L.jsx)(Fl,{}),(0,L.jsx)(Cl,{showTitle:!0,title:"Total",count:e.totalStudents})]})}),(0,L.jsx)(Le.A,{align:"left",children:(0,L.jsx)(Je.A,{component:X.A,children:(0,L.jsxs)(Ve.A,{size:"small",children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsx)(Ue.A,{children:e.sections.map(((e,t)=>(0,L.jsx)(Le.A,{align:"left",children:e.section})))})}),(0,L.jsx)(He.A,{children:(0,L.jsx)(Ue.A,{children:e.sections.map(((e,t)=>(0,L.jsx)(Le.A,{align:"left",children:(0,L.jsxs)(s.A,{sx:{display:"flex",rowGap:"2px",flexDirection:"column"},children:[(0,L.jsx)(Cl,{title:"Male",count:e.maleCount}),(0,L.jsx)(h.A,{sx:{background:"grey"}}),(0,L.jsx)(Cl,{title:"Female",count:e.femaleCount}),(0,L.jsx)(h.A,{sx:{background:"grey"}}),(0,L.jsx)(Cl,{title:"Total",count:e.count})]})},t)))})})]})})})]},e.className)))})]})})]})}var El=l(26225),Tl=l(95676);const zl=[{name:"Photo",key:"photo",type:"image"},{name:"Name",key:"name",path:"basicInfo"},{name:"Active",key:"active"},{name:"Section",key:"name",path:"section"},{name:"Roll No",key:"rollNumber",path:"rollNumber"},{name:"Admission No",key:"admissionNumber",path:"academicInfo"}];var Pl=l(41132),ql=l(45903),Bl=l(33438);function Wl(e){let{open:t=!1,onClose:l=(()=>{}),styles:a={},selectedFiles:n=[],setSelectFiles:o=(()=>{}),customOnChage:r=!1,onRemove:d=(()=>{})}=e;const c=(0,i.A)();let m=(0,Te.A)(c.breakpoints.down("sm"));return(0,L.jsxs)(ze.A,{fullScreen:m,open:t,onClose:l,PaperProps:{sx:{width:"100%",maxWidth:650,...a}},children:[(0,L.jsx)(Pe.A,{children:n.length>1?"Selected files":"Selected file"}),(0,L.jsx)(h.A,{}),(0,L.jsx)(qe.A,{sx:{padding:"10px"},children:n.map(((e,t)=>(console.log(e.name,"gg"),(0,L.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)(u.A,{children:e.name}),(0,L.jsx)(x.A,{size:"small",onClick:r?()=>d(e.name):()=>{return t=e.name,void o(n.filter((e=>e.name!==t)));var t},children:(0,L.jsx)(Bl.A,{fontSize:"small"})})]},t))))}),(0,L.jsx)(Be.A,{children:(0,L.jsx)(ke.A,{onClick:l,size:"small",variant:"contained",children:"Close"})})]})}var Yl=l(11206);const Jl=(0,ql.A)(s.A)((()=>({display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",columnGap:"5px"})));function Vl(e){let{name:t,multi:l=!0,label:n="default label",required:o=!1,onChange:r=(()=>{}),value:d,selectedFiles:c=[],disabled:m=!1,setSelectedFiles:h=(()=>{}),customOnChange:p=!1,onRemove:g=(()=>{}),accept:A="",previousFile:j="",...f}=e;(0,i.A)();const[b,y]=(0,a.useState)(!1);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(Jl,{mt:1,children:[(0,L.jsxs)(s.A,{component:"div",onClick:()=>y(!0),sx:{borderRadius:"5px",padding:"8px",backgroundColor:"white",border:"1px solid lightgray",height:"30px",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:[(0,L.jsx)(u.A,{component:"div",onClick:()=>y(!0),sx:{fontWeight:"bold",borderRadius:"5px",padding:"5px",backgroundColor:"white",color:"black",height:"30px",width:"30px",textAlign:"center"},children:c.length}),(0,L.jsx)($e.A,{fontSize:"14px"})]}),(0,L.jsxs)(ke.A,{fullWidth:!0,component:"label",size:"small",variant:"outlined",children:[(0,L.jsx)("input",{type:"file",multiple:l,accept:A,hidden:!0,onChange:p?e=>r(e):e=>{const t=e.target.files;if(t.length>0){let e=[];for(let l=0;l<t.length;l++){const a=t[l];e.push(a)}h([...e])}else console.log("No files selected")}}),n]}),j&&(0,L.jsx)(S.A,{title:"Uploaded File Link",children:(0,L.jsx)(x.A,{component:"div",size:"small",color:"primary",variant:"outlined",onClick:()=>window.open(j,"_blank"),children:(0,L.jsx)(Yl.A,{fontSize:"small"})})})]}),(0,L.jsx)(Wl,{open:b,selectedFiles:c,setSelectFiles:h,onClose:()=>y(!1),customOnChage:p,onRemove:g})]})}const Ol=[{label:"Active",value:!0},{label:"In-Active",value:!1}],Ul={bgcolor:"background.paper",height:"auto",p:2};function Ll(){const{selectedSetting:e}=(0,a.useContext)(G.A),t=(0,M.Zp)(),l=(0,i.A)(),n=(0,Te.A)(l.breakpoints.down("sm")),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[g,A]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[w,I]=(0,a.useState)([]),[N,D]=(0,a.useState)([]),F=(e,t)=>{const{files:l}=e.target;let a=[];if(l.length>0){for(let e=0;e<l.length;e++){const t=l[e];a.push(t)}"admitFile"===t?D(a):"updateFile"===t&&I(a)}else console.log("No files selected")},_=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:"all",active:!0},onSubmit:async t=>{try{if("all"===t.section){const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,active:t.active}}});r(l.result.map((e=>({...e,section:e.academicInfo.section,rollNumber:e.academicInfo}))))}else{const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section,active:t.active}}});r(l.result.map((e=>({...e,section:e.academicInfo.section,rollNumber:e.academicInfo}))))}}catch(l){console.log(l)}},enableReinitialize:!0});(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.academicYear.list);c(t.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),_.setFieldValue("academicYear",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});h(l.result.map((e=>({label:e.name,value:e._id})))),_.setFieldValue("class",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[e._id]),(0,a.useEffect)((()=>{_.values.class&&(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:_.values.class}}}),l=[{label:"All",value:"all"},...t.result.map((e=>({label:e.name,value:e._id})))];p(l),_.setFieldValue("section","all")}catch(t){console.log(t)}})()}),[_.values.class,e._id]),(0,a.useEffect)((()=>{_.values.academicYear&&_.values.class&&_.values.section&&_.handleSubmit()}),[_.values,e._id]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Students"}),(0,L.jsxs)(X.A,{sx:{padding:2,marginBottom:2},children:[(0,L.jsx)("form",{onSubmit:_.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:_,label:"Select Academic Year",options:d})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:_,label:"Select Class",options:m})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:_,label:"Select Section",options:x})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"active",formik:_,label:"Select Status",options:Ol})}),(0,L.jsx)(pe,{module:"Admit Student",permission:"view",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",type:"submit",children:"Find"})})})]})}),(0,L.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:_.values.academicYear&&_.values.class&&"all"!==_.values.section&&(0,L.jsxs)(v.A,{gap:1,direction:{xs:"column",sm:"row",md:"row"},children:[(0,L.jsx)(S.A,{title:"Bulk Admit",children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",onClick:()=>f(!0),children:"BULK ADMIT"})}),(0,L.jsx)(S.A,{title:"Bulk Update",children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",onClick:()=>A(!0),children:"BULK UPDATE"})})]})}),(0,L.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",mt:1},children:(0,L.jsx)(v.A,{direction:"row",children:(0,L.jsxs)(pe,{module:"Admit Student",permission:"view",children:[(0,L.jsx)(S.A,{title:"Download",children:(0,L.jsx)(We.A,{loading:b,onClick:async()=>{try{y(!0);Nl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,de.Jt)(ce.r.student.downloadStudentsExcel,{params:{schoolId:e._id,academicYearId:_.values.academicYear,classId:_.values.class,sectionId:_.values.section,active:_.values.active},responseType:"blob"})).data,"students.xlsx"),y(!1)}catch(t){console.log(t),y(!1)}},children:(0,L.jsx)(Tl.A,{color:"primary"})})}),(0,L.jsx)(S.A,{title:"Print",children:(0,L.jsx)(We.A,{loading:k,onClick:async()=>{try{C(!0);Nl("application/pdf",(await(0,de.Jt)(ce.r.student.downloadStudentsPdf,{params:{schoolId:e._id,academicYearId:_.values.academicYear,classId:_.values.class,active:_.values.active},responseType:"blob"})).data,"student-list.pdf"),C(!1)}catch(t){console.log(t),C(!1)}},children:(0,L.jsx)(El.A,{color:"primary"})})}),(0,L.jsx)(ke.A,{size:"small",variant:"contained",onClick:()=>{t("/sch/student/bulk-photo")},children:"Bulk Photo"})]})})})]})]}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Admit Student",tableKeys:zl,bodyDataModal:"students",bodyData:o,onEditClick:e=>{t("/sch/student/edit-student/".concat(e._id))},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.student.delete+"/"+e);_.handleSubmit()}catch(t){console.error(t)}}}),(0,L.jsx)(Ee,{module:"Admit Student",title:"Add Students",onAddClick:e=>{t("/sch/student/add-student")}}),(0,L.jsx)(ze.A,{fullScreen:n,maxWidth:"md",open:j,onClose:()=>f(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:{xs:"100%",sm:350,md:350,lg:400}}}},children:(0,L.jsx)(s.A,{sx:Ul,children:(0,L.jsx)("form",{onSubmit:async t=>{t.preventDefault();try{const t=new FormData;t.append("academicYearId",_.values.academicYear),t.append("classId",_.values.class),t.append("sectionId",_.values.section),t.append("schoolId",e._id),N.forEach((e=>t.append("file",e))),await(0,de.bE)(ce.r.student.bulkStudentAdmit,t,{headers:{"Content-Type":"multipart/form-data"}})}catch(l){console.log(l)}},children:(0,L.jsxs)($.Ay,{container:!0,spacing:1,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(u.A,{variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Admit"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,L.jsx)(ke.A,{variant:"contained",size:"small",endIcon:(0,L.jsx)(Pl.A,{}),onClick:async()=>{try{Nl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,de.Jt)(ce.r.student.getBulkStudentAdmitSheet,{params:{schoolId:e._id},responseType:"blob"})).data,"studentAdmit_list.xlsx")}catch(t){console.log(t)}},children:"Sample"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,L.jsx)(Vl,{label:"Select  File",onChange:e=>F(e,"admitFile"),customOnChange:!0,selectedFiles:N,multi:!1})}),(0,L.jsxs)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:1,children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:()=>{f(!1),D([])},children:"Cancel"}),(0,L.jsx)(ke.A,{size:"small",variant:"contained",type:"submit",children:"Submit"})]})]})})})}),(0,L.jsx)(ze.A,{fullScreen:n,open:g,onClose:()=>A(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:{xs:"100%",sm:350,md:350,lg:400}}}},children:(0,L.jsx)(s.A,{sx:Ul,children:(0,L.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=new FormData;w.forEach((t=>e.append("file",t)));const{data:t}=await(0,de.yJ)(ce.r.student.bulkUpdate,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){console.log(t)}},children:[" ",(0,L.jsxs)($.Ay,{container:!0,spacing:1,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(u.A,{variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Update"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,L.jsx)(ke.A,{variant:"contained",size:"small",onClick:async()=>{try{Nl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,de.Jt)(ce.r.student.bulkUpdateSheet,{params:{schoolId:e._id,academicYearId:_.values.academicYear,classId:_.values.class,sectionId:_.values.section},responseType:"blob"})).data,"student_list.xlsx")}catch(t){console.log(t)}},endIcon:(0,L.jsx)(Pl.A,{}),children:"Download"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,L.jsx)(Vl,{label:"Select File",onChange:e=>F(e,"updateFile"),customOnChange:!0,selectedFiles:w,multi:!1})}),(0,L.jsxs)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:1,children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:()=>{A(!1),I([])},children:"Cancel"}),(0,L.jsx)(ke.A,{variant:"contained",size:"small",type:"submit",children:"Submit"})]})]})]})})})]})}const Hl=e=>{let{children:t,content:l}=e;const[n,i]=(0,a.useState)(!0);return(0,a.useEffect)((()=>()=>{}),[]),(0,L.jsx)(L.Fragment,{children:n&&l&&(0,L.jsx)("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:"whitesmoke",padding:"15px",zIndex:1e3},children:l})})};var Gl=l(55756);const Ql={inputProps:{"aria-label":"Checkbox demo"}},Kl={bgcolor:"background.paper",height:"auto",p:2};function Zl(){const{selectedSetting:e}=(0,a.useContext)(G.A),t=(0,Gl.u)(),l=(0,Te.A)(t.breakpoints.down("sm")),[n,i]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)([]),[g,A]=(0,a.useState)([]),[j,f]=(0,a.useState)([]),[b,y]=(0,a.useState)(!1),[v,S]=a.useState(0),[k,C]=a.useState(10),w=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:"",newSection:""},onSubmit:async t=>{try{if(!Dl(t,[]))return;const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section}}});A(l.result)}catch(l){console.log(l)}}});(0,a.useEffect)((()=>{A([])}),[w.values]);(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.academicYear.list);i(t.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),w.setFieldValue("academicYear",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});r(l.result.map((e=>({label:e.name,value:e._id})))),w.setFieldValue("class",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[]),(0,a.useEffect)((()=>{w.values.class&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:w.values.class}}});c(l.result.map((e=>({label:e.name,value:e._id})))),w.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[w.values.class,e]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Reshuffle"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)("form",{onSubmit:w.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:w,label:"Select Academic Year",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:w,label:"Select Class",options:o})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:w,label:"Current Section",options:d})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"newSection",formik:w,label:"Change To",options:d.filter((e=>e.value!==w.values.section))})}),(0,L.jsx)(pe,{module:"Reshuffle",permission:"view",children:(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:"10px",children:[(0,L.jsx)(ke.A,{size:"small",type:"submit",variant:"contained",children:"Find"}),(0,L.jsx)(ke.A,{size:"small",variant:"contained",onClick:()=>h(!0),children:"Bulk Reshuffle"})]})})]})})}),(0,L.jsxs)(Je.A,{component:X.A,children:[(0,L.jsxs)(Ve.A,{children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"S.No"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Name"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Roll No"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Father Name"}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(Gt.A,{onChange:e=>{if(e.target.checked){const e=g.map((e=>e._id));f([...e])}else f([])},...Ql,sx:{padding:0,color:"#fff","&.Mui-checked":{color:"#fff"}}})})]})}),(0,L.jsx)(He.A,{children:g.slice(v*k,v*k+k).map(((e,t)=>(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:t+1}),(0,L.jsx)(Le.A,{align:"center",children:e.basicInfo.name}),(0,L.jsx)(Le.A,{align:"center",children:e.academicInfo.rollNumber}),(0,L.jsx)(Le.A,{align:"center",children:e.fatherInfo.name}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(Gt.A,{checked:j.includes(e._id),onChange:t=>((e,t)=>{t.target.checked?f((t=>[...t,e])):f(j.filter((t=>t!==e)))})(e._id,t),...Ql,sx:{color:"#1b3779","&.Mui-checked":{color:"#1b3779"}}})})]},e._id)))})]}),!g.length&&(0,L.jsx)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:"No data found"}),(0,L.jsx)(Ge.A,{rowsPerPageOptions:[10,25,50],component:"div",count:g.length,rowsPerPage:k,page:v,onPageChange:(e,t)=>{S(t)},onRowsPerPageChange:e=>{C(+e.target.value),S(0)},sx:{display:"flex",justifyContent:"flex-start,"}})]}),g.length>0&&(0,L.jsx)(Hl,{content:(0,L.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,L.jsx)(We.A,{loading:b,varient:"contained",size:"small",type:"submit",onClick:async()=>{try{const t={schoolId:e._id,sectionId:w.values.newSection,classId:w.values.class,currentSectionId:w.values.section,studentIds:j};y(!0);const{data:l}=await(0,de.yJ)(ce.r.student.resuffle,t);w.resetForm()}catch(t){console.log(t)}y(!1)},sx:{background:"#1b3779",":hover":{background:"#1b3779"},color:"#fff"},children:"Reshuffle"})})}),(0,L.jsx)(ze.A,{fullScreen:l,maxWidth:"md",open:m,onClose:()=>h(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,L.jsx)(s.A,{sx:Kl,children:(0,L.jsxs)($.Ay,{container:!0,spacing:1,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(u.A,{variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Admit"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,L.jsx)(ke.A,{variant:"contained",endIcon:(0,L.jsx)(Pl.A,{}),children:"Get Sample"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,L.jsx)(Vl,{label:"Select File",onChange:e=>((e,t)=>{const{files:l}=e.target;let a=[];if(l.length>0){for(let e=0;e<l.length;e++){const t=l[e];a.push(t)}p(a)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:x,multi:!1})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,L.jsx)(ke.A,{variant:"contained",type:"submit",children:"Submit"})})]})})})]})}const Xl={inputProps:{"aria-label":"Checkbox demo"}};function $l(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[m,h]=(0,a.useState)({}),[x,p]=(0,a.useState)([]),[g,A]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!1),[b,y]=a.useState(0),[v,S]=a.useState(10),k=(0,we.Wx)({initialValues:{promoteAcademicYearId:"",currentClassId:"",currentSectionId:"",promoteClassId:"",promoteSectionId:""},onSubmit:async e=>{try{if(!Dl(e,[]))return;f(!0);const{data:t}=await(0,de.Jt)(ce.r.student.list,{params:{search:{academicYear:m._id,"academicInfo.section":e.currentSectionId,"academicInfo.class":e.currentClassId,active:!0}}});l(t.result)}catch(t){console.log(t)}f(!1)}});(0,a.useEffect)((()=>{l([])}),[k.values]);(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.academicYear.list);let l=t.result,a=l.find((e=>e.active));i(l.filter((e=>e._id!==(null===a||void 0===a?void 0:a._id))).map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),h(a),k.setFieldValue("promoteAcademicYearId",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});r(l.result.map((e=>({...e,label:e.name,value:e._id})))),k.setFieldValue("currentClassId",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})(),(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id}});c(l.result.map((e=>({...e,label:e.name,value:e._id})))),k.setFieldValue("currentSectionId",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[e._id]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Promotion"}),(0,L.jsxs)(X.A,{sx:{padding:2,marginBottom:2},children:[(0,L.jsxs)(s.A,{sx:{fontSize:16,fontWeight:"bold"},children:[(0,L.jsxs)(u.A,{component:"span",color:"forestgreen",fontWeight:"bold",children:["Running Session:"," "]}),(0,L.jsxs)(u.A,{component:"span",fontWeight:"bold",children:[null===m||void 0===m?void 0:m.from,"-",null===m||void 0===m?void 0:m.to]})]}),(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"promoteAcademicYearId",formik:k,label:"Promote To Session",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"currentClassId",formik:k,label:"Current Class",options:o})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"currentSectionId",formik:k,label:"Current Section",options:d.filter((e=>e.class._id===k.values.currentClassId)).map((e=>({label:e.name,value:e._id})))})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"promoteClassId",formik:k,label:"Promote Class",options:o.filter((e=>e._id!==k.values.currentClassId)).map((e=>({label:e.name,value:e._id})))})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"promoteSectionId",formik:k,label:"Promote Section",options:d.filter((e=>e.class._id===k.values.promoteClassId)).map((e=>({label:e.name,value:e._id})))})}),(0,L.jsx)(pe,{module:"Promotion",permission:"view",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:2,display:"flex",alignItems:"center",children:(0,L.jsx)(We.A,{loading:j,disabled:!Dl(k.values,[],!1),onClick:k.handleSubmit,size:"small",variant:"contained",children:"Find"})})})]})]}),(0,L.jsxs)(Je.A,{component:X.A,children:[(0,L.jsxs)(Ve.A,{children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"S.No"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Name"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Roll No"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Father Name"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:(0,L.jsx)(Gt.A,{onClick:e=>{if(e.target.checked){const e=t.map((e=>e._id));p([...e])}else p([])},...Xl,sx:{padding:0,color:"#fff","&.Mui-checked":{color:"#fff"}}})})]})}),(0,L.jsx)(He.A,{children:t.slice(b*v,b*v+v).map(((e,t)=>(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:t+1}),(0,L.jsx)(Le.A,{align:"center",children:e.basicInfo.name}),(0,L.jsx)(Le.A,{align:"center",children:e.academicInfo.rollNumber}),(0,L.jsx)(Le.A,{align:"center",children:e.fatherInfo.name}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(Gt.A,{size:"small",checked:x.includes(e._id),onChange:t=>((e,t)=>{t.target.checked?p((t=>[...t,e])):p(x.filter((t=>t!==e)))})(e._id,t),...Xl,sx:{color:"#1b3779","&.Mui-checked":{color:"#1b3779"}}})})]},e._id)))})]}),!t.length&&(0,L.jsx)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:"No data found"}),(0,L.jsx)(Ge.A,{rowsPerPageOptions:[10,25,50],component:"div",count:t.length,rowsPerPage:v,page:b,onPageChange:(e,t)=>{y(t)},onRowsPerPageChange:e=>{S(+e.target.value),y(0)},sx:{display:"flex",justifyContent:"flex-start,"}})]}),t.length>0&&(0,L.jsx)(Hl,{content:(0,L.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,L.jsx)(We.A,{loading:g,variant:"contained",size:"small",type:"submit",onClick:async()=>{try{const t={schoolId:e._id,...k.values,studentIds:x};A(!0),console.log(t,"payload");const{data:l}=await(0,de.yJ)(ce.r.student.promote,t);k.resetForm()}catch(t){console.log(t)}A(!1)},children:"Promote"})})})]})}const ea=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"16px"}}));function ta(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)(null),m=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:console.log("nnnn")});(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);m.setFieldValue("academicYear",e.result[0]._id),l(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});i(t.result.map((e=>({...e,label:e.name,value:e._id})))),m.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e]),(0,a.useEffect)((()=>{m.values.class&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:m.values.class}}});m.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id),r(l.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(l){console.log(l)}})()}),[m.values.class]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Bulk Admission"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:m,label:"Select Academic Year",options:t})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:m,label:"Select Class",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:m,label:"Select Section",options:o})}),(0,L.jsx)($.Ay,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ke.A,{size:"large",component:"label",children:(0,L.jsx)("input",{visibility:"hidden",type:"file",onChange:e=>{c(e.target.files[0])}})})}),(0,L.jsx)(pe,{module:"Bulk Admission",permission:"view",children:(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(We.A,{onClick:async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.student.getBulkStudentAdmitSheet,{responseType:"blob",params:{schoolId:e._id}});Nl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t,"Bulk Admission Sheet")}catch(t){console.log(t)}},endIcon:(0,L.jsx)(Pl.A,{}),size:"small",variant:"contained",children:"Get Sample"})})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsxs)(ea,{component:"ul",children:[(0,L.jsxs)(ea,{component:"li",children:["School role type configured with",(0,L.jsx)("span",{style:{color:"red"},children:" manual"}),", please mention role number in column."]}),(0,L.jsxs)(ea,{component:"li",children:["School admission_no configured with auto"," ",(0,L.jsx)("span",{style:{color:"red"},children:" auto _ascending_no, "}),"admission_no column will be ignored."]})]})}),(0,L.jsx)(pe,{module:"Bulk Admission",permission:"add",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,L.jsx)(We.A,{onClick:async()=>{try{const t=new FormData;t.append("classId",m.values.class),t.append("sectionId",m.values.section),t.append("academicYearId",m.values.academicYear),t.append("schoolId",e._id),t.append("file",d);const{data:l}=await(0,de.yJ)(ce.r.student.bulkStudentAdmit,t,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){console.log(t)}},size:"small",variant:"contained",children:"Submit"})})})]})}),(0,L.jsxs)(s.A,{sx:{padding:"20px",borderRadius:"5px",backgroundColor:e=>"dark"===e.palette.mode?"rgba(32,33,32,1)":"#FFF9C4"},children:[(0,L.jsx)(u.A,{sx:{fontSize:"22px"},fontWeight:"bold",children:"Instruction:"}),(0,L.jsxs)(ea,{component:"ol",children:[(0,L.jsx)(ea,{component:"li",children:"At first select the (School), Class and Section"}),(0,L.jsx)(ea,{component:"li",children:"Generate CSV file."}),(0,L.jsx)(ea,{component:"li",children:"Open the downloaded CSV file and enter student information with unique username."}),(0,L.jsx)(ea,{component:"li",children:"Save the edited CSV file."}),(0,L.jsx)(ea,{component:"li",children:"Upload again CSV file you just edited and submit."})]})]})]})}const la=[{name:"Name",key:"name"},{name:"User Name",key:"username"},{name:"Roll No",key:"rollNumber",path:"rollNumber"},{name:"Father Name",key:"fatherName"}];function aa(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(!1),u=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},onSubmit:async t=>{m(!0);try{const{data:t}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:u.values.academicYear,"academicInfo.class":u.values.class,"academicInfo.section":u.values.section}}});l(t.result.map((e=>({username:e.username,fatherName:e.fatherInfo.name,name:e.basicInfo.name,rollNumber:e.academicInfo}))))}catch(a){console.error(a)}m(!1)}});return(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);u.setFieldValue("academicYear",e.result[0]._id),i(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});o(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,a.useEffect)((()=>{u.values.class&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:u.values.class}}});d(l.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[u.values.class,e._id]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Credentials"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:u.handleSubmit,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:u,label:"Select Academic Year",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:u,label:"Select Class",options:s})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:u,label:"Select Section",options:r})}),(0,L.jsx)(pe,{module:"Credential",permission:"view"}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,L.jsx)(We.A,{loading:c,size:"small",type:"submit",variant:"contained",children:"Find"})})]})}),(0,L.jsx)(it,{actions:[],tableKeys:la,bodyDataModal:"credentials",bodyData:t})]})}const na=[{name:"Name",key:"name"},{name:"Date",key:"createdAt",isDate:!0}];function ia(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!1),[s,o]=(0,a.useState)(null),[r,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[x,p]=(0,a.useState)({class:"",section:"",academicYear:"",student:""}),[g,A]=(0,a.useState)([]),[j,f]=(0,a.useState)([]),b=async t=>{try{const{data:a}=await(0,de.Jt)(ce.r.studentActivity.list,{params:{schoolId:e._id,search:{student:t.student,academicYear:t.academicYear}}});l(a.result)}catch(a){console.log(a)}},y=async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:S.values.class}}});S.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id),f(l.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(l){console.log(l)}},v=()=>{S.handleSubmit(),i(!1),o(null)},S=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},onSubmit:b,enableReinitialize:!0}),k=(0,we.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",description:(null===s||void 0===s?void 0:s.description)||"",student:S.values.student||"",academicYear:S.values.academicYear||""},onSubmit:async t=>{try{const l={student:t.student,description:t.description,name:t.name,academicYear:t.academicYear,schoolId:e._id};if(d(!0),s){const{data:e}=await(0,de.yJ)(ce.r.studentActivity.update+"/"+s._id,l)}else{const{data:e}=await(0,de.bE)(ce.r.studentActivity.create,l)}v()}catch(l){console.log(l)}d(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{S.values.class&&y()}),[S.values.class]),(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);S.setFieldValue("academicYear",e.result[0]._id),m(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});A(t.result.map((e=>({...e,label:e.name,value:e._id})))),S.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,a.useEffect)((()=>{S.values.academicYear&&S.values.class&&S.values.section&&e&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:S.values.academicYear,"academicInfo.class":S.values.class,"academicInfo.section":S.values.section}}});h(l.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),S.setFieldValue("student",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[S.values.academicYear,S.values.class,S.values.section,e]),(0,a.useEffect)((()=>{S.values.class&&y()}),[S.values.class]);(0,a.useEffect)((()=>{S.values.academicYear&&b()}),[S.values.academicYear]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Student Activity"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"div",onSubmit:S.handleSubmit,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:S,label:"Select Academic Year",options:c})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:S,label:"Select Class",options:g})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:S,label:"Select Section",options:j})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"student",formik:S,label:"Select Student",options:u})}),(0,L.jsx)(pe,{module:"Student Activity",permission:"view",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,L.jsx)(ke.A,{size:"small",type:"submit",variant:"contained",disabled:!S.values.student,onClick:S.handleSubmit,children:"Find"})})})]})}),(0,L.jsx)(it,{actions:["edit","delete"],module:"Student Activity",tableKeys:na,bodyDataModal:"student activity",bodyData:t,onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{const{data:t}=await(0,de.yH)(ce.r.studentActivity.delete+"/"+e);S.handleSubmit()}catch(t){console.log(t)}}}),(0,L.jsx)(Ee,{title:"Student Activity",module:"Student Activity",onAddClick:()=>{i(!0)},disabled:!S.values.student}),(0,L.jsx)(Ye,{open:n,formik:k,formTitle:s?"Update Student Activity":"Add Student Activity",onClose:v,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:12,item:!0,children:(0,L.jsx)(ot.A,{formik:k,name:"name",label:"Activity Name"})}),(0,L.jsx)($.Ay,{xs:12,sm:12,item:!0,children:(0,L.jsx)(ot.A,{formik:k,name:"description",label:"Description"})})]})})]})}const sa=[{name:"Receipt Name",key:"name"}];var oa=l(83560),ra=l(70141);const da=[{name:"Details",key:"detail"},{name:"Fee",key:"fee"}];var ca=l(43845);const ma={class:"Class",hostelMember:"Hostel Member",transportMember:"Transport Member"},ua=[{label:"Monthly",id:1},{label:"Quaterly",id:2},{label:"Half-Yearly",id:3},{label:"Yearly",id:4},{label:"Others",id:5}],ha=[{label:"Yes",_id:"yes"},{label:"No",_id:"no"}];function xa(e){let{dataToEdit:t,selectedReceipt:l="",open:n=!0,setOpen:i=(()=>{}),getFeeMaps:o=(()=>{})}=e;const{selectedSetting:r}=(0,a.useContext)(G.A),[d,c]=(0,a.useState)([]),[m,x]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[A,j]=(0,a.useState)([]),[f,b]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),[S,k]=(0,a.useState)([]),[C,I]=(0,a.useState)(!1),[N,D]=(0,a.useState)([]),[M,F]=(0,a.useState)({}),[_,R]=(0,a.useState)([]),[E,T]=(0,a.useState)(t||null);(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list,{params:{schoolId:r._id}});x(e.result.map((e=>({...e,label:"".concat(e.from," - ").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:r._id}});c(e.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.route.list,{params:{schoolId:r._id}});g(e.result.map((e=>{var t;return{...e,label:"".concat(null===(t=e.vehicle)||void 0===t?void 0:t.number," ").concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.routeStart," To ").concat(null===e||void 0===e?void 0:e.routeEnd,")"),value:null===e||void 0===e?void 0:e._id}})))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.hostel.list,{params:{schoolId:r._id}});b(e.result.map((e=>({...e,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.roomType.list,{params:{schoolId:r._id}});v(e.result.map((e=>({...e,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.room.list,{params:{schoolId:r._id}});k(e.result)}catch(e){console.log(e)}})()}),[]);const z=()=>{F({}),o(),i(!1),D([]),R([])};(0,a.useEffect)((()=>{if(t){const{class:e,hostelMember:l,transportMember:a,fee:n,installmentType:i,dependencies:s}=t;F({class:(null===e||void 0===e?void 0:e._id)||"",hostelMember:l?"yes":"no",transportMember:a?"yes":"no",installmentsType:i||"",fee:n||""}),T(t),D(s)}else F({})}),[t]);const P=e=>{const{name:t,value:l}=e.target;F("fee"==t?e=>({...e,[t]:parseInt(l)}):"others"==t?e=>({...e,[t]:Math.ceil(l)}):e=>({...e,[t]:l}))};(0,a.useEffect)((()=>{(()=>{if(!M.installmentsType||!M.fee)return;let e=[];if("Monthly"===M.installmentsType){const t=Math.floor(M.fee/12),l=M.fee-12*t;e=Array.from({length:12}).map(((e,a)=>{var n;return{id:a+1,amount:t,missing:l,dueDate:E?ye()(null===(n=E.installments[a])||void 0===n?void 0:n.dueDate):ye()()}})),e.length>0&&(e[0].amount+=l)}else if("Quaterly"===M.installmentsType){const t=Math.floor(M.fee/4),l=M.fee-4*t;e=Array.from({length:4}).map(((e,l)=>{var a;return{id:l+1,amount:t,dueDate:E?ye()(null===(a=E.installments[l])||void 0===a?void 0:a.dueDate):ye()()}})),e.length>0&&(e[0].amount+=l)}else if("Half-Yearly"===M.installmentsType){const t=Math.floor(M.fee/2),l=M.fee-2*t;e=Array.from({length:2}).map(((e,l)=>{var a;return{id:l+1,amount:t,dueDate:E?ye()(null===(a=E.installments[l])||void 0===a?void 0:a.dueDate):ye()()}})),e.length>0&&(e[0].amount+=l)}else if("Yearly"===M.installmentsType)e=Array.from({length:1}).map(((e,t)=>{var l;return{id:t,amount:M.fee,dueDate:E?ye()(null===(l=E.installments[t])||void 0===l?void 0:l.dueDate):ye()()}}));else{if("Others"!==M.installmentsType)return void R([]);{const t=Math.floor(M.fee/M.others),l=M.fee-t*M.others;e=Array.from({length:M.others}).map(((e,l)=>{var a;return{id:l+1,amount:t,dueDate:E?ye()(null===(a=E.installments[l])||void 0===a?void 0:a.dueDate):ye()()}})),e.length>0&&(e[0].amount+=l)}}R(e)})()}),[M.installmentsType,M.others,M.fee,E]);const q=(e,t,l)=>{R((a=>{let n=a.map(((a,n)=>{if(n===l)return"amount"===t?{...a,[t]:parseInt(e)}:"dueDate"===t?{...a,[t]:e}:a;if(n>l){let t=n-l;"Quaterly"===M.installmentsType?t*=3:"Half-Yearly"===M.installmentsType?t*=6:"Others"===M.installmentsType&&(t*=1);const i=ye()(e).add(t,"month");return{...a,dueDate:i}}return a}));return T({...E,installments:n}),n}))};return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(ze.A,{open:n,onClose:z,onSubmit:async e=>{I(!0),e.preventDefault(),M.pickType||function(e,t){const l=e.indexOf(t);-1!==l&&e.splice(l,1)}(N,"pickType");try{let e={receiptTitleId:l,dependencies:N,classId:M.class,hostelMember:M.hostelMember,transportMember:M.transportMember,fee:M.fee,installmentType:M.installmentsType,installments:_.map((e=>({...e,dueDate:ye()(null===e||void 0===e?void 0:e.dueDate)}))),schoolId:r._id};if(t){const{data:l}=await(0,de.yJ)(ce.r.feeMap.update+"/"+(null===t||void 0===t?void 0:t._id),e)}else{const{data:t}=await(0,de.bE)(ce.r.feeMap.create,e)}z()}catch(a){I(!1),console.error(a)}I(!1)},component:"form",children:[(0,L.jsx)(Pe.A,{sx:{fontWeight:600},children:t?"Update Fee Map":"Add Fee Map"}),(0,L.jsx)(h.A,{}),(0,L.jsx)(qe.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsxs)($.Ay,{xs:12,sm:12,md:12,item:!0,children:[(0,L.jsx)(u.A,{variant:"body",children:"Choose the dependencies that will serve as the basis for the fee calculation."}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:8,item:!0,children:(0,L.jsxs)(dl.A,{size:"small",sx:{mt:2,width:400},children:[(0,L.jsx)(cl.A,{id:"demo-multiple-chip-label",children:"Choose the dependencies"}),(0,L.jsx)(ml.A,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",size:"small",multiple:!0,label:"Choose the dependencies",value:N,onChange:e=>{const{target:{value:t}}=e;let l=[...t];l=l.pop(),D(l?"classOld"===l?t.filter((e=>!["class","classNew"].includes(e))):"classNew"===l?t.filter((e=>!["classOld","class"].includes(e))):"class"===l?t.filter((e=>!["classOld","classNew"].includes(e))):t:t)},children:Object.keys(ma).map((e=>(0,L.jsx)(w.A,{value:e,children:ma[e]},e)))})]})}),N&&(0,L.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,marginLeft:"20px"},children:N.map(((e,t)=>(0,L.jsx)(ca.A,{sx:{mt:2},label:ma[e],onDelete:()=>{return t=e,D((e=>e.filter((e=>e!==t)))),["class","classOld","classNew"].includes(t)&&F((e=>({...e,class:""}))),"hostel"===t&&F((e=>({...e,hostel:""}))),void("transport"===t&&F((e=>({...e,stop:"",route:"",pickType:""}))));var t}},e)))})]}),N.includes("class")&&(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,L.jsxs)(dl.A,{fullWidth:!0,size:"small",children:[(0,L.jsx)(cl.A,{children:"Select Class"}),(0,L.jsx)(ml.A,{size:"small",name:"class",required:!0,value:M.class||"",onChange:P,label:"Select Class",children:d.map((e=>(0,L.jsx)(w.A,{value:e._id,children:e.label},e._id)))})]})}),N.includes("hostelMember")&&(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,L.jsxs)(dl.A,{fullWidth:!0,size:"small",children:[(0,L.jsx)(cl.A,{children:"Is Hostel Member"}),(0,L.jsx)(ml.A,{size:"small",name:"hostelMember",required:!0,value:M.hostelMember||!1,onChange:P,label:"Is hostel member",children:ha.map((e=>(0,L.jsx)(w.A,{value:e._id,children:e.label},e._id)))})]})}),N.includes("transportMember")&&(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,L.jsxs)(dl.A,{fullWidth:!0,size:"small",children:[(0,L.jsx)(cl.A,{children:"Is Hostel Member"}),(0,L.jsx)(ml.A,{size:"small",name:"transportMember",required:!0,value:M.transportMember||!1,onChange:P,label:"Is transport member",children:ha.map((e=>(0,L.jsx)(w.A,{value:e._id,children:e.label},e._id)))})]})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,L.jsx)(kt.A,{fullWidth:!0,size:"small",label:"Fee",type:"number",required:!0,name:"fee",value:M.fee||"",onChange:P})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,L.jsxs)(dl.A,{fullWidth:!0,size:"small",children:[(0,L.jsx)(cl.A,{children:"Installment Type"}),(0,L.jsx)(ml.A,{size:"small",name:"installmentsType",value:M.installmentsType||"",onChange:P,label:"Select Installment Type",children:ua.map((e=>(0,L.jsx)(w.A,{value:e.label,children:e.label},e.id)))})]})}),"Others"==M.installmentsType&&(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,L.jsx)(kt.A,{fullWidth:!0,label:"Number of installments",size:"small",name:"others",type:"number",value:M.others||"",onChange:P})}),_.map(((e,l)=>(0,L.jsx)(a.Fragment,{children:(0,L.jsxs)($.Ay,{container:!0,rowSpacing:0,columnSpacing:2,px:2,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:6,md:6,mt:2,children:(0,L.jsx)(kt.A,{fullWidth:!0,type:"number",label:"installment ".concat(l+1),value:(null===e||void 0===e?void 0:e.amount)||0,size:"small",onChange:e=>q(e.target.value,"amount",l)})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:6,md:6,children:(0,L.jsx)(Nt.$,{dateAdapter:Mt.R,children:(0,L.jsx)(Dt.l,{enabled:t,label:"Due Date",format:"DD/MM/YYYY",value:(null===e||void 0===e?void 0:e.dueDate)||null,onChange:e=>q(e,"dueDate",l),sx:{"& .MuiInputBase-input":{height:"8px"},marginTop:"16px",width:"100%"},renderInput:e=>(0,L.jsx)(kt.A,{fullWidth:!0,enabled:t,...e,size:"small"})})})})]})},l)))]})}),(0,L.jsxs)(Be.A,{children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:z,children:"Close"}),(0,L.jsx)(We.A,{size:"small",loading:C,variant:"contained",type:"submit",children:t?"Update":"Submit"})]})]})})}var pa=l(77502);const ga=(0,n.Ay)(Le.A)((e=>{let{theme:t,isDarkMode:l}=e;return{width:"200px",border:"1px solid gray",["&.".concat(pa.A.head)]:{backgroundColor:l?"transparent":"blue"},["&.".concat(pa.A.body)]:{fontSize:15}}}));function Aa(e){let{open:t=!0,title:l="",tableData:n=[],onClose:i=(()=>{})}=e;const{isDarkMode:s}=(0,a.useContext)(_e.A);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(ze.A,{onClose:i,"aria-labelledby":"customized-dialog-title",open:t,children:[(0,L.jsx)(Pe.A,{sx:{m:0,p:2,backgroundColor:s?"#333":"#fff",color:s?"#fff":"#000"},id:"customized-dialog-title",children:l}),(0,L.jsx)(x.A,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:s?"#fff":"#000"},children:(0,L.jsx)(Bl.A,{})}),(0,L.jsx)(qe.A,{sx:{backgroundColor:s?"#333":"#fff",color:s?"#fff":"#000"},children:(0,L.jsxs)(Ve.A,{"aria-label":"customized table",children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"S.No"}),(0,L.jsx)(Le.A,{sx:{fontWeight:"bold"},align:"center",children:"Amount"}),(0,L.jsx)(Le.A,{sx:{fontWeight:"bold"},align:"center",children:"Due Date"})]})}),(0,L.jsx)(He.A,{children:null===n||void 0===n?void 0:n.map(((e,t)=>(0,L.jsx)(a.Fragment,{children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(ga,{align:"center",children:t+1}),(0,L.jsx)(ga,{align:"center",children:e.amount}),(0,L.jsx)(ga,{align:"center",children:ye()(e.dueDate).format("DD/MM/YYYY")})]})},t)))})]})})]})})}const ja=(0,n.Ay)(N.A)((e=>{let{}=e;return{"& .MuiSwitch-switchBase.Mui-checked":{color:"green"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"green"},"& .MuiSwitch-switchBase":{color:"red"},"& .MuiSwitch-switchBase + .MuiSwitch-track":{backgroundColor:"red"}}})),fa=e=>{let t=[];for(let a of e.dependencies)if(["class"].includes(a)){var l;let a="[".concat(null===(l=e.class)||void 0===l?void 0:l.name,"]-Class");t.push(a)}else if(["hostelMember"].includes(a)){let l="[".concat(e.hostelMember?"IS":"IS-NOT","]-Hostel Member");t.push(l)}else if(["transportMember"].includes(a)){let l="[".concat(e.transportMember?"IS":"IS-NOT","]-Transport Member");t.push(l)}return t.join(" | ")},ba=e=>{let{onUpdate:t=(()=>{}),data:l={},onEditClick:n=(()=>{}),onNavigateFeeMap:i=(()=>{})}=e;const[s,o]=(0,a.useState)(!1);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(v.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,L.jsx)(pe,{module:"Receipt Book",permission:"add",children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",onClick:()=>i(l._id),children:"Fee Map"})}),(0,L.jsx)(pe,{module:"Receipt Book",permission:"update",children:(0,L.jsx)(S.A,{title:"Edit",children:(0,L.jsx)(x.A,{onClick:()=>n(l),size:"small",children:(0,L.jsx)(oa.A,{color:"primary",fontSize:"12px"})})})}),(0,L.jsx)(pe,{module:"Receipt Book",permission:"update",children:(0,L.jsx)(S.A,{title:l.active?"Deactive":"Activate",children:(0,L.jsx)(ja,{size:"small",checked:l.active,onChange:async()=>{try{o(!0),await(0,de.yJ)("".concat(ce.r.receiptTitle.toggleActiveStatus,"/").concat(l._id)),t(),o(!1)}catch(e){console.log(e),o(!1)}},inputProps:{"aria-label":"controlled"}})})})]})})};function ya(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(0),[s,o]=(0,a.useState)(!1),[r,d]=(0,a.useState)(null),[c,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),[g,A]=(0,a.useState)(""),[j,f]=(0,a.useState)({open:!1,tableData:[],action:()=>{}}),b=async()=>{try{var t;const{data:a}=await(0,de.Jt)(ce.r.feeMap.list,{params:{schoolId:e._id,search:{receiptTitle:g}}});console.log(a,"data"),l(null===a||void 0===a||null===(t=a.result)||void 0===t?void 0:t.map((e=>({...e,detail:fa(e)}))))}catch(a){console.error(a)}},y=async()=>{try{const{data:t,status:l}=await(0,de.Jt)(ce.r.receiptTitle.list,{params:{schoolId:e._id}});m(t.result),t.result.length>0&&A(g||t.result[0]._id)}catch(t){console.log(t)}};(0,a.useEffect)((()=>{g&&b()}),[g,e._id]),(0,a.useEffect)((()=>{y()}),[e]);const v=()=>{o(!1),d(null),y()},S=(0,we.Wx)({initialValues:{name:(null===r||void 0===r?void 0:r.name)||"",active:(null===r||void 0===r?void 0:r.active)||!0},onSubmit:async t=>{try{const l={...t,schoolId:null===e||void 0===e?void 0:e._id};if(h(!0),r){const{data:e}=await(0,de.yJ)(ce.r.receiptTitle.update+"/"+r._id,l)}else{const{data:e}=await(0,de.bE)(ce.r.receiptTitle.create,l)}v()}catch(l){console.log(l)}h(!1)},enableReinitialize:!0});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Receipt Book"}),(0,L.jsx)(gt,{onChange:(e,t)=>{i(t)},value:n,labels:["Receipt Book","Fee Map"]}),(0,L.jsxs)(At,{index:0,value:n,children:[(0,L.jsx)(pe,{module:"Receipt Book",permission:"add",children:(0,L.jsx)(ke.A,{variant:"contained",size:"small",onClick:()=>{o(!0)},startIcon:(0,L.jsx)(ra.A,{}),sx:{mt:1,mb:2},children:"Add Receipt"})}),(0,L.jsx)(it,{actions:["custom"],bodyDataModal:"Receipt Book",bodyData:c,tableKeys:sa,feeMapTableKeys:!0,onEditClick:e=>{d(e),o(!0)},onNavigateFeeMap:e=>{A(e),i(1)},CustomAction:ba,onUpdate:y}),(0,L.jsx)(Ye,{open:s,formik:S,formTitle:r?"Update Receipt Book":"Add Receipt Book",onClose:v,submitButtonTitle:r?"Update":"Submit",adding:u,children:(0,L.jsx)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:(0,L.jsx)($.Ay,{xs:12,sm:6,md:12,item:!0,children:(0,L.jsx)(ot.A,{formik:S,name:"name",label:"Receipt Name",required:!0})})})})]}),(0,L.jsx)(pe,{module:"Receipt Book",permission:"add",children:(0,L.jsxs)(At,{index:1,value:n,children:[(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",my:1.5},children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsxs)(dl.A,{fullWidth:!0,size:"small",children:[(0,L.jsx)(cl.A,{children:"Select Receipt"}),(0,L.jsx)(ml.A,{required:!0,fullWidth:!0,value:g||"",onChange:e=>A(e.target.value),label:"Select Receipt",children:c.map((e=>(0,L.jsx)(w.A,{value:e._id,children:e.name},e._id||"")))})]})}),(0,L.jsx)(pe,{module:"Receipt Book",permission:"add",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ke.A,{variant:"contained",startIcon:(0,L.jsx)(ra.A,{}),onClick:()=>{p(!0),d(null)},children:"Add Fee Map"})})})]}),(0,L.jsx)(it,{actions:["edit","switch","view"],bodyDataModal:"Fee Map",module:"Receipt Book",bodyData:t,tableKeys:da,toggleStatus:"active",onToggleSwitch:async e=>{try{const{data:t}=await(0,de.yJ)(ce.r.feeMap.toggleActiveStatus+"/"+e._id);b()}catch(t){console.error(t)}},onViewClick:e=>{f({...j,open:!0,tableData:null===e||void 0===e?void 0:e.installments})},onEditClick:e=>{d(e),p(!0)}}),(0,L.jsx)(xa,{open:x,dataToEdit:r,getFeeMaps:b,setOpen:p,loading:u,selectedReceipt:g}),(0,L.jsx)(Aa,{title:"Installment Details",open:null===j||void 0===j?void 0:j.open,tableData:null===j||void 0===j?void 0:j.tableData,onClose:e=>{f({...j,open:!1})}})]})})]})}const va=[{name:"Description",key:"description"},{name:"Amount\t",key:"amount"},{name:"Tax Rate",key:"taxRate"},{name:"HSN Code",key:"hsnCode"}];function Sa(e){let{name:t,label:l="default label",required:a=!1,onChange:n=(()=>{}),value:s,style:o={},...r}=e;const d=(0,i.A)();return(0,L.jsx)(kt.A,{required:a,id:t,name:t,label:l,placeholder:"Enter ".concat(l),fullWidth:!0,value:s||"",onChange:n,sx:{mt:2,borderWidth:1,borderRadius:d.shape.borderRadius,...o},variant:"outlined",InputLabelProps:{shrink:!0},InputProps:{multiple:!0,style:{borderWidth:1,height:"40px",borderRadius:d.shape.borderRadius}},...r})}var ka=l(76164);function Ca(e){let{open:t=!1,categories:l=[],adding:a=!1,setCategories:n=(()=>{}),addCategory:s=(()=>{}),removeCategory:o=(()=>{}),onClose:r=(()=>{}),onSubmit:d=(()=>{}),totalAmount:c=0,leftAmount:m=0}=e;const p=(0,i.A)();let g=(0,Te.A)(p.breakpoints.down("sm"));const A=(e,t)=>{n([...l.map((l=>l.id===t?{...l,[e.target.name]:e.target.value}:l))])};return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(ze.A,{fullScreen:g,open:t,onClose:r,PaperProps:{sx:{width:"100%",maxWidth:650}},children:[(0,L.jsx)(Pe.A,{sx:{fontWeight:600},children:"Add Fee Map Category"}),(0,L.jsx)(h.A,{}),(0,L.jsxs)(qe.A,{sx:{padding:"10px"},children:[(0,L.jsxs)(u.A,{variant:"caption",fontSize:12,children:["Total Amount:"," ",(0,L.jsxs)("b",{style:{color:"rgb(0, 196, 159)"},children:["\u20b9",c]})]}),(0,L.jsxs)(u.A,{variant:"caption",fontSize:12,ml:2,children:["Left Amount:"," ",(0,L.jsxs)("b",{style:{color:"rgb(255, 128, 66)"},children:["\u20b9",m]})]}),l.map(((e,t)=>(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:1,container:!0,alignItems:"center",children:[(0,L.jsx)($.Ay,{xs:12,sm:3.5,item:!0,children:(0,L.jsx)(Sa,{required:!0,type:"text",name:"description",value:e.description||"",label:"Description",onChange:t=>A(t,e.id)})}),(0,L.jsx)($.Ay,{xs:12,sm:2.5,item:!0,children:(0,L.jsx)(Sa,{required:!0,type:"number",name:"amount",value:e.amount||"",label:"Amount",onChange:t=>A(t,e.id)})}),(0,L.jsx)($.Ay,{xs:12,sm:2.5,item:!0,children:(0,L.jsx)(Sa,{required:!0,type:"number",name:"taxRate",value:e.taxRate||"",label:"Tax Rate",onChange:t=>A(t,e.id)})}),(0,L.jsx)($.Ay,{xs:12,sm:2.5,item:!0,children:(0,L.jsx)(Sa,{required:!0,type:"text",name:"hsnCode",value:e.hsnCode||"",label:"HSN Code",onChange:t=>A(t,e.id)})}),(0,L.jsx)($.Ay,{xs:12,sm:1,item:!0,children:(0,L.jsx)(S.A,{title:"Remove Category",children:(0,L.jsx)(x.A,{color:"error",size:"small",onClick:()=>o(e.id),sx:{mt:1},children:(0,L.jsx)(ka.A,{})})})})]},e.id))),(0,L.jsx)(S.A,{title:"Add Category",sx:{mt:1},children:(0,L.jsx)(x.A,{color:"primary",size:"small",children:(0,L.jsx)(Re.A,{onClick:()=>s()})})})]}),(0,L.jsxs)(Be.A,{children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:r,children:"Close"}),(0,L.jsx)(We.A,{size:"small",loading:a,variant:"contained",onClick:d,children:"Submit"})]})]})})}function wa(){var e,t;const{selectedSetting:l}=(0,a.useContext)(G.A),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),[g,A]=(0,a.useState)(!1),[j,f]=(0,a.useState)([{id:1,amount:1,description:"",taxRate:"",hsnCode:""}]),b=(0,we.Wx)({initialValues:{name:"",feeMap:""},onSubmit:async e=>{try{const{data:t}=await(0,de.Jt)(ce.r.feeMapCategory.list,{params:{schoolId:l._id,search:{feeMap:null===e||void 0===e?void 0:e.feeMap}}});i(t.result)}catch(t){console.log(t)}}}),y=(0,we.Wx)({initialValues:{description:(null===c||void 0===c?void 0:c.description)||"",amount:(null===c||void 0===c?void 0:c.amount)||"",taxRate:(null===c||void 0===c?void 0:c.taxRate)||"",hsnCode:(null===c||void 0===c?void 0:c.hsnCode)||""},onSubmit:async e=>{try{const t={...e,schoolId:l._id};if(p(!0),c){const{data:e}=await(0,de.yJ)(ce.r.feeMapCategory.update+"/"+c._id,t)}else{if(j.find((e=>!e.description||!parseFloat(e.amount)||parseFloat(e.amount)<0)))return p(!1),wl.oR.error("Please mention description and amount for each category");const{data:e}=await(0,de.bE)(ce.r.feeMapCategory.createMultiple,{schoolId:l._id,feeMapId:b.values.feeMap,categories:j.map((e=>({...e,amount:parseFloat(e.amount)})))})}v(),S()}catch(t){console.log(t)}p(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{b.values.name&&(async()=>{try{var e,t;const{data:a}=await(0,de.Jt)(ce.r.feeMap.list,{params:{schoolId:l._id,search:{receiptTitle:b.values.name}}});d(null===a||void 0===a||null===(e=a.result)||void 0===e?void 0:e.map((e=>({...e,label:fa(e),value:e._id})))),b.setFieldValue("feeMap",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.error(a)}})()}),[l,b.values.name]),(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.receiptTitle.list,{params:{schoolId:l._id}});o(e.result.map((e=>({label:e.name,value:e._id})))),b.setFieldValue("name",e.result[0]._id)}catch(e){console.log(e)}})()}),[l._id]);const v=()=>{h(!1),m(null),b.handleSubmit(),y.resetForm()},S=()=>{A(!1),f([{id:1,description:"",hsnCode:"",taxRate:"",amount:""}])};(0,a.useEffect)((()=>{b.values.feeMap&&b.handleSubmit()}),[b.values.feeMap,l._id]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Fee Map Category"}),(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",mb:1},children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"name",formik:b,label:"Select Receipt Name",options:s})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"feeMap",formik:b,label:"Select Fee Maps",options:r})}),(0,L.jsx)(pe,{module:"Fee Map Category",permission:"add",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ke.A,{variant:"contained",size:"small",startIcon:(0,L.jsx)(ra.A,{}),onClick:()=>A(!0),children:"Add Fee Category"})})})]}),(0,L.jsx)(it,{actions:["edit","delete"],bodyDataModal:"Fee Map Category",module:"Fee Map Category",bodyData:n,tableKeys:va,feeMapTableKeys:!0,onEditClick:e=>{h(!0),m(e)},onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.feeMapCategory.delete+"/"+e);b.handleSubmit()}catch(t){console.error(t)}}}),(0,L.jsx)(Ye,{open:u,formik:y,formTitle:c?"Update Fee Map Category":"Add Fee Map Category",onClose:v,submitButtonTitle:c?"Update":"Submit",adding:x,children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,L.jsx)(ot.A,{formik:y,name:"description",label:"Description",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,L.jsx)(ot.A,{formik:y,name:"amount",label:"Amount",type:"number",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,L.jsx)(ot.A,{formik:y,name:"taxRate",label:"Tax Rate",required:!0,type:"number"})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,L.jsx)(ot.A,{formik:y,name:"hsnCode",label:"HSN Code",required:!0})})]})}),(0,L.jsx)(Ca,{totalAmount:null===(e=r.find((e=>e._id===b.values.feeMap)))||void 0===e?void 0:e.fee,leftAmount:(null===(t=r.find((e=>e._id===b.values.feeMap)))||void 0===t?void 0:t.fee)-(null===n||void 0===n?void 0:n.reduce(((e,t)=>e+t.amount),0)),open:g,adding:x,categories:j,setCategories:f,addCategory:()=>{let e=[...j,{id:j.length+1,taxRate:"",hsnCode:"",amount:1,description:""}];f(e)},removeCategory:e=>{let t=j.filter((t=>t.id!==e));f(t)},onClose:S,onSubmit:()=>y.handleSubmit()})]})}const Ia={width:"100%",height:"auto",bgcolor:"background.paper",p:2},Na=e=>{const t=(0,i.A)(),l=(0,Te.A)(t.breakpoints.down("sm")),[n,o]=(0,a.useState)({}),[r,d]=(0,a.useState)(""),c=(0,a.useRef)(),m=((0,a.useRef)(),e=>{const{name:t,value:l}=e.target;o((e=>({...e,[t]:l})))});return(0,L.jsx)("div",{children:(0,L.jsx)(ze.A,{fullScreen:l,open:e.open,onClose:e.onClose,sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:{xs:"100%",sm:400,md:400,lg:400}}}},children:(0,L.jsx)(s.A,{sx:Ia,children:(0,L.jsx)("form",{onSubmit:t=>{if(t.preventDefault(),!n.refer&&!n.format&&!n.concession)return d("Please fill all fields");e.onSubmit(n),o({}),d("")},ref:c,children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Add Concession"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{fullWidth:!0,required:!0,value:n.refer||"",name:"refer",label:"Reference/recommended",onChange:m,size:"small"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsxs)(dl.A,{fullWidth:!0,size:"small",required:!0,children:[(0,L.jsx)(cl.A,{children:"Concession format"}),(0,L.jsxs)(ml.A,{required:!0,value:n.format||"",name:"format",label:"Concession format",size:"small",onChange:m,children:[(0,L.jsx)(w.A,{value:"Value",children:"Value"}),(0,L.jsx)(w.A,{value:"Percentage",children:"Percentage"})]})]})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{fullWidth:!0,type:"number",required:!0,value:n.concession||"",name:"concession",label:"Concession",size:"small",onChange:m})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,L.jsxs)(v.A,{direction:"row",gap:2,children:[(0,L.jsx)(ke.A,{onClick:e.onClose,color:"error",variant:"contained",size:"small",children:"Cancel"}),(0,L.jsx)(ke.A,{onClick:()=>{c.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},variant:"contained",size:"small",sx:{background:"#1B3779","&:hover":{background:"#1B3779"}},children:"Add"})]})})]})})})})})};var Da=l(51292),Ma=l(57972),Fa=l(74605),_a=l(14256);const Ra={width:"100%",height:"auto",bgcolor:"background.paper",p:2},Ea=e=>{let{onSubmit:t=(()=>{}),onPreviewButtonClick:l=(()=>{}),onClose:n=(()=>{}),open:o=!1,payingAmount:r=0,note:d="",onUpdateNote:c=(()=>{}),collectingFee:m=!1,downloadingPreview:h=!1,payingDate:x=null,setPayingDate:p=(()=>{})}=e;const g=(0,i.A)(),A=(0,Te.A)(g.breakpoints.down("sm")),[j,f]=(0,a.useState)(""),[b,y]=(0,a.useState)({}),v=e=>{const{name:t,value:l}=e.target;y((e=>({...e,[t]:l})))};return(0,a.useEffect)((()=>{y({})}),[j]),(0,L.jsx)(ze.A,{fullScreen:A,open:o,onClose:n,children:(0,L.jsx)(s.A,{sx:Ra,children:(0,L.jsx)("form",{onSubmit:e=>{e.preventDefault(),p(""),t(j,b),y({})},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Collect Fee"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsxs)(u.A,{variant:"body",children:[(0,L.jsx)("b",{children:"Total Amount Being Paid:"})," ","\u20b9".concat(Number(r).toFixed(1))]})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(Nt.$,{dateAdapter:Mt.R,children:(0,L.jsx)(Dt.l,{format:"DD/MM/YYYY",sx:{width:"100%"},label:"Payment Date",value:x||null,onChange:e=>p(e),renderInput:e=>(0,L.jsx)(kt.A,{...e,size:"small",fullWidth:!0})})})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsxs)(dl.A,{required:!0,children:[(0,L.jsx)(Da.A,{children:"Select payment method"}),(0,L.jsxs)(Ma.A,{row:!0,value:j||"",name:"payment",onChange:e=>{const{name:t,value:l}=e.target;f(l)},children:[(0,L.jsx)($.Ay,{item:!0,xs:4,sm:4,md:2,lg:2,children:(0,L.jsx)(Fa.A,{value:"Cash",control:(0,L.jsx)(_a.A,{}),label:"CASH"})}),(0,L.jsx)($.Ay,{item:!0,xs:4,sm:4,md:2,lg:2,children:(0,L.jsx)(Fa.A,{value:"Cheque",control:(0,L.jsx)(_a.A,{}),label:"Cheque"})}),(0,L.jsx)($.Ay,{item:!0,xs:4,sm:4,md:2,lg:2,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start",md:"center",lg:"center"},children:(0,L.jsx)(Fa.A,{value:"DD",control:(0,L.jsx)(_a.A,{}),label:"DD"})}),(0,L.jsx)($.Ay,{item:!0,xs:4,sm:4,md:2,lg:2,children:(0,L.jsx)(Fa.A,{value:"Upi",control:(0,L.jsx)(_a.A,{}),label:"UPI"})}),(0,L.jsx)($.Ay,{item:!0,xs:4,sm:4,md:2,lg:2,children:(0,L.jsx)(Fa.A,{value:"Card",control:(0,L.jsx)(_a.A,{}),label:"Card"})}),(0,L.jsx)($.Ay,{item:!0,xs:4,sm:4,md:2,lg:2,children:(0,L.jsx)(Fa.A,{value:"Netbanking",control:(0,L.jsx)(_a.A,{}),label:"Netbanking"})})]})]})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{label:"Note",multiline:!0,rows:3,name:"note",value:d||"",size:"small",fullWidth:!0,onChange:e=>c(e.target.value)})}),"Cheque"===j&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Bank Name",value:b.bankName||"",fullWidth:!0,name:"bankName",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Branch Name",value:b.branchName||"",fullWidth:!0,name:"branchName",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Cheque Number",value:b.chequeNumber||"",fullWidth:!0,name:"chequeNumber",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(Nt.$,{dateAdapter:Mt.R,children:(0,L.jsx)(Dt.l,{sx:{width:"100%"},label:"Cheque Date",value:b.chequeDate||null,onChange:e=>v({target:{name:"chequeDate",value:e}}),renderInput:e=>(0,L.jsx)(kt.A,{...e,size:"small",fullWidth:!0})})})})]}),"DD"===j&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Bank Name",value:b.bankName||"",fullWidth:!0,name:"bankName",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Branch Name",value:b.branchName||"",fullWidth:!0,name:"branchName",onChange:v})})]}),"Upi"===j&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"UPI app name",value:b.upiApp||"",fullWidth:!0,name:"upiApp",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Ref Number",value:b.utrNo||"",fullWidth:!0,name:"utrNo",onChange:v})})]}),"Card"===j&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Bank Name",value:b.bankName||"",fullWidth:!0,name:"bankName",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Card Type",value:b.cardType||"",fullWidth:!0,name:"cardType",onChange:v})})]}),"Netbanking"===j&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Bank Name",value:b.bankName||"",fullWidth:!0,name:"bankName",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Reference Number",value:b.refNumber||"",fullWidth:!0,name:"refNumber",onChange:v})}),(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,L.jsx)(kt.A,{size:"small",label:"Paid By",value:b.paidByName||"",fullWidth:!0,name:"paidByName",onChange:v})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,L.jsx)(ke.A,{size:"small",onClick:()=>(f(""),void n()),variant:"contained",color:"error",children:"cancel"}),(0,L.jsx)(We.A,{size:"small",loading:m,type:"submit",variant:"contained",children:"collect"}),(0,L.jsx)(We.A,{size:"small",loading:h,onClick:e=>{e.preventDefault(),l(j,b)},variant:"contained",children:"preview"})]})]})})})})},Ta=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"10px",columnGap:"10px",backgroundColor:"dark"===t.palette.mode?"rgba(255,255,255,0.2)":"whitesmoke",borderRadius:"5px",marginTop:"80px"}}));function za(){var e,t,l,n,i,o,r,d,c,m,h;const[x,p]=(0,a.useState)([]),{selectedSetting:g}=(0,a.useContext)(G.A),[A,j]=(0,a.useState)([]),[f,b]=(0,a.useState)([]),[y,S]=(0,a.useState)([]),[k,C]=(0,a.useState)([]),[I,N]=(0,a.useState)([]),[D,M]=(0,a.useState)(null),[F,_]=(0,a.useState)(null),[R,E]=(0,a.useState)({}),[T,z]=(0,a.useState)(0),[P,q]=(0,a.useState)([]),[B,W]=(0,a.useState)(!1),[Y,J]=(0,a.useState)(!1),[V,O]=(0,a.useState)(""),[U,H]=(0,a.useState)(""),[Q,Z]=(0,a.useState)(""),[ee,te]=(0,a.useState)(!1),[le,ae]=(0,a.useState)(null),[ne,ie]=(0,a.useState)(""),[se,oe]=(0,a.useState)(ye()(Date.now())),[re,me]=(0,a.useState)(!1),[ue,he]=(0,a.useState)(!1),[xe,ge]=(0,a.useState)(!1),Ae=()=>ge(!1),je=(0,we.Wx)({initialValues:{receiptName:"",feeMap:"",class:"",section:"",student:""},onSubmit:async e=>{if(J(!0),!e.feeMap||!e.student||!e.receiptName)return _(null),J(!1);try{var t;const{data:l,status:a}=await(0,de.Jt)(ce.r.receipt.getFeeDetails,{params:{feeMapId:e.feeMap,studentId:e.student,receiptTitleId:e.receiptName,installmentId:V||(null===(t=f.filter((t=>t._id==e.feeMap))[0])||void 0===t?void 0:t.installments[0]._id),schoolId:g._id}});_(l.result)}catch(l){console.log(l)}J(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.receiptTitle.list,{params:{search:{active:!0},schoolId:g._id}});j(t.result.map((e=>({...e,label:e.name,value:e._id})))),je.setFieldValue("receiptName",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[g._id]);(0,a.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.r.class.list);S(t.result.map((e=>({...e,label:e.name,value:e._id})))),je.setFieldValue("class",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[]);(0,a.useEffect)((()=>{(async()=>{try{var e;if(!je.values.class)return je.setFieldValue("section",""),C([]);const{data:t}=await(0,de.Jt)(ce.r.section.list,{params:{search:{class:je.values.class}}});C(t.result.map((e=>({...e,label:e.name,value:e._id})))),je.setFieldValue("section",(null===(e=t.result[0])||void 0===e?void 0:e._id)||"")}catch(t){console.log(t)}})()}),[je.values.class]);(0,a.useEffect)((()=>{(async()=>{try{var e,t,l;if(!je.values.class||!je.values.receiptName)return b([]),void je.setFieldValue("feeMap","");const{data:a}=await(0,de.Jt)(ce.r.feeMap.list,{params:{search:{active:!0,receiptTitle:je.values.receiptName,class:je.values.class},schoolId:g._id}});b(null===a||void 0===a||null===(e=a.result)||void 0===e?void 0:e.map((e=>({...e,label:fa(e),value:e._id})))),je.setFieldValue("feeMap",null===a||void 0===a||null===(t=a.result)||void 0===t||null===(l=t[0])||void 0===l?void 0:l._id)}catch(a){console.log(a)}})()}),[je.values.receiptName,je.values.class,g]);(0,a.useEffect)((()=>{(async()=>{if(!je.values.feeMap||!je.values.class||!je.values.section)return N([]),void je.setFieldValue("student","");try{var e;const t={feeMapId:je.values.feeMap,classId:je.values.class,sectionId:je.values.section},{data:l}=await(0,de.Jt)(ce.r.receipt.getStudentsList,{params:{search:t,schoolId:g._id}});N(l.result.map((e=>({...e,label:"".concat(e.basicInfo.name," | ").concat(e.academicInfo.rollNumber," | ").concat(e.fatherInfo.name),value:e._id})))),je.setFieldValue("student",null===(e=l.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[je.values.feeMap,je.values.class,je.values.section]),(0,a.useEffect)((()=>{var e,t;_(null),O(null===(e=f.find((e=>e._id===je.values.feeMap)))||void 0===e||null===(t=e.installments[0])||void 0===t?void 0:t._id)}),[je.values.student,je.values.feeMap]);const fe=(0,a.useMemo)((()=>{var e;let t=F?null===(e=F.feeMapCategories)||void 0===e?void 0:e.reduce(((e,t)=>e+parseFloat(t.amountPaid)),0):0,l=parseFloat(t)+parseFloat(U||0)+parseFloat(Q||0),a=0;return le&&(a="Percentage"===le.format?Number(le.concession)/100*Number(l):Number(le.concession)),parseFloat(t)+parseFloat(U||0)+parseFloat(Q||0)-a}),[F,U,Q,le]);(0,a.useMemo)((()=>{var e;return F?null===(e=F.feeMapCategories)||void 0===e?void 0:e.reduce(((e,t)=>e+parseFloat(t.amountPaid)),0):0}),[F]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Collect Fees"}),(0,L.jsx)(X.A,{sx:{padding:1,marginBottom:2},children:(0,L.jsxs)($.Ay,{columnSpacing:1,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"receiptName",formik:je,label:"Select Receipt Name",options:A})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:je,label:"Select Class",options:y})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:je,label:"Select Section",options:k})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"feeMap",formik:je,label:"Select Fee Map",options:f})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"student",formik:je,label:"Select Students",options:I})}),(0,L.jsx)(pe,{module:"Collect Fees",permission:"view",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:(0,L.jsx)(We.A,{loading:Y,onClick:je.handleSubmit,size:"small",variant:"contained",children:"Find"})})})]})}),F?(0,L.jsx)(X.A,{sx:{padding:1,my:3,backgroundColor:e=>"dark"===e.palette.mode?"rgba(255,255,255,0.2)":"whitesmoke"},children:(0,L.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsxs)(s.A,{children:[(0,L.jsxs)(dl.A,{size:"small",sx:{width:300,mt:1},required:!0,children:[(0,L.jsx)(cl.A,{id:"demo-simple-select-filled-label",children:"Select Installment"}),(0,L.jsx)(ml.A,{size:"small",labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"installmentId",label:"Select Installment",value:V||(null===F||void 0===F||null===(e=F.feeMap)||void 0===e?void 0:e.installments[0]._id),required:!0,onChange:e=>{O(e.target.value),je.handleSubmit()},children:null===F||void 0===F||null===(t=F.feeMap)||void 0===t||null===(l=t.installments)||void 0===l?void 0:l.map(((e,t)=>{var l;return(0,L.jsxs)(w.A,{value:e._id,sx:{fontSize:12,fontWeight:500},children:[t+1,"-",e.amount,"-",null!==F&&void 0!==F&&null!==(l=F.previousReceipts)&&void 0!==l&&l.filter((t=>t.installmentPaid==e._id))[0]?"Paid":"Not-Paid"]},e._id)}))})]}),(0,L.jsxs)(u.A,{sx:{fontSize:"14px",margin:"2px 0 0 0",fontWeight:"bold",color:e=>"dark"===e.palette.mode?"orange":"red"},children:["Due Date :"," ",V?ye()(null===F||void 0===F||null===(n=F.feeMap)||void 0===n||null===(i=n.installments.filter((e=>e._id==V))[0])||void 0===i?void 0:i.dueDate).toDate().toLocaleDateString():null]})]}),(0,L.jsxs)(s.A,{children:[(0,L.jsxs)(u.A,{fontSize:"12px",children:[(0,L.jsx)("b",{children:"Past Due (All Other Academic Years) :"})," \u20b9"," ",(0,L.jsx)("span",{children:null===F||void 0===F||null===(o=F.pastDues)||void 0===o?void 0:o.toFixed(2)})]}),(0,L.jsxs)(u.A,{fontSize:"12px",children:[(0,L.jsx)("b",{children:"Total Due (Current Academic Year) :"})," \u20b9"," ",(0,L.jsx)("span",{children:null===F||void 0===F||null===(r=F.totalDueForThisAcademicYear)||void 0===r?void 0:r.toFixed(2)})]}),V&&(0,L.jsxs)(u.A,{fontSize:"12px",children:[(0,L.jsx)("b",{children:"Current Due (Current Academic Year) :"})," \u20b9"," ",(0,L.jsx)("span",{children:null===F||void 0===F||null===(d=F.currentDue)||void 0===d?void 0:d.toFixed(2)})]}),(0,L.jsxs)(u.A,{fontSize:"12px",children:[(0,L.jsx)("b",{children:"Total Paid (Current Academic Year) :"})," \u20b9"," ",(0,L.jsx)("span",{children:null===F||void 0===F||null===(c=F.totalPaid)||void 0===c?void 0:c.toFixed(2)})]})]})]})}):null,null!==F&&void 0!==F&&null!==(m=F.previousReceipts)&&void 0!==m&&m.length?(0,L.jsxs)(X.A,{sx:{padding:"10px",margin:"10px 0"},children:[(0,L.jsxs)(u.A,{fontSize:"14px",mb:2,children:[(0,L.jsx)("b",{children:"Previous Receipts:"})," PP - Partially Paid, PPD - Partial Payment Done, FP - Full Payment"]}),(0,L.jsx)(s.A,{sx:{display:"flex",alignItems:"center",marginRight:"10px",columnGap:"5px"},children:F.previousReceipts.map((e=>(0,L.jsxs)(We.A,{loading:B===e._id,size:"small",variant:"outlined",disabled:!!B,onClick:t=>(async(e,t)=>{e.preventDefault();try{W(t);const e=await(0,de.Jt)(ce.r.receipt.downloadReceipt+"/"+t,{validateStatus:e=>e<500,responseType:"blob"});if(200===e.status)Nl("application/pdf",e.data,"receipt");else{var l;const t=await new Response(e.data).text();wl.oR.error(null===(l=JSON.parse(t))||void 0===l?void 0:l.message)}}catch(a){console.log(a)}W("")})(t,e._id),endIcon:(0,L.jsx)(Tl.A,{}),children:[ye()(e.paidAt).format("DD/MM/YYYY"),"-",e.partiallyPaid?e.partialPaymentCompleted?"PPD":"PP":"FP"]},e._id)))})]}):null,F?(0,L.jsxs)(Je.A,{component:X.A,children:[(0,L.jsxs)(Ve.A,{size:"small",children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>e.palette.primary.main},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{sx:{color:"white"},align:"center",children:"#SL"}),(0,L.jsx)(Le.A,{sx:{color:"white"},align:"center",children:"Fee Particular"}),(0,L.jsx)(Le.A,{sx:{color:"white"},align:"center",children:"Due Amount"}),(0,L.jsx)(Le.A,{sx:{color:"white"},align:"center",children:"SGST%"}),(0,L.jsx)(Le.A,{sx:{color:"white"},align:"center",children:"CGST%"}),(0,L.jsx)(Le.A,{sx:{color:"white"},align:"center",children:"Collecting Amount"}),(0,L.jsx)(Le.A,{sx:{color:"white"},align:"center",children:"Net Payable"})]})}),(0,L.jsx)(He.A,{children:null===F||void 0===F||null===(h=F.feeMapCategories)||void 0===h?void 0:h.map(((e,t)=>{var l;return(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:t+1}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(u.A,{children:e.description})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsxs)(u.A,{fontWeight:"bold",children:["\u20b9 ",e.amount]})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(u.A,{children:e.taxRate/2})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(u.A,{children:e.taxRate/2})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(Sa,{disabled:!e.amount,type:"number",style:{maxWidth:"150px",margin:"4px 0"},value:e.amountPaid||"",label:"Amount",onChange:t=>((e,t)=>{var l;let a=null===(l=F.feeMapCategories)||void 0===l?void 0:l.map((l=>l._id===t._id?{...l,amountPaid:e.target.value}:l));_({...F,feeMapCategories:a})})(t,e)})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(u.A,{children:null===(l=1.18*e.amountPaid)||void 0===l?void 0:l.toFixed(2)})})]},t)}))})]}),(0,L.jsxs)(Ta,{children:[(0,L.jsxs)(v.A,{direction:"row",columnGap:2,children:[(0,L.jsx)(Sa,{type:"number",name:"penalty",value:U,onChange:e=>H(e.target.value),label:"Penalty/Fine",style:{marginBottom:"15px"}}),(0,L.jsx)(Sa,{type:"number",name:"miscellaneous",value:Q,onChange:e=>Z(e.target.value),label:"Miscellaneous"})]}),(0,L.jsxs)(s.A,{sx:{display:"flex",columnGap:2,alignItems:"center"},children:[(0,L.jsxs)(v.A,{direction:"row",columnGap:2,children:[(0,L.jsx)(u.A,{sx:{textAlign:"center",fontWeight:"bold"},children:le?"Value"===(null===le||void 0===le?void 0:le.format)?"Concession : \u20b9".concat(null===le||void 0===le?void 0:le.concession):"Concession : ".concat(null===le||void 0===le?void 0:le.concession,"%"):""}),(0,L.jsx)(ke.A,{color:"warning",onClick:()=>{le?ae(null):te(!0)},variant:"contained",size:"small",children:le?"remove concession":"add concession"})]}),(0,L.jsx)(pe,{module:"Collect Fees",permission:"add",children:(0,L.jsx)(ke.A,{onClick:()=>ge(!0),variant:"contained",size:"small",children:"collect fee"})})]})]})]}):null,(0,L.jsx)(Na,{onSubmit:e=>{ae(e),te(!1)},open:ee,onClose:()=>te(!1)}),(0,L.jsx)(Ea,{collectingFee:re,downloadingPreview:ue,onPreviewButtonClick:async(e,t)=>{var l;he(!0);const a={penalty:U||0,miscellaneous:Q||0,payingDate:se?ye()(se).format("DD/MM/YYYY"):null,note:ne,receiptTitleId:je.values.receiptName,feeMapId:je.values.feeMap,studentId:je.values.student,paymentMode:e,feeParticulars:null===F||void 0===F||null===(l=F.feeMapCategories)||void 0===l?void 0:l.filter((e=>e.amountPaid>0)),installmentId:V,concessionDetails:le?{amount:le.concession,referredBy:le.refer,givenAs:le.format}:{},schoolId:g._id};switch(e){case"Cash":a.cashDetails={};break;case"Cheque":a.chequeDetails={bankName:t.bankName,branchName:t.branchName,chequeNumber:t.chequeNumber,chequeDate:t.chequeDate};break;case"DD":a.ddDetails={bankName:t.bankName,branchName:t.branchName};break;case"Upi":a.upiDetails={upiApp:t.upiApp,utrNo:t.utrNo};break;case"Card":a.cardDetails={bankName:t.bankName,cardType:t.cardType};break;case"Netbanking":a.netBankingDetails={bankName:t.bankName,refNumber:t.refNumber,paidByName:t.paidByName}}try{const e=await(0,de.bE)(ce.r.receipt.previewReceipt,a,{responseType:"blob",validateStatus:e=>e<500});if(200===e.status)Nl("application/pdf",e.data,"Receipt_preview");else{var n;const t=await new Response(e.data).text();wl.oR.error(null===(n=JSON.parse(t))||void 0===n?void 0:n.message)}}catch(i){console.error("Network error:",i)}finally{he(!1)}},feeReceipt:F,onSubmit:async(e,t)=>{var l;me(!0);const a={penalty:U||0,miscellaneous:Q||0,payingDate:se?ye()(se).format("DD/MM/YYYY"):null,note:ne,receiptTitleId:je.values.receiptName,feeMapId:je.values.feeMap,studentId:je.values.student,paymentMode:e,feeParticulars:null===F||void 0===F||null===(l=F.feeMapCategories)||void 0===l?void 0:l.filter((e=>e.amountPaid>0)),installmentId:V,concessionDetails:le?{amount:le.concession,referredBy:le.refer,givenAs:le.format}:{},schoolId:g._id};switch(e){case"Cash":a.cashDetails={};break;case"Cheque":a.chequeDetails={bankName:t.bankName,branchName:t.branchName,chequeNumber:t.chequeNumber,chequeDate:t.chequeDate};break;case"DD":a.ddDetails={bankName:t.bankName,branchName:t.branchName};break;case"Upi":a.upiDetails={upiApp:t.upiApp,utrNo:t.utrNo};break;case"Card":a.cardDetails={bankName:t.bankName,cardType:t.cardType};break;case"Netbanking":a.netBankingDetails={bankName:t.bankName,refNumber:t.refNumber,paidByName:t.paidByName}}try{const e=await(0,de.bE)(ce.r.receipt.collectFees,a,{responseType:"blob",validateStatus:e=>e<500});if(200===e.status)Nl("application/pdf",e.data,"Receipt_preview"),Ae(),je.handleSubmit(),ae(null),H(""),Z("");else{var n;const t=await new Response(e.data).text();wl.oR.error(null===(n=JSON.parse(t))||void 0===n?void 0:n.message)}}catch(i){console.error("Network error:",i)}finally{me(!1)}},open:xe,onClose:Ae,onUpdateNote:ie,payingAmount:fe,note:ne,payingDate:se,setPayingDate:oe})]})}const Pa=[{name:"Receipt",key:"receiptTitle"},{name:"Roll No",key:"rollNo"},{name:"Class",key:"class"},{name:"Section",key:"section"},{name:"Name",key:"name"},{name:"Father",key:"fatherName"},{name:"Phone",key:"phone"},{name:"Amount",key:"amount"},{name:"Concession",key:"concession"},{name:"Fine",key:"fine"},{name:"Miscellaneous",key:"miscellaneous"},{name:"Paid",key:"paid"},{name:"Balance",key:"balance"}];function qa(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[p,g]=(0,a.useState)(!1),[A,j]=(0,a.useState)(!1),f=(0,we.Wx)({initialValues:{academicYear:"",receiptName:"",feeMap:"",class:"",section:""},onSubmit:async t=>{console.log(t,"values"),g(!0);try{const{data:a,status:n}=await(0,de.Jt)(ce.r.receipt.getBalanceFeeReport,{params:{classId:t.class,sectionId:t.section,feeMapId:t.feeMap,academicYearId:t.academicYear,schoolId:e._id}});l(a.result)}catch(a){console.log(a)}g(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);f.setFieldValue("academicYear",e.result[0]._id),i(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.receiptTitle.list,{params:{search:{active:!0},schoolId:e._id}});r(l.result.map((e=>({label:e.name,value:e._id})))),f.setFieldValue("receiptName",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});c(t.result.map((e=>({...e,label:e.name,value:e._id})))),f.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,a.useEffect)((()=>{f.values.class&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:f.values.class}}});f.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id),u(l.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(l){console.log(l)}})()}),[f.values.class]),(0,a.useEffect)((()=>{f.values.receiptName&&f.values.class&&(async()=>{try{var t,l;const{data:a}=await(0,de.Jt)(ce.r.feeMap.list,{params:{schoolId:e._id,search:{active:!0,class:f.values.class,receiptTitle:f.values.receiptName}}});x(null===a||void 0===a||null===(t=a.result)||void 0===t?void 0:t.map((e=>({...e,label:fa(e),value:e._id})))),f.setFieldValue("feeMap",null===(l=a.result[0])||void 0===l?void 0:l._id)}catch(a){console.error(a)}})()}),[f.values.receiptName,f.values.class,e._id]),(0,a.useEffect)((()=>{l([])}),[f.values.feeMap,e._id]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Balance Fee Report"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:f,label:"Select Academic Year",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"receiptName",formik:f,label:"Select Receipt Name",options:o})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:f,label:"Select Class",options:d})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:f,label:"Select Section",options:m})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"feeMap",formik:f,label:"Select Fee Map",options:h})}),(0,L.jsx)(pe,{module:"Balance Fee",permission:"view",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:(0,L.jsx)(We.A,{size:"small",variant:"contained",loading:p,onClick:f.handleSubmit,children:"Find"})})})]})}),(0,L.jsx)(it,{actions:[],bodyDataModal:"Balance Fee Report",bodyData:t,tableKeys:Pa}),(0,L.jsx)(pe,{module:"Balance Fee",permission:"view",children:t.length>0&&(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(s.A,{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,L.jsx)(We.A,{loading:A,onClick:async()=>{j(!0);const t=f.values;try{const a=await(0,de.Jt)(ce.r.receipt.downloadBalanceFeeReport,{params:{classId:t.class,sectionId:t.section,feeMapId:t.feeMap,academicYearId:t.academicYear,schoolId:e._id},validateStatus:e=>e<500,responseType:"blob"});if(200===a.status)Nl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",a.data,"Balance_Report.xlsx");else{var l;const e=await new Response(a.data).text();wl.oR.error(null===(l=JSON.parse(e))||void 0===l?void 0:l.message)}}catch(a){console.log(a)}j(!1)},size:"small",variant:"contained",color:"primary",sx:{mt:3},children:"DOWNLOAD"})})})})]})}const Ba=[{name:"Receipt No",key:"receiptNumber"},{name:"Paid Date",key:"paidAt",isDate:!0},{name:"Amount",key:"amountPaid"},{name:"Payment Mode",key:"paymentMode"},{name:"Name",key:"name"},{name:"Class",key:"class"},{name:"Section",key:"section"},{name:"Admission No",key:"admissionNumber"}];var Wa=l(71462);const Ya={label:"All",value:"all"},Ja=[{label:"Receipt No",value:"receiptNumber"},{label:"Amount",value:"amountPaid"},{label:"Payment Mode",value:"paymentMode"},{label:"Name",value:"name"},{label:"Admission Number",value:"admissionNumber"}],Va=e=>{let{data:t}=e;const[l,n]=(0,a.useState)(!1);return(0,L.jsx)(We.A,{loading:l,size:"small",variant:"contained",onClick:async e=>{e.preventDefault();try{n(!0);const e=await(0,de.Jt)(ce.r.receipt.downloadReceiptStaff+"/"+(null===t||void 0===t?void 0:t._id),{validateStatus:e=>e<500,responseType:"blob"});if(200===e.status)Nl("application/pdf",e.data,"receipt");else{var l;const t=await new Response(e.data).text();wl.oR.error(null===(l=JSON.parse(t))||void 0===l?void 0:l.message)}}catch(a){console.log(a)}n(!1)},children:"Staff Copy"})};function Oa(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[g,A]=(0,a.useState)([]),[j,f]=(0,a.useState)("admissionNumber"),[b,y]=(0,a.useState)(""),[v,S]=(0,a.useState)(null),[k,C]=(0,a.useState)([]),[w,I]=(0,a.useState)([]),[N,D]=(0,a.useState)(!1),M=(0,we.Wx)({initialValues:{academicYear:"",collected:"",feeReceipt:"",feeMap:"",class:"",section:"",fromDate:ye()(new Date),toDate:ye()(new Date)},onSubmit:async t=>{try{var l,a,n;let i={academicYearId:t.academicYear,cashierId:t.collected,receiptTitleId:t.feeReceipt,feeMapId:t.feeMap,fromDate:t.fromDate,toDate:t.toDate,sectionId:t.section,classId:t.class,schoolId:e._id};const{data:s}=await(0,de.Jt)(ce.r.receipt.getAmountCollectedWithDifferentModes,{params:i}),{data:o}=await(0,de.Jt)(ce.r.receipt.getAllReceipts,{params:i});C(null===o||void 0===o||null===(l=o.result)||void 0===l?void 0:l.map((e=>({...e,name:e.payeeDetails.name,class:e.payeeDetails.className,section:e.payeeDetails.sectionName,admissionNumber:e.payeeDetails.admissionNumber})))),I(null===o||void 0===o||null===(a=o.result)||void 0===a?void 0:a.map((e=>({...e,name:e.payeeDetails.name,class:e.payeeDetails.className,section:e.payeeDetails.sectionName,admissionNumber:e.payeeDetails.admissionNumber})))),S(null===(n=s.result)||void 0===n?void 0:n.finalResult)}catch(i){}}});(0,a.useEffect)((()=>{S(null)}),[M.values]);(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);M.setFieldValue("academicYear",e.result[0]._id),i(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.receiptTitle.list,{params:{schoolId:e._id}});r(l.result.map((e=>({label:e.name,value:e._id})))),M.setFieldValue("feeReceipt",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});c(t.result.map((e=>({...e,label:e.name,value:e._id})))),M.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})(),(async()=>{try{var t,l,a;const{data:n}=await(0,de.Jt)(ce.r.role.list,{params:{search:{$or:[{name:"ACCOUNTANT"},{name:"SUPER ADMIN"},{name:"ADMIN"}]},schoolId:e._id}});let i=n.result.map((e=>e._id));const s=await(0,de.Jt)(ce.r.employee.list,{params:{search:{role:{$in:i}},schoolId:e._id}});A(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.result.map((e=>{var t;return{...e,label:null===(t=e.role)||void 0===t?void 0:t.name,value:null===e||void 0===e?void 0:e._id}}))),M.setFieldValue("collected",null===s||void 0===s||null===(l=s.data)||void 0===l||null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(n){console.log(n)}})()}),[e._id]),(0,a.useEffect)((()=>{M.values.class&&(async()=>{try{var t;const l={};"all"!==M.values.class&&(l.class=M.values.class);const{data:a}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:l}});M.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id),h(a.result.map((e=>({...e,label:"".concat(e.class.name," - ").concat(e.name),value:e._id}))))}catch(l){console.log(l)}})()}),[M.values.class,e]),(0,a.useEffect)((()=>{M.values.class&&M.values.feeReceipt&&(async()=>{const t={active:!0};"all"!==M.values.class&&(t.class=M.values.class),"all"!==M.values.receiptName&&(t.receiptTitle=M.values.feeReceipt);try{var l,a;const{data:n}=await(0,de.Jt)(ce.r.feeMap.list,{params:{schoolId:e._id,search:t}});console.log(n.result,"result fee maps"),p(null===n||void 0===n||null===(l=n.result)||void 0===l?void 0:l.map((e=>({...e,label:fa(e),value:e._id})))),M.setFieldValue("feeMap",null===(a=n.result[0])||void 0===a?void 0:a._id)}catch(n){console.error(n)}})()}),[M.values.class,M.values.feeReceipt,e]);return(0,a.useEffect)((()=>{j&&b?(()=>{const e=k.filter((e=>{var t,l,a;return null===(t=e[j])||void 0===t||null===(l=t.toString())||void 0===l||null===(a=l.toLowerCase())||void 0===a?void 0:a.includes(b.toLowerCase())}));I(e)})():I(k)}),[j,b]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Fee Overview"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:3},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",mb:1},children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:M,label:"Select Academic Year",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"collected",formik:M,label:"Select Collected By",options:[Ya,...g]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"feeReceipt",formik:M,label:"Select Fee Receipt",options:[Ya,...o]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:M,label:"Select Class",options:[Ya,...d]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:M,label:"Select Section",options:[Ya,...m]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"feeMap",formik:M,label:"Select Fee Map",options:[Ya,...x]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:M,name:"fromDate",label:"From Date"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:M,name:"toDate",label:"To Date"})}),(0,L.jsx)(pe,{module:"Fee Overview",permission:"view",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ke.A,{onClick:M.handleSubmit,variant:"contained",children:"Find"})})})]})}),(0,L.jsx)(X.A,{sx:{width:"100%",overflow:"hidden"},children:(0,L.jsx)(Je.A,{component:X.A,children:(0,L.jsxs)(Ve.A,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,L.jsx)(Oe.A,{style:{background:"rgb(27 55 121)"},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"Payment"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"Total"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"Cash"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"Cheque"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"DD"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"Chalan"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"NetBanking"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)("span",{className:"class-table-header",children:"Online"})})]})}),v?(0,L.jsx)(He.A,{children:(0,L.jsxs)(Ue.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,L.jsxs)(Le.A,{align:"center",children:["Amount",(0,L.jsx)(Wa.A,{size:"small",fontSize:"10px"})]}),(0,L.jsx)(Le.A,{align:"center",style:{textTransform:"capitalize"},children:Object.values(v).reduce(((e,t)=>e+parseInt(t)),0)}),(0,L.jsx)(Le.A,{align:"center",style:{textTransform:"capitalize"},children:v.Cash}),(0,L.jsx)(Le.A,{align:"center",style:{textTransform:"capitalize"},children:v.Cheque}),(0,L.jsx)(Le.A,{align:"center",style:{textTransform:"capitalize"},children:v.DD}),(0,L.jsx)(Le.A,{align:"center",style:{textTransform:"capitalize"},children:v.Card}),(0,L.jsx)(Le.A,{align:"center",style:{textTransform:"capitalize"},children:v.Netbanking}),(0,L.jsx)(Le.A,{align:"center",style:{textTransform:"capitalize"},children:v.Upi})]})}):(0,L.jsx)(He.A,{children:(0,L.jsx)(Ue.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,L.jsx)(Le.A,{align:"center",colSpan:8,children:(0,L.jsx)(u.A,{variant:"h6",sx:{textAlign:"center"},children:"No data found"})})})})]})})}),(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",my:1},children:[(0,L.jsx)($.Ay,{item:!0,xs:12,md:3,children:(0,L.jsx)(pl,{label:"Search By",options:Ja,value:j,onChange:e=>f(e.target.value),isSearch:!1})}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:3,sx:{alignSelf:"center"},children:(0,L.jsx)(kt.A,{label:"Search",size:"small",sx:{mt:2},value:b,onChange:e=>y(e.target.value),fullWidth:!0})})]}),(0,L.jsx)(it,{actions:["custom"],bodyDataModal:"data",bodyData:w,tableKeys:Ba,CustomAction:Va}),k.length&&(0,L.jsx)(s.A,{sx:{display:"flex",width:"100%",justifyContent:"flex-end",padding:"10px",alignItems:"center"},children:(0,L.jsx)(We.A,{variant:"contained",size:"small",loading:N,onClick:async()=>{try{const l={academicYearId:M.values.academicYear,cashierId:M.values.collected,receiptTitleId:M.values.feeReceipt,feeMapId:M.values.feeMap,fromDate:M.values.fromDate,toDate:M.values.toDate,sectionId:M.values.section,classId:M.values.class,schoolId:e._id};D(!0);const a=await(0,de.Jt)(ce.r.receipt.downloadFeeOverView,{params:l,validateStatus:e=>e<500,responseType:"blob"});if(200===a.status)Nl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",a.data,"Fee_overview");else{var t;const e=await new Response(a.data).text();wl.oR.error(null===(t=JSON.parse(e))||void 0===t?void 0:t.message)}}catch(l){console.log(l)}D(!1)},children:"Download"})})]})}const Ua=[{name:"Receipt Number",key:"receiptNumber"},{name:"Name",key:"name"},{name:"Roll No",key:"roleNo"},{name:"Amount",key:"amountPaid"},{name:"Bank Name",key:"bankName"},{name:"Bank Branch",key:"branchName"},{name:"Cheque Number",key:"chequeNumber"},{name:"Date",key:"chequeDate",isDate:!0}];var La=l(95382),Ha=l(81637);const Ga=e=>{let{onUpdate:t=(()=>{}),data:l={},onNavigateFeeMap:n=(()=>{})}=e;const[i,s]=(0,a.useState)("");console.log(null===l||void 0===l?void 0:l.reconciliationStatus,"llloosing");const o=async(e,l)=>{console.log(e,l,"pooo");try{s(e);const a={action:e};await(0,de.yJ)("".concat(ce.r.receipt.updateSingleReceiptReconciliationStatusStatus,"/").concat(l),a),t()}catch(a){console.log(a)}s("")};return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(v.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,L.jsx)(pe,{module:"Reconciliation",permission:"update",children:(0,L.jsx)(S.A,{title:"Approve",children:(0,L.jsx)(x.A,{disabled:"Approve"===i,size:"small",onClick:()=>o("Approve",null===l||void 0===l?void 0:l._id),children:"Approve"===i?(0,L.jsx)(Ha.A,{size:20}):(0,L.jsx)(La.A,{color:"primary",fontSize:"12px"})})})}),(0,L.jsx)(pe,{module:"Reconciliation",permission:"update",children:"Rejected"!=(null===l||void 0===l?void 0:l.reconciliationStatus)&&(0,L.jsx)(S.A,{title:"Reject",children:(0,L.jsx)(x.A,{disabled:"Reject"===i,size:"small",onClick:()=>o("Reject",null===l||void 0===l?void 0:l._id),children:"Reject"===i?(0,L.jsx)(Ha.A,{size:20}):(0,L.jsx)(Et.A,{color:"error",fontSize:"12px"})})})})]})})};function Qa(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),n=async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.receipt.getReceiptsPaidWithCheque,{params:{schoolId:e._id}});l(t.result.map((e=>{var t,l,a,n,i,s;return{...e,roleNo:null===e||void 0===e||null===(t=e.payeeDetails)||void 0===t?void 0:t.rollNumber,name:null===e||void 0===e||null===(l=e.payeeDetails)||void 0===l?void 0:l.name,bankName:null===e||void 0===e||null===(a=e.chequeDetails)||void 0===a?void 0:a.bankName,branchName:null===e||void 0===e||null===(n=e.chequeDetails)||void 0===n?void 0:n.branchName,chequeNumber:null===e||void 0===e||null===(i=e.chequeDetails)||void 0===i?void 0:i.chequeNumber,chequeDate:null===e||void 0===e||null===(s=e.chequeDetails)||void 0===s?void 0:s.chequeDate}})))}catch(t){console.log(t)}};return(0,a.useEffect)((()=>{n()}),[e._id]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Fee Reconciliation"}),(0,L.jsx)(it,{actions:["custom"],bodyDataModal:"Fee Reconciliation",bodyData:t,tableKeys:Ua,CustomAction:Ga,onUpdate:n})]})}const Ka=[{name:"Hostel Name",key:"name"},{name:"Hostel Type",key:"type"},{name:"Address",key:"address"}];function Za(e){let{open:t,onClose:l,title:a,children:n}=e;return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(ze.A,{onClose:l,"aria-labelledby":"customized-dialog-title",open:t,children:[(0,L.jsx)(Pe.A,{sx:{m:0,p:2,fontWeight:600},id:"customized-dialog-title",children:a}),(0,L.jsx)(x.A,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:8},children:(0,L.jsx)(Bl.A,{})}),(0,L.jsx)(qe.A,{sx:{padding:"10px"},children:n})]})})}const Xa=(0,n.Ay)(Ue.A)((e=>{let{theme:t,isDarkMode:l}=e;return{width:"200px",color:l?"#fff":"#000","&:nth-of-type(odd)":{backgroundColor:l?"transparent":"#F0F8FF"}}})),$a=(0,n.Ay)(Le.A)((e=>{let{theme:t,isDarkMode:l}=e;return{width:"200px",border:"1px solid gray",color:l?"#fff":"#000",["&.".concat(pa.A.head)]:{backgroundColor:l?"transparent":"blue",color:l?"#fff":"#000"},["&.".concat(pa.A.body)]:{fontSize:15}}}));function en(e){let{title:t="",onClose:l=(()=>{}),open:n=!0,tableData:i,schoolName:s}=e;const{isDarkMode:o}=(0,a.useContext)(_e.A);return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(Za,{title:t,onClose:l,open:n,children:(0,L.jsx)(Ve.A,{"aria-label":"customized table",children:(0,L.jsxs)(He.A,{children:[(0,L.jsxs)(Xa,{isDarkMode:o,children:[(0,L.jsx)($a,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"School Name"}),(0,L.jsx)($a,{align:"left",width:100,isDarkMode:o,children:s})]}),(0,L.jsxs)(Xa,{isDarkMode:o,children:[(0,L.jsx)($a,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Hostel Name"}),(0,L.jsx)($a,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.name})]}),(0,L.jsxs)(Xa,{isDarkMode:o,children:[(0,L.jsxs)($a,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:["Hostel Type"," "]}),(0,L.jsx)($a,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.type})]}),(0,L.jsxs)(Xa,{isDarkMode:o,children:[(0,L.jsx)($a,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Address"}),(0,L.jsx)($a,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.address})]}),(0,L.jsxs)(Xa,{isDarkMode:o,children:[(0,L.jsx)($a,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Note"}),(0,L.jsx)($a,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.note})]}),(0,L.jsxs)(Xa,{isDarkMode:o,children:[(0,L.jsx)($a,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Created"}),(0,L.jsx)($a,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.createdAt})]})]})})})})}const tn=[{label:"Boys",value:"Boys"},{label:"Girls",value:"Girls"},{label:"Combined",value:"Combined"}];function ln(){var e;const{selectedSetting:t}=(0,a.useContext)(G.A),[l,n]=(0,a.useState)([]),[i,s]=(0,a.useState)([]),[o,r]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[h,x]=(0,a.useState)({open:!1,tableData:"",action:()=>{}}),p=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.hostel.list);n(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{p(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:t._id}}),l=e.result.filter((e=>"WARDEN"===e.role.name));s(l.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(e){console.log(e)}})()}),[t]);const g=(0,we.Wx)({initialValues:{name:(null===m||void 0===m?void 0:m.name)||"",type:(null===m||void 0===m?void 0:m.type)||"",warden:(null===m||void 0===m||null===(e=m.warden)||void 0===e?void 0:e._id)||"",address:(null===m||void 0===m?void 0:m.address)||"",contactNumber:(null===m||void 0===m?void 0:m.contactNumber)||"",note:(null===m||void 0===m?void 0:m.note)||""},onSubmit:async e=>{try{if(c(!0),m){const{data:t}=await(0,de.yJ)(ce.r.hostel.update+"/"+m._id,e)}else{const{data:t}=await(0,de.bE)(ce.r.hostel.create,e)}u(null),A()}catch(t){console.log(t),c(!1)}c(!1)},enableReinitialize:!0}),A=()=>{r(!1),p(),u(null)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Hostel"}),(0,L.jsx)(it,{actions:["edit","delete","view"],bodyDataModal:"hostel",module:"Manage Hostel",bodyData:l,tableKeys:Ka,onDeleteClick:async e=>{try{const{data:t}=await(0,de.yH)(ce.r.hostel.delete+"/"+e);p()}catch(t){console.log(t)}},onEditClick:e=>{r(!0),u(e)},onViewClick:e=>{console.log(e,"vvvvvb"),x({...h,open:!0,tableData:e,schoolName:null===t||void 0===t?void 0:t.name})}}),(0,L.jsx)(Ee,{title:"Add Hostel",module:"Manage Hostel",onAddClick:()=>{r(!0)}}),(0,L.jsx)(Ye,{open:o,formik:g,formTitle:m?"Update Hostel":"Add Hostel",onClose:A,submitButtonTitle:m?"Update":"Submit",adding:d,children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:g,name:"name",label:"Hostel Name",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:g,name:"contactNumber",label:"Phone No.",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:g,name:"type",label:"Hostel Type",required:!0,options:tn})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:g,name:"warden",label:"Select Warden",required:!0,options:i})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:g,name:"address",label:"Address",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:g,name:"note",label:"Note"})})]})}),(0,L.jsx)(en,{title:"Hostel Information",open:null===h||void 0===h?void 0:h.open,tableData:null===h||void 0===h?void 0:h.tableData,schoolName:null===h||void 0===h?void 0:h.schoolName,onClose:()=>{x({...h,open:!1})}})]})}const an=[{name:"Room Name",key:"name"},{name:"Specification",key:"specification"}];function nn(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(null),[s,o]=(0,a.useState)(!1),[r,d]=(0,a.useState)(!1),c=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.roomType.list);l(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{c()}),[e]);const m=(0,we.Wx)({initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",specification:(null===n||void 0===n?void 0:n.specification)||""},onSubmit:async e=>{try{if(o(!0),n){const{data:t}=await(0,de.yJ)(ce.r.roomType.update+"/"+n._id,e)}else{const{data:t}=await(0,de.bE)(ce.r.roomType.create,e)}o(!1),c(),u()}catch(t){console.log(t),o(!1)}},enableReinitialize:!0}),u=()=>{d(!1),i(null)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Hostel Room Type"}),(0,L.jsx)(it,{actions:["edit","delete"],tableKeys:an,module:"Manage Room Type",bodyDataModal:"room",bodyData:t,onDeleteClick:async e=>{try{const{data:t}=await(0,de.yH)(ce.r.roomType.delete+"/"+e);c()}catch(t){console.log(t)}},onEditClick:e=>{console.log(e,"iiii"),d(!0),i(e)}}),(0,L.jsx)(Ee,{title:"Add Room Type",module:"Manage Room Type",onAddClick:()=>{d(!0)}}),(0,L.jsx)(Ye,{open:r,formik:m,formTitle:n?"Update Room Type":"Add Room Type",onClose:u,submitButtonTitle:n?"Update":"Submit",adding:s,children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:m,name:"name",label:"Name",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:m,name:"specification",label:"Specification",required:!0})})]})})]})}const sn=[{name:"Room no",key:"number"},{name:"Room Type",key:"roomType"},{name:"Total Seat",key:"totalBeds"},{name:"Hostel Name",key:"hostelName"}],on=(0,n.Ay)(Ue.A)((e=>{let{theme:t,isDarkMode:l}=e;return{width:"200px",color:l?"#fff":"#000","&:nth-of-type(odd)":{backgroundColor:l?"transparent":"#F0F8FF"}}})),rn=(0,n.Ay)(Le.A)((e=>{let{theme:t,isDarkMode:l}=e;return{width:"300px",border:"1px solid gray",color:l?"#fff":"#000",["&.".concat(pa.A.head)]:{backgroundColor:l?"transparent":"blue",color:l?"#fff":"#000"},["&.".concat(pa.A.body)]:{fontSize:15}}}));function dn(e){var t;let{title:l="",onClose:n=(()=>{}),open:i=!0,tableData:o,schoolName:r}=e;const{isDarkMode:d}=(0,a.useContext)(_e.A);return console.log(o,"tableData"),(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(Za,{title:l,onClose:n,open:i,children:(0,L.jsx)(Ve.A,{"aria-label":"customized table",children:(0,L.jsxs)(He.A,{children:[(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"School Name"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:r})]}),(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Room No"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.number})]}),(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Seat Total"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.totalBeds})]}),(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Bed"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o||null===(t=o.beds)||void 0===t?void 0:t.map((e=>(0,L.jsxs)(s.A,{sx:{width:"100%",display:"flex",flexDirection:"column",my:1},children:[(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Bed Name"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.name)||"NA"})]}),(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Bed Position"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.position)||"NA"})]}),(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:600,width:"200px"},isDarkMode:d,children:"Bed Allocated"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:null!==e&&void 0!==e&&e.allocated?"Yes":"No"})]})]},e.name)))})]}),(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Note"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.note})]}),(0,L.jsxs)(on,{isDarkMode:d,children:[(0,L.jsx)(rn,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Created"}),(0,L.jsx)(rn,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.createdAt})]})]})})})})}function cn(){var e,t;const{selectedSetting:l}=(0,a.useContext)(G.A),{isDarkMode:n}=(0,a.useContext)(_e.A),[i,o]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[A,j]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[S,k]=(0,a.useState)({open:!1,tableData:"",action:()=>{}}),C=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.room.list);o(e.result.map((e=>{var t,l;return{...e,hostelName:null===e||void 0===e||null===(t=e.hostel)||void 0===t?void 0:t.name,roomType:null===(l=e.type)||void 0===l?void 0:l.name}})))}catch(e){console.log(e)}};(0,a.useEffect)((()=>{C(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.roomType.list);d(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.hostel.list);m(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[l]);const w=(0,we.Wx)({initialValues:{number:(null===p||void 0===p?void 0:p.number)||"",type:(null===p||void 0===p||null===(e=p.type)||void 0===e?void 0:e._id)||"",totalBeds:(null===p||void 0===p?void 0:p.totalBeds)||0,hostel:(null===p||void 0===p||null===(t=p.hostel)||void 0===t?void 0:t._id)||"",note:(null===p||void 0===p?void 0:p.note)||"",beds:(null===p||void 0===p?void 0:p.beds)||[{id:1,name:"",position:"",allocated:!1}]},onSubmit:async e=>{try{if(x(!0),p){delete e.beds;const{data:t}=await(0,de.yJ)(ce.r.room.update+"/"+p._id,e)}else{let t={...e,totalBeds:e.beds.length};const{data:l}=await(0,de.bE)(ce.r.room.create,t)}I(),C(),x(!1)}catch(t){console.log(t),x(!1)}},enableReinitialize:!0}),I=()=>{v(!1),g(null),w.resetForm()},N=(e,t)=>{w.setFieldValue("beds",w.values.beds.map((l=>l.id===t.id?{...l,[e.target.name]:e.target.value}:l)))};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Hostel Room & Beds"}),(0,L.jsx)(it,{actions:["edit","delete","view"],module:"Manage Room Bed",bodyDataModal:"room",bodyData:i,tableKeys:sn,onDeleteClick:async e=>{try{const{data:t}=await(0,de.yH)(ce.r.room.delete+"/"+e);C()}catch(t){console.log(t)}},onEditClick:e=>{v(!0),g(e)},onViewClick:e=>{k({...S,open:!0,tableData:e,schoolName:l.name}),C()}}),(0,L.jsx)(Ee,{title:"Add Room & Bed",module:"Manage Room Bed",onAddClick:()=>{v(!0)}}),(0,L.jsx)(Ye,{open:y,formik:w,formTitle:p?"Update Room & Bed":"Add Room & Bed",onClose:I,submitButtonTitle:p?"Update":"Submit",adding:h,children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:w,name:"number",label:"Room No.",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:w,name:"type",label:"Room Type",required:!0,options:r})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:w,name:"hostel",label:"Hostel Name",required:!0,options:c})}),(0,L.jsxs)($.Ay,{xs:12,sm:12,md:12,item:!0,children:[(0,L.jsxs)(s.A,{style:{display:"flex",justifyContent:"space-between",padding:"10px",alignItems:"center",fontSize:"14px",fontWeight:"bold"},children:[(0,L.jsx)(u.A,{children:"Bed Name"}),(0,L.jsx)(u.A,{children:"Bed Position"}),(0,L.jsx)(u.A,{children:"Is Alloted"})]}),w.values.beds.map(((e,t)=>(0,L.jsxs)($.Ay,{container:!0,gap:1,sx:{backgroundColor:n?"transparent":"#F0F8FF",borderRadius:"5px",padding:"20px 15px 30px 15px",border:"1px solid lightgrey",my:2},children:[(0,L.jsx)($.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,L.jsx)(Sa,{value:null===e||void 0===e?void 0:e.name,name:"name",label:"Bed Name",required:!0,onChange:t=>N(t,e)})}),(0,L.jsx)($.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,L.jsx)(Sa,{value:null===e||void 0===e?void 0:e.position,name:"position",label:"Bed Position",required:!0,onChange:t=>N(t,e)})}),(0,L.jsxs)($.Ay,{xs:12,sm:3,md:3,item:!0,sx:{fontSize:16,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,L.jsx)(ke.A,{onClick:()=>(()=>{let e=[...w.values.beds],t={id:e.length+1,name:"",position:"",allocated:!1};w.setFieldValue("beds",[...e,t])})(),children:(0,L.jsx)(Re.A,{})}),(0,L.jsx)(ke.A,{color:"error",onClick:()=>(e=>{let t=[...w.values.beds];t.splice(e,1),w.setFieldValue("beds",t)})(t),children:(0,L.jsx)(ka.A,{color:"error"})})]})]},t)))]}),(0,L.jsx)($.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,L.jsx)(ot.A,{formik:w,name:"note",label:"Note"})})]})}),(0,L.jsx)(dn,{title:"Room Information",open:S.open,tableData:S.tableData,schoolName:S.schoolName,onClose:()=>{k({...S,open:!1})}})]})}const mn=[{name:"Name",key:"name",path:"studentName"},{name:"Admisson No",key:"admissionNumber",path:"admission"},{name:"Room",key:"number"}],un=[{name:"Name",key:"name",path:"studentName"},{name:"Admisson No",key:"admissionNumber",path:"admission"}],hn=e=>{var t,l;let{onUpdate:n=(()=>{}),data:i={}}=e;const[s,o]=(0,a.useState)(!1),[r,d]=(0,a.useState)(!1),{selectedSetting:c}=(0,a.useContext)(G.A),[m,u]=(0,a.useState)([]),[h,x]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.hostel.list);u(e.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[c]);const p=()=>{d(!1)},g=(0,we.Wx)({initialValues:{name:(null===i||void 0===i||null===(t=i.basicInfo)||void 0===t?void 0:t.name)||"",hostel:"",room:"",bed:""},onSubmit:async e=>{try{const t={...e,schoolId:c._id,hostel:e.hostel,room:e.room,bed:e.bed};o(!0),await(0,de.yJ)(ce.r.student.updateHostelMember+"/"+i._id,t),n(),p(),o(!1)}catch(t){console.log(t),o(!1)}}});return(0,a.useEffect)((()=>{g.values.hostel&&(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.room.list,{params:{schoolId:c._id,search:{hostel:g.values.hostel}}});x(e.result.map((e=>({...e,label:String(e.number),value:e._id}))))}catch(e){console.log(e)}})()}),[g.values.hostel,c]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(v.A,{direction:"row",spacing:1,children:(0,L.jsx)(pe,{module:"Hostel Member",permission:"update",children:(0,L.jsx)(ke.A,{size:"small",startIcon:(0,L.jsx)(ra.A,{}),variant:"contained",onClick:()=>{d(!0)},children:"Member"})})}),(0,L.jsx)(Ye,{open:r,formik:g,formTitle:"Add Member",onClose:p,submitButtonTitle:"Submit",adding:s,children:(0,L.jsxs)($.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(ot.A,{formik:g,name:"name",label:"Name",required:!0})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:g,name:"hostel",label:"Hostel",required:!0,options:m})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:g,name:"room",label:"Room No",required:!0,options:h})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,L.jsx)(Ce.A,{formik:g,name:"bed",label:"Beds",required:!0,options:(null===(l=h.find((e=>e._id===g.values.room)))||void 0===l?void 0:l.beds.map((e=>({label:e.name,value:e._id}))))||[]})})]})})]})};function xn(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)(0),[n,i]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),x=async t=>{try{if("all"===t.section){const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class}}});console.log(l.result,"=================");const a=l.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.hostelMember})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo}))),n=l.result.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.otherInfo)&&void 0!==t&&t.hostelMember)})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo})));m(a),h(n)}else{const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section}}}),a=l.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.hostelMember})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo}))),n=l.result.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.otherInfo)&&void 0!==t&&t.hostelMember)})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo})));m(a),h(n)}}catch(l){console.log(l)}},p=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:x,enableReinitialize:!0}),g=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:x,enableReinitialize:!0});(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);d(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),p.setFieldValue("academicYear",e.result[0]._id),g.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{var t,l;const{data:a}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});i(a.result.map((e=>({label:e.name,value:e._id})))),p.setFieldValue("class",null===(t=a.result[0])||void 0===t?void 0:t._id),g.setFieldValue("class",null===(l=a.result[0])||void 0===l?void 0:l._id)}catch(a){console.log(a)}})()}),[e._id]),(0,a.useEffect)((()=>{(p.values.class||g.values.class)&&(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:g.values.class||p.values.class}}}),l=[{label:"All",value:"all"},...t.result.map((e=>({label:e.name,value:e._id})))];o(l),p.setFieldValue("section","all"),g.setFieldValue("section","all")}catch(t){console.log(t)}})()}),[p.values.class,g.values.class,e]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Hostel Member"}),(0,L.jsx)(gt,{onChange:(e,t)=>l(t),value:t,labels:["Member List","Non Member List"]}),(0,L.jsxs)(At,{index:0,value:t,children:[(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)("form",{onSubmit:p.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:p,label:"Select Academic Year",options:r})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:p,label:"Select Class",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:p,label:"Select Section",options:s})}),(0,L.jsx)(pe,{module:"Hostel Member",permission:"view",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,L.jsx)(ke.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})})]})})}),(0,L.jsx)(it,{actions:["delete"],bodyDataModal:"hostel member",module:"Hostel Member",tableKeys:mn,bodyData:c,onDeleteClick:async e=>{try{await(0,de.yH)(ce.r.student.removeHostelMember+"/"+e);p.handleSubmit()}catch(t){console.error(t)}}})]}),(0,L.jsxs)(At,{index:1,value:t,children:[(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)("form",{onSubmit:g.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:g,label:"Select Academic Year",options:r})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:g,label:"Select Class",options:n})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:g,label:"Select Section",options:s})}),(0,L.jsx)(pe,{module:"Hostel Member",permission:"view",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,L.jsx)(ke.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})})]})})}),(0,L.jsx)(it,{actions:"custom",bodyDataModal:"hostel member",tableKeys:un,bodyData:u,CustomAction:hn,onUpdate:g.handleSubmit})]})]})}const pn=[{name:"Roll No",key:"rollNo"},{name:"Name",key:"name"},{name:"Photo",key:"image"},{name:"File",key:"file"}];function gn(){const[e,t]=(0,a.useState)([]),l=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},onSubmit:console.log("nnnn")});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Student Bulk Photo"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:l,label:"Select Academic Year"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:l,label:"Select Class"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"sectiion",formik:l,label:"Select Section"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",children:"Find"})})]})}),(0,L.jsx)(it,{actions:["edit"],tableKeys:pn,bodyDataModal:"student bulk photo",bodyData:e})]})}const An="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMqaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MiA3OS4xNjA5MjQsIDIwMTcvMDcvMTMtMDE6MDY6MzkgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzIxQzE0ODJCMjBEMTFFREJEQTRCRTJEQTkyQjY1QUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzIxQzE0ODNCMjBEMTFFREJEQTRCRTJEQTkyQjY1QUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMjFDMTQ4MEIyMEQxMUVEQkRBNEJFMkRBOTJCNjVBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMjFDMTQ4MUIyMEQxMUVEQkRBNEJFMkRBOTJCNjVBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uACZBZG9iZQBkwAAAAAEDABUEAwYKDQAACfsAAA0SAAASDQAAF/v/2wCEAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTExQUExMcGxsbHB8fHx8fHx8fHx8BBwcHDQwNGBAQGBoVERUaHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fH//CABEIAKgAqAMBEQACEQEDEQH/xADOAAEAAgMBAQAAAAAAAAAAAAAABgcBBAUDAgEBAAMBAQAAAAAAAAAAAAAAAAIDBAEFEAABAwMDBAIDAQEAAAAAAAABAgMEACAFEDARMRITBiEUYCIyMxURAAECAQcGCwYGAwAAAAAAAAECAwAgESExQVESYXHBIjIjEDCBkUJScoITMwShsdHh8VNAYPBikhSissISAQAAAAAAAAAAAAAAAAAAAIATAQABAwIGAgIDAQEBAAAAAAERACExIEEQMFFhgZFxobHBQPDRYPHh/9oADAMBAAIRAxEAAAG1AAAc+UIvfTw7aubKPhKPvGXSjLuVWyii7oRmAAAANSUYBqyxi6nHQAAGeJPTdP8ALq24yAAA4VlVZ7cetLgAAAAGzHtmYtndrtAA4VlVW7sXx0AB9cbsZaUo/PQAH3xaWHb3a7QNSUag34NeXABnic5tMzzaPV3ychmnPBtObHQA2I9t/Bv24yFa7McXvpAAsDJqmWfQABDdGev9eUACUUXWVj2aEoU76GDHQA6EJXD5/oZAAMFPeh5/PnEAZ4uLz98YvpgerMABMc2iwcuoAACvtWWHac4AE8y6eHZXH7qgAJ3l0zfNpAAAhGnNBNWYACQU282cNGcQAJhnvsLJrAAAr3Xkh+igADehLWlzy7wADdhK4/P9D6AAPkpz0PP0pxAA9ed2Y90ZxAAE6y6Zxm0gAQfTmgurMAAN6EulCcfuqAA++BL8+ibZtG1yWr2MJ054hozj46AAkFNvdrsgWrMB7R7N82iXUaOZOFc68nMsr9+S8O86dc7Gya+nCcRvzwjVn8e8AnuTTJ6b6c9Dz8ddOudo4tu9GQA5M69KUd2MutCwAaMo1dtxcyyGeLj8/wBDejKt9mONXU2/5/ob0ZAAAAAAaMo1B6HnyWm6yMewavYw3TnnmXUAAAAAABA9WWZZtG1yQGDIAAAAAABgyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/aAAgBAQABBQK6TPiRqf8AZRTmbyK6XMmLryu0iZMRTebyKKY9lFRp8STtyZbEZubnpL1dTf0MLPSWajS2JLd+TyrUNL8h6Q5tsSHo7mMyrUxNuVyaYbS1rWu1CVrP0J9LStBtQtaF4rJpmNay5LcZiQ+4+9Z8k4/18cNtttppxttxOQ9fHHyDZHfcYeiSW5LGmem+aTbgcaEItz2NC0W4Gb4ZNTpIjRPk2wI32Zl8+N9aZZ8ioMkSYnsr/wCtvrTfL9/srfD9vrT/AOudc78lb6z/ABf7P/FuCc7MlOX3zbfWneJF/srvMi2Cvsmu/wCtsKT9aUCCLSQBNk/ZlWtf6zkdk27A5McW57Jji6Cjvm51vsyNqELWpaFIVj/YFIDEqO+KflR2BkPYFLCEKWpaFoVbgm+/I+ysfpq0y68uH66kU0wyynIYtiYJeOlxTXmf4qJjpco4/FsQw6wy8mZ66k06y6yvX1pj9JsYSYpBBqBAdmOxIbEVux3FY92v+BjqaxWPatlw2JTc+A7DdoAkwowjRaz8LxSGm1uuQ4jcWPuzIjcqO62tpzAQvLI0lR25LGFgLayO/moC3cjFjtxmNeBzv8Dn8B//2gAIAQIAAQUCuArx12CuNOK7BXjojbAoI2iiiNhKeaA3CKUni5KedjkbCk8WAULiuwLuIojVAuWq5CrljQC4nYBuIpu5zYbucpHS1zYbuX0Fzmw3cbyNgC8XrTchN5pHS8orjTigjYX0btK9Arigqwqoq50C7XKB1J4om3uNd5ruNoNA86k6IOhO8Dos6g0s/G+k/BP4t//aAAgBAwABBQK4mvJXea505rvNeSgdsmivaC6B2FK4rnc5pKublK42ODsJVzYTRuCLCi4UDqs3ITctNyDoTcBsEXA05c3sOXN0vra3sOXI6m5vYcuF4OwTeb0KuWq8UvreF1zpzRXsI6uWhGhTzRFgFBPGhRa3RGoHNAW9orsFdotIojjUDRY0A3iNEDUikj531D5A/Fv/2gAIAQICBj8CXP8A/9oACAEDAgY/Alz/AP/aAAgBAQEGPwKVvXAD1azzRMw13l/AR5mDIkfWNZ9Z7xjbPPGq+sd4x5mPIofSJn2u8j4GN04CerUebi8bysIsvOaClnct/wCR5bInNZrPETisVGAl7fN39IfGMbKsQtvGfiMI13zso0mC46rEo/qjjA40rCofqmMJ1HxtI0iVMml9ewm7KYK1nEpVJJlTISVm5Inif+s5/GJlpKDcoTSgtBwqTSCImVQ+jbTflEhTy6k2XmwQp1wzqV7MkmYUk0ACA56yk2MirvXxhbSEJuFHBhcSFpuNMFz0dBtZNXduiY0EUEGSl1szKT7ckJeRUqy42jh8BJ3bNeVfylD1bo3i/KFyb85lH1bQ3iPNF6b84leAo7t6rIv58Dj1qRq57InNJNZktM9EmdfZFfEOs9EGdHZNUmcUEVGG3rVDWz2wyxfrq5KBKfd6qQnnp0cQw71klPNTplPMGzXTy0GF/sATp0yvU9pPu4j03aV7pSP3gp06IfVesynmuukKHJ9eIZa6iSo8v0lMKuWIX2jKbfsSdbsmuARSDUZRJoArMOP2KOr2RVKR2hD6blmWPRvGkeQr/n4Sj6Nk0nz1D/X4y2E3rELPXAVo0SsKElSrhTBQsFK01g1iA36udabHhX3hE7LiVjIeCd5xKBlMFv0k6E2vGvuiAhAKlqqArMYVpKVXGiUg9QFWjTDT46JwK5apHhtJK1mwRi9UrEftpq54wtICBkic6jw2XBpvjeI1fuClMTiu+JvFXNdiMTmu+N2jV+4aExONd47Th0XRhdQFjLGL0qsJ+2qrnjw3UlCxYZDr56RwJ5K4cZ6w1c9kTGgigjgwIoSNtd0YGhnVac8mdTInvTR7o2VfyidLInvVT75OB0ZlWjNGBdKTsLv4JhSTQBDbNqRrZ7eD+wkbt7a7fzhLaKVrMyYSyizaVeb+OU0u3ZVcb4U2uhaDMqP7Chu2dnt/LhUy5sq9mWHvFGswJh3ukOQfgGfBGs+Jj3ekeQwllvZT7csie38BPb+Qv//aAAgBAQMBPyHUZ2mbvheriX0WPyfmtvDoz7ZV/Uo7FXJu9ZV/Uo7NZ8Do37JVYQ+qz+D80Z3m7Plflxa7DKdBlpmX1T7v0e6VRJyF1+XkCgkYCyfDTMvqvqf291FrsMJ0GR5Fgg+wfhPzTF+uwHQbHMYv6ydBuVYCPsP5T8arGDfA/EfdOpVuy6u6tQ/qatYPyrurUP7jUilW7DVjRvgfifrRhdrbkwd1qXM5eg2HY0gAFUNKrgDdrLsuqz5GXYt80KKMGD64KmjJg+6w7Lqu+Tl2bfFIgFUNCJkTZ0y5nJ0G67NYXa+4MnceO8Lj7Hpb3qsly7vf09tVkuWdr+ntq3hcfQ9LeuHaEHV2HtpUVlSm63Xy6Z4/2b7YoAACAwakERJHJUcf7N9MaRQWVIbJcfDXaEHQ2HsqArml2/YdU4bH5y/DkRhufnD8tUjWZ8X7BUN2P9S+9SPc5Ah3NQhuz/qH3T4Dfhj9apMcI7uHkIMcI7uD61Pkt/Cx+6nezc96k/8AO0+t6fuFIYRxqfuFKYApP/O0+t9U7WbHuvid+Wf3rsK2E3P3PpquK2Ngfu/TX8zvwz+q6eH+pfep2AFq9FJRDZJ+qBMFrw/k+SgrV0l8mTglKukPgy0CaLWj/B8tJRDdJnzXYAWr06unj/qH3SQbJ8F/2NBX0QursHdoY7sY8snxXbhpCsbDAL/A2Uhmdt087eaInB0LPsr9Qn+aYnJ1LvtoDMb7J538VjYIB9DZXbhpGhnuxnwyPM0x9ELqbJ3NEA2D4L/s/VMbN90N17KTHKVbJZPfDYp18H9rsUfj9a79VoQSG47U8jvqP8Kv/RKnhc9R/lQAQWDbQ/n9Kz9VW5Tp4P6Tc4BjlAt1sHuiN1bq7r28IP8ACAz6E/M0N8AXd69jLXfxbj5XO7+bcPAob5Au507OSpP8oLHpf5jiIlmJ3Ww7jeizNXZnbsKfwCy5V2J37AFCJZid1uu630bBcRPb+BsFhE9v+C//2gAIAQIDAT8h1K0dVFEaio00PRSnLRojPKJxSHI8CoOZJXgavAoNTXe1pXgaJGKEGrp0vAa6+qSoGOMZOrY1bGqcnhM6ojkTGqJob6lbkLUN6Gps5G7UKY6hbkC2rGjGqYjkREanFY69zVua8aXIdOlHATXX5CottCxXRpZpqA8IOAFNQYrq0M6FtUTOjI6QOEppQ0aZnhORSxUjzoGhmoyOMDUvy/gR/CpH/lv/2gAIAQMDAT8h1CU9FNE6mp0UHVQvLApnHKYzQPI8imXMIV5GryKXX2tZXkaIClOrr0HBK6epRUhxlY1bmrc1QscIjVM8iJ1TFLbUOQNS2pam7kbNSpnqV+Qr6s6c6omeRMzqM1nr2NWxrzoch16A8EFdPkCg30BNdWgiiopwl4K0VEmujSRoG9TGjAaVOABpB0aI4Qs0E1Ac6QpIqVnjIVH/AAE9ID/lv//aAAwDAQACEQMRAAAQkkk8OOM8kkkkgCkkkiAkkknUkkkkkXkknskky8kk/kh0kiHHKkkxkskgAAAAkks6kkMAAEMki5kkmAAAGkkhUkkoAAAskkSkkhAAABkkikkk0AAE0kkmkkkAAAEkkm0kk7TDT8kkxkmcmsmkckjmikkH/EkimkJkkkkkkkhMnMkkkkkkkPkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkn//aAAgBAQMBPxDUntyUeFP5JFGUzcgb3vPdH2H/AOrX3SsyeRA9gV+wT9zSoweAQ9iU+Q/+rX3TlM2IGd7z0qD25KPKj8gjlpMc+EDc+KkBVphLFi3wvo8x0oUN1SV88h5jpQoLyEI/FQAq0gFi7b4X0CW7NsJm+xyIVyKey4c8JnZulukQ2bIti6HmXmW6RKX3zbN0fENQukU9kiXd3JndsukhOodkuCeZsG63VETdWlW7+jbVtNr2pGHmuzSZuR8ZrYLXpSMvGow11oHufs3phCoNAsAeZsm63ReKX5Z9E7tBVjchsfHOx7y6THqQPoGujgq5WFABbmV1EhQaFwGYtgBws0LTM2wEq5WdIBLuV0ElRx6kD6Frg5NNncg5PnnZ95KS/Lfony0PFzmIEbIQ/NHu6SgKsBdWpFk0uPaLgLztA3dUCyaXHvEyF53kbFCJIyNxNLvEBK2Ah+Kfc4FTC+f/AO/FNPRYvy6R3SdMC5+kdPj50eYQAQAWANR5hIhIjZEagXH0jp8/HS9Ei3LoHcJoUwHj/wDnzRTwNDDkYHtK+NQgBWPRWDxyAQALHqjJ41D4EYuBhOwL5qEWfG/5TqtXc/E45Chdj8RnUqLHnf8ACav5JJdoH1qDBncRf1HkDJkCbDm8urbQkvkPqn/o6nOq6azJlP6l6UCUJiQJQ9E1AlSYgCVXoFXDWZch/cPbV/6OoxVuIEjtF+tYuUQ4M8l/3WZL6W5RCkzwT/NZltqtxIgdpv1RRCPOupIJ1x6ZVo/CQiTc6K3H1QchCYhYgv7/AFN6BoE2B9p2SooGgTcH2nYKD0KTEbMl/f6G9P4SEWbuqt190iNc+mUdSrE/OpSXniTBgJnsOedBu2kGUwkYF1Ard3Mge0Z6lEzMi/flLvmiuKCMNuudsmyUSGW1QTApPWNATu5v0DXgBsXxUKd3N+waJHLaoJhRmPSdNWsRBjfrnbLutM3Mi3fhbnit3cyF7RtQftpRhZRIT3Qmh44kyZCY7JlIihguPo4qU3bhL1XcCcNj4ZLWxH9RtUPew4ox1r2wbBoRAAhVxKdhksyerOfmsiz8H/adhkkSTcnHxQIAEAsBoh7yXFGOle2Hca2PhEFyR/UbcFN34S8F3UFRFIAcfZzcHiJ4hg0/C2dlJU7rMS5hgLnQokZBMA9x1x0INucScAiA+4456km9Qp3WYliZZC50aeYniWCfl+TiluLBwbzeiFCrhw4diRsI+UyfwB82ZXyImxnrAF2obl25N4vVLQEyIC3oVDxL/AWLEw7xIp5g/wCC/9oACAECAwE/ENWHK6ygbTQOAqPSlchSNorrKy5y1YCrpc/XKulj9UrCchVQDBzAMNKtRl2UAQY1IM2rtKEcX1AkOKZd2hiFDEamx70iy8EGSmx71OkDDTMuNwZfxqmY4M6omeNtVgZPxwgzVNvIi3TFSZV11LQ5FpNV0pEO+rPkM9SZdqME7arB5Fw6jLO1YtUnRI1BNQepmpyXtr2vn/dW98f7rcN7VMO2pQu0IkmKmv61mCOGIJqK/rSgS4oRuaol3q66BiVgp8VVSs18ZWLeHaOGba+MpVIxT4qYkZNF0pBUGeBiWnZdOMeBnHS7JRiTgsVJcFwZPxQBXBTzPOeYoAJhqwMv44oSUIR/AGk0Rl/5b//aAAgBAwMBPxDVk2ukpG8Urlan1oHC0Dea6SsG8sGWrJYffKslx90DJyBFGcvMZyUI1CFEWXOoFxeu8pEzbUkZM0Q0AZaVy6iz60BY4A2aLPrqVyUBJxtDB+dURPOqYjnfVeGH88JJ1RZyJs1QTVk1Li8i4Oqy0kXbVjyGGpEO9KW99VwciwNSgves2qDoOpYqT1MVGGd9e98atr51mSd6i+WoFsUiMOait71iGeGYYqa3vQKwZpEs6ph2qyaDqAmjzQRARXzlZ84d54Y8r5yhEJNHmjqEjRZaSRURwdQUbBpzhwsIaTYadQ8AqCOFoYfzSKDejiOccTSKHarwwfniDDTpO38BwjegIP8Alv/Z",jn=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),fn=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),bn=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),yn=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),vn=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),Sn=[{label:"Male",value:"male"},{label:"Female",value:"female"}],kn=[{label:"A+",value:"a"},{label:"A-",value:"a-"},{label:"B+",value:"b+"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}],Cn=[{label:"Active",value:!0},{label:"Inactive",value:!1}],wn=[{label:"Yes",value:!0},{label:"No",value:!1}],In=[{label:"Yes",value:!0},{label:"No",value:!1}],Nn=[{label:"Monthly",value:"monthly"},{label:"Hourly",value:"hourly"}];function Dn(){var e,t,l,n;const{selectedSetting:i}=(0,a.useContext)(G.A),{id:o}=(0,M.g)(),r=(0,M.Zp)(),[d,c]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[A,j]=(0,a.useState)([]),[f,b]=(0,a.useState)([]),[y,S]=(0,a.useState)([]);console.log(d,"dataToEdit");const[k,C]=(0,a.useState)([]);(0,a.useEffect)((()=>{o&&(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.employee.getEmpById+"/"+o);c(e.result)}catch(e){console.log(e)}})()}),[o,i]);(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.designation.list);x(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.department.list);g(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.role.list);j(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.salaryGrade.list,{params:{schoolId:i._id}});C(e.result.map((e=>({label:e.grade,value:e._id}))))}catch(e){console.log(e)}})()}),[i._id]);const w=(0,we.Wx)({initialValues:{name:(null===d||void 0===d?void 0:d.basicInfo.name)||"",empId:(null===d||void 0===d?void 0:d.basicInfo.empId)||"",responsibility:(null===d||void 0===d?void 0:d.basicInfo.responsibility)||"",designation:(null===d||void 0===d?void 0:d.basicInfo.designation._id)||"",contactNumber:(null===d||void 0===d?void 0:d.contactNumber)||"",secMobileNo:(null===d||void 0===d?void 0:d.basicInfo.secMobileNo)||"",gender:(null===d||void 0===d?void 0:d.basicInfo.gender)||"",bloodGroup:(null===d||void 0===d?void 0:d.basicInfo.bloodGroup)||"",religion:(null===d||void 0===d?void 0:d.basicInfo.religion)||"",presentAddress:(null===d||void 0===d?void 0:d.basicInfo.presentAddress)||"",permanentAddress:(null===d||void 0===d?void 0:d.basicInfo.permanentAddress)||"",dob:null!==d&&void 0!==d&&null!==(e=d.basicInfo)&&void 0!==e&&e.dob?ye()(d.basicInfo.dob).format("YYYY/MM/DD"):null,fatherName:(null===d||void 0===d?void 0:d.basicInfo.fatherName)||"",spouseName:(null===d||void 0===d?void 0:d.basicInfo.spouseName)||"",aadharNo:(null===d||void 0===d?void 0:d.basicInfo.aadharNo)||"",fatherOccupation:(null===d||void 0===d?void 0:d.basicInfo.fatherOccupation)||"",spouseOccupation:(null===d||void 0===d?void 0:d.basicInfo.spouseOccupation)||"",qualification:(null===d||void 0===d?void 0:d.academicInfo.qualification)||"",workExperience:(null===d||void 0===d?void 0:d.academicInfo.workExperience)||"",salaryGrade:(null===d||void 0===d||null===(t=d.academicInfo.salaryGrade)||void 0===t?void 0:t._id)||"",email:(null===d||void 0===d?void 0:d.academicInfo.email)||"",salaryType:(null===d||void 0===d?void 0:d.academicInfo.salaryType)||"",role:(null===d||void 0===d?void 0:d.role._id)||"",department:(null===d||void 0===d?void 0:d.academicInfo.department._id)||"",joiningDate:null!==d&&void 0!==d&&null!==(l=d.academicInfo)&&void 0!==l&&l.joiningDate?ye()(d.academicInfo.joiningDate).format("YYYY/MM/DD"):null,libraryMember:(null===d||void 0===d?void 0:d.libraryMember)||!1,username:(null===d||void 0===d?void 0:d.username)||"",password:(null===d||void 0===d?void 0:d.otherInfo.password)||"",public:(null===d||void 0===d?void 0:d.otherInfo.public)||!1,showDetailsForWeb:(null===d||void 0===d?void 0:d.otherInfo.showDetailsForWeb)||!1,active:(null===d||void 0===d?void 0:d.active)||!0},onSubmit:async e=>{try{const t={basicInfo:{name:e.name,empId:e.empId,designation:e.designation,secMobileNo:e.secMobileNo,gender:e.gender,religion:e.religion,presentAddress:e.presentAddress,permanentAddress:e.permanentAddress,dob:e.dob,fatherName:e.fatherName,spouseName:e.spouseName,aadharNo:e.aadharNo,fatherOccupation:e.fatherOccupation,spouseOccupation:e.spouseOccupation,responsibility:e.responsibility},academicInfo:{workExperience:e.workExperience,salaryGrade:e.salaryGrade,email:e.email,salaryType:e.salaryType,department:e.department,joiningDate:e.joiningDate},otherInfo:{public:e.public||!1,showDetailsForWeb:e.showDetailsForWeb||!1},contactNumber:e.contactNumber,role:e.role,username:e.username,password:e.password,active:e.active,photo:e.photo,libraryMember:e.libraryMember,schoolId:i._id};u(!0);const l=new FormData;if(l.append("body",JSON.stringify(t)),f.forEach((e=>l.append("employeePhoto",e))),y.forEach((e=>l.append("resume",e))),d){const{data:e}=await(0,de.yJ)(ce.r.employee.update+"/"+d._id,l,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,de.bE)(ce.r.employee.create,l,{headers:{"Content-Type":"multipart/form-data"}})}r("/sch/human-resource/employee")}catch(t){console.log(t)}u(!1)},enableReinitialize:!0}),I=(e,t)=>{const{files:l}=e.target;let a=[];if(l.length>0){for(let e=0;e<l.length;e++){const t=l[e];a.push(t)}"resume"===t?S(a):b(a)}else console.log("No files selected")},N=(e,t)=>{b(f.filter((t=>t.name!=e))),S(y.filter((t=>t.name!=e)))};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Add Employee",showTextField:!1}),(0,L.jsxs)(vn,{children:[(0,L.jsx)(yn,{children:(0,L.jsx)("img",{src:f.length>0?URL.createObjectURL(f[0]):null!==d&&void 0!==d&&d.photo?null===d||void 0===d?void 0:d.photo:An,style:{width:"100px",height:"100px",objectFit:"contain"},alt:"photo"})}),(0,L.jsx)($.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{name:"employeePhoto",multi:!1,label:"Select Photo",onChange:e=>I(e,"employeePhoto"),previousFile:null===d||void 0===d?void 0:d.photo,customOnChange:!0,selectedFiles:f,onRemove:e=>N(e),accept:"image/jpeg, image/png"})})})]}),(0,L.jsxs)("form",{onSubmit:w.handleSubmit,children:[(0,L.jsxs)(fn,{children:[(0,L.jsx)(bn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:w,label:"Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"empId",formik:w,label:"Employee Id"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"responsibility",formik:w,label:"Responsibility"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"designation",formik:w,label:"Designation",options:h})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"contactNumber",formik:w,label:"Contact Number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"secMobileNo",formik:w,label:"Secondary Contact Number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"gender",formik:w,label:"Select Gender",options:Sn})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"bloodGroup",formik:w,label:"Select Blood Group",options:kn})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"religion",formik:w,label:"Religon"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{required:!0,formik:w,label:"Date of Birth",name:"dob"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"presentAddress",formik:w,label:"Present Address"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"permanentAddress",formik:w,label:"Permanent Address"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fatherName",formik:w,label:"Father Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"spouseName",formik:w,label:"Spouse Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"aadharNo",formik:w,label:"Aadhar No."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fatherOccupation",formik:w,label:"Father Occupation"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"spouseOccupation",formik:w,label:"Spouse Occupation"})})]})})]}),(0,L.jsxs)(fn,{children:[(0,L.jsx)(bn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"qualification",formik:w,label:"Qualification              "})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"workExperience",formik:w,label:"Work Experience"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"salaryGrade",formik:w,label:"Select Salary Grade",options:k})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"email",formik:w,label:"Email"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"salaryType",formik:w,label:"Select Salary Type",options:Nn})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"role",formik:w,label:"Select Role",options:A})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"department",formik:w,label:"Select Department",options:p})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{required:!0,name:"joiningDate",formik:w,label:"Joining Date"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{multi:!1,name:"resume",label:"Upload Resume",onChange:e=>I(e,"resume"),customOnChange:!0,selectedFiles:y,previousFile:null===d||void 0===d||null===(n=d.academicInfo)||void 0===n?void 0:n.resume,onRemove:e=>N(e),accept:"image/*,.pdf"})})]})})]}),(0,L.jsxs)(fn,{children:[(0,L.jsx)(bn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Log In Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"username",formik:w,label:"User Name"})}),!d&&(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"password",formik:w,label:"Password"})})]})})]}),(0,L.jsxs)(fn,{children:[(0,L.jsx)(bn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"libraryMember",formik:w,label:"Library Member",options:In})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"public",formik:w,label:"View On Web",options:wn})})]})})]}),(0,L.jsxs)(fn,{sx:{marginBottom:"60px"},children:[(0,L.jsx)(bn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Profile Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"active",formik:w,label:"Status",options:Cn})})})})]}),(0,L.jsx)($.Ay,{container:!0,children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,children:(0,L.jsx)(jn,{children:(0,L.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:()=>r(-1),children:"Cancel"}),(0,L.jsx)(We.A,{loading:m,type:"submit",size:"small",variant:"contained",children:"Submit"})]})})})})]})]})}const Mn=[{name:"School Name",key:"name"},{name:"Logo",type:"image",key:"logo"}];function Fn(){const[e,t]=(0,a.useState)(),{setSettings:l,settings:n}=(0,a.useContext)(G.A),i=(0,M.Zp)(),s=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.school.list);l(e.result.filter((e=>e.active))),t(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{s()}),[]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Manage Institute"}),(0,L.jsx)(it,{actions:["edit","switch"],module:"Institute",bodyDataModal:"manage institute",bodyData:e,tableKeys:Mn,toggleStatus:"active",onToggleSwitch:async e=>{try{const{data:t}=await(0,de.yJ)(ce.r.school.toggleActiveStatus+"/"+e._id);s()}catch(t){console.log(t)}},onEditClick:e=>{i("/sch/manage-institute/edit-institute/".concat(e._id))}}),n.length?null:(0,L.jsx)(Ee,{module:"Institute",title:"Add Institute",onAddClick:e=>{i("/sch/manage-institute/add-institute")}})]})}var _n=l(70877),Rn=l(21732);function En(e){let{dataToEdit:t,title:l,onUpdate:n=(()=>{}),styles:o={}}=e;const[r,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[p,g]=(0,a.useState)([]),A=(0,i.A)();let j=(0,Te.A)(A.breakpoints.down("sm"));const f=()=>d(!1);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ke.A,{fullWidth:!0,onClick:()=>d(!0),size:"small",variant:"contained",sx:{mt:2},children:l}),(0,L.jsxs)(ze.A,{fullScreen:j,open:r,onClose:f,PaperProps:{sx:{width:"100%",maxWidth:650,...o}},children:[(0,L.jsx)(Pe.A,{children:"Add/Update Banner images"}),(0,L.jsx)(h.A,{}),(0,L.jsx)(qe.A,{sx:{padding:"10px"},children:(0,L.jsxs)(s.A,{sx:{margin:"20px 0"},children:[(0,L.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,L.jsx)(u.A,{sx:{fontWeight:"bold"},children:"Add Files"}),(0,L.jsx)(kt.A,{name:"images",label:"Select files",fullWidth:!0,onChange:e=>{const t=e.target.files;if(t.length>0){let e=[];for(let l=0;l<t.length;l++){const a=t[l];e.push(a)}g([...e])}else console.log("No files selected")},sx:{borderWidth:1,borderRadius:A.shape.borderRadius,maxWidth:"300px"},variant:"outlined",InputLabelProps:{shrink:!0},inputProps:{type:"file",multiple:!0},InputProps:{style:{borderWidth:1,height:"40px",borderRadius:A.shape.borderRadius}}})]}),p.map(((e,t)=>(0,L.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",background:"#5fa5f661",borderRadius:"5px",marginTop:"5px"},children:[(0,L.jsx)(u.A,{children:e.name}),(0,L.jsx)(x.A,{onClick:e=>(e=>{g(p.filter(((t,l)=>l!==e)))})(t),children:(0,L.jsx)(Bl.A,{fontSize:"small"})})]},e.name+t.toString())))]})}),(0,L.jsxs)(Be.A,{children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:f,children:"Cancel"}),(0,L.jsx)(We.A,{disabled:!p.length,size:"small",loading:c,variant:"contained",onClick:async e=>{e.preventDefault();try{m(!0);const e=new FormData;p.forEach((t=>e.append("bannerImages",t))),console.log(p,"imageeeee");const{data:l}=await(0,de.yJ)(ce.r.school.addFiles+"/"+t._id,e,{headers:{"Content-Type":"multipart/form-data"}});n(l.result),f(),g([]),m(!1)}catch(l){m(!1),console.log(l)}},children:"Add"})]})]})]})}var Tn=l(48475),zn=l.n(Tn),Pn=l(47533);function qn(e){let{onThemeSelect:t=(()=>{}),webTheme:l}=e;const{selectedSetting:n}=a.useContext(G.A),{setSelectedTheme:i}=a.useContext(Pn.A),[o,r]=a.useState((null===n||void 0===n?void 0:n.selectedTheme)||1),[d,c]=a.useState(1);return(0,L.jsx)(a.Fragment,{children:(0,L.jsx)(s.A,{dividers:!0,children:(0,L.jsx)($.Ay,{spacing:2,container:!0,children:l?ve.A.websiteThemes.map((e=>(0,L.jsx)($.Ay,{item:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,L.jsx)("div",{onClick:()=>{return l=e.theme,t(l),void r(l);var l},children:(0,L.jsx)("img",{style:{height:"150px",width:"200px",objectFit:"contain",border:parseInt(o)===e.theme?"2px solid green":"2px solid lightgray",borderRadius:"5px",overflow:"hidden"},src:e.image,alt:"Theme ".concat(e.theme)})})},e.theme+e.image))):ve.A.idCardThemes.map((e=>(0,L.jsx)($.Ay,{item:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,L.jsx)("div",{onClick:()=>{return l=e.theme,t(l),void c(l);var l},children:(0,L.jsx)("img",{style:{height:"150px",width:"200px",objectFit:"contain",border:parseInt(d)===e.theme?"2px solid green":"2px solid lightgray",borderRadius:"5px",overflow:"hidden"},src:e.image,alt:"Theme ".concat(e.theme)})})},e.theme+e.image)))})})})}const Bn=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),Wn=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),Yn=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),Jn=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),Vn=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),On=[{label:"Manual",value:"manual"},{label:"Auto ascending name",value:"autoAscendingName"},{label:"Auto ascending name female",value:"autoAscendingNameFemale"}],Un=[{label:"Class wise",value:"classWise"},{label:"Subject wise",value:"subjectWise"},{label:"Session wise",value:"sessionWise"}],Ln=[{label:"Manual",value:"manual"},{label:"Auto Ascending No.",value:"autoAscendingNo"}];function Hn(e){var t;let{initialValue:l=null}=e;const{selectedSetting:n,setSelectedSetting:i,setSettings:o}=(0,a.useContext)(G.A),r=(0,M.Zp)(),{id:d}=(0,M.g)(),[c,m]=(Object.keys(zn()),(0,a.useState)(l)),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)([]),[A,j]=(0,a.useState)([]),{isDarkMode:f}=(0,a.useContext)(_e.A),b=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.school.details+"/"+d);m(e.result)}catch(e){console.log(e)}};(0,a.useEffect)((()=>{d&&b()}),[d]);const[y,S]=(0,a.useState)(null),k=Rn.p.map((e=>({label:"".concat(e.currency," - ").concat(e.code),value:e.code}))),C=(0,we.Wx)({initialValues:{name:(null===c||void 0===c?void 0:c.name)||"",address:(null===c||void 0===c?void 0:c.address)||"",phone:(null===c||void 0===c?void 0:c.phone)||"",regDate:null!==c&&void 0!==c&&c.regDate?ye()(c.regDate).format("YYYY/MM/DD"):null,email:(null===c||void 0===c?void 0:c.email)||"",fax:(null===c||void 0===c?void 0:c.fax)||"",websiteFooter:(null===c||void 0===c?void 0:c.websiteFooter)||"",description:(null===c||void 0===c?void 0:c.description)||"",currency:(null===c||void 0===c?void 0:c.currency)||"",currencySymbol:(null===c||void 0===c?void 0:c.currencySymbol)||"",sessionStartMonth:c&&c.sessionStartMonth?c.sessionStartMonth:null,sessionEndMonth:c&&c.sessionEndMonth?c.sessionEndMonth:null,rollNumberType:(null===c||void 0===c?void 0:c.rollNumberType)||"",studentAttendenceType:(null===c||void 0===c?void 0:c.studentAttendenceType)||"",admissionNo:(null===c||void 0===c?void 0:c.admissionNo)||"",latitude:(null===c||void 0===c?void 0:c.latitude)||"",longitude:(null===c||void 0===c?void 0:c.longitude)||"",defaultTimeZone:(null===c||void 0===c?void 0:c.defaultTimeZone)||"",googleAnalyticsId:(null===c||void 0===c?void 0:c.googleAnalyticsId)||"",teacherActivityFeedbackEnabled:(null===c||void 0===c?void 0:c.teacherActivityFeedbackEnabled)||!1,facebookUrl:(null===c||void 0===c?void 0:c.facebookUrl)||"",twitterUrl:(null===c||void 0===c?void 0:c.twitterUrl)||"",linkedinUrl:(null===c||void 0===c?void 0:c.linkedinUrl)||"",youtubeUrl:(null===c||void 0===c?void 0:c.youtubeUrl)||"",instagramUrl:(null===c||void 0===c?void 0:c.instagramUrl)||"",pinterestUrl:(null===c||void 0===c?void 0:c.pinterestUrl)||"",location:(null===c||void 0===c?void 0:c.location)||"",selectedTheme:(null===c||void 0===c?void 0:c.selectedTheme)||1},onSubmit:async e=>{try{const t={...e};h(!0);const l=new FormData;if(l.append("bodyData",JSON.stringify(t)),p.forEach((e=>l.append("logo",e))),c){const{data:e}=await(0,de.yJ)(ce.r.school.update+"/"+c._id,l,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,de.bE)(ce.r.school.create,l,{headers:{"Content-Type":"multipart/form-data"}})}C.resetForm(),(async()=>{try{var e;const{data:t}=await(0,de.Jt)(ce.h.school.getSchools);o(t.result),i(null===(e=t.result)||void 0===e?void 0:e.find((e=>e._id===n._id)))}catch(t){console.log(t)}})(),g([]),r(-1)}catch(t){console.log(t)}h(!1)},enableReinitialize:!0});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Add Institute",showTextField:!1}),(0,L.jsxs)("form",{onSubmit:C.handleSubmit,children:[(0,L.jsxs)(Jn,{children:[(0,L.jsx)(Bn,{children:(0,L.jsx)("img",{src:p.length>0?URL.createObjectURL(p[0]):null!==c&&void 0!==c&&c.logo?null===c||void 0===c?void 0:c.logo:An,style:{width:"100px",height:"100px",objectFit:"contain"},alt:"loogo"})}),(0,L.jsx)($.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{multi:!1,name:"logo",label:"Select Logo",onChange:e=>((e,t)=>{const{files:l}=e.target;let a=[];if(l.length>0){for(let e=0;e<l.length;e++){const t=l[e];a.push(t)}"logo"===t?g(a):"bannerImages"===t&&j(a)}else console.log("No files selected")})(e,"logo"),previousFile:null===c||void 0===c?void 0:c.logo,customOnChange:!0,selectedFiles:p,onRemove:e=>((e,t)=>{g(p.filter((t=>t.name!=e))),j(A.filter((t=>t.name!=e)))})(e),accept:"image/jpeg, image/png"})})})]}),(0,L.jsxs)(Wn,{style:{position:"relative",zIndex:"1"},children:[(0,L.jsx)(Yn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:C,label:"School Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"address",formik:C,label:"Address"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"phone",formik:C,label:"Phone number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:C,label:"Registration Date",name:"regDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"email",formik:C,label:"Email"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fax",formik:C,label:"Fax"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"location",formik:C,label:"Location"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"websiteFooter",formik:C,label:"Website Footer"})}),(0,L.jsx)($.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,L.jsx)(ot.A,{name:"description",formik:C,label:"Note"})})]})})]}),(0,L.jsxs)(Wn,{sx:{overflow:"visible"},children:[(0,L.jsx)(Yn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Setting Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"currency",formik:C,label:"Currency",options:k,onChange:e=>{const t=e.target.value;C.setFieldValue("currency",t),C.setFieldValue("currencySymbol",zn()[t])}})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"currencySymbol",formik:C,label:"Currency Symbol",disabled:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:C,label:"Session Start Month",name:"sessionStartMonth",openTo:"month",inputFormat:"MMM",views:["month"],required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:C,label:"Session End Month",name:"sessionEndMonth",openTo:"month",inputFormat:"MMM",views:["month"],required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"rollNumberType",formik:C,label:"Roll Number",options:On})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"studentAttendenceType",formik:C,label:"Attendence Type ",options:Un})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"admissionNo",formik:C,label:"Admission Number",options:Ln})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"latitude",formik:C,label:"Latitude"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"longitude",formik:C,label:"Longitude"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,mt:2,children:(0,L.jsx)(_n.Ay,{styles:{control:(e,t)=>({...e,height:"42px",backgroundColor:f?"black":"white"}),menu:(e,t)=>({...e,zIndex:1e3}),option:(e,t)=>({...e,zIndex:1e3,backgroundColor:f?"black":"white",color:f?"white":"black","&:hover":{backgroundColor:f?"lightgray":"white",color:f?"black":""}})},placeholder:"Default Timezone",name:"defaultTimeZone",value:C.values.defaultTimeZone,onChange:e=>C.setFieldValue("defaultTimeZone",e),label:"Time Zone"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"googleAnalyticsId",formik:C,label:"Google Analytics Id"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"teacherActivityFeedbackEnabled",formik:C,label:"Teacher Activity Feedack Enable",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})})]})})]}),(0,L.jsxs)(Wn,{children:[(0,L.jsx)(Yn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Social Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"facebookUrl",formik:C,label:"Facebook URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"twitterUrl",formik:C,label:"X URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"linkedinUrl",formik:C,label:"Linkedin Url"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"youtubeUrl",formik:C,label:"Youtube URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"instagramUrl",formik:C,label:"Instagram URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"pinterestUrl",formik:C,label:"Pinterest URL"})})]})})]}),c?(0,L.jsxs)(Wn,{children:[(0,L.jsx)(Yn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Banner Image"}),(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{container:!0,item:!0,xs:12,sm:12,md:12,justifyContent:"flex-end",children:(0,L.jsx)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginRight:"10px"},children:(0,L.jsx)(En,{dataToEdit:c,title:"Upload Banner",onUpdate:b})})})}),(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:12,m:2,gap:2,sx:{display:"flex",overflowX:"auto"},children:null===c||void 0===c||null===(t=c.bannerImages)||void 0===t?void 0:t.map(((e,t)=>(0,L.jsxs)(s.A,{sx:{justifyContent:"center",backgroundSize:"cover","&:hover":{position:"relative",display:"inline-block"}},children:[(0,L.jsx)("img",{src:e,alt:"image",style:{width:"150px",height:"100px",borderRadius:"5px",boxShadow:"0px 0px 2px 0px gray"}}),(0,L.jsx)(x.A,{color:"error","aria-label":"delete",onClick:()=>(async e=>{try{const{data:t}=await(0,de.yJ)(ce.r.school.removeFile+"/"+c._id,{file:e});b()}catch(t){console.log(t)}})(e),sx:{position:"absolute",top:0,right:0,borderRadius:"50px",padding:"2px",cursor:"pointer",background:"#DEE0E2"},children:(0,L.jsx)(Et.A,{color:"error"})})]},t)))})})]}):null,(0,L.jsxs)(Wn,{sx:{marginBottom:"60px"},children:[(0,L.jsx)(Yn,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Select Your Favorite Theme"}),(0,L.jsx)(s.A,{m:2,children:(0,L.jsx)(qn,{onThemeSelect:e=>{C.setFieldValue("selectedTheme",e)},webTheme:!0})})]}),(0,L.jsx)($.Ay,{container:!0,children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,children:(0,L.jsx)(Vn,{children:(0,L.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:()=>r(-1),children:"Cancel"}),(0,L.jsx)(We.A,{loading:u,type:"submit",size:"small",variant:"contained",children:c?"Update":"Submit"})]})})})})]})]})}var Gn=l(78218);const Qn=(0,n.Ay)(Ue.A)((e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:"#44628561"}}})),Kn=(0,n.Ay)(Le.A)((e=>{let{theme:t}=e;return{width:200,padding:"13px 5px",border:"1px solid gray",["&.".concat(pa.A.head)]:{backgroundColor:t.palette.common.black,color:t.palette.common.white},["&.".concat(pa.A.body)]:{fontSize:15}}}));function Zn(e){let{employee:t}=e;const l=e=>{window.open(e,"_blank")};return(0,L.jsxs)(L.Fragment,{children:[null!==t&&void 0!==t&&t.photo?(0,L.jsx)("img",{src:t.photo,height:100,width:100,style:{borderRadius:"50%",display:"block",objectFit:"cover",margin:"0 auto",border:"1x solid lightgray"},alt:"Employee Photo"}):(0,L.jsx)(k.A,{sx:{height:75,width:75},src:"/broken-image.jpg"}),(0,L.jsx)(Ve.A,{"aria-label":"customized table",sx:{width:660,my:2,display:{xs:"none",sm:"block",md:"block",lg:"block"},borderRadius:"5px"},children:(0,L.jsxs)(He.A,{children:[(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.name||"NA"}),(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"National Id"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.aadharNo||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.designation.name||"NA"}),(0,L.jsxs)(Kn,{align:"left",sx:{fontWeight:"bold"},children:["Phone"," "]}),(0,L.jsx)(Kn,{align:"left",children:t.contactNumber||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Present Address"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.presentAddress||"NA"}),(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Permanent Address"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.permanentAddress||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Gender"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.gender||"NA"}),(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Blood Group"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.bloodGroup.toUpperCase()||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsxs)(Kn,{align:"left",sx:{fontWeight:"bold"},children:["Religion"," "]}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.religion||"NA"}),(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Birth Date"}),(0,L.jsx)(Kn,{align:"left",children:ye()(t.basicInfo.dob||"NA").format("DD-MM-YYYY")})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Email"}),(0,L.jsx)(Kn,{align:"left",children:t.academicInfo.email||"NA"}),(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Role"}),(0,L.jsx)(Kn,{align:"left",children:t.role.name||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Joining Date"}),(0,L.jsx)(Kn,{align:"left",children:ye()(t.academicInfo.joiningDate||"NA").format("DD-MM-YYYY")}),(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Resume"}),(0,L.jsx)(Kn,{align:"center",children:t.academicInfo.resume?(0,L.jsx)(x.A,{color:"primary",children:(0,L.jsx)(Gn.A,{onClick:()=>l(t.academicInfo.resume)})}):"NA"})]})]})}),(0,L.jsx)(Ve.A,{"aria-label":"customized table",sx:{width:"100%",mx:2,my:2,display:{xs:"visible",sm:"none",md:"none",lg:"none"}},children:(0,L.jsxs)(He.A,{children:[(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.name||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"National Id"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.aadharNo||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.designation.name||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Phone"}),(0,L.jsx)(Kn,{align:"left",children:t.contactNumber||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsxs)(Kn,{align:"left",sx:{fontWeight:"bold"},children:["Present Address"," "]}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.presentAddress||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Permanent Address"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.permanentAddress||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Gender"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.gender||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Blood Group"}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.bloodGroup.toUpperCase()||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Birth Date"}),(0,L.jsx)(Kn,{align:"left",children:ye()(t.basicInfo.dob||"NA").format("DD-MM-YYYY")})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsxs)(Kn,{align:"left",sx:{fontWeight:"bold"},children:["Religion"," "]}),(0,L.jsx)(Kn,{align:"left",children:t.basicInfo.religion||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Email"}),(0,L.jsx)(Kn,{align:"left",children:t.academicInfo.email||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Role"}),(0,L.jsx)(Kn,{align:"left",children:t.role.name||"NA"})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Joining Date"}),(0,L.jsx)(Kn,{align:"left",children:ye()(t.academicInfo.joiningDate||"NA").format("DD-MM-YYYY")})]}),(0,L.jsxs)(Qn,{children:[(0,L.jsx)(Kn,{align:"left",sx:{fontWeight:"bold"},children:"Resume"}),(0,L.jsx)(Kn,{align:"center",children:t.academicInfo.resume?(0,L.jsx)(x.A,{color:"primary",children:(0,L.jsx)(Gn.A,{onClick:()=>l(t.academicInfo.resume)})}):"NA"})]})]})})]})}const Xn=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),$n=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"50px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),ei=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),ti=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),li=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),ai=[{label:"Male",value:"male"},{label:"Female",value:"female"}],ni=[{label:"A+",value:"a+"},{label:"B+",value:"b+"},{label:"A-",value:"a-"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}];function ii(e){var t,l,n,i,o,r,d,c,m,u,h,x,p,g,A,j,f,b,y,S,k;let{getEmployees:C=(()=>{}),employee:w="",setSelectValue:I=0}=e;(0,M.Zp)();const{selectedSetting:N}=(0,a.useContext)(G.A),[D,F]=(0,a.useState)(null),[_,R]=(0,a.useState)(null),[E,T]=(0,a.useState)([]),[z,P]=(0,a.useState)(!1),[q,B]=(0,a.useState)([]),[W,Y]=(0,a.useState)([]);console.log(w,"usha");const J=(e,t)=>{const{files:l}=e.target;let a=[];if(l.length>0){for(let e=0;e<l.length;e++){const t=l[e];a.push(t)}"photo"===t?(console.log(a,"photo"),B(a)):"resume"===t&&Y(a)}else console.log("No files selected")},V=(e,t)=>{Y(W.filter((t=>t.name!=e))),B(q.filter((t=>t.name!=e)))};(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.designation.list);T(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.error(e)}})()}),[]);const O=(0,we.Wx)({initialValues:{name:(null===w||void 0===w||null===(t=w.basicInfo)||void 0===t?void 0:t.name)||"",aadharNo:(null===w||void 0===w||null===(l=w.basicInfo)||void 0===l?void 0:l.aadharNo)||"",designation:(null===w||void 0===w||null===(n=w.basicInfo)||void 0===n||null===(i=n.designation)||void 0===i?void 0:i._id)||"",gender:(null===w||void 0===w||null===(o=w.basicInfo)||void 0===o?void 0:o.gender)||"",bloodGroup:(null===w||void 0===w||null===(r=w.basicInfo)||void 0===r?void 0:r.bloodGroup)||"",religion:(null===w||void 0===w||null===(d=w.basicInfo)||void 0===d?void 0:d.religion)||"",dob:null!==w&&void 0!==w&&null!==(c=w.basicInfo)&&void 0!==c&&c.dob?ye()(null===w||void 0===w?void 0:w.dob):null,presentAddress:(null===w||void 0===w||null===(m=w.basicInfo)||void 0===m?void 0:m.presentAddress)||"",permanentAddress:(null===w||void 0===w||null===(u=w.basicInfo)||void 0===u?void 0:u.permanentAddress)||"",email:(null===w||void 0===w||null===(h=w.academicInfo)||void 0===h?void 0:h.email)||"",joiningDate:null!==w&&void 0!==w&&null!==(x=w.academicInfo)&&void 0!==x&&x.joiningDate?ye()(null===w||void 0===w||null===(p=w.academicInfo)||void 0===p?void 0:p.joiningDate):null,resume:(null===w||void 0===w||null===(g=w.academicInfo)||void 0===g?void 0:g.resume)||"",facebookUrl:(null===w||void 0===w||null===(A=w.otherInfo)||void 0===A?void 0:A.facebookUrl)||"",twitterUrl:(null===w||void 0===w||null===(j=w.otherInfo)||void 0===j?void 0:j.twitterUrl)||"",linkedinUrl:(null===w||void 0===w||null===(f=w.otherInfo)||void 0===f?void 0:f.linkedinUrl)||"",youtubeUrl:(null===w||void 0===w||null===(b=w.otherInfo)||void 0===b?void 0:b.youtubeUrl)||"",instagramUrl:(null===w||void 0===w||null===(y=w.otherInfo)||void 0===y?void 0:y.instagramUrl)||"",pinterestUrl:(null===w||void 0===w||null===(S=w.otherInfo)||void 0===S?void 0:S.pinterestUrl)||"",username:(null===w||void 0===w?void 0:w.username)||"",contactNumber:(null===w||void 0===w?void 0:w.contactNumber)||"",photo:(null===w||void 0===w?void 0:w.photo)||""},onSubmit:async e=>{try{const t={schoolId:N._id,basicInfo:{name:e.name,aadharNo:e.aadharNo,designation:e.designation,gender:e.gender,bloodGroup:e.bloodGroup,religion:e.religion,dob:e.dob,presentAddress:e.presentAddress,permanentAddress:e.permanentAddress},academicInfo:{email:e.email,username:e.username,joiningDate:e.joiningDate,resume:e.resume},otherInfo:{facebookUrl:null===e||void 0===e?void 0:e.facebookUrl,twitterUrl:null===e||void 0===e?void 0:e.twitterUrl,linkedinUrl:null===e||void 0===e?void 0:e.linkedinUrl,googlePlusUrl:null===e||void 0===e?void 0:e.googlePlusUrl,youtubeUrl:null===e||void 0===e?void 0:e.youtubeUrl,instagramUrl:null===e||void 0===e?void 0:e.instagramUrl,pinterestUrl:null===e||void 0===e?void 0:e.pinterestUrl},username:e.username,photo:e.photo,contactNumber:e.contactNumber};P(!0);const l=new FormData;l.append("body",JSON.stringify(t)),q.forEach((e=>l.append("employeePhoto",e))),W.forEach((e=>l.append("resume",e)));const{data:a}=await(0,de.yJ)(ce.r.employee.update+"/"+w._id,l,{headers:{"Content-Type":"multipart/form-data"}});console.log(a,"put"),window.localStorage.setItem("current_ecs_user",JSON.stringify(a.result)),C(),I(0)}catch(t){console.error(t)}P(!1)},enableReinitialize:!1});return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)("form",{onSubmit:O.handleSubmit,children:[(0,L.jsxs)(ti,{children:[(0,L.jsx)(Xn,{children:(0,L.jsx)("img",{src:q.length>0?URL.createObjectURL(q[0]):null!==w&&void 0!==w&&w.photo?null===w||void 0===w?void 0:w.photo:An,style:{width:"100px",height:"100px",display:"block",objectFit:"cover",margin:"0 auto"},alt:"Preview"})}),(0,L.jsx)($.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{multi:!1,name:"photo",label:"Select Profile",onChange:e=>J(e,"photo"),previousFile:null===w||void 0===w?void 0:w.photo,customOnChange:!0,selectedFiles:q,onRemove:e=>V(e),accept:"image/jpeg, image/png"})})})]}),(0,L.jsxs)($n,{children:[(0,L.jsx)(ei,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:O,label:"Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"aadharNo",formik:O,label:"National Id"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"designation",formik:O,label:"Designation",options:E})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"contactNumber",formik:O,label:"Phone No."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"gender",formik:O,label:"Gender",options:ai})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"bloodGroup",formik:O,label:"Blood Group",options:ni})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"religion",formik:O,label:"Religion"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:O,label:"Date of Birth",name:"dob",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"presentAddress",formik:O,label:"Present Address"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"permanentAddress",formik:O,label:"Permanent Address"})})]})})]}),(0,L.jsxs)($n,{children:[(0,L.jsx)(ei,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"email",formik:O,label:"Email"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"username",formik:O,label:"User Name",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:O,label:"Date of Joining",name:"joiningDate",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{multi:!1,name:"resume",label:"Select Resume",onChange:e=>J(e,"resume"),previousFile:null===w||void 0===w||null===(k=w.academicInfo)||void 0===k?void 0:k.resume,customOnChange:!0,selectedFiles:W,onRemove:e=>V(e),accept:"image/*,.pdf"})})]})})]}),(0,L.jsxs)($n,{children:[(0,L.jsx)(ei,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"facebookUrl",formik:O,label:"Facebook URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"twitterUrl",formik:O,label:"X URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"linkedinUrl",formik:O,label:"Linkedin Url"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"youtubeUrl",formik:O,label:"Youtube URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"instagramUrl",formik:O,label:"Instagram URL"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"pinterestUrl",formik:O,label:"Pinterest URL"})})]})})]}),(0,L.jsx)(li,{children:(0,L.jsxs)(v.A,{spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:()=>I(0),children:"Cancel"}),(0,L.jsx)(We.A,{loading:z,type:"submit",size:"small",variant:"contained",children:"Update"})]})})]})})}function si(){const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)(0),[n,i]=(0,a.useState)(!1),[o,r]=(0,a.useState)(null),d=async()=>{const e=window.localStorage.getItem("ktech_current_user");r(JSON.parse(e))};return(0,a.useEffect)((()=>{d()}),[]),o?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Profile"}),(0,L.jsx)(gt,{onChange:(e,t)=>l(t),value:t,labels:["Profile","Update Profile"]}),(0,L.jsx)(At,{index:0,value:t,children:(0,L.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mt:3},children:(0,L.jsx)(Zn,{employee:o})})}),(0,L.jsx)(At,{index:1,value:t,children:(0,L.jsx)(ii,{employee:o,setSelectValue:l,getEmployees:d})})]}):null}const oi=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),ri=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),di=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),ci=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),mi=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),ui=[{label:"Male",value:"male"},{label:"Female",value:"female"}],hi=[{label:"A+",value:"a"},{label:"A-",value:"a-"},{label:"B+",value:"b+"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}],xi=[{label:"Active",value:!0},{label:"Inactive",value:!1}],pi=[{label:"Yes",value:!0},{label:"No",value:!1}],gi=[{label:"Yes",value:!0},{label:"No",value:!1}],Ai=[{label:"Monthly",value:"monthly"},{label:"Hourly",value:"hourly"}];function ji(){const e=(0,M.zy)(),t=e.state&&e.state.data,{selectedSetting:l}=(0,a.useContext)(G.A),[n,i]=(0,a.useState)(!1),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[h,x]=(0,a.useState)(null),p=(0,M.Zp)();(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.designation.list);r(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.department.list);c(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.role.list);u(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[]);const g=(0,we.Wx)({initialValues:{name:t?t.basicInfo.name:"",empId:t?t.basicInfo.empId:"",responsibility:t?t.basicInfo.responsibility:"",designation:t?t.basicInfo.designation._id:"",contactNumber:t?t.contactNumber:"",secMobileNo:t?t.basicInfo.secMobileNo:"",gender:t?t.basicInfo.gender:"",bloodGroup:t?t.basicInfo.bloodGroup:"",religion:t?t.basicInfo.religion:"",presentAddress:t?t.basicInfo.presentAddress:"",permanentAddress:t?t.basicInfo.permanentAddress:"",dob:t?ye()(t.basicInfo.dob):ye()(new Date),fatherName:t?t.basicInfo.fatherName:"",spouseName:t?t.basicInfo.spouseName:"",aadharNo:t?t.basicInfo.aadharNo:"",fatherOccupation:t?t.basicInfo.fatherOccupation:"",spouseOccupation:t?t.basicInfo.spouseOccupation:"",qualification:t?t.academicInfo.qualification:"",workExperience:t?t.academicInfoworkExperience:"",salaryGrade:t?t.academicInfosalaryGrade:"",email:t?t.academicInfo.email:"",salaryType:t?t.academicInfo.salaryType:"",role:t?t.role._id:"",department:t?t.academicInfo.department._id:"",joiningDate:t?ye()(t.academicInfo.joiningDate):ye()(new Date),resume:t?t.resume:"",username:t?t.username:"",password:t?t.password:"",public:t?t.public:"",showDetailsForWeb:!!t&&t.showDetailsForWeb,photo:t?t.photo:"",active:t?t.active:""},onSubmit:async e=>{try{i(!0);const a={basicInfo:{name:e.name,empId:e.empId,designation:e.designation,secMobileNo:e.secMobileNo,gender:e.gender,religion:e.religion,presentAddress:e.presentAddress,permanentAddress:e.permanentAddress,dob:ye()(e.dob),fatherName:e.fatherName,spouseName:e.spouseName,aadharNo:e.aadharNo,fatherOccupation:e.fatherOccupation,spouseOccupation:e.spouseOccupation},academicInfo:{workExperience:e.workExperience,salaryGrade:e.salaryGrade,email:e.email,salaryType:e.salaryType,department:e.department,joiningDate:ye()(e.joiningDate),resume:e.resume},otherInfo:{public:e.public,showDetailsForWeb:e.showDetailsForWeb||!1},contactNumber:e.contactNumber,role:e.role,username:e.username,password:e.password,active:e.active,schoolId:l._id},{data:n}=await(0,de.yJ)(ce.r.employee.update+"/"+t._id,a);console.log(n,"erttfyuygiu"),p("/sch/human-resource/employee"),i(!1)}catch(a){console.log(a)}i(!1)}});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Update Employee",showTextField:!1}),(0,L.jsxs)(mi,{children:[(0,L.jsx)(ci,{children:(0,L.jsx)("img",{src:h||An,style:{width:"100px",height:"100px",objectFit:"contain"},alt:"Preview"})}),(0,L.jsx)($.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"photo",formik:g,label:"Photo",type:"file",onChange:e=>{const t=e.target.files[0];if(t){const e=URL.createObjectURL(t);x(e)}}})})})]}),(0,L.jsxs)("form",{onSubmit:g.handleSubmit,children:[(0,L.jsxs)(ri,{children:[(0,L.jsx)(di,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:g,label:"Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"empId",formik:g,label:"Employee Id"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"responsibility",formik:g,label:"Responsibility"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"designation",formik:g,label:"Designation",options:o})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"contactNumber",formik:g,label:"Contact Number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"secMobileNo",formik:g,label:"Secondary Contact Number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"gender",formik:g,label:"Select Gender",options:ui})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"bloodGroup",formik:g,label:"Select Blood Group",options:hi})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"religion",formik:g,label:"Religon"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{formik:g,label:"Date of Birth",name:"dob",required:!0})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"presentAddress",formik:g,label:"Present Address"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"permanentAddress",formik:g,label:"Permanent Address"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fatherName",formik:g,label:"Father Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"spouseName",formik:g,label:"Spouse Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"aadharNo",formik:g,label:"Aadhar No."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fatherOccupation",formik:g,label:"Father Occupation"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"spouseOccupation",formik:g,label:"Spouse Occupation"})})]})})]}),(0,L.jsxs)(ri,{children:[(0,L.jsx)(di,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"qualification",formik:g,label:"Qualification              "})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"workExperience",formik:g,label:"Work Experience"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"salaryGrade",formik:g,label:"Select Salary Grade"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"email",formik:g,label:"Email"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"salaryType",formik:g,label:"Select Salary Type",options:Ai})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"role",formik:g,label:"Select Role",options:m})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"department",formik:g,label:"Select Department",options:d})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{required:!0,name:"joiningDate",formik:g,label:"Joining Date"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"resume",formik:g,label:"Resume",type:"file"})})]})})]}),(0,L.jsxs)(ri,{children:[(0,L.jsx)(di,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Log In Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"username",formik:g,label:"User Name"})})})})]}),(0,L.jsxs)(ri,{children:[(0,L.jsx)(di,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"public",formik:g,label:"View On Web",options:pi})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"showDetailsForWeb",formik:g,label:"Show Details For Web",options:gi})})]})})]}),(0,L.jsxs)(ri,{sx:{marginBottom:"60px"},children:[(0,L.jsx)(di,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Profile Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"active",formik:g,label:"Status",options:xi})})})})]}),(0,L.jsx)($.Ay,{container:!0,children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,children:(0,L.jsx)(oi,{children:(0,L.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:()=>p(-1),children:"Cancel"}),(0,L.jsx)(We.A,{loading:n,type:"submit",size:"small",variant:"contained",children:"Update"})]})})})})]})]})}const fi=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),bi=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),yi=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),vi=[{label:"Male",value:"male"},{label:"Female",value:"female"}],Si=[{label:"A+",value:"a+"},{label:"B+",value:"b+"},{label:"A-",value:"a-"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}],ki=[{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Sister",value:"Sister"},{label:"Brother",value:"Brother"},{label:"Uncle",value:"Uncle"},{label:"Other Relative",value:"Other Relative"}],Ci=[{label:"Yes",value:"yes"},{label:"No",value:"no"}];function wi(){var e,t,l,n,i,o,r,d,c,m,h,x,p,g,A,j,f,b,y,S,k,C,w,I,N,D,F,_;const{selectedSetting:R}=(0,a.useContext)(G.A),E=(0,M.Zp)(),[T,z]=(0,a.useState)(null),[P,q]=(0,a.useState)(!1),[B,W]=(0,a.useState)([]),[Y,J]=(0,a.useState)([]),[V,O]=(0,a.useState)([]),[U,H]=(0,a.useState)([]),[Q,Z]=(0,a.useState)([]),[ee,te]=(0,a.useState)([]),[le,ae]=(0,a.useState)([]),[ne,ie]=(0,a.useState)(""),{id:se}=(0,M.g)();(0,a.useEffect)((()=>{se&&(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.student.details+"/"+se);console.log(e.result,"=========="),z(e.result)}catch(e){console.log(e)}})()}),[se,R]);const oe=(0,we.Wx)({initialValues:{academicYear:(null===T||void 0===T?void 0:T.academicYear._id)||"",name:(null===T||void 0===T?void 0:T.basicInfo.name)||"",admissionDate:null!==T&&void 0!==T&&null!==(e=T.basicInfo)&&void 0!==e&&e.admissionDate?ye()(T.basicInfo.admissionDate).format("YYYY/MM/DD"):null,motherTongue:(null===T||void 0===T?void 0:T.basicInfo.motherTongue)||"",dob:null!==T&&void 0!==T&&null!==(t=T.basicInfo)&&void 0!==t&&t.dob?ye()(T.basicInfo.dob).format("YYYY/MM/DD"):null,gender:(null===T||void 0===T?void 0:T.basicInfo.gender)||"",bloodGroup:(null===T||void 0===T?void 0:T.basicInfo.bloodGroup)||"",cicn:(null===T||void 0===T?void 0:T.basicInfo.cicn)||"",religion:(null===T||void 0===T?void 0:T.basicInfo.religion)||"",caste:(null===T||void 0===T?void 0:T.basicInfo.caste)||"",rte:(null===T||void 0===T?void 0:T.basicInfo.rte)||"no",aadharNo:(null===T||void 0===T?void 0:T.basicInfo.aadharNo)||"",satNo:(null===T||void 0===T?void 0:T.basicInfo.satNo)||"",grNo:(null===T||void 0===T?void 0:T.basicInfo.grNo)||"",birthPlace:(null===T||void 0===T?void 0:T.basicInfo.birthPlace)||"",class:(null===T||void 0===T||null===(l=T.academicInfo)||void 0===l||null===(n=l.class)||void 0===n?void 0:n._id)||"",section:(null===T||void 0===T||null===(i=T.academicInfo)||void 0===i||null===(o=i.section)||void 0===o?void 0:o._id)||"",rollNumber:(null===T||void 0===T||null===(r=T.academicInfo)||void 0===r?void 0:r.rollNumber)||"",admissionNumber:(null===T||void 0===T||null===(d=T.academicInfo)||void 0===d?void 0:d.admissionNumber)||"",contactNumber:(null===T||void 0===T?void 0:T.contactNumber)||"",guardianName:(null===T||void 0===T||null===(c=T.contactInfo)||void 0===c?void 0:c.guardianName)||"",guardianContactNumber:(null===T||void 0===T||null===(m=T.contactInfo)||void 0===m?void 0:m.guardianContactNumber)||"",guardianContactNumberSecondary:(null===T||void 0===T||null===(h=T.contactInfo)||void 0===h?void 0:h.guardianContactNumberSecondary)||"",guardianRelation:(null===T||void 0===T||null===(x=T.contactInfo)||void 0===x?void 0:x.guardianRelation)||"",nationId:(null===T||void 0===T||null===(p=T.contactInfo)||void 0===p?void 0:p.nationId)||"",presentAddress:(null===T||void 0===T||null===(g=T.contactInfo)||void 0===g?void 0:g.presentAddress)||"",permanentAddress:(null===T||void 0===T||null===(A=T.contactInfo)||void 0===A?void 0:A.permanentAddress)||"",prevSchName:(null===T||void 0===T||null===(j=T.prevSchInfo)||void 0===j?void 0:j.name)||"",tcNo:(null===T||void 0===T||null===(f=T.prevSchInfo)||void 0===f?void 0:f.tcNo)||"",prevClass:(null===T||void 0===T||null===(b=T.prevSchInfo)||void 0===b?void 0:b.prevClass)||"",email:(null===T||void 0===T||null===(y=T.otherInfo)||void 0===y?void 0:y.email)||"",healthCondition:(null===T||void 0===T||null===(S=T.otherInfo)||void 0===S?void 0:S.healthCondition)||"",transportMember:(null===T||void 0===T||null===(k=T.otherInfo)||void 0===k?void 0:k.transportMember)||!1,hostelMember:(null===T||void 0===T||null===(C=T.otherInfo)||void 0===C?void 0:C.hostelMember)||!1,libraryMember:(null===T||void 0===T||null===(w=T.otherInfo)||void 0===w?void 0:w.libraryMember)||!1,busStop:(null===T||void 0===T||null===(I=T.otherInfo)||void 0===I?void 0:I.busStop)||"",extraInfo:(null===T||void 0===T||null===(N=T.otherInfo)||void 0===N?void 0:N.extraInfo)||"",active:(null===T||void 0===T?void 0:T.active)||!0,fatherName:(null===T||void 0===T?void 0:T.fatherInfo.name)||"",fatherPhone:(null===T||void 0===T?void 0:T.fatherInfo.contactNumber)||"",fatherEdu:(null===T||void 0===T?void 0:T.fatherInfo.education)||"",fatherProfession:(null===T||void 0===T?void 0:T.fatherInfo.profession)||"",fatherDesignation:(null===T||void 0===T?void 0:T.fatherInfo.designation)||"",motherName:(null===T||void 0===T?void 0:T.motherInfo.name)||"",motherPhone:(null===T||void 0===T?void 0:T.motherInfo.contactNumber)||"",motherEdu:(null===T||void 0===T?void 0:T.motherInfo.education)||"",motherProfession:(null===T||void 0===T?void 0:T.motherInfo.profession)||"",motherDesignation:(null===T||void 0===T?void 0:T.motherInfo.designation)||""},onSubmit:async e=>{try{const t={basicInfo:{name:e.name,admissionDate:ye()(e.admissionDate).format("YYYY/MM/DD"),dob:ye()(e.dob).format("YYYY/MM/DD"),gender:e.gender,bloodGroup:e.bloodGroup,religion:e.religion,rte:e.rte,caste:e.caste,motherTongue:e.motherTongue,birthPlace:e.birthPlace,aadharNo:e.aadharNo,cicn:e.cicn,satNo:e.satNo,grNo:e.grNo},motherInfo:{name:e.motherName,contactNumber:e.motherPhone,education:e.motherEdu,profession:e.motherProfession,designation:e.motherDesignation},fatherInfo:{name:e.fatherName,contactNumber:e.fatherPhone,education:e.fatherEdu,profession:e.fatherProfession,designation:e.fatherDesignation},academicInfo:{class:e.class,section:e.section,rollNumber:e.rollNumber,admissionNumber:e.admissionNumber},otherInfo:{email:e.email,healthCondition:e.healthCondition,hostelMember:e.hostelMember,transportMember:e.transportMember,libraryMember:e.libraryMember,busStop:e.busStop,extraInfo:e.extraInfo},contactInfo:{guardianName:e.guardianName,guardianContactNumber:e.guardianContactNumber,guardianContactNumberSecondary:e.guardianContactNumberSecondary,guardianRelation:e.guardianRelation,nationId:e.nationId,presentAddress:e.presentAddress,permanentAddress:e.permanentAddress},prevSchInfo:{name:e.prevSchName,tcNo:e.tcNo,prevClass:e.prevClass},academicYear:e.academicYear,schoolId:R._id,contactNumber:e.contactNumber,active:e.active},l=new FormData;if(l.append("body",JSON.stringify(t)),B.forEach((e=>l.append("studentPhoto",e))),V.forEach((e=>l.append("fatherPhoto",e))),Y.forEach((e=>l.append("motherPhoto",e))),U.forEach((e=>l.append("transferCertificate",e))),q(!0),T){const{data:e}=await(0,de.yJ)(ce.r.student.update+"/"+T._id,l,{headers:{"Content-Type":"multipart/form-data"}});E("/sch/student/admit-student")}else{const{data:e}=await(0,de.bE)(ce.r.student.create,l,{headers:{"Content-Type":"multipart/form-data"}});E("/sch/student/admit-student")}}catch(t){console.log(t)}q(!1)},enableReinitialize:!0});(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);Z(e.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:R._id}});te(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[]),(0,a.useEffect)((()=>{oe.values.class&&(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:R._id,search:{class:oe.values.class}}});ae(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[oe.values.class,R]);const re=(e,t)=>{const{files:l}=e.target;let a=[];if(l.length>0){for(let e=0;e<l.length;e++){const t=l[e];a.push(t)}"fatherPhoto"===t?O(a):"motherPhoto"===t?J(a):"transferCertificate"===t?H(a):W(a)}else console.log("No files selected")},me=(e,t)=>{W(B.filter((t=>t.name!=e))),O(V.filter((t=>t.name!=e))),J(Y.filter((t=>t.name!=e))),H(U.filter((t=>t.name!=e)))};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Admit Student"}),(0,L.jsxs)("form",{onSubmit:oe.handleSubmit,children:[(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,L.jsxs)($.Ay,{xs:12,md:12,lg:12,item:!0,children:[(0,L.jsxs)(u.A,{component:"span",color:"red",fontWeight:"bold",sx:{display:"inline"},children:["Note:"," "]}),(0,L.jsx)(u.A,{variant:"h6",component:"span",fontWeight:"bold",sx:{display:"inline"},children:"Student will be admited to session"})]}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:oe,label:"Select Academic Year",options:Q})})]})}),(0,L.jsxs)(fi,{children:[(0,L.jsx)(bi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"name",formik:oe,label:"Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"admissionNumber",formik:oe,label:"Admission No.",disabled:"manual"!==(null===R||void 0===R?void 0:R.admissionNo)})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{required:!0,name:"admissionDate",formik:oe,label:"Admission Date"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ft,{required:!0,name:"dob",formik:oe,label:"Date Of Birth"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"gender",formik:oe,label:"Select Gender",options:vi})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"bloodGroup",formik:oe,label:"Select Blood Group",options:Si})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"religion",formik:oe,label:"Religion"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"rte",formik:oe,label:"Select RTE",options:Ci})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"caste",formik:oe,label:"Cast"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"cicn",formik:oe,label:"Cast Income Certificate No."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"motherTongue",formik:oe,label:"Mother Tongue"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"birthPlace",formik:oe,label:"Birth Place"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"aadharNo",formik:oe,label:"Aadhar No."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"satNo",formik:oe,label:"SAT No."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"grNo",formik:oe,label:"GR No."})})]})})]}),(0,L.jsxs)(fi,{children:[(0,L.jsx)(bi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Contact Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"contactNumber",formik:oe,label:"Contact Number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"guardianName",formik:oe,label:"Guardian Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"guardianContactNumber",formik:oe,label:"Guardian Number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"guardianContactNumberSecondary",formik:oe,label:"Alternate Number"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"guardianRelation",formik:oe,label:"Select Relation With Guardian",options:ki})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"nationId",formik:oe,label:"Select National Id"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"presentAddress",formik:oe,label:"Present Address"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"permanentAddress",formik:oe,label:"Permanent Address"})})]})})]}),(0,L.jsxs)(fi,{children:[(0,L.jsx)(bi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:oe,label:"Select Class",options:ee})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:oe,label:"Select Section",options:le})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"rollNumber",formik:oe,label:"Roll No",disabled:"manual"!==(null===R||void 0===R?void 0:R.rollNumberType)})})]})})]}),(0,L.jsxs)(fi,{children:[(0,L.jsx)(bi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Previous School Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"prevSchName",formik:oe,label:"Previous School"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"prevClass",formik:oe,label:"Previous Class"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"tcNo",formik:oe,label:"TC No."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{multi:!1,name:"transferCertificate",label:"Select File",onChange:e=>re(e,"transferCertificate"),previousFile:null===T||void 0===T||null===(D=T.prevSchInfo)||void 0===D?void 0:D.transferCertificate,customOnChange:!0,selectedFiles:U,onRemove:e=>me(e),accept:"image/*,.pdf"})})]})})]}),(0,L.jsxs)(fi,{children:[(0,L.jsx)(bi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Father Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"fatherName",formik:oe,label:"Father Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{required:!0,name:"fatherPhone",formik:oe,label:"Father Phone"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fatherEdu",formik:oe,label:"Father Education."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fatherProfession",formik:oe,label:"Father Profession"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"fatherDesignation",formik:oe,label:"Father Designation"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{name:"fatherPhoto",multi:!1,label:"Select Photo",onChange:e=>re(e,"fatherPhoto"),previousFile:null===T||void 0===T||null===(F=T.fatherInfo)||void 0===F?void 0:F.photo,customOnChange:!0,selectedFiles:V,onRemove:e=>me(e),accept:"image/jpeg, image/png"})})]})})]}),(0,L.jsxs)(fi,{children:[(0,L.jsx)(bi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Mother Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"motherName",formik:oe,label:"Mother Name"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"motherPhone",formik:oe,label:"Mother Phone"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"motherEdu",formik:oe,label:"Mother Education."})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"motherProfession",formik:oe,label:"Mother Profession"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"motherDesignation",formik:oe,label:"Mother Designation"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{label:"Select Photo",multi:!1,name:"motherPhoto",onChange:e=>re(e,"motherPhoto"),previousFile:null===T||void 0===T||null===(_=T.motherInfo)||void 0===_?void 0:_.photo,customOnChange:!0,selectedFiles:Y,onRemove:e=>me(e),accept:"image/jpeg, image/png"})})]})})]}),(0,L.jsxs)(fi,{sx:{marginBottom:"60px"},children:[(0,L.jsx)(bi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,L.jsx)(s.A,{sx:{padding:"10px"},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"email",formik:oe,label:"Email"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"healthCondition",formik:oe,label:"Health Condition"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"active",formik:oe,label:"Select Status",options:[{label:"Inactive",value:!1},{label:"Active",value:!0}]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"hostelMember",formik:oe,label:"Select Hostel Member",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"transportMember",formik:oe,label:"Select Transport Member",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{name:"libraryMember",formik:oe,label:"Select Library Member",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"busStop",formik:oe,label:"Bus Stop"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(ot.A,{name:"extraInfo",formik:oe,label:"Other Info"})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Vl,{name:"studentPhoto",multi:!1,label:"Select Photo",onChange:e=>re(e,"studentPhoto"),previousFile:null===T||void 0===T?void 0:T.photo,customOnChange:!0,selectedFiles:B,onRemove:e=>me(e),accept:"image/jpeg, image/png"})})]})})]}),(0,L.jsx)($.Ay,{container:!0,children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,children:(0,L.jsx)(yi,{children:(0,L.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,L.jsx)(ke.A,{size:"small",color:"error",variant:"contained",onClick:()=>E(-1),children:"Cancel"}),(0,L.jsx)(We.A,{loading:P,type:"submit",size:"small",variant:"contained",children:"Submit"})]})})})})]})]})}var Ii=l(36930),Ni=l(29760),Di=l(12900),Mi=l(95622),Fi=l(17564),_i=l(1130),Ri=l(34109),Ei=l(26581);const Ti=(0,L.jsx)(Ri.A,{fontSize:"small"}),zi=(0,L.jsx)(Ei.A,{fontSize:"small"}),Pi={PaperProps:{style:{maxHeight:224,width:250}}},qi=(0,n.Ay)(Ii.A)((e=>{let{theme:t}=e;return{height:25,borderRadius:15,["&.".concat(Ni.A.colorPrimary)]:{backgroundColor:t.palette.grey[(t.palette.mode,800)]},["& .".concat(Ni.A.bar)]:{borderRadius:15,backgroundColor:"light"===t.palette.mode?"#f42323":"#308fe8"}}})),Bi=(0,n.Ay)(Di.Ay)((e=>{let{theme:t}=e;return{padding:10,width:"100%",borderBottom:"1px solid ".concat("light"===t.palette.mode?"#eaecef":"#30363d"),"& input":{borderRadius:4,backgroundColor:"light"===t.palette.mode?"#fff":"#0d1117",padding:8,transition:t.transitions.create(["border-color","box-shadow"]),border:"1px solid ".concat("light"===t.palette.mode?"#eaecef":"#30363d"),fontSize:14,"&:focus":{boxShadow:"0px 0px 0px 3px ".concat("light"===t.palette.mode?"rgba(3, 102, 214, 0.3)":"rgb(12, 45, 107)"),borderColor:"light"===t.palette.mode?"#0366d6":"#388bfd"}}}})),Wi=()=>{const{selectedSetting:e}=(0,a.useContext)(G.A),{state:t}=(0,M.zy)(),[l,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)([]),[r,d]=(0,a.useState)(""),[c,m]=(0,a.useState)([]),[h,x]=(0,a.useState)({sms:t?t.message:"Dear {{VAR}}, We would like to inform you {{VAR1}},{{VAR2}},{{VAR3}},{{VAR4}},{{VAR5}} Regards Webspruce."}),[p,g]=(0,a.useState)([]),[A,j]=(0,a.useState)([]),[f,b]=(0,a.useState)([]),[v,S]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[I,D]=(0,a.useState)(!1),[F,_]=(0,a.useState)([]),[R,E]=(0,a.useState)(!1),[T,z]=(0,a.useState)(""),[P,q]=(0,a.useState)(""),[B,W]=(0,a.useState)(""),[Y,J]=(0,a.useState)(0),[V,O]=(0,a.useState)(""),[U,H]=(0,a.useState)([]),[Q,X]=(0,a.useState)([]),[ee,te]=(0,a.useState)([]),[le,ae]=(0,a.useState)([]),[ne,ie]=(0,a.useState)(!1),[se,oe]=(0,a.useState)([]),[re,me]=(0,a.useState)(0),[ue,he]=(0,a.useState)([]),[xe,ge]=(0,a.useState)(50),[Ae,je]=(0,a.useState)(0),[fe,be]=(0,a.useState)(50);(0,a.useEffect)((()=>{X([]),q(""),W(""),te([])}),[U,e._id]),(0,a.useEffect)((()=>{W(""),te([])}),[Q,e._id]),(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.role.list);o(e.result)}catch(e){console.log(e)}})()}),[]);(0,a.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});j(t.result)}catch(t){console.log(t)}})()}),[e._id]);const ye=e=>{const{name:t,value:l}=e.target;x({...h,[t]:l})};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Compose"}),(0,L.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n(!0);try{je(Ae+1),be(xe-(Ae+1)),wl.oR.success("Message sent successfully"),x({sms:t?t.message:"Dear {{VAR}}, We would like to inform you {{VAR1}},{{VAR2}},{{VAR3}},{{VAR4}},{{VAR5}} Regards Webspruce."}),m([]),z(""),q(""),W(""),O([]),d(""),_([]),te([]),oe([]),Y(0),me(0),he([]),n(!1)}catch(l){n(!1),console.log(l)}},children:[(0,L.jsxs)(Z.A,{sx:{padding:"10px",mb:1},children:[(0,L.jsxs)(s.A,{sx:{paddingLeft:"1rem",display:"flex",gap:"8px"},children:[(0,L.jsxs)(s.A,{children:["Total SMS:"," ",(0,L.jsx)(u.A,{component:"span",fontWeight:"bold",children:xe})]}),(0,L.jsxs)(s.A,{children:["Consumed SMS:"," ",(0,L.jsx)(u.A,{component:"span",fontWeight:"bold",children:Ae})]}),(0,L.jsxs)(s.A,{children:["Balance SMS:"," ",(0,L.jsx)(u.A,{component:"span",fontWeight:"bold",children:fe})]})]}),(0,L.jsx)(s.A,{sx:{padding:"1rem"},children:(0,L.jsx)(qi,{variant:"determinate",value:100*(79875-fe)/79875})})]}),(0,L.jsx)(Z.A,{sx:{padding:"10px",mb:1},children:(0,L.jsx)(s.A,{sx:{flexFlow:1},children:(0,L.jsxs)($.Ay,{container:!0,spacing:1,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,L.jsxs)(dl.A,{size:"small",fullWidth:!0,children:[(0,L.jsx)(cl.A,{id:"demo-simple-select-filrlccled-label",children:"Receiver Type"}),(0,L.jsxs)(ml.A,{label:"Receiver Type",labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"receiverType",value:r,onChange:e=>d(e.target.value),children:[(0,L.jsx)(w.A,{value:"role",sx:{fontSize:12,fontWeight:500},children:"Role"}),(0,L.jsx)(w.A,{value:"user",sx:{fontSize:12,fontWeight:500},children:"User"}),(0,L.jsx)(w.A,{value:"students",sx:{fontSize:12,fontWeight:500},children:"Students"}),(0,L.jsx)(w.A,{value:"All Students",sx:{fontSize:12,fontWeight:500},children:"All Students"}),(0,L.jsx)(w.A,{value:"file",sx:{fontSize:12,fontWeight:500},children:"File"})]})]})}),"file"===r&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{item:!0,xs:12,md:3,lg:1,sx:{alignSelf:"center",mt:"-15px"},children:(0,L.jsx)(ke.A,{size:"small",variant:"contained",children:"Sample File"})}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:4,lg:3,sx:{alignSelf:"center",mt:"-15px"},children:(0,L.jsx)(Vl,{name:"file",onChange:e=>((e,t)=>{const{files:l}=e.target;let a=[];if(l.length>0){for(let e=0;e<l.length;e++){const t=l[e];a.push(t)}ae(a)}else console.log("No files selected")})(e),customOnChange:!0,label:"Select File",selectedFiles:le})})]}),"students"===r&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)($.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,L.jsx)(kt.A,{value:T,fullWidth:!0,"aria-describedby":"classPopper",onFocus:e=>{S(v?null:e.currentTarget)},variant:"outlined",size:"small",label:"Class"}),(0,L.jsx)(Mi.A,{id:"classPopper",open:!!v,anchorEl:v,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{onBlur:()=>S(null),open:!0,value:U,multiple:!0,onChange:async(t,l)=>{const a=l.map((e=>e._id)),n=l.map((e=>e.name));H(l),z(n.join(","));try{if(l.length){const{data:t}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:{$in:a}}}}),l=t.result.sort(((e,t)=>e.name.localeCompare(t.name)));b(l);const n=Q.filter((e=>a.includes(e.class._id)));X(n),q(n.map((e=>"".concat(e.name," (").concat(e.class.name,")"))).join(", "));const i=n.map((e=>e._id));if(i.length){const{data:t}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.section":i}}});_(t.result)}else _([])}else b([]),X([]),q(""),_([])}catch(i){console.log(i)}},isOptionEqualToValue:(e,t)=>e._id===t._id,options:A,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Ti,checkedIcon:zi,checked:a}),"".concat(t.name)]})},renderInput:e=>(0,L.jsx)(Bi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Class",autoFocus:!0})})})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,L.jsx)(kt.A,{value:P,"aria-describedby":"sectionPopper",fullWidth:!0,onFocus:e=>{C(k?null:e.currentTarget)},variant:"outlined",size:"small",label:"Section"}),(0,L.jsx)(Mi.A,{id:"sectionPopper",open:!!k,anchorEl:k,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{multiple:!0,onBlur:()=>C(null),open:!0,value:Q,onChange:async(t,l)=>{const a=l.map((e=>e._id)),n=l.map((e=>e.name)),i=l.map((e=>e.class.name));X(l),q(n.map(((e,t)=>"".concat(e," (").concat(i[t],")"))).join(", "));try{if(l.length){const{data:t}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.section":a}}});_(t.result)}else _([])}catch(s){console.log(s)}},isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:f.sort(((e,t)=>e.class.name.localeCompare(t.class.name))),disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name,"(class:").concat(e.class.name,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Ti,checkedIcon:zi,style:{marginRight:8},checked:a}),"".concat(t.name,"(class:").concat(t.class.name,")")]})},renderInput:e=>(0,L.jsx)(Bi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Section",autoFocus:!0})})})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,L.jsx)(kt.A,{value:B,"aria-describedby":"contactsPopper",fullWidth:!0,onFocus:e=>{D(I?null:e.currentTarget)},variant:"outlined",size:"small",label:"Students",InputProps:{endAdornment:(0,L.jsxs)(Ct.A,{position:"start",children:["All Total-",Y]})}}),(0,L.jsx)(Mi.A,{id:"contactsPopper",open:!!I,anchorEl:I,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{multiple:!0,onBlur:()=>D(null),open:!0,value:ee,onChange:(e,t)=>{if(t.some((e=>"all"===e._id)))if(ee.length===F.length)te([]),g([]),J(0),W("");else{const e=F.map((e=>e._id));te([...F]),g(e),J(F.length),W("All")}else{const e=t.map((e=>e.basicInfo.name)),l=t.map((e=>e._id));g(l),J(t.length),W(e.join(", ")),te(t)}},isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:[{_id:"all",basicInfo:{name:"All (".concat(F.length,")")},contactNumber:""},...F],disableCloseOnSelect:!0,getOptionLabel:e=>"all"===e._id?"All (".concat(F.length,")"):"".concat(e.basicInfo.name," (").concat(e.contactNumber,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Ti,checkedIcon:zi,style:{marginRight:8},checked:a||"all"===t._id&&ee.length===F.length}),"all"===t._id?"All (".concat(F.length,")"):"".concat(t.basicInfo.name," (").concat(t.contactNumber,")")]})},renderInput:e=>(0,L.jsx)(s.A,{sx:{ml:5,width:"100%"},children:(0,L.jsx)(Bi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Search student with name",autoFocus:!0})})})})})]})]}),"role"===r&&(0,L.jsx)($.Ay,{item:!0,xs:12,md:3,lg:3,children:(0,L.jsxs)(dl.A,{size:"small",fullWidth:!0,children:[(0,L.jsx)(cl.A,{sx:{fontSize:12},children:"Role"}),(0,L.jsx)(ml.A,{label:"Role",labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:c,onChange:e=>{const{target:{value:t}}=e;m("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:e=>e.join(", "),MenuProps:Pi,children:i&&i.map(((e,t)=>(0,L.jsxs)(w.A,{value:e.name,sx:{fontSize:12},children:[(0,L.jsx)(Gt.A,{checked:c.indexOf(e.name)>-1}),(0,L.jsx)(y.A,{primary:e.name})]},e._id)))})]})}),"user"===r&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($.Ay,{item:!0,xs:12,md:3,lg:3,children:(0,L.jsxs)(dl.A,{size:"small",fullWidth:!0,children:[(0,L.jsx)(cl.A,{sx:{fontSize:12},children:"Role"}),(0,L.jsx)(ml.A,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"role",sx:{marginBottom:"15px"},label:"Role",size:"small",onChange:async t=>{ye(t);const l=t.target.value;try{const{data:t}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:e._id,search:{role:{$in:l}}}});oe(t.result)}catch(a){}},value:h.role,children:i&&i.filter((e=>{var t;return"student"!==(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())})).map(((e,t)=>(0,L.jsx)(w.A,{value:e._id,sx:{fontSize:12,fontWeight:500},children:e.name},e._id)))})]})}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,L.jsx)(kt.A,{fullWidth:!0,value:V,"aria-describedby":"employeePopper",onFocus:e=>{ie(ne?null:e.currentTarget)},variant:"outlined",size:"small",label:"Employees",InputProps:{endAdornment:(0,L.jsxs)(Ct.A,{position:"end",children:["All Total- ",re]})}}),(0,L.jsx)(Mi.A,{id:"employeePopper",open:!!ne,anchorEl:ne,children:(0,L.jsx)(dl.A,{variant:"outlined",fullWidth:!0,size:"small",children:(0,L.jsx)(Fi.A,{onBlur:()=>ie(null),open:!0,value:ue,multiple:!0,onChange:(e,t)=>{if(t.some((e=>"all"===e._id)))ue.length===se.length?(he([]),me(0),O("")):(he([...se]),me(se.length),O("All"));else{const e=t.map((e=>e.basicInfo.name));t.map((e=>e._id));he(t),me(t.length),O(e.join(", "))}},isOptionEqualToValue:(e,t)=>e._id===t._id,options:[{_id:"all",basicInfo:{name:"All"}},...se],disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(null===e||void 0===e?void 0:e.basicInfo.name," (").concat(null===e||void 0===e?void 0:e.contactNumber,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Ti,checkedIcon:zi,checked:a||"all"===t._id&&ue.length===se.length}),"all"===t._id?"All (".concat(se.length,")"):"".concat(null===t||void 0===t?void 0:t.basicInfo.name," (").concat(null===t||void 0===t?void 0:t.contactNumber,")")]})},renderInput:e=>(0,L.jsx)(s.A,{sx:{ml:5,width:"100%"},children:(0,L.jsx)(Bi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Employees",autoFocus:!0})})})})})]})]})]})})}),(0,L.jsx)(Z.A,{sx:{padding:"10px",mb:1},children:(0,L.jsxs)($.Ay,{container:!0,spacing:1,children:[(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,L.jsxs)(dl.A,{required:!0,size:"small",fullWidth:!0,children:[(0,L.jsx)(cl.A,{sx:{fontSize:12},children:"SMS Type"}),(0,L.jsxs)(ml.A,{label:"SMS Type",id:"demo-simple-select-filled",name:"smsType",value:h.smsType||"",onChange:ye,children:[(0,L.jsx)(w.A,{value:"general",style:{fontSize:12,fontWeight:500},children:"General"}),(0,L.jsx)(w.A,{value:"attendance",style:{fontSize:12,fontWeight:500},children:"Attendence"}),(0,L.jsx)(w.A,{value:"fee",style:{fontSize:12,fontWeight:500},children:"Fee"}),(0,L.jsx)(w.A,{value:"credential",style:{fontSize:12,fontWeight:500},children:"Credential"}),(0,L.jsx)(w.A,{value:"exam",style:{fontSize:12,fontWeight:500},children:"Exam"}),(0,L.jsx)(w.A,{value:"leave",style:{fontSize:12,fontWeight:500},children:"Leave"}),(0,L.jsx)(w.A,{value:"library",style:{fontSize:12,fontWeight:500},children:"Library"}),(0,L.jsx)(w.A,{value:"transport",style:{fontSize:12,fontWeight:500},children:"Transport"}),(0,L.jsx)(w.A,{value:"hostel",style:{fontSize:12,fontWeight:500},children:"Hostel"}),(0,L.jsx)(w.A,{value:"preaddmission",style:{fontSize:12,fontWeight:500},children:"Preaddmission"}),(0,L.jsx)(w.A,{value:"parentMeeting",style:{fontSize:12,fontWeight:500},children:"Parent Meeting"}),(0,L.jsx)(w.A,{value:"schoolTiming",style:{fontSize:12,fontWeight:500},children:"School Timing"}),(0,L.jsx)(w.A,{value:"notice",style:{fontSize:12,fontWeight:500},children:"Notice"}),(0,L.jsx)(w.A,{value:"schoolOpen",style:{fontSize:12,fontWeight:500},children:"School Open"}),(0,L.jsx)(w.A,{value:"education",style:{fontSize:12,fontWeight:500},children:"Education"})]})]})}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,L.jsx)(kt.A,{required:!0,size:"small",label:"Subject",fullWidth:!0,name:"subject",value:h.subject||"",onChange:ye})}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,L.jsxs)(s.A,{style:{display:"flex",justifyContent:"flex-start"},children:[(0,L.jsx)(u.A,{component:"span",children:"Dynamic Tag: "}),(0,L.jsxs)(s.A,{children:["[name],[school_name] - wil get autoreplaced,",(0,L.jsxs)(u.A,{component:"span",color:"error",children:["replace - ","{{var}}"," with your content, variable fields may vary in length. Space consumed for 1 variable is 30 char and avoid double space."]})]})]})}),(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,L.jsx)(_i.h,{maxRows:4,"aria-label":"maximum height",placeholder:"Text Message",style:{width:"100%",height:"120px",padding:"10px",borderRadius:"5px"},name:"sms",fullWidth:!0,value:h.sms,onChange:ye})}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)("span",{children:"Click here to Notify Via SMS"}),(0,L.jsx)(N.A,{onChange:e=>{E(e.target.checked)},checked:R})]})]})}),(0,L.jsxs)(pe,{module:"Compose",permission:"add",children:[" ",(0,L.jsx)($.Ay,{container:!0,spacing:2,children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:12,style:{display:"flex",justifyContent:"flex-end"},children:(0,L.jsx)(We.A,{loading:l,size:"small",variant:"contained",type:"submit",children:"Submit"})})})]})]})]})};var Yi=l(20717),Ji=l(17539),Vi=l(27314),Oi=l(19080);const Ui=[{label:"Manual",value:"manual"},{label:"Automatic",value:"automatic"}];function Li(){const[e,t]=(0,a.useState)([{smsSubject:"Pre-Admission",smsType:"Manual",message:"Dear John,Thank you for your admission at webspruce. Our staff will help you for all admission related process."},{smsSubject:"Pre-Admission",smsType:"Manual",message:"Dear John,Thank you for your admission at webspruce. Our staff will help you for all admission related process."},{smsSubject:"Pre-Admission",smsType:"Manual",message:"Dear John,Thank you for your admission at webspruce. Our staff will help you for all admission related process."}]),[l,n]=a.useState(0),[i,o]=a.useState(10),r=(0,we.Wx)({initialValues:{type:"",fromDate:null,toDate:null},onSubmit:async e=>{},enableReinitialize:!0});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Report"}),(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsx)($.Ay,{xs:12,md:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"type",formik:r,label:"Type",options:Ui})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,L.jsx)(Ft,{formik:r,label:"From Date",name:"fromDate"})}),(0,L.jsx)($.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,L.jsx)(Ft,{formik:r,label:"To Date",name:"toDate"})}),(0,L.jsx)(pe,{module:"Report",permission:"view",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:3,lg:3,display:"flex",alignSelf:"center",children:(0,L.jsx)(ke.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})})]}),(0,L.jsxs)(Je.A,{component:X.A,children:[(0,L.jsxs)(Ve.A,{children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"S.No"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Subject"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Type"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Message"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Total SMS"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Time/Date"}),(0,L.jsx)(Le.A,{align:"center",sx:{fontWeight:"bold"},children:"Action"})]})}),(0,L.jsx)(He.A,{children:e&&e.slice(l*i,l*i+i).map(((e,t)=>(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:t+1}),(0,L.jsx)(Le.A,{align:"center",children:e.smsSubject}),(0,L.jsx)(Le.A,{align:"center",children:e.smsType}),(0,L.jsx)(Le.A,{align:"center",children:e.message.substring(0,50)+"..."}),(0,L.jsxs)(Le.A,{align:"center",children:[(0,L.jsx)(u.A,{children:"Total:50"}),(0,L.jsx)(u.A,{children:"Awaiting:30"}),(0,L.jsx)(u.A,{children:"Delivered:20"})," ",(0,L.jsx)(u.A,{children:"Rejected/Failed:0 "})]}),(0,L.jsx)(Le.A,{align:"center",children:ye()(e.sentTime).format("DD-MM-YYYY hh:mm A")}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,L.jsxs)(s.A,{children:[" ",(0,L.jsx)(S.A,{title:"Refresh",children:(0,L.jsx)(x.A,{children:(0,L.jsx)(Oi.A,{color:"primary"})})}),(0,L.jsx)(S.A,{title:"Report",children:(0,L.jsx)(x.A,{children:(0,L.jsx)(Vi.A,{color:"secondary"})})})]}),(0,L.jsxs)(s.A,{children:[" ",(0,L.jsx)(S.A,{title:"Resend",children:(0,L.jsx)(x.A,{children:(0,L.jsx)(Yi.A,{color:"warning"})})}),(0,L.jsx)(S.A,{title:"Forward",children:(0,L.jsx)(x.A,{children:(0,L.jsx)(Ji.A,{color:"success"})})})]})]})})]},e._id)))})]}),!e.length&&(0,L.jsx)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:"No data found"}),(0,L.jsx)(Ge.A,{rowsPerPageOptions:[10,25,50],component:"div",count:e.length,rowsPerPage:i,page:l,onPageChange:(e,t)=>{n(t)},onRowsPerPageChange:e=>{o(+e.target.value),n(0)},sx:{display:"flex",justifyContent:"flex-start,"}})]})]})}const Hi=(0,n.Ay)(Di.Ay)((e=>{let{theme:t}=e;return{padding:10,width:"100%","& input":{borderRadius:4,backgroundColor:"light"===t.palette.mode?"#fff":"#0d1117",padding:8,transition:t.transitions.create(["border-color","box-shadow"]),border:"1px solid ".concat("light"===t.palette.mode?"#eaecef":"#30363d"),fontSize:14,"&:focus":{boxShadow:"0px 0px 0px 3px ".concat("light"===t.palette.mode?"rgba(3, 102, 214, 0.3)":"rgb(12, 45, 107)"),borderColor:"light"===t.palette.mode?"#0366d6":"#388bfd"}}}})),Gi=(0,L.jsx)(Ri.A,{fontSize:"small"}),Qi=(0,L.jsx)(Ei.A,{fontSize:"small"}),Ki=()=>{const{selectedSetting:e}=(0,a.useContext)(G.A),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[o,r]=(0,a.useState)(""),[d,c]=(0,a.useState)([]),[m,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)([]),[p,g]=(0,a.useState)(!1),[A,j]=(0,a.useState)(!1),[f,b]=(0,a.useState)(""),[y,v]=(0,a.useState)([]),[S,k]=(0,a.useState)(!1),[C,I]=(0,a.useState)([]),[N,D]=(0,a.useState)(""),[M,F]=(0,a.useState)(""),[_,R]=(0,a.useState)([]),[E,T]=(0,a.useState)([]),[z,P]=(0,a.useState)([]),[q,B]=(0,a.useState)([]),[W,Y]=(0,a.useState)([]),[J,V]=(0,a.useState)(0),[O,U]=(0,a.useState)(0),{ref:H,width:Q,height:X}=(0,re.A)(),[ee,te]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.role.list);l(e.result)}catch(e){console.log(e)}})()}),[]),(0,a.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});v(t.result)}catch(t){console.log(t)}})()}),[e._id]);const le=async(t,l)=>{const a=l.map((e=>e._id)),n=l.map((e=>e.name));R(l),b(n.join(","));try{if(l.length){const{data:t}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:{$in:a}}}}),l=t.result.sort(((e,t)=>e.name.localeCompare(t.name)));I(l);const n=E.filter((e=>a.includes(e.class._id)));T(n),D(n.map((e=>"".concat(e.name," (").concat(e.class.name,")"))).join(", "));const i=n.map((e=>e._id));if(i.length){const{data:t}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.section":i}}});P(t.result)}else P([])}else I([]),T([]),D(""),P([])}catch(i){console.log(i)}},ae=async(t,l)=>{const a=l.map((e=>e._id)),n=l.map((e=>e.name)),i=l.map((e=>e.class.name));T(l),D(n.map(((e,t)=>"".concat(e," (").concat(i[t],")"))).join(", "));try{if(l.length){const{data:t}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.section":a}}});P(t.result)}else P([])}catch(s){console.log(s)}},ne=(e,t)=>{if(t.some((e=>"all"===e._id)))if(q.length===z.length)B([]),Y([]),V(0),F("");else{const e=z.map((e=>e._id));B([...z]),Y(e),V(z.length),F("All")}else{const e=t.map((e=>e.basicInfo.name)),l=t.map((e=>e._id));Y(l),V(t.length),F(e.join(", ")),B(t)}},ie=(e,t)=>{if(t.some((e=>"all"===e._id)))h.length===n.length?(x([]),U(0),r("")):(x([...n]),U(n.length),r("All"));else{const e=t.map((e=>e.basicInfo.name));t.map((e=>e._id));x(t),U(t.length),r(e.join(", "))}},se=d.some((e=>{const l=t.find((t=>t._id===e));return l&&l.name.includes("STUDENT")}));return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Credentials"}),(0,L.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,L.jsx)(Z.A,{sx:{padding:"15px",width:{xs:"100%",sm:"100%",md:"70%",lg:"50%"}},children:(0,L.jsx)("form",{onSubmit:async e=>{e.preventDefault(),te(!0);try{wl.oR.success("Credential sent successfully"),c([]),b(""),D(""),F([]),r([]),te(!1)}catch(t){te(!1)}},children:(0,L.jsxs)($.Ay,{container:!0,spacing:2,children:[(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsxs)(dl.A,{variant:"outlined",fullWidth:!0,required:!0,children:[(0,L.jsx)(cl.A,{id:"demo-simple-select-filled-label",sx:{fontSize:12},children:"User Type"}),(0,L.jsx)(ml.A,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"role",sx:{marginBottom:"15px"},multiple:!0,label:"User Type",size:"small",onChange:async t=>{try{const{target:{value:l}}=t;c("string"===typeof l?l.split(","):l);const{data:a}=await(0,de.Jt)(ce.r.employee.list,{params:{schoolId:e._id,search:{role:{$in:l}}}});i(a.result)}catch(l){}},value:d,children:t&&t.map(((e,t)=>(0,L.jsx)(w.A,{value:e._id,sx:{fontSize:12,fontWeight:500},children:e.name},e._id)))})]}),d.some((e=>{const l=t.find((t=>t._id===e));return l&&l.name.includes("STUDENT")}))&&1==d.length?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{value:f,fullWidth:!0,sx:{marginBottom:"15px"},"aria-describedby":"classPopper",onFocus:e=>{g(p?null:e.currentTarget)},variant:"outlined",size:"small",label:"Class"}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"classPopper",open:!!p,anchorEl:p,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{onBlur:()=>g(null),open:!0,value:_,multiple:!0,onChange:le,isOptionEqualToValue:(e,t)=>e._id===t._id,options:y,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,checked:a}),"".concat(t.name)]})},renderInput:e=>(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Class",autoFocus:!0})})})})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{value:N,"aria-describedby":"sectionPopper",sx:{marginBottom:"15px"},fullWidth:!0,onFocus:e=>{j(A?null:e.currentTarget)},variant:"outlined",size:"small",label:"Section"}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"sectionPopper",open:!!A,anchorEl:A,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{multiple:!0,onBlur:()=>j(null),open:!0,value:E,onChange:ae,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:C.sort(((e,t)=>e.class.name.localeCompare(t.class.name))),disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name,"(class:").concat(e.class.name,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,style:{marginRight:8},checked:a}),"".concat(t.name,"(class:").concat(t.class.name,")")]})},renderInput:e=>(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Section",autoFocus:!0})})})})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{value:M,"aria-describedby":"contactsPopper",fullWidth:!0,onFocus:e=>{k(S?null:e.currentTarget)},variant:"outlined",size:"small",label:"Students",InputProps:{endAdornment:(0,L.jsxs)(Ct.A,{position:"start",children:["All Total-",J]})}}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"contactsPopper",open:!!S,anchorEl:S,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{multiple:!0,onBlur:()=>k(null),open:!0,value:q,onChange:ne,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:[{_id:"all",basicInfo:{name:"All (".concat(z.length,")")},contactNumber:""},...z],disableCloseOnSelect:!0,getOptionLabel:e=>"all"===e._id?"All (".concat(z.length,")"):"".concat(e.basicInfo.name," (").concat(e.contactNumber,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,style:{marginRight:8},checked:a||"all"===t._id&&q.length===z.length}),"all"===t._id?"All (".concat(z.length,")"):"".concat(t.basicInfo.name," (").concat(t.contactNumber,")")]})},renderInput:e=>(0,L.jsx)(s.A,{sx:{ml:5,width:"100%"},children:(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Search student with name",autoFocus:!0})})})})})})]})]}):null]}),se?null:(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{fullWidth:!0,value:o,"aria-describedby":"employeePopper",onFocus:e=>{u(m?null:e.currentTarget)},variant:"outlined",size:"small",label:"Employees",InputProps:{endAdornment:(0,L.jsxs)(Ct.A,{position:"end",children:["All Total- ",O]})}}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"employeePopper",open:!!m,anchorEl:m,children:(0,L.jsx)(dl.A,{variant:"outlined",fullWidth:!0,size:"small",children:(0,L.jsx)(Fi.A,{onBlur:()=>u(null),open:!0,value:h,multiple:!0,onChange:ie,isOptionEqualToValue:(e,t)=>e._id===t._id,options:[{_id:"all",basicInfo:{name:"All"}},...n],disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(null===e||void 0===e?void 0:e.basicInfo.name," (").concat(null===e||void 0===e?void 0:e.contactNumber,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,checked:a||"all"===t._id&&h.length===n.length}),"all"===t._id?"All (".concat(n.length,")"):"".concat(null===t||void 0===t?void 0:t.basicInfo.name," (").concat(null===t||void 0===t?void 0:t.contactNumber,")")]})},renderInput:e=>(0,L.jsx)(s.A,{sx:{ml:5,width:"100%"},children:(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Employees",autoFocus:!0})})})})})})]}),d.length>=2&&d.some((e=>{const l=t.find((t=>t._id===e));return l&&l.name.includes("STUDENT")}))?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{value:f,fullWidth:!0,"aria-describedby":"classPopper",onFocus:e=>{g(p?null:e.currentTarget)},variant:"outlined",size:"small",label:"Class"}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"classPopper",open:!!p,anchorEl:p,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{onBlur:()=>g(null),open:!0,value:_,multiple:!0,onChange:le,isOptionEqualToValue:(e,t)=>e._id===t._id,options:y,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,checked:a}),"".concat(t.name)]})},renderInput:e=>(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Class",autoFocus:!0})})})})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{value:N,"aria-describedby":"sectionPopper",fullWidth:!0,onFocus:e=>{j(A?null:e.currentTarget)},variant:"outlined",size:"small",label:"Section"}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"sectionPopper",open:!!A,anchorEl:A,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{multiple:!0,onBlur:()=>j(null),open:!0,value:E,onChange:ae,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:C.sort(((e,t)=>e.class.name.localeCompare(t.class.name))),disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name,"(class:").concat(e.class.name,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,style:{marginRight:8},checked:a}),"".concat(t.name,"(class:").concat(t.class.name,")")]})},renderInput:e=>(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Section",autoFocus:!0})})})})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{value:M,"aria-describedby":"contactsPopper",fullWidth:!0,onFocus:e=>{k(S?null:e.currentTarget)},variant:"outlined",size:"small",label:"Students",InputProps:{endAdornment:(0,L.jsxs)(Ct.A,{position:"start",children:["All Total-",J]})}}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"contactsPopper",open:!!S,anchorEl:S,children:(0,L.jsx)(dl.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,L.jsx)(Fi.A,{multiple:!0,onBlur:()=>k(null),open:!0,value:q,onChange:ne,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:[{_id:"all",basicInfo:{name:"All (".concat(z.length,")")},contactNumber:""},...z],disableCloseOnSelect:!0,getOptionLabel:e=>"all"===e._id?"All (".concat(z.length,")"):"".concat(e.basicInfo.name," (").concat(e.contactNumber,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,style:{marginRight:8},checked:a||"all"===t._id&&q.length===z.length}),"all"===t._id?"All (".concat(z.length,")"):"".concat(t.basicInfo.name," (").concat(t.contactNumber,")")]})},renderInput:e=>(0,L.jsx)(s.A,{sx:{ml:5,width:"100%"},children:(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Search student with name",autoFocus:!0})})})})})})]}),(0,L.jsxs)($.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,L.jsx)(kt.A,{fullWidth:!0,value:o,"aria-describedby":"employeePopper",onFocus:e=>{u(m?null:e.currentTarget)},variant:"outlined",size:"small",label:"Employees",InputProps:{endAdornment:(0,L.jsxs)(Ct.A,{position:"end",children:["All Total- ",O]})}}),(0,L.jsx)(s.A,{ref:H,children:(0,L.jsx)(Mi.A,{sx:{width:Q?Q+15:700,zIndex:1},id:"employeePopper",open:!!m,anchorEl:m,children:(0,L.jsx)(dl.A,{variant:"outlined",fullWidth:!0,size:"small",children:(0,L.jsx)(Fi.A,{onBlur:()=>u(null),open:!0,value:h,multiple:!0,onChange:ie,isOptionEqualToValue:(e,t)=>e._id===t._id,options:[{_id:"all",basicInfo:{name:"All"}},...n],disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(null===e||void 0===e?void 0:e.basicInfo.name," (").concat(null===e||void 0===e?void 0:e.contactNumber,")"),renderOption:(e,t,l)=>{let{selected:a}=l;return(0,L.jsxs)("li",{...e,children:[(0,L.jsx)(Gt.A,{icon:Gi,checkedIcon:Qi,checked:a||"all"===t._id&&h.length===n.length}),"all"===t._id?"All (".concat(n.length,")"):"".concat(null===t||void 0===t?void 0:t.basicInfo.name," (").concat(null===t||void 0===t?void 0:t.contactNumber,")")]})},renderInput:e=>(0,L.jsx)(s.A,{sx:{ml:5,width:"100%"},children:(0,L.jsx)(Hi,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Employees",autoFocus:!0})})})})})})]})]}):"",(0,L.jsx)(pe,{module:"Credential",permission:"add",children:(0,L.jsx)($.Ay,{item:!0,xs:12,md:12,lg:6,container:!0,children:(0,L.jsx)(We.A,{loading:ee,variant:"contained",size:"small",type:"submit",children:"Send Credentials"})})})]})})})})]})};function Zi(){const{selectedSetting:e}=(0,a.useContext)(G.A),t=(0,M.Zp)(),[l,n]=(0,a.useState)([]),[i,s]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),m=async t=>{try{const{data:l}=await(0,de.Jt)(ce.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section}}});c(l.result)}catch(l){console.log(l)}},u=(0,we.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:m,enableReinitialize:!0});(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);n(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),u.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,de.Jt)(ce.r.class.list,{params:{schoolId:e._id}});s(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,a.useEffect)((()=>{u.values.class&&(async()=>{try{var t;const{data:l}=await(0,de.Jt)(ce.r.section.list,{params:{schoolId:e._id,search:{class:u.values.class}}});r(l.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})()}),[u.values.class,e]),(0,a.useEffect)((()=>{u.values.academicYear&&u.values.class&&u.values.section&&m(u.values)}),[u.values.academicYear,u.values.class,u.values.section,e]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Bulk Photo"}),(0,L.jsx)(X.A,{sx:{padding:2,marginBottom:2},children:(0,L.jsx)("form",{onSubmit:u.handleSubmit,children:(0,L.jsxs)($.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"div",onSubmit:u.handleSubmit,children:[(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"academicYear",formik:u,label:"Select Academic Year",options:l})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"class",formik:u,label:"Select Class",options:i})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,L.jsx)(Ce.A,{required:!0,name:"section",formik:u,label:"Select Section",options:o})}),(0,L.jsx)($.Ay,{xs:12,md:6,lg:3,item:!0,sx:{alignSelf:"center"},children:(0,L.jsx)(ke.A,{type:"submit",variant:"contained",size:"small",children:"Find"})})]})})}),(0,L.jsx)(Je.A,{component:X.A,children:(0,L.jsxs)(Ve.A,{children:[(0,L.jsx)(Oe.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:"SL"}),(0,L.jsx)(Le.A,{align:"center",children:"Roll No"}),(0,L.jsx)(Le.A,{align:"center",children:"Name"}),(0,L.jsx)(Le.A,{align:"center",children:"Photo"}),(0,L.jsx)(Le.A,{align:"center",children:"File"}),(0,L.jsx)(Le.A,{align:"center",children:"Action"})]})}),(0,L.jsx)(He.A,{children:d.map(((e,l)=>(0,L.jsxs)(Ue.A,{children:[(0,L.jsx)(Le.A,{align:"center",children:l+1}),(0,L.jsx)(Le.A,{align:"center",children:e.academicInfo.rollNumber}),(0,L.jsx)(Le.A,{align:"center",children:e.basicInfo.name}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(k.A,{src:e.photo,sx:{margin:"auto"}})}),(0,L.jsx)(Le.A,{align:"center",sx:{maxWidth:"100px"},children:(0,L.jsx)(Vl,{multi:!1,onChange:t=>(async(e,t)=>{const{files:l}=e.target;if(l.length>0){const e=new FormData;e.append("photo",l[0]);try{await(0,de.yJ)(ce.r.student.updatePhoto+"/"+t,e,{headers:{"Content-Type":"multipart/form-data"}}),m(u.values)}catch(a){console.log(a)}}})(t,e._id),customOnChange:!0,label:"Select Image"})}),(0,L.jsx)(Le.A,{align:"center",children:(0,L.jsx)(S.A,{title:"Edit",children:(0,L.jsx)(x.A,{onClick:()=>(e=>{t("/sch/student/edit-student/".concat(e._id))})(e),children:(0,L.jsx)(Ze.A,{color:"primary",fontSize:"small"})})})})]},e._id)))})]})})]})}const Xi=l.p+"static/media/computing.ddf042ec5232310b39d1.png",$i=(0,n.Ay)(s.A)((()=>({display:"flex",height:"80vh",width:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"}))),es=(0,n.Ay)(ke.A)((()=>({backgroundColor:"#fff",color:ve.A.darkPalette.primary.main,"&:hover":{backgroundColor:ve.A.darkPalette.primary.main,color:"#fff"}})));const ts=function(){const e=(0,M.Zp)();return(0,L.jsx)($i,{children:(0,L.jsx)($.Ay,{container:!0,children:(0,L.jsxs)($.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,L.jsx)("img",{src:Xi,style:{height:"300px",width:"300px"}}),(0,L.jsx)(es,{onClick:()=>e(-1),size:"small",variant:"outlined",children:"Go Back"})]})})})},ls=[{name:"Subject",key:"subject"},{name:"Type",key:"type"},{name:"Message",key:"message"},{name:"Total SMS",key:"totalSMS"},{name:"Time/Date",key:"female"}];function as(){const[e,t]=(0,a.useState)([]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:"Notifications"}),(0,L.jsx)(it,{actions:[],module:"Notification",bodyDataModal:"Notifications",bodyData:e,tableKeys:ls})]})}const ns=250,is=e=>({width:ns,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),ss=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)"),[e.breakpoints.up("sm")]:{width:"calc(".concat(e.spacing(8)," + 1px)")}}),os=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1),...t.mixins.toolbar}})),rs=((0,n.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(0,1),...t.mixins.toolbar,justifyContent:"flex-start"}})),(0,n.Ay)(r.A,{shouldForwardProp:e=>"open"!==e})((e=>{let{theme:t,open:l}=e;return{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),...l&&{marginLeft:ns,width:"calc(100% - ".concat(ns,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})}}}))),ds=(0,n.Ay)(o.Ay,{shouldForwardProp:e=>"open"!==e})((e=>{let{theme:t,open:l}=e;return{width:ns,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...l&&{...is(t),"& .MuiDrawer-paper":is(t)},...!l&&{...ss(t),"& .MuiDrawer-paper":ss(t)}}}));function cs(){const e=(0,i.A)(),{selectedSetting:t}=a.useContext(G.A),[l,n]=a.useState(!0),[o,r]=a.useState([]),T=(0,M.Zp)(),[z,P]=a.useState(null),q=Boolean(z),[B,W]=a.useState([]),[Y,J]=a.useState(null),V=()=>{P(null)},{isDarkMode:O,setIsDarkMode:U}=a.useContext(_e.A),[Q,K]=a.useState(""),[Z,X]=a.useState(null),{SIDE_MENU_DATA:$}=H;a.useEffect((()=>{let e=null===Y||void 0===Y?void 0:Y.role;if(e)if("SUPER ADMIN"===e.name)r($);else{let i=e.permissions,s=[];for(let e of $)if(e.subMenus.length){let a={...e,subMenus:[]};for(let n of e.renderName){var t,l;null!==i&&void 0!==i&&null!==(t=i.filter((e=>e.module.toLowerCase()===(null===n||void 0===n?void 0:n.toLowerCase())))[0])&&void 0!==t&&null!==(l=t.permissions)&&void 0!==l&&l.includes("view")&&(a.subMenus=[...new Set([...a.subMenus,...e.subMenus.filter((e=>{var t;return(null===(t=e.renderName)||void 0===t?void 0:t.toLowerCase())===(null===n||void 0===n?void 0:n.toLowerCase())}))])])}a.subMenus.length&&s.push(a)}else{var a,n;null!==i&&void 0!==i&&null!==(a=i.filter((t=>{var l;return t.module.toLowerCase()===(null===(l=e.renderName[0])||void 0===l?void 0:l.toLowerCase())}))[0])&&void 0!==a&&null!==(n=a.permissions)&&void 0!==n&&n.includes("view")&&s.push(e)}r(s)}else r([])}),[Y]),a.useEffect((()=>{ee()}),[t]),a.useEffect((()=>{(async()=>{const e=window.localStorage.getItem("ktech_current_user");J(JSON.parse(e))})()}),[t]);const ee=async()=>{try{const{data:e}=await(0,de.Jt)(ce.r.academicYear.list);W(e.result[0])}catch(e){console.log(e)}};a.useEffect((()=>{(()=>{let e=window.location.pathname,t=null;for(let l of $)if(l.subMenus.length){l.subMenus.map((e=>e.path)).includes(e)&&(t=$.indexOf(l))}t&&(X(t),n(!0))})()}),[]);return(0,L.jsxs)(s.A,{sx:{display:"flex"},children:[(0,L.jsx)(m.Ay,{}),(0,L.jsx)(rs,{position:"fixed",open:l,children:(0,L.jsxs)(d.A,{children:[(0,L.jsx)(x.A,{color:"inherit","aria-label":"open drawer",onClick:()=>{n(!0)},edge:"start",sx:{marginRight:5,...l&&{display:"none"}},children:(0,L.jsx)(p.A,{})}),(0,L.jsxs)(u.A,{variant:"h6",component:"div",color:"white",textAlign:"center",fontSize:"18px",sx:{display:{xs:"none",md:"block"}},children:[null===t||void 0===t?void 0:t.name," [",B?null===B||void 0===B?void 0:B.from:"-"," -"," ",B?null===B||void 0===B?void 0:B.to:"-","]"]}),(0,L.jsx)(s.A,{sx:{display:"flex",width:"100%",flex:1,justifyContent:"flex-end",alignItems:"center"},children:(0,L.jsxs)(v.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},spacing:1,direction:"row",children:[(0,L.jsx)(S.A,{title:"Notification",children:(0,L.jsx)(D.N_,{to:"/sch/notifications",children:(0,L.jsx)(x.A,{children:(0,L.jsx)(F.A,{sx:{width:26,height:26,color:"#BDBDBD"}})})})}),(0,L.jsx)(S.A,{title:"Account Settings",children:(0,L.jsx)(x.A,{onClick:e=>{P(e.currentTarget)},"aria-controls":q?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":!!q||void 0,children:null!==Y&&void 0!==Y&&Y.photo?(0,L.jsx)("img",{src:null===Y||void 0===Y?void 0:Y.photo,style:{width:"26px",height:"26px",display:"block",objectFit:"cover",margin:"0 auto",borderRadius:"50%",overflow:"hidden",cursor:"pointer"},alt:"Preview"}):(0,L.jsx)(k.A,{sx:{width:26,height:26}})})}),(0,L.jsx)(S.A,{title:"Website",children:(0,L.jsx)(D.N_,{to:"/",children:(0,L.jsx)(x.A,{children:(0,L.jsx)(k.A,{src:"/world-wide-web.png",alt:"loading...",sx:{width:26,height:26}})})})})]})})]})}),(0,L.jsxs)(C.A,{anchorEl:z,id:"account-menu",open:q,onClose:V,onClick:V,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&::before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,L.jsx)(w.A,{onClick:V,children:(0,L.jsxs)(D.N_,{to:"/sch/profile",style:{display:"flex",textDecoration:"none"},children:[(0,L.jsx)(b.A,{children:(0,L.jsx)(E.A,{fontSize:"small"})}),(0,L.jsx)(y.A,{style:{color:"black"},children:"Profile"})]})}),(0,L.jsx)(w.A,{onClick:V,children:(0,L.jsxs)(D.N_,{to:"/sch/administrator/reset-password",style:{display:"flex",textDecoration:"none"},children:[(0,L.jsx)(b.A,{children:(0,L.jsx)(_.A,{fontSize:"small"})}),(0,L.jsx)(y.A,{style:{color:"black"},children:"Reset Password"})]})}),(0,L.jsx)(w.A,{onClick:()=>{window.localStorage.removeItem("ktech_access_token"),window.localStorage.removeItem("ktech_current_user"),window.localStorage.removeItem("ktech_user_type"),T("/")},children:(0,L.jsxs)(D.N_,{to:"/sch/administrator/reset-password",style:{display:"flex",textDecoration:"none"},children:[(0,L.jsx)(b.A,{children:(0,L.jsx)(R.A,{fontSize:"small"})}),(0,L.jsx)(y.A,{style:{color:"black"},children:"Log Out"})]})})]}),(0,L.jsxs)(ds,{variant:"permanent",open:l,children:[(0,L.jsxs)(os,{sx:{justifyContent:"space-between",position:"sticky",top:0,zIndex:1,backgroundColor:O?"#000":"#fff",overflow:"hidden"},children:[(0,L.jsx)(s.A,{}),(0,L.jsx)("img",{style:{height:"50px",width:"80px",objectFit:"contain"},src:null===t||void 0===t?void 0:t.logo}),(0,L.jsx)(x.A,{onClick:()=>{n(!1)},children:"rtl"===e.direction?(0,L.jsx)(A.A,{color:"primary"}):(0,L.jsx)(g.A,{color:"primary"})})]}),(0,L.jsx)(h.A,{}),(0,L.jsx)(c.A,{children:o.map(((e,t)=>e.subMenus.length?(0,L.jsxs)("div",{children:[(0,L.jsx)(j.Ay,{sx:{padding:0},children:(0,L.jsxs)(f.A,{selected:Z===t||window.location.pathname===e.path,onClick:()=>(e=>{if(Z===e)return X(null);X(e)})(t),children:[(0,L.jsx)(b.A,{children:e.icon}),(0,L.jsx)(y.A,{primary:e.name}),Z===t?(0,L.jsx)(De.A,{}):(0,L.jsx)(Me.A,{})]})},e.path),(0,L.jsx)(I.A,{timeout:"auto",unmountOnExit:!0,in:Z===t,sx:{width:"100%"},children:(0,L.jsx)(c.A,{children:e.subMenus.map((e=>(0,L.jsx)(j.Ay,{sx:{width:"100%"},children:(0,L.jsx)(D.N_,{to:e.path,style:{textDecoration:"none",display:"flex",flex:1,color:"red"},children:(0,L.jsxs)(f.A,{onClick:()=>K(e.path),sx:{"& .MuiListItemText-root":{whiteSpace:"normal",wordWrap:"wrap"},"& .MuiListItemIcon-root":{}},selected:Q===e.path||window.location.pathname===e.path,children:[(0,L.jsx)(b.A,{children:e.icon}),(0,L.jsx)(y.A,{primary:e.name})]})})},e.name)))})})]},e.path+e.name):(0,L.jsx)("div",{children:(0,L.jsx)(j.Ay,{disablePadding:!0,children:(0,L.jsx)(D.N_,{to:e.path,style:{textDecoration:"none",display:"flex",flex:1},children:(0,L.jsxs)(f.A,{onClick:()=>X(t),selected:Z===t||window.location.pathname===e.path,children:[(0,L.jsx)(b.A,{children:e.icon}),(0,L.jsx)(y.A,{primary:e.name})]})})})},e.path)))}),(0,L.jsx)(h.A,{}),(0,L.jsx)(j.Ay,{disablePadding:!0,children:(0,L.jsxs)(f.A,{sx:{paddingLeft:0,"& .MuiListItemText-root":{whiteSpace:"normal",wordWrap:"wrap"},"& .MuiListItemIcon-root":{}},children:[(0,L.jsx)(N.A,{sx:{marginRight:"20px"},checked:O,onChange:()=>{U(!O),window.localStorage.setItem("isDarkMode",!O)}}),(0,L.jsx)(y.A,{primary:O?"Dark Mode":"Light Mode"})]})})]}),(0,L.jsxs)(s.A,{component:"main",sx:{flexGrow:1,p:3,overflowX:"hidden",overflowY:"auto"},children:[(0,L.jsx)(os,{}),(0,L.jsxs)(M.BV,{children:[(0,L.jsx)(M.qh,{path:"dashboard",element:(0,L.jsx)(Ne,{})}),(0,L.jsx)(M.qh,{path:"manage-institute",element:(0,L.jsx)(Fn,{})}),(0,L.jsx)(M.qh,{path:"administrator/academicYear",element:(0,L.jsx)(rt,{})}),(0,L.jsx)(M.qh,{path:"administrator/role-permission",element:(0,L.jsx)($t,{})}),(0,L.jsx)(M.qh,{path:"administrator/user-role",element:(0,L.jsx)(tl,{})}),(0,L.jsx)(M.qh,{path:"administrator/reset-password",element:(0,L.jsx)(al,{})}),(0,L.jsx)(M.qh,{path:"human-resource/manage-designation",element:(0,L.jsx)(ct,{})}),(0,L.jsx)(M.qh,{path:"human-resource/manage-department",element:(0,L.jsx)(ut,{})}),(0,L.jsx)(M.qh,{path:"human-resource/employee",element:(0,L.jsx)(wt,{})}),(0,L.jsx)(M.qh,{path:"human-resource/update-employee/:id",element:(0,L.jsx)(ji,{})}),(0,L.jsx)(M.qh,{path:"human-resource/offer-letter",element:(0,L.jsx)(Bt,{})}),(0,L.jsx)(M.qh,{path:"human-resource/relieving-letter",element:(0,L.jsx)(Yt,{})}),(0,L.jsx)(M.qh,{path:"human-resource/experience-letter",element:(0,L.jsx)(Vt,{})}),(0,L.jsx)(M.qh,{path:"human-resource/teacher-activity",element:(0,L.jsx)(Ut,{})}),(0,L.jsx)(M.qh,{path:"academic/class",element:(0,L.jsx)(ol,{})}),(0,L.jsx)(M.qh,{path:"academic/section",element:(0,L.jsx)(jl,{})}),(0,L.jsx)(M.qh,{path:"academic/subject",element:(0,L.jsx)(vl,{})}),(0,L.jsx)(M.qh,{path:"student/overview",element:(0,L.jsx)(Rl,{})}),(0,L.jsx)(M.qh,{path:"student/admit-student",element:(0,L.jsx)(Ll,{})}),(0,L.jsx)(M.qh,{path:"student/add-student",element:(0,L.jsx)(wi,{})}),(0,L.jsx)(M.qh,{path:"student/edit-student/:id",element:(0,L.jsx)(wi,{})}),(0,L.jsx)(M.qh,{path:"student/reshuffle",element:(0,L.jsx)(Zl,{})}),(0,L.jsx)(M.qh,{path:"student/promotion",element:(0,L.jsx)($l,{})}),(0,L.jsx)(M.qh,{path:"student/bulk-admission",element:(0,L.jsx)(ta,{})}),(0,L.jsx)(M.qh,{path:"student/credential",element:(0,L.jsx)(aa,{})}),(0,L.jsx)(M.qh,{path:"student/bulk-photo",element:(0,L.jsx)(Zi,{})}),(0,L.jsx)(M.qh,{path:"student/student-activity",element:(0,L.jsx)(ia,{})}),(0,L.jsx)(M.qh,{path:"student/student-bulk-photo",element:(0,L.jsx)(gn,{})}),(0,L.jsx)(M.qh,{path:"fees/receipt-book",element:(0,L.jsx)(ya,{})}),(0,L.jsx)(M.qh,{path:"fees/feeMap-category",element:(0,L.jsx)(wa,{})}),(0,L.jsx)(M.qh,{path:"fees/collect-fees",element:(0,L.jsx)(za,{})}),(0,L.jsx)(M.qh,{path:"fees/balance-fee",element:(0,L.jsx)(qa,{})}),(0,L.jsx)(M.qh,{path:"fees/fee-overview",element:(0,L.jsx)(Oa,{})}),(0,L.jsx)(M.qh,{path:"fees/re-conciliation",element:(0,L.jsx)(Qa,{})}),(0,L.jsx)(M.qh,{path:"hostel/manage-hostel",element:(0,L.jsx)(ln,{})}),(0,L.jsx)(M.qh,{path:"hostel/manage-room-type",element:(0,L.jsx)(nn,{})}),(0,L.jsx)(M.qh,{path:"hostel/manage-room-bed",element:(0,L.jsx)(cn,{})}),(0,L.jsx)(M.qh,{path:"hostel/hostel-member",element:(0,L.jsx)(xn,{})}),(0,L.jsx)(M.qh,{path:"human-resource/add-employee",element:(0,L.jsx)(Dn,{})}),(0,L.jsx)(M.qh,{path:"notifications",element:(0,L.jsx)(as,{})}),(0,L.jsx)(M.qh,{path:"communication_compose",element:(0,L.jsx)(Wi,{})}),(0,L.jsx)(M.qh,{path:"communication_report",element:(0,L.jsx)(Li,{})}),(0,L.jsx)(M.qh,{path:"communication_credentials",element:(0,L.jsx)(Ki,{})}),(0,L.jsx)(M.qh,{path:"human-resource/edit-employee/:id",element:(0,L.jsx)(Dn,{})}),(0,L.jsx)(M.qh,{path:"manage-institute/add-institute",element:(0,L.jsx)(Hn,{})}),(0,L.jsx)(M.qh,{path:"manage-institute/add-institute",element:(0,L.jsx)(Hn,{})}),(0,L.jsx)(M.qh,{path:"manage-institute/edit-institute/:id",element:(0,L.jsx)(Hn,{})}),(0,L.jsx)(M.qh,{path:"profile",element:(0,L.jsx)(si,{})}),(0,L.jsx)(M.qh,{path:"*",element:(0,L.jsx)(ts,{})})]}),(0,L.jsx)(M.sv,{})]})]})}}}]);
//# sourceMappingURL=433.f54bb04c.chunk.js.map