"use strict";(self.webpackChunkschoolerp=self.webpackChunkschoolerp||[]).push([[2542],{32925:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Hm});var l=a(65043),n=a(34535),i=a(26240),s=a(96446),o=a(94109),r=a(92314),d=a(55263),c=a(35721),m=a(55376),u=a(85865),x=a(39336),h=a(17392),p=a(89611),j=a(55896),g=a(91707),y=a(30681),A=a(38968),f=a(2050),b=a(48734),v=a(88911),S=a(77739),k=a(81045),D=a(70378),C=a(32143),w=a(30279),I=a(4598),N=a(35475),_=a(73216),T=a(75310),M=a(99792),F=a(1702),z=a(52177),E=a(67485),q=a(93787),Y=a(49167),W=a(68850),R=a(71462),P=a(84582),J=a(76710),V=a(60311),B=a(72061),L=a(390),U=a(97462),O=a(10631),H=a(59893),G=a(79641),K=a(5793),Q=a(69131),Z=a(812),$=a(11634),X=a(34977),ee=a(56974),te=a(25407),ae=a(74845),le=a(79962),ne=a(56487),ie=a(95283),se=a(94136),oe=a(46051),re=a(70579);const de={SIDE_MENU_DATA:[{name:"Dashboard",path:"/sch/dashboard",renderName:[],subMenus:[],icon:(0,re.jsx)(E.A,{color:"primary",fontSize:"small"})},{name:"Manage Institute",path:"/sch/manage-institute",renderName:[""],subMenus:[],icon:(0,re.jsx)(O.A,{color:"primary",fontSize:"small"})},{name:"Administrator",path:"",renderName:["academicYear","userRole","rolePermission","userPasswordReset"],icon:(0,re.jsx)(H.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Academic Year",renderName:"academicYear",path:"/sch/administrator/academicYear",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Roles & Permissions",renderName:"rolePermission",path:"/sch/administrator/role-permission",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"User Password Reset",renderName:"userPasswordReset",path:"/sch/administrator/reset-password",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Human Resource",path:"",renderName:["manageDesignation","manageDepartment","employee","offerLetter","relievingLetter","offBoarding","experienceLetter","teacherActivity"],icon:(0,re.jsx)(oe.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Manage Designation",renderName:"manageDesignation",path:"/sch/human-resource/manage-designation",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Manage Department",renderName:"manageDepartment",path:"/sch/human-resource/manage-department",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Employee",renderName:"employee",path:"/sch/human-resource/employee",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Offer-Letter",renderName:"offerLetter",path:"/sch/human-resource/offer-letter",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Relieving Letter",renderName:"relievingLetter",path:"/sch/human-resource/relieving-letter",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Off Boarding",renderName:"offBoarding",path:"/sch/human-resource/off-boarding",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Experience Letter",renderName:"experienceLetter",path:"/sch/human-resource/experience-letter",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Teacher Activity",renderName:"teacherActivity",path:"/sch/human-resource/teacher-activity",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Pre-Admission",path:"",renderName:["enquiries","enquiries","examSchedules","result"],icon:(0,re.jsx)(P.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Enquiries",renderName:"enquiries",path:"/sch/pre-admission/enquiries",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Exams",renderName:"exams",path:"/sch/pre-admission/exams",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Exam Schedules",renderName:"examSchedules",path:"/sch/pre-admission/exam-schedules",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Result",renderName:"result",path:"/sch/pre-admission/result",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Academic",path:"",renderName:["class","section","subject"],icon:(0,re.jsx)(G.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Class",renderName:"class",path:"/sch/academic/class",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Section",renderName:"section",path:"/sch/academic/section",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Subject",renderName:"subject",path:"/sch/academic/subject",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Attendance",path:"",renderName:["studentAttendance","employeeAttendance"],icon:(0,re.jsx)(K.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Student Attendance",renderName:"studentAttendance",path:"/sch/attendence/student-attendance",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Employee Attendance",renderName:"employeeAttendance",path:"/sch/attendence/employee-attendance",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Class Routine",path:"/sch/class-routine",renderName:["class-routine"],subMenus:[],icon:(0,re.jsx)(Q.A,{color:"primary",fontSize:"small"})},{name:"Student",path:"",renderName:["overview","admitStudent","reshuffle","promotion","bulkAdmission","credential","quickAdmit","studentActivity"],icon:(0,re.jsx)(Z.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Overview",renderName:"overview",path:"/sch/student/overview",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Admit Student",renderName:"admitStudent",path:"/sch/student/admit-student",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Reshuffle",renderName:"reshuffle",path:"/sch/student/reshuffle",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Promotion",renderName:"promotion",path:"/sch/student/promotion",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Bulk Admission",renderName:"bulkAdmission",path:"/sch/student/bulk-admission",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Credential",renderName:"credential",path:"/sch/student/credential",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Quick Admit",renderName:"quickAdmit",path:"/sch/student/quick-admit",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Student Activity",renderName:"studentActivity",path:"/sch/student/student-activity",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Assignment",path:"/sch/assignment",renderName:["assgnment"],subMenus:[],icon:(0,re.jsx)(se.A,{color:"primary",fontSize:"small"})},{name:"Communication",path:"",renderName:["compose","report","credentials"],icon:(0,re.jsx)($.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Compose",renderName:"compose",path:"/sch/communication_compose",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Report",renderName:"report",path:"/sch/communication_report",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Credentials",renderName:"credentials",path:"/sch/communication_credentials",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Announcement",path:"",renderName:["notice","news","holiday","awardsAndAchievements","splashNews"],icon:(0,re.jsx)(X.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Notice",renderName:"notice",path:"/sch/announcement/notice",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"News",renderName:"news",path:"/sch/announcement/news",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Holiday",renderName:"holiday",path:"/sch/announcement/holiday",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Awards And Achievements",renderName:"awardsAndAchievements",path:"/sch/announcement/awardsAndAchievements",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Splash News",renderName:"splashNews",path:"/sch/announcement/splashNews",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Gallery",path:"/sch/gallery",renderName:["gallery"],subMenus:[],icon:(0,re.jsx)(B.A,{color:"primary",fontSize:"small"})},{name:"Notifications",path:"/sch/notifications",renderName:["notifications"],subMenus:[],icon:(0,re.jsx)(ie.A,{color:"primary",fontSize:"small"})},{name:"Event",path:"/sch/event",renderName:["event"],subMenus:[],icon:(0,re.jsx)(Z.A,{color:"primary",fontSize:"small"})},{name:"Exam",path:"",renderName:["examGrade","examTerm","examSchedule","examHallTicket"],icon:(0,re.jsx)(ee.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Exam Grade",renderName:"examGrade",path:"/sch/exam/exam-grade",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Exam Term",renderName:"examTerm",path:"/sch/exam/exam-term",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Exam Schedule",renderName:"examSchedule",path:"/sch/exam/exam-schedule",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Exam Hall Ticket",renderName:"examHallTicket",path:"/sch/exam/exam-hall-ticket",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Exam Mark",path:"",renderName:["examAttendance","manageMark","examResult","marksCard","consolidatedMarksSheet","subjectWiseReport","divisionWiseReport"],icon:(0,re.jsx)(te.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Exam Attendance",renderName:"examAttendance",path:"/sch/exam-Mark/exam-Attendance",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Manage Mark",renderName:"manageMark",path:"/sch/exam-Mark/manage-mark",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Exam Result",renderName:"examResult",path:"/sch/exam-Mark/exam-result",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Marks Card",renderName:"marksCard",path:"/sch/exam-Mark/marks-card",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Consolidated Marks Sheet",renderName:"consolidatedMarksSheet",path:"/sch/exam-Mark/consolidated-marks-sheet",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Subject Wise Report",renderName:"subjectWiseReport",path:"/sch/exam-Mark/subject-wise-report",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Division Wise Report",renderName:"divisionWiseReport",path:"/sch/exam-Mark/division-wise-report",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"LMS",path:"",renderName:["storage","courses","courseContent","live"],icon:(0,re.jsx)(Y.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Storage",renderName:"storage",path:"/sch/lms/storage",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Courses",renderName:"courses",path:"/sch/lms/courses",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Course Content",renderName:"courseContent",path:"/sch/lms/course-content",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Live",renderName:"live",path:"/sch/lms/live",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Library",path:"",renderName:["books","periodical","studentLibraryMember","employeeLibraryMember","studentIssueReturn"],icon:(0,re.jsx)(Y.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Books",renderName:"books",path:"/sch/library/books",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Periodical",renderName:"periodical",path:"/sch/library/periodical",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Student Library Member",renderName:"studentLibraryMember",path:"/sch/library/student-library-member",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Employee Library Member",renderName:"employeeLibraryMember",path:"/sch/library/employee-library-member",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Issue & Return",renderName:"studentIssueReturn",path:"/sch/library/student-issue-return",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Leave Management",path:"",renderName:["leaveType","employeeLeave","studentLeave","leaveReport"],icon:(0,re.jsx)(K.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Leave Type",renderName:"leaveType",path:"/sch/leave-management/leave-type",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Employee Leave",renderName:"employeeLeave",path:"/sch/leave-management/employee-leave",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Students Leave",renderName:"studentLeave",path:"/sch/leave-management/student-leave",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Leave Report",renderName:"leaveReport",path:"/sch/leave-management/leave-report",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Inventory",path:"",renderName:["item","vendor","transaction","stockList","issue","sell"],icon:(0,re.jsx)(J.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Item",renderName:"item",path:"/sch/inventory/item",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Vendor",renderName:"vendor",path:"/sch/inventory/vendor",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"In/Out Transaction",renderName:"transaction",path:"/sch/inventory/transaction",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Stock List",renderName:"stockList",path:"/sch/inventory/stockList",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Issue",renderName:"issue",path:"/sch/inventory/issue",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Sell",renderName:"sell",path:"/sch/inventory/sell",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Certificate",path:"",renderName:["studyCertificate","transferCertificate"],icon:(0,re.jsx)(ae.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Study Certificate",renderName:"studyCertificate",path:"/sch/certificate/study-certificate",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Transfer Certificate",renderName:"transferCertificate",path:"/sch/certificate/transfer-certificate",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Fees",path:"",renderName:["receiptBook","feeMapCategory","collectFees","balanceFee","feeOverview","reconciliation"],icon:(0,re.jsx)(le.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Receipt Book",renderName:"receiptBook",path:"/sch/fees/receipt-book",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Fee Map Category",renderName:"feeMapCategory",path:"/sch/fees/feeMap-category",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Collect Fees",renderName:"collectFees",path:"/sch/fees/collect-fees",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Balance Fee",renderName:"balanceFee",path:"/sch/fees/balance-fee",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Fee Overview",renderName:"feeOverview",path:"/sch/fees/fee-overview",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Reconciliation",renderName:"reconciliation",path:"/sch/fees/re-conciliation",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Hostel",path:"",renderName:["manageHostel","manageRoomType","manageRoomBed","hostelMember"],icon:(0,re.jsx)(q.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Manage Hostel",renderName:"manageHostel",path:"/sch/hostel/manage-hostel",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Manage Room Type",renderName:"manageRoomType",path:"/sch/hostel/manage-room-type",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Manage Room Bed",renderName:"manageRoomBed",path:"/sch/hostel/manage-room-bed",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Hostel Member",renderName:"hostelMember",path:"/sch/hostel/hostel-member",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Transport",path:"",renderName:["vehicle","manageRoute","routes","trasportMember","vehicleLog","vehicleMaintenance"],icon:(0,re.jsx)(W.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Vehicle",renderName:"vehicle",path:"/sch/transport/vehicle",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Manage Route & Trips",renderName:"manageRoute",path:"/sch/transport/manage-route",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Routes",renderName:"routes",path:"/sch/transport/routes",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Trasport Member",renderName:"trasportMember",path:"/sch/transport/trasport-member",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Vehicle Log",renderName:"vehicleLog",path:"/sch/transport/vehicle-log",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Vehicle Maintenance",renderName:"vehicleMaintenance",path:"/sch/transport/vehicle-maintenance",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Payroll",path:"",renderName:["salaryGrade","makePayment"],icon:(0,re.jsx)(R.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Salary Grade",renderName:"salaryGrade",path:"/sch/payroll/salary-grade",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Make Payment",renderName:"makePayment",path:"/sch/payroll/make-payment",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Report",path:"",renderName:["libraryReport","studentAttendance","studentYearlyAttendane","employeeAttendance","employeeYearlyAttendance","studentReport","studentActivityReport"],icon:(0,re.jsx)(ne.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Library Report",renderName:"libraryReport",path:"/sch/report/library-report",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Student Attendance",renderName:"studentAttendance",path:"/sch/report/student-attendance",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Student Yearly Attendane",renderName:"studentYearlyAttendaneroutes",path:"/sch/report/student-yearly-attendane",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Employee Attendance",renderName:"employeeAttendance",path:"/sch/report/employee-attendance",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Employee Yearly Attendance",renderName:"employeeYearlyAttendance",path:"/sch/report/employee-yearly-attendance",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Student Report",renderName:"studentReport",path:"/sch/report/student-report",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Student Activity Report",renderName:"studentActivityReport",path:"/sch/report/student-activity-report",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Visitor Info",path:"",renderName:["visitorInfo","studentCheckout"],icon:(0,re.jsx)(L.A,{color:"primary",fontSize:"small"}),subMenus:[{name:"Visitor Info",renderName:"visitorInfo",path:"/sch/visitorInfo/visitor-info",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})},{name:"Student Checkout",renderName:"studentCheckout",path:"/sch/visitorInfo/student-checkout",icon:(0,re.jsx)(U.A,{color:"primary",fontSize:"small"})}]},{name:"Help Desk",path:"/sch/help-desk",renderName:["Help desk"],subMenus:[],icon:(0,re.jsx)(Z.A,{color:"primary",fontSize:"small"})},{name:"Guardian Feedback",path:"/sch/guardian-feedback",renderName:["guardianFeedback"],subMenus:[],icon:(0,re.jsx)(V.A,{color:"primary",fontSize:"small"})}]};var ce=a(29541),me=a(12110),ue=a(63336),xe=a(68903),he=a(50108),pe=a(82291),je=a(87734),ge=a(52185),ye=a(6026),Ae=a(86150),fe=a(21327),be=a(38643),ve=a(31883),Se=a(87715),ke=a(13059),De=a(81728);const Ce=()=>{const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),{ref:o,width:r}=(0,ve.A)();return(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.student.getDashboardStudentDetails,{params:{schoolId:e._id}}),l=t.result.map((e=>{const t={className:e.className};return Object.keys(e.sections).forEach((a=>{t[a]=e.sections[a]})),t}));a(l);const n=new Set;t.result.forEach((e=>{Object.keys(e.sections).forEach((e=>{n.add(e)}))})),i([...n])}catch(t){console.log(t)}})()}),[e]),(0,re.jsx)(s.A,{sx:{display:"flex",flex:1},ref:o,children:(0,re.jsx)(he.u,{width:"100%",height:"100%",children:(0,re.jsx)(ue.A,{sx:{width:"100%",height:"100%"},children:(0,re.jsxs)(pe.E,{width:r?r-10:700,height:350,data:t,margin:{top:20,right:5,left:5,bottom:5},children:[(0,re.jsx)(je.d,{strokeDasharray:"3 3"}),(0,re.jsx)(ge.W,{dataKey:"className"}),(0,re.jsx)(ye.h,{}),(0,re.jsx)(Ae.m,{}),(0,re.jsx)(fe.s,{}),n.map((e=>(0,re.jsx)(be.y,{dataKey:e,fill:"#"+Math.floor(16777215*Math.random()).toString(16),stackId:"stack"},e)))]})})})})},we=(0,n.Ay)(me.A)((e=>{let{theme:t}=e;return{marginBottom:"15px",padding:"10px",height:"auto",width:"100%",alignItems:"center",justifyContent:"space-around",[t.breakpoints.down("sm")]:{flexDirection:"column"},[t.breakpoints.down("xs")]:{flexDirection:"column"},[t.breakpoints.down("md")]:{flexDirection:"row"}}})),Ie=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{alignSelf:"center",display:"flex",justifyContent:"center"}})),Ne=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{alignSelf:"center",display:"flex",alignItems:"center",height:"100%",justifyContent:"center",fontSize:"16px",fontWeight:500}})),_e=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",textAlign:"center"}})),Te=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-around",alignItems:"center",paddingTop:"5px"}}));function Me(){const{selectedSetting:e}=(0,l.useContext)(De.A);return(0,l.useEffect)((()=>{(async()=>{try{var t,a;const[l,n]=await Promise.all([(0,Se.Jt)(ke.r.studentAttendance.getAttendanceSummaryForToday,{params:{schoolId:e._id}}),(0,Se.Jt)(ke.r.employeeAttendance.getEmployeeAttendanceSummaryForToday,{params:{schoolId:e._id}})]);console.log(null===(t=l.data)||void 0===t?void 0:t.result,"student attendance data"),console.log(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.result,"employee attendance data")}catch(l){console.log(l)}})()}),[e._id]),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ue.A,{sx:{padding:2,margin:"20px 0px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsxs)(xe.Ay,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,re.jsxs)(we,{children:[(0,re.jsx)(Ie,{children:(0,re.jsx)(Z.A,{sx:{width:"80px",height:"80px",color:"#1b3779"}})}),(0,re.jsx)(Ne,{children:(0,re.jsxs)(_e,{children:[(0,re.jsx)(u.A,{children:"Students Attendance "}),(0,re.jsx)(u.A,{children:"2"}),(0,re.jsxs)(Te,{children:[(0,re.jsxs)(u.A,{children:[(0,re.jsx)("span",{style:{color:"green",fontWeight:600},children:"P:"}),"4"]}),(0,re.jsxs)(u.A,{children:[(0,re.jsx)("span",{style:{color:"red",fontWeight:600},children:"A:"}),"5"]})]})]})})]}),(0,re.jsxs)(we,{children:[(0,re.jsx)(Ie,{children:(0,re.jsx)(Z.A,{sx:{width:"80px",height:"80px",color:"#1b3779"}})}),(0,re.jsx)(Ne,{children:(0,re.jsxs)(_e,{children:[(0,re.jsx)(u.A,{children:"Employee Attendance"}),(0,re.jsx)(u.A,{children:"7"}),(0,re.jsxs)(Te,{children:[(0,re.jsxs)(u.A,{children:[(0,re.jsx)("span",{style:{color:"green",fontWeight:600},children:"P:"}),"6"]}),(0,re.jsxs)(u.A,{children:[(0,re.jsx)("span",{style:{color:"red",fontWeight:600},children:"A:"}),"4"]})]})]})})]})]}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:8,lg:8,children:(0,re.jsx)(Ce,{})})]})})})}var Fe=a(24010),ze=a(62007),Ee=a(29326),qe=a(80889);const Ye=(0,n.Ay)(me.A)((e=>{let{theme:t}=e;return{display:"flex",textAlign:"center",justifyContent:"space-evenly",padding:"25px 0px",flexDirection:"column"}})),We=(0,n.Ay)(Fe.A)((e=>{let{theme:t}=e;return{background:"#1b3779",color:"#fff","&:hover":{color:"#1b3779"}}}));function Re(){return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ue.A,{sx:{padding:2},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"center",children:(0,re.jsx)(u.A,{sx:{fontSize:18,fontWeight:"bold"},children:"Quick Links"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:2.4,lg:2.4,children:(0,re.jsx)(N.N_,{to:"/sch/student/add-student",style:{textDecoration:"none"},children:(0,re.jsxs)(Ye,{children:[(0,re.jsx)(s.A,{children:(0,re.jsx)(We,{size:"small",children:(0,re.jsx)(Z.A,{})})}),(0,re.jsx)(s.A,{children:"Admit Students"})]})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:2.4,lg:2.4,children:(0,re.jsx)(N.N_,{to:"/sch/human-resource/add-employee",style:{textDecoration:"none"},children:(0,re.jsxs)(Ye,{children:[(0,re.jsx)(s.A,{children:(0,re.jsx)(We,{size:"small",children:(0,re.jsx)(Z.A,{})})}),(0,re.jsx)(s.A,{children:"Admit Employee"})]})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:2.4,lg:2.4,children:(0,re.jsx)(N.N_,{to:"/sch/exam-Mark/exam-result",style:{textDecoration:"none"},children:(0,re.jsxs)(Ye,{children:[(0,re.jsx)(s.A,{children:(0,re.jsx)(We,{size:"small",children:(0,re.jsx)(ze.A,{})})}),(0,re.jsx)(u.A,{children:" Exam Results"})]})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:2.4,lg:2.4,children:(0,re.jsx)(N.N_,{to:"/sch/exam-Mark/marks-card",style:{textDecoration:"none"},children:(0,re.jsxs)(Ye,{children:[(0,re.jsx)(s.A,{children:(0,re.jsx)(We,{size:"small",children:(0,re.jsx)(Ee.A,{})})}),(0,re.jsx)(u.A,{children:"Marks Cards"})]})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:2.4,lg:2.4,children:(0,re.jsx)(N.N_,{to:"/sch/communication_compose",style:{textDecoration:"none"},children:(0,re.jsxs)(Ye,{children:[(0,re.jsx)(s.A,{children:(0,re.jsx)(We,{size:"small",children:(0,re.jsx)(qe.A,{})})}),(0,re.jsx)(u.A,{children:"Communication"})]})})})]})})})}var Pe=a(24490),Je=(a(66097),a(71995)),Ve=a.n(Je),Be=a(60446),Le=a.n(Be),Ue=(a(61327),a(14275));const Oe=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{borderRadius:"5px",margin:"18px",transform:"translateY(0%)",animation:"scroll 15s linear infinite",animationPlayState:"running","&:hover":{animationPlayState:"paused"},"@keyframes scroll":{from:{transform:"translateY(50%)"},to:{transform:"translateY(-100%)"}}}})),He=(0,n.Ay)(me.A)((e=>{let{theme:t}=e;return{textAlign:"center",margin:"10px 0px",height:"100%"}})),Ge=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"center",margin:"5px",padding:"5px",fontWeight:700}})),Ke=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",textAlign:"center",height:"auto",width:"95%",marginLeft:"1rem",marginRight:"2rem",paddingBottom:"5px",position:"relative"}})),Qe=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontWeight:"bold",cursor:"pointer",fontSize:"18px",borderLeft:"7px solid #ffeb3b",paddingLeft:t.spacing(1)}})),Ze=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontWeight:700,"&:hover":{color:Ue.A.darkPalette.primary.main,cursor:"pointer"}}}));function $e(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.notice.list,{params:{schoolId:e._id}});a(t.result)}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.holiday.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}})()}),[e._id]),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ue.A,{sx:{padding:2,mt:2},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:6,lg:6,children:(0,re.jsx)(Pe.Ay,{tileClassName:e=>{let{date:t}=e;const a=new Date;return t.toDateString()===a.toDateString()?"blue-day":""}})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,sm:12,md:6,lg:6,children:[(0,re.jsx)(me.A,{sx:{minHeight:"200px",padding:"15px"},children:(0,re.jsxs)(Ve(),{open:!0,children:[(0,re.jsx)(Qe,{children:"Notices: (".concat(null===t||void 0===t?void 0:t.length,")")}),(0,re.jsx)(x.A,{sx:{width:"100%",mt:1}}),(0,re.jsx)(s.A,{sx:{height:"140px",maxHeight:"140px",overflow:"auto"},children:(0,re.jsxs)(He,{elevation:0,children:[(0,re.jsx)(Oe,{children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,re.jsx)(Ke,{children:(0,re.jsx)(Ze,{component:"li",children:e.notice})},t)))}),!(null!==t&&void 0!==t&&t.length)&&(0,re.jsx)(Ge,{variant:"h6",children:"No data found"})]})})]})}),(0,re.jsx)(me.A,{sx:{minHeight:"200px",padding:"15px",marginTop:"10px"},children:(0,re.jsxs)(Ve(),{open:!0,children:[(0,re.jsx)(Qe,{children:"Holidays: (".concat(null===n||void 0===n?void 0:n.length,")")}),(0,re.jsx)(x.A,{sx:{width:"100%",mt:1}}),(0,re.jsx)(s.A,{sx:{height:"140px",maxHeight:"140px",overflow:"auto"},children:(0,re.jsxs)(He,{elevation:0,children:[(0,re.jsx)(Oe,{children:null===n||void 0===n?void 0:n.map(((e,t)=>(0,re.jsx)(Ke,{children:(0,re.jsx)(Ze,{component:"li",children:e.title})},t)))}),!(null!==n&&void 0!==n&&n.length)&&(0,re.jsx)(Ge,{variant:"h6",children:"No data found"})]})})]})})]})]})})})}var Xe=a(42518),et=a(69652),tt=a(63516);function at(){const{selectedSetting:e}=(0,l.useContext)(De.A),t=(0,_.Zp)(),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),d=(0,tt.Wx)({initialValues:{class:"",section:"",student:""},onSubmit:e=>{e.student&&t("/sch/student/edit-student/".concat(e.student))},enableReinitialize:!0});return(0,l.useEffect)((()=>{d.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:d.values.class}}});s(t.result.map((e=>({label:e.name,value:e._id})))),d.setFieldValue("section",t.result[0]._id)}catch(t){console.log(t)}})()}),[d.values.class,e._id]),(0,l.useEffect)((()=>{d.values.class&&d.values.section&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.class":d.values.class,"academicInfo.section":d.values.section}}});r(a.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),d.setFieldValue("student",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[d.values.class,d.values.section,e._id]),(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});n(t.result.map((e=>({label:e.name,value:e._id})))),d.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ue.A,{sx:{padding:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:d.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:d,label:"Select Class",options:a})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:d,label:"Select Section",options:i})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:d,label:"Select Student",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",type:"submit",children:"Find"})})]})})})}function lt(){return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Welcome To School ERP "}),(0,re.jsx)(at,{}),(0,re.jsx)(Me,{}),(0,re.jsx)(Re,{}),(0,re.jsx)($e,{})]})}var nt=a(52101),it=a(58293),st=a(3341),ot=a(42111),rt=a(22505);function dt(e){let{disabled:t,title:a,onAddClick:l=(()=>{})}=e;return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(s.A,{sx:{position:"fixed",width:"-moz-fit-content",width:"fit-content",right:"70px",bottom:"20px"},children:(0,re.jsx)(S.A,{title:a,children:(0,re.jsx)(Fe.A,{variant:"contained",onClick:l,disabled:t,sx:{color:"#ffff",background:Ue.A.darkPalette.primary.main,":hover":{background:Ue.A.darkPalette.primary.main}},children:(0,re.jsx)(rt.A,{})})})})})}var ct=a(30344),mt=a(83462),ut=a(26600),xt=a(35316),ht=a(29347),pt=a(72812);function jt(e){let{formTitle:t="",children:a,formik:l,open:n=!1,onClose:s=(()=>{}),submitButtonTitle:o="",styles:r={},adding:d=!1}=e;const c=(0,i.A)();let m=(0,ct.A)(c.breakpoints.down("sm"));return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(mt.A,{fullScreen:m,open:n,onClose:s,PaperProps:{sx:{width:"100%",maxWidth:650,...r},component:"form",onSubmit:l.handleSubmit},children:[(0,re.jsx)(ut.A,{sx:{fontWeight:600},children:t}),(0,re.jsx)(x.A,{}),(0,re.jsx)(xt.A,{sx:{padding:"10px"},children:a}),(0,re.jsxs)(ht.A,{children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:s,children:"Close"}),(0,re.jsx)(pt.A,{size:"small",loading:d,variant:"contained",type:"submit",children:o})]})]})})}var gt=a(20486);const yt=[{name:"Academic Year",key:"academicYear"},{name:"Status\t",key:"active"},{name:"Note\t",key:"note"}];var At=a(95482);function ft(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),c=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list,{params:{schoolId:e._id}});a(t.result.map((e=>({...e,academicYear:"".concat(e.from,"-").concat(e.to)}))))}catch(t){console.log(t)}},m=()=>{i(!1),o(null)},u=(0,tt.Wx)({initialValues:{from:(null===s||void 0===s?void 0:s.from)||"",to:(null===s||void 0===s?void 0:s.to)||"",note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async e=>{try{const t={...e};if(d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.academicYear.update+"/"+s._id,t);c()}else{const{data:e}=await(0,Se.bE)(ke.r.academicYear.create,t);c()}m()}catch(t){console.log(t)}d(!1)},enableReinitialize:!0});console.log(e,"0000000"),(0,l.useEffect)((()=>{c()}),[e._id]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Academic Year"}),(0,re.jsx)(gt.A,{actions:["edit","switch"],bodyDataModal:"academic year",bodyData:t,tableKeys:yt,onEditClick:e=>{o(e),i(!0)},toggleStatus:"active",onToggleSwitch:async e=>{try{const{data:t}=await(0,Se.yJ)(ke.r.academicYear.toggleActiveStatus+"/"+e._id);c()}catch(t){console.log(t)}}}),(0,re.jsx)(dt,{title:"Add Academic Year",onAddClick:()=>{i(!0)}}),(0,re.jsx)(jt,{open:n,formik:u,formTitle:"Add Academic Year",onClose:m,submitButtonTitle:"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"from",label:"From Year",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"to",label:"To Year",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{type:"text",formik:u,name:"note",label:"Drop a note"})})]})})]})}const bt=[{name:"Designation",key:"name"},{name:"Note",key:"note"}];function vt(){const[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(!1),[i,s]=(0,l.useState)(!1),[o,r]=(0,l.useState)(null),d=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.designation.list);t(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{d()}),[]);const c=()=>{n(!1),r(null)},m=(0,tt.Wx)({initialValues:{name:(null===o||void 0===o?void 0:o.name)||"",orderSequence:(null===o||void 0===o?void 0:o.orderSequence)||e.length+1,note:(null===o||void 0===o?void 0:o.note)||""},onSubmit:async e=>{try{const t={...e};if(s(!0),o){const{data:e}=await(0,Se.yJ)(ke.r.designation.update+"/"+o._id,t);d()}else{const{data:e}=await(0,Se.bE)(ke.r.designation.create,t);d()}c()}catch(t){console.log(t)}s(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Designation"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:bt,bodyDataModal:"designation",bodyData:e,onEditClick:e=>{console.log(e),r(e),n(!0)},onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.designation.delete+"/"+e);d()}catch(t){console.log(t)}}}),(0,re.jsx)(dt,{title:"Add Desigation",onAddClick:()=>{n(!0)}}),(0,re.jsx)(jt,{open:a,formik:m,formTitle:"Add Desigation",onClose:c,submitButtonTitle:o?"Update":"Add",children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{type:"text",formik:m,name:"name",label:"Desigation",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{disabled:!o,type:"number",formik:m,name:"orderSequence",label:"Order Sequence",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{type:"text",formik:m,name:"note",label:"Drop a note"})})]})})]})}const St=[{name:"Department",key:"name"},{name:"Note",key:"note"}];function kt(){const[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(!1),[i,s]=(0,l.useState)(null),[o,r]=(0,l.useState)(!1),d=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.department.list);t(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{d()}),[]);const c=()=>{n(!1),s(null)},m=(0,tt.Wx)({initialValues:{name:null!==i&&void 0!==i&&i.name?null===i||void 0===i?void 0:i.name:"",orderSequence:null!==i&&void 0!==i&&i.orderSequence?null===i||void 0===i?void 0:i.orderSequence:e.length+1,note:(null===i||void 0===i?void 0:i.note)||""},onSubmit:async e=>{try{const t={...e};if(r(!0),i){await(0,Se.yJ)(ke.r.department.update+"/"+i._id,t);d()}else{await(0,Se.bE)(ke.r.department.create,t);d()}c()}catch(t){console.log(t)}r(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Department"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:St,bodyDataModal:"department",bodyData:e,onEditClick:e=>{console.log(e),s(e),n(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.department.delete+"/"+e);d()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Department",onAddClick:()=>{n(!0)}}),(0,re.jsx)(jt,{open:a,formik:m,formTitle:"Add Department",onClose:c,submitButtonTitle:i?"Update":"Add",adding:o,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{type:"text",formik:m,name:"name",label:"Department",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{type:"number",formik:m,name:"orderSequence",label:"Order Sequence",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{type:"text",formik:m,name:"note",label:"Drop a note"})})]})})]})}var Dt=a(4599),Ct=a(15737);const wt=[{name:"Department",key:"name"},{name:"Male",key:"male"},{name:"Female",key:"female"},{name:"Total",key:"total"}],It=[{name:"Employee Id",key:"empId",path:"basicInfo"},{name:"Photo",key:"photo",path:"basicInfo",type:"image"},{name:"Name",key:"name",path:"basicInfo"},{name:"Department",key:"name",path:"department"},{name:"Designation",key:"name",path:"designation"},{name:"Active",key:"active"}],Nt=[{name:"Employee Id",key:"empId",path:"basicInfo"},{name:"Photo",key:"photo",path:"basicInfo",type:"image"},{name:"Name",key:"name",path:"basicInfo"},{name:"Department",key:"name",path:"department"},{name:"Designation",key:"name",path:"designation"},{name:"Active",key:"active"}];var _t=a(79484),Tt=a(30513),Mt=a(62973),Ft=a(67784),zt=a(51787);function Et(){const{selectedSetting:e}=(0,l.useContext)(De.A),t=(0,_.Zp)(),[a,n]=(0,l.useState)(0),[i,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)(""),A=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id}});console.log(t.result,"employyeee"),x(t.result);const a=t.result.filter((e=>e.active)).map((e=>({...e,department:e.academicInfo.department,designation:e.basicInfo.designation}))),l=t.result.filter((e=>!e.active)).map((e=>({...e,department:e.academicInfo.department,designation:e.basicInfo.designation})));o(a),d(l)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.department.list,{params:{schoolId:e._id}}),a=t.result.map((e=>{const t=u.filter((t=>"male"===t.basicInfo.gender&&t.academicInfo.department._id===e._id)).length||0,a=u.filter((t=>"female"===t.basicInfo.gender&&t.academicInfo.department._id===e._id)).length||0,l=t+a;return{...e,male:t,female:a,total:l}}));m(a)}catch(t){console.log(t)}})()}),[u,e._id]),(0,l.useEffect)((()=>{A()}),[e._id]);const f=async e=>{try{await(0,Se.yH)(ke.r.employee.delete+"/"+e);A()}catch(t){console.error(t)}},b=e=>{t("/sch/human-resource/edit-employee/".concat(e._id))},v=e=>{const{value:t}=e.target;y(t.trim()),""!==t.trim()?i.length>0&&j(i.filter((e=>e.basicInfo.name.toLowerCase().includes(t.toLowerCase().trim())))):j([])};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>n(t),value:a,labels:["Overview","Employee List","Inactive Employee List"]}),(0,re.jsx)(Ct.A,{index:0,value:a,children:(0,re.jsx)(gt.A,{actions:"",tableKeys:wt,bodyData:c,bodyDataModal:"employee"})}),(0,re.jsxs)(Ct.A,{index:1,value:a,children:[(0,re.jsxs)(s.A,{sx:{display:"flex",gap:2,margin:"15px 0"},children:[(0,re.jsx)(Ft.A,{sx:{ml:1},size:"small",value:g,onChange:v,placeholder:"Search here...",variant:"outlined",InputProps:{endAdornment:(0,re.jsx)(zt.A,{position:"end",children:(0,re.jsx)(h.A,{edge:"end",type:"submit",children:(0,re.jsx)(_t.A,{})})})}}),(0,re.jsx)(S.A,{title:"Print",children:(0,re.jsx)(h.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,re.jsx)(Tt.A,{})})}),(0,re.jsx)(S.A,{title:"Excel Sheet Download",children:(0,re.jsx)(h.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,re.jsx)(Mt.A,{})})})]}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:It,bodyData:g?p:i,bodyDataModal:"employee",onDeleteClick:f,onEditClick:b})]}),(0,re.jsxs)(Ct.A,{index:2,value:a,children:[(0,re.jsxs)(s.A,{sx:{display:"flex",gap:2,margin:"15px 0"},children:[(0,re.jsx)(Ft.A,{sx:{ml:1},size:"small",value:g,onChange:v,placeholder:"Search here...",variant:"outlined",InputProps:{endAdornment:(0,re.jsx)(zt.A,{position:"end",children:(0,re.jsx)(h.A,{edge:"end",type:"submit",children:(0,re.jsx)(_t.A,{})})})}}),(0,re.jsx)(S.A,{title:"Print",children:(0,re.jsx)(h.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,re.jsx)(Tt.A,{})})}),(0,re.jsx)(S.A,{title:"Excel Sheet Download",children:(0,re.jsx)(h.A,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,re.jsx)(Mt.A,{})})})]}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:Nt,bodyDataModal:"employee",bodyData:g?p:r,onDeleteClick:f,onEditClick:b})]}),(0,re.jsx)(dt,{title:"Add Employee",onAddClick:e=>{t("/sch/human-resource/add-employee")}})]})}const qt=[{name:"Employee Name",key:"name"},{name:"Joining Date",key:"joiningDate",isDate:!0},{name:"Created At",key:"createdAt",isDate:!0}];var Yt=a(83094),Wt=a(92823),Rt=a.n(Wt),Pt=(a(25884),a(74802)),Jt=a(63709),Vt=a(93141),Bt=a.n(Vt);function Lt(e){let{open:t,content:a,onClose:n,onPrintClick:i,title:s}=e;const o=(0,l.useRef)(null);return(0,re.jsxs)(mt.A,{onClose:n,"aria-labelledby":"customized-dialog-title",open:t,children:[(0,re.jsx)(ut.A,{sx:{m:0,p:2,fontWeight:600},id:"customized-dialog-title",children:s}),(0,re.jsx)(h.A,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8},children:(0,re.jsx)(Pt.A,{})}),(0,re.jsx)(xt.A,{children:(0,re.jsx)(u.A,{gutterBottom:!0,children:(0,re.jsx)("div",{class:"printContainer",ref:o,dangerouslySetInnerHTML:{__html:a}})})}),(0,re.jsx)(ht.A,{children:(0,re.jsx)(Bt(),{trigger:()=>(0,re.jsx)(Xe.A,{variant:"contained",size:"small",sx:{background:"#1b3779",":hover":{background:"#1b3779"}},onClick:i,startIcon:(0,re.jsx)(Jt.A,{}),children:"Print"}),content:()=>o.current})})]})}function Ut(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),c=(0,l.useRef)(),m=(0,Vt.useReactToPrint)({content:()=>c.current}),[u,x]=(0,l.useState)({open:!1,containt:""}),h=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.offerLetter.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{h()}),[e._id]);const p=(0,tt.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",joiningDate:null!==s&&void 0!==s&&s.joiningDate?Le()(null===s||void 0===s?void 0:s.joiningDate).format("YYYY/MM/DD"):null,offerLetter:(null===s||void 0===s?void 0:s.offerLetter)||" <strong>Congratulations! You've Been Selected for the Role of [Job Title]</strong>\n          <p>[Company Name]</p>\n          <p>[Address eg. Excellent English Medium Primary & High School Ittangihal road, Vijaypur, Karnataka 586103]</p>\n          <p>[City, State, ZIP Code]</p>\n          <p>Date: [DD, MM, YY]</p>\n          <strong>Dear [Candidate's Full Name],</strong>\n          <p>We are thrilled to offer you the position of [Job Title] at [Company Name]. After careful consideration, we believe your skills, experience, and vision make you the perfect fit for our team.</p>\n          <strong>Position Details:</strong>\n            <p><strong>- Job Title:</strong> [Job Title]</p>\n            <p><strong>- Department:</strong> [Department]</p>\n            <p><strong>- Supervisor:</strong> [Supervisor/Manager Name]</p>\n            <p><strong>- Start Date:</strong> [Start Date]</p>\n            <p><strong>- Compensation:</strong> [Salary or Compensation Details]</p>\n        <strong>Work Hours:</strong>\n        <p>[Regular work hours, any flexible schedule options, etc.]</p>\n        <p>We believe that [Company Name] is a place where you can grow and thrive. Your role as [Job Title] will be pivotal in driving our company's success and we look forward to the innovative contributions you will bring to our team.</p>\n        <p>Please indicate your acceptance of this offer by signing and returning a copy of this letter by <strong>[Acceptance Deadline]</strong>. Should you have any questions or need further clarification, feel free to reach out to <strong>[HR Contact Name]</strong> at <strong>[HR Contact Email]</strong> or <strong>[HR Contact Phone Number]</strong>.</p>\n        <p>We eagerly await your positive response and look forward to welcoming you to the [Company Name] family.</p>\n        <p>Warm Regards,</p>\n        <p>[HR, Manager Name]</p>\n        <p>[Contact Information]</p>\n        <br/>\n        <p style=\"text-align:\"center;\">&copy; [Year] [Company Name]. All rights reserved.</p>\n      "},onSubmit:async(t,l)=>{let{resetForm:n}=l;try{const l={...t,schoolId:e._id};if(d(!0),s){await(0,Se.yJ)(ke.r.offerLetter.update+"/"+s._id,l);h()}else{await(0,Se.bE)(ke.r.offerLetter.create,l);h()}n(),a(0)}catch(i){console.log(i)}d(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{1===t&&(p.resetForm(),o(null))}),[t]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Offer Letter"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{a(t)},value:t,labels:s&&2===t?["Offer letter list","Add offer letter","Edit offer letter"]:["Offer letter list","Add offer Letter"]}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsx)(gt.A,{actions:["view","edit","delete"],tableKeys:qt,bodyDataModal:"offer letter",bodyData:n,onEditClick:e=>{o(e),a(2)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.offerLetter.delete+"/"+e);h()}catch(t){console.error(t)}},onViewClick:e=>{x({...u,open:!0,containt:e.offerLetter})}}),(0,re.jsx)(Lt,{title:"Offer Letter",open:u.open,content:u.containt,onClose:()=>{x({...u,open:!1})},onPrintClick:m})]}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)("form",{onSubmit:p.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Rt(),{theme:"snow",value:p.values.offerLetter,required:!0,onChange:e=>p.setFieldValue("offerLetter",e),style:{height:"220px"}})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,re.jsx)(Xe.A,{size:"small",onClick:()=>a(0),color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(pt.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})}),(0,re.jsx)(Ct.A,{index:2,value:t,children:(0,re.jsx)("form",{onSubmit:p.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.offerLetter,onChange:e=>p.setFieldValue("offerLetter",e),style:{height:"220px"}})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,re.jsx)(Xe.A,{size:"small",onClick:()=>a(0),color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(pt.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})})]})}const Ot=[{name:"Employee Name",key:"name"},{name:"Joining Date",key:"joiningDate",isDate:!0},{name:"Created At",key:"createdAt",isDate:!0}];function Ht(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)({open:!1,containt:""}),u=(0,l.useRef)(),x=(0,Vt.useReactToPrint)({content:()=>u.current}),h=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.relievingLetter.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{h()}),[e._id]);const p=(0,tt.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",joiningDate:null!==s&&void 0!==s&&s.joiningDate?Le()(null===s||void 0===s?void 0:s.joiningDate).format("YYYY/MM/DD"):null,relievingLetter:(null===s||void 0===s?void 0:s.relievingLetter)||"<strong>Relieving Letter</strong>\n        <p>[Company Name]</p>\n        <p>Excellent English Medium Primary & High School Ittangihal road, Vijaypur, Karnataka 586103</p>\n        <p>Date: DD, MM, YY\t</p>\n        <p>Dear [Employee's Full Name],</p>\n        <p>We hereby acknowledge receipt of your resignation letter dated <strong>[Resignation Date]</strong>, in which you requested to be relieved from your position as <strong>[Employee's Designation]</strong> at <strong>[Company Name]</strong>. We are pleased to provide you with your relieving letter.</p>\n        <p>This is to inform you that you <strong>[Employee ID]</strong> will be relieved after careful consideration and necessary formalities.</p>\n        <p>You have successfully completed your tenure at <strong>[Company Name]</strong> as <strong>[Job Title]</strong> from <strong>[Joining Date]</strong> to <strong>[Last Working Date]</strong>. We appreciate your dedicated service and commitment during your time with us.</p>\n        <p>Sincerely,</p>\n        <p>HR, Manager</p>\n        <p>[Contact Information]</p>\n        <br/>\n        <p>&copy; [Year] [Company Name]. All rights reserved.</p>\n      "},onSubmit:async(t,l)=>{let{resetForm:n}=l;try{const l={...t,schoolId:e._id};if(d(!0),s){await(0,Se.yJ)(ke.r.relievingLetter.update+"/"+s._id,l);h()}else{await(0,Se.bE)(ke.r.relievingLetter.create,l);h()}n(),a(0)}catch(i){console.log(i)}d(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{1===t&&(p.resetForm(),o(null))}),[t]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Relieving letter"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{a(t)},value:t,labels:s&&2===t?["Relieving letter list","Add relieving letter","Edit relieving letter"]:["Relieving letter list","Add relieving letter"]}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsx)(gt.A,{actions:["view","edit","delete"],tableKeys:Ot,bodyDataModal:"relieving letter",bodyData:n,onEditClick:e=>{console.log(e),o(e),a(2)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.relievingLetter.delete+"/"+e);h()}catch(t){console.error(t)}},onViewClick:e=>{m({...c,open:!0,containt:e.relievingLetter})}}),(0,re.jsx)(Lt,{title:"Relieving  Letter",open:c.open,content:c.containt,onClose:()=>{m({...c,open:!1})},onPrintClick:x})]}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)("form",{onSubmit:p.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Date",name:"joiningDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.relievingLetter,onChange:e=>p.setFieldValue("relievingLetter",e),style:{height:"220px"}})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,gap:1,mt:6,display:"flex",justifyContent:"flex-end",children:[(0,re.jsx)(Xe.A,{size:"small",onClick:()=>a(0),color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(pt.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})}),(0,re.jsx)(Ct.A,{index:2,value:t,children:(0,re.jsx)("form",{onSubmit:p.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:p,label:"Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Date",name:"joiningDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.relievingLetter,onChange:e=>p.setFieldValue("relievingLetter",e),style:{height:"220px"}})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,re.jsx)(Xe.A,{size:"small",onClick:()=>a(0),color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(pt.A,{loading:r,size:"small",type:"submit",variant:"contained",children:"Submit"})]})]})})})]})}const Gt=[{name:"Employee name",key:"name"},{name:"Joininng Date",key:"date"},{name:"Created At",key:"createdAt"}];var Kt=a(10155);const Qt=[{label:"Male",value:"male"},{label:"Female",value:"female"}],Zt=[{label:"A+",value:"a"},{label:"A-",value:"a-"},{label:"B+",value:"b+"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}];function $t(){const[e,t]=(0,l.useState)(0),[a,n]=(0,l.useState)([{name:"",file:null}]),[i,o]=(0,l.useState)([]),r=(0,tt.Wx)({initialValues:{userType:"",user:"",name:"",bloodGroup:"",dob:Le()(new Date),joiningDate:Le()(new Date),resignDate:Le()(new Date),relivingDate:Le()(new Date),gender:"",contactNumber:"",status:"",feedback:""},onSubmit:console.log("nnnn")});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee"}),(0,re.jsx)(Dt.A,{onChange:(e,a)=>t(a),value:e,labels:["Off-Boarding letter list","Add Off-Boarding"]}),(0,re.jsx)(Ct.A,{index:0,value:e,children:(0,re.jsx)(gt.A,{actions:["edit"],tableKeys:Gt,bodyDataModal:"Off-Boarding letter",bodyData:i})}),(0,re.jsxs)(Ct.A,{index:1,value:e,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"userType",formik:r,label:"Select User Type"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"user",formik:r,label:"Select User"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,alignSelf:"center",children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",children:"Basic Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:r,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"gender",formik:r,label:"Select Gender",options:Qt})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"bloodGroup",formik:r,label:"Select Blood Group",options:Zt})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"dob",formik:r,label:"DOB"})})]})}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",children:"Working Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"joiningDate",formik:r,label:"Joining Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"resignDate",formik:r,label:"Resign Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"relivingDate",formik:r,label:"RelivingD ate"})})]})}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",children:"Profile Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"status",formik:r,label:"Select Status"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:9,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"feedback",formik:r,label:"Feedback"})})]})}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",children:"Additional Document Information"})}),a.map(((e,t)=>(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:r,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"file",formik:r,label:"Select Image",type:"file"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:1,md:1,lg:3,mt:1,alignSelf:"center",children:(0,re.jsx)(Xe.A,{onClick:()=>(e=>{const t=[...a];t.splice(e,1),n(t)})(t),children:(0,re.jsx)(Kt.A,{color:"error"})})})]}))),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"outlined",onClick:()=>{n([...a,{name:"",file:""}])},startIcon:(0,re.jsx)(rt.A,{}),children:"Add"})})]})}),(0,re.jsxs)(s.A,{display:"flex",justifyContent:"flex-end",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Submit"})]})]})]})}const Xt=[{name:"Employee Name",key:"name"},{name:"Joining Date",key:"joiningDate",isDate:!0},{name:"Created At",key:"createdAt",isDate:!0}];function ea(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),c=(0,l.useRef)(),[m,u]=(0,l.useState)({open:!1,containt:""}),x=(0,Vt.useReactToPrint)({content:()=>c.current}),h=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.experienceLetter.list,{params:{schoolId:e._id}});i(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{h()}),[e._id]);const p=(0,tt.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",joiningDate:null!==s&&void 0!==s&&s.joiningDate?Le()(null===s||void 0===s?void 0:s.joiningDate).format("YYYY/MM/DD"):null,experienceLetter:(null===s||void 0===s?void 0:s.experienceLetter)||" <strong>Experience Letter</strong>\n          <p>Webpruce Company</p>\n          <p>Date: 12, January 2024</p>\n          <p>Place: Excellent English Medium Primary & High School Ittangihal road, Vijaypur, Karnataka 586103</p>\n          <p>To Whom It May Concern,</p>\n          <p>This is to certify that <strong>[Employee's Full Name]</strong> was employed with us as a <strong>[Job Title]</strong> in the <strong>[Department]</strong> department from <strong>[Start Date]</strong> to <strong>[End Date]</strong>.</p>\n          <p>During their tenure with us, [Employee's Full Name] was responsible for:</p>\n          <p>- Key Responsibility 1</p>\n          <p>- Key Responsibility 2</p>\n          <p>We found [Employee's Full Name] to be a dedicated and reliable employee who consistently showed a high level of professionalism. They are leaving us due to [reason for leaving, if appropriate], and we wish them all the best in their future endeavors.</p>\n          <p>We highly recommend [Employee's Full Name] for any future employment opportunities and are confident that they will be an asset to any organization they join.</p>\n          <p>If you require any further information, please do not hesitate to contact us.</p>\n          <p>Warm Regards,</p>\n          <p><strong>[Your Name]</strong></p>\n          <p><strong>[Your Job Title]</strong></p>\n          <p><strong>[Contact Information]</strong></p>\n          <br/>\n          <p>&copy; [Year] [Company Name]. All rights reserved.</p>\n        "},onSubmit:async(t,l)=>{let{resetForm:n}=l;try{const l={...t,schoolId:e._id};if(d(!0),s){await(0,Se.yJ)(ke.r.experienceLetter.update+"/"+s._id,l);h()}else{await(0,Se.bE)(ke.r.experienceLetter.create,l);h()}a(0),n()}catch(i){console.log(i)}d(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{1===t&&(p.resetForm(),o(null))}),[t]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Experience Letter"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{a(t)},value:t,labels:s&&2===t?["Experience letter list","Add experience letter","Edit experience letter"]:["Experience letter list","Add experience Letter"]}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsx)(gt.A,{actions:["view","edit","delete"],tableKeys:Xt,bodyDataModal:"experience  letter",bodyData:n,onEditClick:e=>{console.log(e),o(e),a(2)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.experienceLetter.delete+"/"+e);h()}catch(t){console.error(t)}},onViewClick:e=>{u({...m,open:!0,containt:e.experienceLetter})}}),(0,re.jsx)(Lt,{title:"Experience Letter",open:m.open,content:m.containt,onClose:()=>{u({...m,open:!1})},onPrintClick:x})]}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsxs)("form",{onSubmit:p.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,type:"text",name:"name",formik:p,label:"Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.experienceLetter,onChange:e=>p.setFieldValue("experienceLetter",e),onBlur:p.handleBlur("experienceLetter"),style:{height:"220px"}})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,mt:6,gap:1,display:"flex",justifyContent:"flex-end",children:[(0,re.jsx)(Xe.A,{size:"small",onClick:()=>a(0),color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(pt.A,{size:"small",loading:r,variant:"contained",type:"submit",children:"Submit"})]})]})]})}),(0,re.jsx)(Ct.A,{index:2,value:t,children:(0,re.jsxs)("form",{onSubmit:p.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,type:"text",name:"name",formik:p,label:"Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Joining Date",name:"joiningDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Rt(),{theme:"snow",required:!0,value:p.values.experienceLetter,onChange:e=>p.setFieldValue("experienceLetter",e),onBlur:p.handleBlur("experienceLetter"),style:{height:"220px"}})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,gap:1,item:!0,mt:6,display:"flex",justifyContent:"flex-end",children:[(0,re.jsx)(Xe.A,{size:"small",onClick:()=>a(0),color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(pt.A,{size:"small",loading:r,variant:"contained",type:"submit",children:"Submit"})]})]})]})})]})}const ta=[{name:"Date",key:"createdAt",isDate:!0},{name:"Topic",key:"topic"}];function aa(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)([]),[f,b]=(0,l.useState)([]);let v=window.localStorage.getItem("current_ecs_user"),S=JSON.parse(v);const k=async t=>{try{m(!0);const{data:a}=await(0,Se.Jt)(ke.r.teacherActivity.list,{params:{schoolId:e._id,search:{teacher:t.teacher,class:t.class,section:t.section,subject:t.subject,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")}}});o(a.result),m(!1)}catch(a){console.log(a),m(!1)}},D=()=>{a(0),i(null),k()},C=async t=>{try{const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:t}}});g(a.result.map((e=>({label:e.name,value:e._id}))))}catch(a){console.error(a)}},w=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:e._id,search:{class:I.values.class||N.values.class}}});A(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.error(t)}};(0,l.useEffect)((()=>{(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id}}),l=null===(t=a.result)||void 0===t?void 0:t.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))),n=[{label:"Me",value:S._id},...l];b(n)}catch(a){console.log(a)}})()}),[e]),(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);x(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),I.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});p(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.error(t)}})()}),[e]);const I=(0,tt.Wx)({initialValues:{academicYear:(null===n||void 0===n?void 0:n.academicYear._id)||"",class:(null===n||void 0===n?void 0:n.class._id)||"",section:(null===n||void 0===n?void 0:n.section._id)||"",subject:(null===n||void 0===n?void 0:n.subject._id)||"",topic:(null===n||void 0===n?void 0:n.topic)||""},onSubmit:async t=>{try{const a={...t,schoolId:e._id};if(d(!0),n){const{data:e}=await(0,Se.yJ)(ke.r.teacherActivity.update+"/"+n._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.teacherActivity.create,a)}N.handleSubmit(),D(),d(!1)}catch(a){console.error(a),d(!1)}d(!1)},enableReinitialize:!0}),N=(0,tt.Wx)({initialValues:{teacher:"",class:"",section:"",subject:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:k});(0,l.useEffect)((()=>{I.values.class&&(C(I.values.class),w(),N.resetForm())}),[I.values.class]),(0,l.useEffect)((()=>{N.values.class&&(C(N.values.class),w(),I.resetForm())}),[N.values.class]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Teacher Activity"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{1!==t&&i(null),a(t)},value:t,labels:["All Activity",n?"Edit Activity":"Add Activity"]}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:N.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"teacher",formik:N,label:"Select Teacher",options:f})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:N,label:"Class",options:h})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:N,label:"Section",options:j})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:N,label:"Subject",options:y})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(Yt.A,{formik:N,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(Yt.A,{formik:N,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(pt.A,{loading:c,size:"small",type:"submit",variant:"contained",children:"Find"})})]})})}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:ta,bodyDataModal:"teacher activity",bodyData:s,onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.teacherActivity.delete+"/"+e);k(),N.handleSubmit()}catch(t){console.error(t)}},onEditClick:e=>{i(e),a(1)}})]}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:I.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:I,label:"Select Academic Year",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:I,label:"Select Class",options:h})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:I,label:"Select Section",options:j})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:I,label:"Select subject",options:y})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"topic",formik:I,label:"Topic covered"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,mt:1,display:"flex",justifyContent:"flex-end",gap:1,item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:D,children:"Cancel"}),(0,re.jsx)(pt.A,{loading:r,size:"small",type:"submit",variant:"contained",children:n?"Update":"Submit"})]})]})})})})]})}const la=[{name:"Role Name",key:"name"}],na=[{module:"Institute Selector",subModule:[{module:"Institute Selector",permissions:[]}]},{module:"Dashboard",subModule:[{module:"Dashboard",permissions:[]}]},{module:"Institute",subModule:[{module:"Institute",permissions:[]}]},{module:"Administrator",subModule:[{module:"Academic Year",permissions:[]},{module:"Roles and Permissions",permissions:[]}]},{module:"Human Resources",subModule:[{module:"Designation",permissions:[]},{module:"Department",permissions:[]},{module:"Employee",permissions:[]},{module:"Offer Letter",permissions:[]},{module:"Relieving Letter",permissions:[]},{module:"Off Boarding",permissions:[]},{module:"Experience Letter",permissions:[]},{module:"Teacher Activity",permissions:[]}]},{module:"Pre-Admission",subModule:[{module:"Enquiries",permissions:[]},{module:"Exams",permissions:[]},{module:"Exam Schedules",permissions:[]},{module:"Result",permissions:[]}]},{module:"Academic",subModule:[{module:"Class",permissions:[]},{module:"Section",permissions:[]},{module:"Subject",permissions:[]}]},{module:"Attendance",subModule:[{module:"Student Attendance",permissions:[]},{module:"Employee Attendance",permissions:[]}]},{module:"Class Routine",subModule:[{module:"Class Routine",permissions:[]}]},{module:"Student",subModule:[{module:"Overview",permissions:[]},{module:"Admit Student",permissions:[]},{module:"Reshuffle",permissions:[]},{module:"Promotion",permissions:[]},{module:"Bulk Admission",permissions:[]},{module:"Credential",permissions:[]},{module:"Quick Admit",permissions:[]},{module:"Student Activity",permissions:[]}]},{module:"Assignment",subModule:[{module:"Assignment",permissions:[]}]},{module:"Communication",subModule:[{module:"Compose",permissions:[]},{module:"Report",permissions:[]},{module:"Credential",permissions:[]}]},{module:"Announcement",subModule:[{module:"Notice",permissions:[]},{module:"News",permissions:[]},{module:"Holiday",permissions:[]},{module:"Awards And Achievement",permissions:[]},{module:"Splash News",permissions:[]}]},{module:"Gallery",subModule:[{module:"Gallery",permissions:[]}]},{module:"Notification",subModule:[{module:"Notification",permissions:[]}]},{module:"Event",subModule:[{module:"Event",permissions:[]}]},{module:"Exam",subModule:[{module:"Exam Grade",permissions:[]},{module:"Exam Term",permissions:[]},{module:"Exam Schedule",permissions:[]},{module:"Exam Hall Ticket",permissions:[]}]},{module:"Exam Mark",subModule:[{module:"Exam Attendance",permissions:[]},{module:"Manage Mark",permissions:[]},{module:"Exam Result",permissions:[]},{module:"Marks Card",permissions:[]},{module:"Consolidated Marks Sheet",permissions:[]},{module:"Subject Wise Report",permissions:[]},{module:"Division Wise Report",permissions:[]}]},{module:"LMS",subModule:[{module:"Storage",permissions:[]},{module:"Courses",permissions:[]},{module:"Course Content",permissions:[]},{module:"Live",permissions:[]}]},{module:"Library",subModule:[{module:"Books",permissions:[]},{module:"Periodical",permissions:[]},{module:"Student Library Member",permissions:[]},{module:"Employee Library Member",permissions:[]},{module:"Issue and Returns",permissions:[]}]},{module:"Leave Management",subModule:[{module:"Leave Type",permissions:[]},{module:"Employee Leave",permissions:[]},{module:"Student Leave",permissions:[]},{module:"Leave Report",permissions:[]}]},{module:"Inventory",subModule:[{module:"Item",permissions:[]},{module:"Vendor",permissions:[]},{module:"In/Out Transaction",permissions:[]},{module:"Stock ist",permissions:[]},{module:"Issue",permissions:[]},{module:"Sell",permissions:[]}]},{module:"Certificate",subModule:[{module:"Study Certificate",permissions:[]},{module:"Transfer Certificate",permissions:[]}]},{module:"Fees",subModule:[{module:"Receipt Book",permissions:[]},{module:"Fee Map Category",permissions:[]},{module:"Collect Fees",permissions:[]},{module:"Balance Fee",permissions:[]},{module:"Fee Overview",permissions:[]},{module:"Reconciliation",permissions:[]}]},{module:"Hostel",subModule:[{module:"Manage Hostel",permissions:[]},{module:"Manage Room Type",permissions:[]},{module:"Manage Room Bed",permissions:[]},{module:"Hostel Member",permissions:[]}]},{module:"Transport",subModule:[{module:"Vehicle",permissions:[]},{module:"Manage Route And Trips",permissions:[]},{module:"Routes",permissions:[]},{module:"Transport Member",permissions:[]},{module:"Vehicle Log",permissions:[]},{module:"Vehicle Maintenance",permissions:[]}]},{module:"Payroll",subModule:[{module:"Salary Grade",permissions:[]},{module:"Make Payment",permissions:[]}]},{module:"Report",subModule:[{module:"Library Report",permissions:[]},{module:"Student Attendance",permissions:[]},{module:"Studnet Yearly Attendance",permissions:[]},{module:"Emplyee Attendance",permissions:[]},{module:"Employee Yearly Attendance",permissions:[]},{module:"Student Report",permissions:[]},{module:"Student Activity Report",permissions:[]}]},{module:"Visitor Info",subModule:[{module:"Visitor Info",permissions:[]},{module:"Student Checkout",permissions:[]}]},{module:"Help Desk",subModule:[{module:"Help Desk",permissions:[]}]},{module:"Guardian Feedback",subModule:[{module:"Guardian Feedback",permissions:[]}]}];var ia=a(79650),sa=a(71806),oa=a(84882),ra=a(28076),da=a(39652),ca=a(51962),ma=a(73460);function ua(e,t){const a=e.indexOf(t);return-1===a?e.push(t):e.splice(a,1),e}function xa(e,t){const a=e.indexOf(t);return-1!==a&&e.splice(a,1),e}const ha=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),pa=["view","add","update","delete"];function ja(){const[e,t]=l.useState(0),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(null),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(["view","add","update","delete"]);(0,l.useEffect)((()=>{h(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.getRoleKeys);if(i){let t=[...i.permissions];for(let a of e.result)t.find((e=>e.module==a.module))||t.push(a);c(t)}else c(e.result)}catch(e){console.log(e)}})(),0==e&&s(null)}),[e]);const h=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);n(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{h()}),[]);const p=async e=>{let a={...e,permissions:d};i||(a.permissions=d.map((e=>({...e,permissions:[]}))));try{if(i){const{data:e}=await(0,Se.yJ)(ke.r.role.update+"/"+i._id,a);t(0),h()}else{const{data:e}=await(0,Se.bE)(ke.r.role.create,a);t(0),h()}j.resetForm(),r(!1)}catch(l){console.log(l)}},j=(0,tt.Wx)({initialValues:{name:""},onSubmit:p,enableReinitialize:!0}),g=(0,tt.Wx)({initialValues:{name:(null===i||void 0===i?void 0:i.name)||""},onSubmit:p,enableReinitialize:!0}),y=e=>{c(d.map((t=>{return{...t,permissions:m.includes(e)?xa(t.permissions,e):(a=t.permissions,l=e,a.includes(l)||a.push(l),a)};var a,l})))};(0,l.useEffect)((()=>{let e=[];for(let t of pa)d.every((e=>e.permissions.includes(t.toLowerCase())))?e.push(t.toLowerCase()):e.filter((e=>e!==t));x(e)}),[d]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Role Permission"}),(0,re.jsx)(Dt.A,{onChange:(e,a)=>{t(a)},value:e,labels:i&&1===e?["List","Edit"]:["List"]}),(0,re.jsxs)(Ct.A,{value:e,index:0,children:[(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"role permission",bodyData:a,onEditClick:e=>{s(e),t(1)},tableKeys:la,onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.role.delete+"/"+e);n(a.filter((t=>t._id!==e)))}catch(t){console.log(t)}}}),(0,re.jsx)(dt,{title:"Add Role",onAddClick:()=>{t(0),r(!0)}})]}),(0,re.jsx)(jt,{open:o,formik:j,formTitle:"Create Role",onClose:()=>r(!1),submitButtonTitle:"Create",children:(0,re.jsx)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{type:"text",formik:j,name:"name",label:"Role Name",required:!0})})})}),i&&1==e&&(0,re.jsxs)(Ct.A,{value:e,index:1,children:[(0,re.jsxs)(xe.Ay,{container:!0,rowSpacing:1,columnSpacing:2,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,re.jsx)(At.A,{required:!0,name:"name",type:"text",formik:g,label:"Role Name"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,re.jsxs)(u.A,{sx:{margin:"10px 0px",fontWeight:"500",fontSize:"16px",fontWeight:700},children:[" ","Set permission for this role"]})})]}),(0,re.jsx)(ia.A,{component:ue.A,sx:{marginBottom:"60px"},children:(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700,paddingLeft:"15px"},children:"Module Name"}),(0,re.jsxs)(da.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["View",(0,re.jsx)(ca.A,{onChange:()=>y("view"),name:"view",checked:m.includes("view")})]}),(0,re.jsxs)(da.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["Add"," ",(0,re.jsx)(ca.A,{checked:m.includes("add"),onChange:()=>y("add"),name:"add"})," "]}),(0,re.jsxs)(da.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["Update"," ",(0,re.jsx)(ca.A,{checked:m.includes("update"),onChange:()=>y("update"),name:"update"})]}),(0,re.jsxs)(da.A,{sx:{color:e=>"dark"===e.palette.mode?"white":"black",fontWeight:700},align:"center",children:["Delete"," ",(0,re.jsx)(ca.A,{checked:m.includes("delete"),onChange:()=>y("delete"),name:"delete"})]})]})}),(0,re.jsx)(ma.A,{children:na.map(((e,t)=>{const{module:a,subModule:l}=e;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ra.A,{children:(0,re.jsx)(da.A,{colSpan:5,sx:{backgroundColor:e=>"dark"===e.palette.mode?"rgba(32,33,32,1)":e.palette.grey[100]},children:(0,re.jsx)(u.A,{fontWeight:"bold",paddingLeft:"10px",children:a})})},t),l.map(((e,t)=>(0,re.jsxs)(ra.A,{k:e.module+t.toString(),children:[(0,re.jsx)(da.A,{align:"center",children:e.module}),pa.map((t=>{var a,l;return(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{onChange:()=>((e,t)=>{c(d.map((a=>a.module===e?{...a,permissions:ua(a.permissions,t.toLowerCase())}:a)))})(e.module,t),checked:(null===(a=d.find((t=>t.module===e.module)))||void 0===a||null===(l=a.permissions)||void 0===l?void 0:l.includes(t))||!1})},t)}))]})))]})}))})]})}),(0,re.jsx)(xe.Ay,{container:!0,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,children:(0,re.jsx)(ha,{sx:{backgroundColor:e=>"dark"===e.palette.mode?"rgba(32,33,32,1)":e.palette.grey[100]},children:(0,re.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,re.jsx)(Xe.A,{onClick:()=>{t(0)},variant:"contained",color:"error",size:"small",children:"Cancel"}),(0,re.jsx)(Xe.A,{onClick:g.handleSubmit,variant:"contained",size:"small",children:"Update"})]})})})})]})]})}const ga=[{name:"Role Name",key:"role"}];function ya(){const[e,t]=(0,l.useState)([]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"User Role"}),(0,re.jsx)(gt.A,{actions:["edit"],bodyDataModal:"user role",bodyData:e,tableKeys:ga})]})}function Aa(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(!1),r=(0,tt.Wx)({initialValues:{userType:"",employeeId:"",password:""},onSubmit:async(t,a)=>{let{resetForm:l}=a;try{const a={...t,schoolId:e._id,employeeId:t.employeeId,password:t.password};o(!0);const{data:n}=await(0,Se.bE)(ke.r.account.changePasswordForUser,a);l(),o(!1)}catch(n){console.log(n),o(!1)}},enableReinitialize:!0});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list),t=e.result.filter((e=>{var t;return"student"!==(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())})).map((e=>({label:e.name,value:e._id})));a(t)}catch(e){console.error(e)}})()}),[e]),(0,l.useEffect)((()=>{r.values.userType&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id,search:{role:r.values.userType}}});i(t.result.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})()}),[r.values.userType,e._id]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"User Password Reset"}),(0,re.jsx)(ue.A,{sx:{padding:2},children:(0,re.jsx)("form",{onSubmit:r.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"userType",formik:r,label:"User Type",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"employeeId",formik:r,label:"Employees",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,formik:r,label:"Password",name:"password"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{loading:s,size:"small",type:"submit",variant:"contained",children:"Change Password"})})]})})})]})}const fa=[{name:"Student Name",key:"studentName"},{name:"Class",key:"class"},{name:"Submitted On",key:"submittedOn",isDate:!0}];var ba=a(77502),va=a(25434),Sa=a(33438);function ka(e){let{open:t,onClose:a,title:l,children:n}=e;return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(mt.A,{onClose:a,"aria-labelledby":"customized-dialog-title",open:t,children:[(0,re.jsx)(ut.A,{sx:{m:0,p:2,fontWeight:600},id:"customized-dialog-title",children:l}),(0,re.jsx)(h.A,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8},children:(0,re.jsx)(Sa.A,{})}),(0,re.jsx)(xt.A,{sx:{padding:"10px"},children:n})]})})}const Da=(0,n.Ay)(s.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"20px"}),Ca=(0,n.Ay)(ra.A)((e=>{let{theme:t}=e;return{width:"200px","&:nth-of-type(odd)":{backgroundColor:"dark"===t.palette.mode?"rgb(81 81 81)":"#F0F8FF"}}})),wa=(0,n.Ay)(da.A)((e=>{let{theme:t}=e;return{width:"200px",border:"1px solid gray",["&.".concat(ba.A.head)]:{backgroundColor:"blue",color:"#000"},["&.".concat(ba.A.body)]:{fontSize:15}}})),Ia=e=>{let{onUpdate:t=(()=>{}),data:a={}}=e;const[n,i]=(0,l.useState)(!1),s=async e=>{try{i(!0),await(0,Se.yJ)(ke.r.preadmissionEnqiry.update+"/"+a._id,{status:e}),i(!1),t()}catch(l){console.log(l),i(!1)}};return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(v.A,{spacing:2,direction:"row",justifyContent:"center",children:[["Approved","Pending"].includes(a.status)?(0,re.jsx)(pt.A,{variant:"contained",size:"small",loading:"Rejected"==n,onClick:()=>s("Rejected"),color:"error",children:"Reject"}):null,["Rejected","Pending"].includes(a.status)?(0,re.jsx)(pt.A,{size:"small",variant:"contained",loading:"Approved"==n,onClick:()=>s("Approved"),color:"success",children:"Approve"}):null]})})};function Na(){var e,t,a,n,i,s,o,r,d,c,m,x,h,p,j,g,y,A,f,b,v,S,k,D,C,w,I,N,_,T,M,F,z,E,q,Y,W,R,P,J,V,B,L,U,O,H,G,K,Q,Z,$,X,ee,te,ae,le,ne,ie,se,oe,de,me,he,pe,je,ge,ye,Ae,fe,be,ve,Ce,we,Ie,Ne,_e,Te,Me,Fe,ze,Ee,qe,Ye,We,Re,Pe,Je,Ve,Be,Ue,Oe,He,Ge,Ke,Qe,Ze,$e,at,lt,nt,it,st,ot,rt,dt,ct,mt,ut,ht,jt,yt,At,ft,bt,vt,St,kt,Dt,Ct,wt,It,Nt,_t,Tt,Mt,Ft,zt,Et,qt,Wt,Rt,Pt,Jt,Vt,Bt,Lt,Ut,Ot,Ht,Gt,Kt,Qt,Zt,$t,Xt,ea,ta,aa,la,na,ia,oa,ra,da,ca,ua,xa,ha,pa,ja,ga,ya,Aa,ba,Sa,Na,_a,Ta,Ma,Fa,za,Ea,qa,Ya,Wa,Ra,Pa,Ja,Va,Ba,La,Ua,Oa,Ha,Ga,Ka,Qa,Za,$a,Xa,el,tl,al,ll,nl,il,sl,ol,rl,dl,cl,ml,ul,xl,hl,pl,jl,gl,yl,Al,fl,bl,vl,Sl,kl,Dl,Cl,wl;const{selectedSetting:Il}=(0,l.useContext)(De.A),[Nl,_l]=(0,l.useState)("Pending"),[Tl,Ml]=(0,l.useState)([]),[Fl,zl]=(0,l.useState)([]),[El,ql]=(0,l.useState)([]),[Yl,Wl]=(0,l.useState)([]),[Rl,Pl]=(0,l.useState)(!1),[Jl,Vl]=(0,l.useState)({open:!1,contents:"",action:()=>{}});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list,{params:{schoolId:Il._id}});ql(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),Ll.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:Il._id}});Wl(e.result.map((e=>({...e,label:e.name,value:e._id})))),Ll.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})()}),[Il._id]);const Bl=async e=>{try{Pl(!0);const{data:t}=await(0,Se.Jt)(ke.r.preadmissionEnqiry.list,{params:{schoolId:Il._id,search:{"studentDetails.academicDetails.academicYear":e.academicYear,"studentDetails.academicDetails.class":e.class,fromDate:e.fromDate,toDate:e.toDate}}});let a=t.result.map((e=>{var t,a,l,n,i;return{...e,studentName:null===(t=e.studentDetails)||void 0===t||null===(a=t.basicDetails)||void 0===a?void 0:a.name,submittedOn:e.createdAt,class:null===(l=e.studentDetails)||void 0===l||null===(n=l.academicDetails)||void 0===n||null===(i=n.class)||void 0===i?void 0:i.name}}));Ml(a),zl(a.filter((e=>e.status===Nl)))}catch(t){console.log(t)}Pl(!1)},Ll=(0,tt.Wx)({initialValues:{academicYear:"",class:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:Bl});(0,l.useEffect)((()=>{if(!Nl)return zl(Tl);zl(Tl.filter((e=>e.status===Nl)))}),[Nl]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Enquiries"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:Ll.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:Ll,label:"Select Academic Year",options:El})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:Ll,label:"Select Class",options:Yl})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:Ll,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:Ll,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{loading:Rl,size:"small",variant:"contained",type:"submit",children:"Find"})})]})}),(0,re.jsx)(Da,{children:(0,re.jsx)(va.A,{variant:"outlined","aria-label":"outlined button group",children:["Pending","Approved","Rejected"].map(((e,t)=>(0,re.jsxs)(Xe.A,{variant:"outlined",onClick:()=>{_l(e)},style:{backgroundColor:Nl===e?"#1b3779":"",color:Nl===e?"white":"black",textTransform:"capitalize"},children:[e,":",Tl.filter((t=>t.status===e)).length]},t)))})}),(0,re.jsx)(gt.A,{actions:["custom","delete","view"],tableKeys:fa,bodyDataModal:"enquiries",bodyData:Fl,onUpdate:Ll.handleSubmit,CustomAction:Ia,onViewClick:e=>{Vl({...Jl,open:!0,contents:e})},onDeleteClick:async e=>{try{const{data:t}=await(0,Se.Jt)(ke.r.preadmissionEnqiry.delete+"/"+e);Bl(),Ll.handleSubmit()}catch(t){console.log(t)}}}),(0,re.jsxs)(ka,{title:"Enquiry Details",open:null===Jl||void 0===Jl?void 0:Jl.open,tableData:null===Jl||void 0===Jl?void 0:Jl.contents,onClose:e=>{Vl({...Jl,open:!1})},children:[(0,re.jsxs)(xt.A,{dividers:!0,sx:{display:{xs:"none",sm:"block",md:"block",lg:"block"}},children:[(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Academic Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsx)(ma.A,{children:(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Class"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl?void 0:Jl.contents.class)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Academic Year"}),(0,re.jsx)(wa,{align:"left",children:"".concat(null===Jl||void 0===Jl||null===(e=Jl.contents)||void 0===e||null===(t=e.studentDetails)||void 0===t||null===(a=t.academicDetails)||void 0===a||null===(n=a.academicYear)||void 0===n?void 0:n.from," - ").concat(null===Jl||void 0===Jl||null===(i=Jl.contents)||void 0===i||null===(s=i.studentDetails)||void 0===s||null===(o=s.academicDetails)||void 0===o||null===(r=o.academicYear)||void 0===r?void 0:r.to)||"NA"})]})})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Basic Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Student Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(d=Jl.contents)||void 0===d?void 0:d.studentName)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Date Of Birth"}),(0,re.jsx)(wa,{align:"left",children:Le()((null===Jl||void 0===Jl||null===(c=Jl.contents)||void 0===c||null===(m=c.studentDetails)||void 0===m||null===(x=m.basicDetails)||void 0===x?void 0:x.dob)||"NA").format("DD-MM-YYYY")})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Gender"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(h=Jl.contents)||void 0===h||null===(p=h.studentDetails)||void 0===p||null===(j=p.basicDetails)||void 0===j?void 0:j.gender)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Blood Group"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(g=Jl.contents)||void 0===g||null===(y=g.studentDetails)||void 0===y||null===(A=y.basicDetails)||void 0===A||null===(f=A.bloodGroup)||void 0===f?void 0:f.toUpperCase())||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Religion"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(b=Jl.contents)||void 0===b||null===(v=b.studentDetails)||void 0===v||null===(S=v.basicDetails)||void 0===S?void 0:S.caste)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Caste Income Certificate Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(k=Jl.contents)||void 0===k||null===(D=k.studentDetails)||void 0===D||null===(C=D.basicDetails)||void 0===C?void 0:C.casteIncomeCertificateNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Mother Tongue"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(w=Jl.contents)||void 0===w||null===(I=w.studentDetails)||void 0===I||null===(N=I.basicDetails)||void 0===N?void 0:N.motherTongue)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Birth Place"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(_=Jl.contents)||void 0===_||null===(T=_.studentDetails)||void 0===T||null===(M=T.basicDetails)||void 0===M?void 0:M.birthPlace)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Aadhar Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(F=Jl.contents)||void 0===F||null===(z=F.studentDetails)||void 0===z||null===(E=z.basicDetails)||void 0===E?void 0:E.aadharNumber)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Contact Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(q=Jl.contents)||void 0===q||null===(Y=q.studentDetails)||void 0===Y||null===(W=Y.contactDetails)||void 0===W?void 0:W.contactNumber)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Guardian Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(R=Jl.contents)||void 0===R||null===(P=R.studentDetails)||void 0===P||null===(J=P.contactDetails)||void 0===J?void 0:J.guardianName)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Guardian Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(V=Jl.contents)||void 0===V||null===(B=V.studentDetails)||void 0===B||null===(L=B.contactDetails)||void 0===L?void 0:L.guardianContactNumber)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Alternate Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(U=Jl.contents)||void 0===U||null===(O=U.studentDetails)||void 0===O||null===(H=O.contactDetails)||void 0===H?void 0:H.alternateNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Relation With Guardian"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(G=Jl.contents)||void 0===G||null===(K=G.studentDetails)||void 0===K||null===(Q=K.contactDetails)||void 0===Q?void 0:Q.relationWithGuardian)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"National Id"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Z=Jl.contents)||void 0===Z||null===($=Z.studentDetails)||void 0===$||null===(X=$.contactDetails)||void 0===X?void 0:X.nationalId)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Present Address"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ee=Jl.contents)||void 0===ee||null===(te=ee.studentDetails)||void 0===te||null===(ae=te.contactDetails)||void 0===ae?void 0:ae.presentAddress)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Permanent Address"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(le=Jl.contents)||void 0===le||null===(ne=le.studentDetails)||void 0===ne||null===(ie=ne.contactDetails)||void 0===ie?void 0:ie.permanentAddress)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Previous School Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{width:200,children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Previous School Name"}),(0,re.jsx)(wa,{children:(null===Jl||void 0===Jl||null===(se=Jl.contents)||void 0===se||null===(oe=se.studentDetails)||void 0===oe||null===(de=oe.previousSchoolDetails)||void 0===de?void 0:de.schoolName)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Previous Class"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(me=Jl.contents)||void 0===me||null===(he=me.studentDetails)||void 0===he||null===(pe=he.previousSchoolDetails)||void 0===pe?void 0:pe.class)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"TC Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(je=Jl.contents)||void 0===je||null===(ge=je.studentDetails)||void 0===ge||null===(ye=ge.previousSchoolDetails)||void 0===ye?void 0:ye.tcNumber)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Father Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Ae=Jl.contents)||void 0===Ae||null===(fe=Ae.studentDetails)||void 0===fe||null===(be=fe.fatherDetails)||void 0===be?void 0:be.name)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ve=Jl.contents)||void 0===ve||null===(Ce=ve.studentDetails)||void 0===Ce||null===(we=Ce.fatherDetails)||void 0===we?void 0:we.contactNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Education"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Ie=Jl.contents)||void 0===Ie||null===(Ne=Ie.studentDetails)||void 0===Ne||null===(_e=Ne.fatherDetails)||void 0===_e?void 0:_e.education)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Profession"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Te=Jl.contents)||void 0===Te||null===(Me=Te.studentDetails)||void 0===Me||null===(Fe=Me.fatherDetails)||void 0===Fe?void 0:Fe.profession)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ze=Jl.contents)||void 0===ze||null===(Ee=ze.studentDetails)||void 0===Ee||null===(qe=Ee.fatherDetails)||void 0===qe?void 0:qe.designation)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Mother Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Ye=Jl.contents)||void 0===Ye||null===(We=Ye.studentDetails)||void 0===We||null===(Re=We.motherDetails)||void 0===Re?void 0:Re.name)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Pe=Jl.contents)||void 0===Pe||null===(Je=Pe.studentDetails)||void 0===Je||null===(Ve=Je.motherDetails)||void 0===Ve?void 0:Ve.contactNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Education"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Be=Jl.contents)||void 0===Be||null===(Ue=Be.studentDetails)||void 0===Ue||null===(Oe=Ue.motherDetails)||void 0===Oe?void 0:Oe.education)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Profession"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(He=Jl.contents)||void 0===He||null===(Ge=He.studentDetails)||void 0===Ge||null===(Ke=Ge.motherDetails)||void 0===Ke?void 0:Ke.profession)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Qe=Jl.contents)||void 0===Qe||null===(Ze=Qe.studentDetails)||void 0===Ze||null===($e=Ze.motherDetails)||void 0===$e?void 0:$e.designation)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Other Information:"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Health Condition"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(at=Jl.contents)||void 0===at||null===(lt=at.studentDetails)||void 0===lt||null===(nt=lt.otherDetails)||void 0===nt?void 0:nt.healthCondition)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Email"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(it=Jl.contents)||void 0===it||null===(st=it.studentDetails)||void 0===st||null===(ot=st.otherDetails)||void 0===ot?void 0:ot.email)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Hostel Required"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(rt=Jl.contents)||void 0===rt||null===(dt=rt.studentDetails)||void 0===dt||null===(ct=dt.otherDetails)||void 0===ct?void 0:ct.hostelRequired)||"NA"}),(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Transport Required"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(mt=Jl.contents)||void 0===mt||null===(ut=mt.studentDetails)||void 0===ut||null===(ht=ut.otherDetails)||void 0===ht?void 0:ht.transportRequired)||"NA"})]})]})})]}),(0,re.jsxs)(xt.A,{dividers:!0,sx:{display:{xs:"block",sm:"none",md:"none",lg:"none"}},children:[(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Academic Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Class"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl?void 0:Jl.contents.class)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Academic Year"}),(0,re.jsx)(wa,{align:"left",children:"".concat(null===Jl||void 0===Jl||null===(jt=Jl.contents)||void 0===jt||null===(yt=jt.studentDetails)||void 0===yt||null===(At=yt.academicDetails)||void 0===At||null===(ft=At.academicYear)||void 0===ft?void 0:ft.from," - ").concat(null===Jl||void 0===Jl||null===(bt=Jl.contents)||void 0===bt||null===(vt=bt.studentDetails)||void 0===vt||null===(St=vt.academicDetails)||void 0===St||null===(kt=St.academicYear)||void 0===kt?void 0:kt.to)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Basic Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Student Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Dt=Jl.contents)||void 0===Dt?void 0:Dt.studentName)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Date Of Birth"}),(0,re.jsx)(wa,{align:"left",children:Le()((null===Jl||void 0===Jl||null===(Ct=Jl.contents)||void 0===Ct||null===(wt=Ct.studentDetails)||void 0===wt||null===(It=wt.basicDetails)||void 0===It?void 0:It.dob)||"NA").format("DD-MM-YYYY")})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Gender"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Nt=Jl.contents)||void 0===Nt||null===(_t=Nt.studentDetails)||void 0===_t||null===(Tt=_t.basicDetails)||void 0===Tt?void 0:Tt.gender)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Blood Group"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Mt=Jl.contents)||void 0===Mt||null===(Ft=Mt.studentDetails)||void 0===Ft||null===(zt=Ft.basicDetails)||void 0===zt||null===(Et=zt.bloodGroup)||void 0===Et?void 0:Et.toUpperCase())||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Religion"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(qt=Jl.contents)||void 0===qt||null===(Wt=qt.studentDetails)||void 0===Wt||null===(Rt=Wt.basicDetails)||void 0===Rt?void 0:Rt.caste)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Caste Income Certificate Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Pt=Jl.contents)||void 0===Pt||null===(Jt=Pt.studentDetails)||void 0===Jt||null===(Vt=Jt.basicDetails)||void 0===Vt?void 0:Vt.casteIncomeCertificateNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Mother Tongue"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Bt=Jl.contents)||void 0===Bt||null===(Lt=Bt.studentDetails)||void 0===Lt||null===(Ut=Lt.basicDetails)||void 0===Ut?void 0:Ut.motherTongue)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Birth Place"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Ot=Jl.contents)||void 0===Ot||null===(Ht=Ot.studentDetails)||void 0===Ht||null===(Gt=Ht.basicDetails)||void 0===Gt?void 0:Gt.birthPlace)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Aadhar Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Kt=Jl.contents)||void 0===Kt||null===(Qt=Kt.studentDetails)||void 0===Qt||null===(Zt=Qt.basicDetails)||void 0===Zt?void 0:Zt.aadharNumber)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Contact Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===($t=Jl.contents)||void 0===$t||null===(Xt=$t.studentDetails)||void 0===Xt||null===(ea=Xt.contactDetails)||void 0===ea?void 0:ea.contactNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Guardian Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ta=Jl.contents)||void 0===ta||null===(aa=ta.studentDetails)||void 0===aa||null===(la=aa.contactDetails)||void 0===la?void 0:la.guardianName)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Guardian Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(na=Jl.contents)||void 0===na||null===(ia=na.studentDetails)||void 0===ia||null===(oa=ia.contactDetails)||void 0===oa?void 0:oa.guardianContactNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Alternate Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ra=Jl.contents)||void 0===ra||null===(da=ra.studentDetails)||void 0===da||null===(ca=da.contactDetails)||void 0===ca?void 0:ca.alternateNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Relation With Guardian"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ua=Jl.contents)||void 0===ua||null===(xa=ua.studentDetails)||void 0===xa||null===(ha=xa.contactDetails)||void 0===ha?void 0:ha.relationWithGuardian)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"National Id"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(pa=Jl.contents)||void 0===pa||null===(ja=pa.studentDetails)||void 0===ja||null===(ga=ja.contactDetails)||void 0===ga?void 0:ga.nationalId)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Present Address"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ya=Jl.contents)||void 0===ya||null===(Aa=ya.studentDetails)||void 0===Aa||null===(ba=Aa.contactDetails)||void 0===ba?void 0:ba.presentAddress)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Permanent Address"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Sa=Jl.contents)||void 0===Sa||null===(Na=Sa.studentDetails)||void 0===Na||null===(_a=Na.contactDetails)||void 0===_a?void 0:_a.permanentAddress)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Previous School Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{width:200,children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Previous School Name"}),(0,re.jsx)(wa,{children:(null===Jl||void 0===Jl||null===(Ta=Jl.contents)||void 0===Ta||null===(Ma=Ta.studentDetails)||void 0===Ma||null===(Fa=Ma.previousSchoolDetails)||void 0===Fa?void 0:Fa.schoolName)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Previous Class"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(za=Jl.contents)||void 0===za||null===(Ea=za.studentDetails)||void 0===Ea||null===(qa=Ea.previousSchoolDetails)||void 0===qa?void 0:qa.class)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"TC Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Ya=Jl.contents)||void 0===Ya||null===(Wa=Ya.studentDetails)||void 0===Wa||null===(Ra=Wa.previousSchoolDetails)||void 0===Ra?void 0:Ra.tcNumber)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Father Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Pa=Jl.contents)||void 0===Pa||null===(Ja=Pa.studentDetails)||void 0===Ja||null===(Va=Ja.fatherDetails)||void 0===Va?void 0:Va.name)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Ba=Jl.contents)||void 0===Ba||null===(La=Ba.studentDetails)||void 0===La||null===(Ua=La.fatherDetails)||void 0===Ua?void 0:Ua.contactNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Education"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Oa=Jl.contents)||void 0===Oa||null===(Ha=Oa.studentDetails)||void 0===Ha||null===(Ga=Ha.fatherDetails)||void 0===Ga?void 0:Ga.education)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Profession"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Ka=Jl.contents)||void 0===Ka||null===(Qa=Ka.studentDetails)||void 0===Qa||null===(Za=Qa.fatherDetails)||void 0===Za?void 0:Za.profession)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===($a=Jl.contents)||void 0===$a||null===(Xa=$a.studentDetails)||void 0===Xa||null===(el=Xa.fatherDetails)||void 0===el?void 0:el.designation)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Mother Information"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(tl=Jl.contents)||void 0===tl||null===(al=tl.studentDetails)||void 0===al||null===(ll=al.motherDetails)||void 0===ll?void 0:ll.name)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Contact Number"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(nl=Jl.contents)||void 0===nl||null===(il=nl.studentDetails)||void 0===il||null===(sl=il.motherDetails)||void 0===sl?void 0:sl.contactNumber)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Education"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(ol=Jl.contents)||void 0===ol||null===(rl=ol.studentDetails)||void 0===rl||null===(dl=rl.motherDetails)||void 0===dl?void 0:dl.education)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Profession"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(cl=Jl.contents)||void 0===cl||null===(ml=cl.studentDetails)||void 0===ml||null===(ul=ml.motherDetails)||void 0===ul?void 0:ul.profession)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(xl=Jl.contents)||void 0===xl||null===(hl=xl.studentDetails)||void 0===hl||null===(pl=hl.motherDetails)||void 0===pl?void 0:pl.designation)||"NA"})]})]})}),(0,re.jsx)(u.A,{variant:"body",fontSize:"16px",fontWeight:600,children:"Other Information:"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",className:"profile-table",sx:{mb:2},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Health Condition"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(jl=Jl.contents)||void 0===jl||null===(gl=jl.studentDetails)||void 0===gl||null===(yl=gl.otherDetails)||void 0===yl?void 0:yl.healthCondition)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Email"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Al=Jl.contents)||void 0===Al||null===(fl=Al.studentDetails)||void 0===fl||null===(bl=fl.otherDetails)||void 0===bl?void 0:bl.email)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Hostel Required"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(vl=Jl.contents)||void 0===vl||null===(Sl=vl.studentDetails)||void 0===Sl||null===(kl=Sl.otherDetails)||void 0===kl?void 0:kl.hostelRequired)||"NA"})]}),(0,re.jsxs)(Ca,{children:[(0,re.jsx)(wa,{align:"left",sx:{fontWeight:"bold"},children:"Transport Required"}),(0,re.jsx)(wa,{align:"left",children:(null===Jl||void 0===Jl||null===(Dl=Jl.contents)||void 0===Dl||null===(Cl=Dl.studentDetails)||void 0===Cl||null===(wl=Cl.otherDetails)||void 0===wl?void 0:wl.transportRequired)||"NA"})]})]})})]})]})]})}const _a=[{name:"Exam Name",key:"examName"},{name:"Class",key:"class"}];var Ta=a(53193),Ma=a(18356),Fa=a(72221),za=a(78492),Ea=a(74605),qa=a(14256),Ya=a(63471);const Wa={inputProps:{"aria-label":"Checkbox demo"}},Ra=(0,n.Ay)(s.A)((()=>({display:"flex",flexDirection:"column",padding:"10px"}))),Pa=((0,n.Ay)(u.A)((()=>({fontSize:"16px",fontWeight:"bold"}))),(0,n.Ay)(u.A)((()=>({fontSize:"16px",fontWeight:"bold"}))),(0,n.Ay)(Ma.A)((()=>({fontSize:"12px",fontWeight:580,color:"#616161",paddingLeft:"10px"})))),Ja=(0,n.Ay)(qa.A)((()=>({marginTop:"-10px"})));function Va(e){let{quiz:t={},questionIndex:a,quizData:l,setQuizData:n}=e;return(0,re.jsxs)(Ra,{children:[(0,re.jsxs)(Pa,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a+1,"."," ",t.question?"Update Your Question!":"Write your question"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,size:"small",name:"question",maxRows:3,multiline:!0,value:t.question,placeholder:"Type here...",onChange:e=>((e,t)=>{n(l.map(((a,l)=>l===t?{...a,question:e.target.value}:a)))})(e,a),InputProps:{endAdornment:(0,re.jsx)(zt.A,{position:"end",children:a>0?(0,re.jsx)(h.A,{color:"error",size:"small",onClick:()=>(e=>{n((t=>t.filter(((t,a)=>a!==e))))})(a),children:(0,re.jsx)(Ya.A,{fontSize:"small",color:"error"})}):null})}}),(0,re.jsx)(xe.Ay,{sx:{marginBottom:"10px",backgroundColor:e=>e.palette.grey[100],borderRadius:"5px",padding:"20px",border:"1px solid lightgrey",marginTop:"10px"},container:!0,rowGap:2,children:t.options.map(((e,i)=>(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:6,sx:{padding:"0 10px"},children:[(0,re.jsxs)(s.A,{sx:{justifyContent:"flex-start",alignItems:"center",display:"flex"},children:[(0,re.jsx)(Ja,{size:"small",...Wa,color:"default",checked:t.correctOption&&t.correctOption===e,onChange:t=>((e,t)=>{n(l.map(((a,l)=>l===t?{...a,correctOption:e}:a)))})(e,a),value:e,type:"radio"}),(0,re.jsxs)(Pa,{children:["Option ",i+1]})]}),(0,re.jsx)(Ft.A,{multiline:!0,maxRows:3,fullWidth:!0,size:"small",name:"option".concat(i+1),value:e,onChange:e=>((e,t,a)=>{let i=l.filter(((e,a)=>a===t))[0].options.map(((t,l)=>l===a?e.target.value:t));n(l.map(((e,a)=>a===t?{...e,options:i}:e)))})(e,a,i)})]},i)))})]})}var Ba=a(91036);function La(e){let{open:t=!1,onClose:a=(()=>{}),dataToUpdate:n=null}=e;const o=(0,i.A)(),{selectedSetting:r}=(0,l.useContext)(De.A),d=(0,ct.A)(o.breakpoints.down("sm")),[c,m]=(0,l.useState)([]),[x,p]=(0,l.useState)([]),[j,g]=(0,l.useState)({}),[y,A]=(0,l.useState)({}),[f,b]=(0,l.useState)(!1),[v,S]=(0,l.useState)([{question:"",options:["","","",""],correctOption:""}]),[k,D]=(0,l.useState)([""]),[w,I]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{var e,t;const[a,l]=await Promise.all([(0,Se.Jt)(ke.r.academicYear.list),(0,Se.Jt)(ke.r.class.list,{params:{schoolId:r._id}})]);m(null===(e=a.data)||void 0===e?void 0:e.result),p(null===(t=l.data)||void 0===t?void 0:t.result)}catch(a){console.log(a)}})()}),[r._id]);const N=e=>{const{name:t,value:a}=e.target;g({...j,[t]:a})},_=e=>{const{name:t,value:a}=e.target;A((e=>({...e,[t]:a})))},T=()=>{S([{question:"",options:["","","",""],correctOption:""}]),g({}),A({}),I(!1),D([]),a()};return(0,re.jsx)(mt.A,{open:t,onClose:a,fullScreen:d,maxWidth:"md",fullWidth:!0,"aria-labelledby":"responsive-dialog-title",children:(0,re.jsxs)(s.A,{component:"form",sx:{padding:2},onSubmit:async e=>{e.preventDefault();try{const e=v.map(((e,t)=>({question:e.question,options:[{value:e.options[0]},{value:e.options[1]},{value:e.options[2]},{value:e.options[3]}],correctOption:e.correctOption})));if(e.filter((e=>!e.question||!e.options)).length)return Ba.oR.error("Question cannot be empty");if(e.some((e=>e.options.some((e=>""===e.name)))))return Ba.oR.error("Option cannot be empty");if(e.filter((e=>!e.correctOption)).length)return Ba.oR.error("Please select a correct option");b(!0);let t={schoolId:r._id,academicYear:j.academicYear,classId:j.schoolClass,examName:j.examName,passingPercentage:y.passingMark,quiz:e,negativeMarking:w,negativeMarkingPerQuestion:y.negativeMarking,marksPerQuestion:y.mark,additionalInstructions:k.map((e=>({point:e})))};const{data:a}=await(0,Se.bE)(ke.r.preadmissionExam.create,t);T()}catch(t){console.error(t)}b(!1)},children:[(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:n?"Update Exam":"Add Exam"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsxs)(Ta.A,{size:"small",fullWidth:!0,required:!0,children:[(0,re.jsx)(Ma.A,{children:"Academic Year"}),(0,re.jsx)(Fa.A,{labelId:"demo-simpless-select-filled-label",id:"demo-simple-select-filled-l",varient:"outlined",label:"academic year",name:"academicYear",value:j.academicYear||"",onChange:N,children:c&&c.map(((e,t)=>(0,re.jsxs)(C.A,{value:e._id,sx:{fontSize:12,fontWeight:500},children:[e.from," - ",e.to]},e._id)))})]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsxs)(Ta.A,{size:"small",fullWidth:!0,required:!0,children:[(0,re.jsx)(Ma.A,{children:"Class"}),(0,re.jsx)(Fa.A,{variant:"outlined",label:"class",labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"schoolClass",value:j.schoolClass||"",onChange:N,children:x&&x.map(((e,t)=>(0,re.jsx)(C.A,{value:e._id,sx:{fontSize:12,fontWeight:500},children:e.name},e._id)))})]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:4,sx:{mt:.2},children:(0,re.jsx)(Ft.A,{variant:"outlined",fullWidth:!0,required:!0,size:"small",label:"Exam name",name:"examName",id:"filled-required",value:j.examName||"",onChange:N})})]}),(0,re.jsxs)(s.A,{sx:{display:"flex",padding:"10px",justifyContent:"space-between",alignItems:"center",mt:4,mb:2,border:"1px solid lightgray",borderRadius:"5px"},children:[(0,re.jsx)(u.A,{sx:{textAlign:"left",fontWeight:"bold"},children:"Add Questions:"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{S([...v,{question:"",options:["","","",""],correctOption:""}])},startIcon:(0,re.jsx)(rt.A,{}),children:"ADD"})]}),null===v||void 0===v?void 0:v.map(((e,t)=>(0,re.jsx)(Va,{quiz:e,questionIndex:t,quizData:v,setQuizData:S},t))),(0,re.jsxs)(s.A,{sx:{mt:2},children:[(0,re.jsxs)(s.A,{sx:{display:"flex",padding:"10px",justifyContent:"space-between",alignItems:"center",mt:4,mb:2,border:"1px solid lightgray",borderRadius:"5px"},children:[(0,re.jsx)(u.A,{sx:{fontWeight:"bold"},children:"Additional Instruction:"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",startIcon:(0,re.jsx)(rt.A,{}),onClick:()=>{D([...k,""])},children:"Add"})]}),k.map(((e,t)=>(0,re.jsx)(xe.Ay,{container:!0,sx:{mt:1},children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,re.jsx)(Ft.A,{variant:"outlined",fullWidth:!0,size:"small",multiline:!0,value:e,onChange:e=>((e,t)=>{const a=[...k];a[t]=e.target.value,D(a)})(e,t),InputProps:{endAdornment:(0,re.jsx)(zt.A,{position:"end",children:(0,re.jsx)(h.A,{color:"error",size:"small",onClick:()=>(e=>{const t=[...k];t.splice(e,1),D(t)})(t),children:(0,re.jsx)(Ya.A,{fontSize:"small",color:"error"})})})}})})},t)))]}),(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,sx:{mt:1.5},children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"4px"},children:[(0,re.jsxs)(u.A,{sx:{fontSize:"16px"},children:["Negative Marking:"," "]}),(0,re.jsxs)(za.A,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:w,onChange:e=>{I(e.target.value)},sx:{mt:1},children:[(0,re.jsx)(Ea.A,{value:!0,control:(0,re.jsx)(qa.A,{}),label:"Yes"}),(0,re.jsx)(Ea.A,{value:!1,control:(0,re.jsx)(qa.A,{}),label:"No"})]})]})}),"true"===w&&(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:4,children:(0,re.jsx)(Ft.A,{fullWidth:!0,variant:"outlined",size:"small",required:!0,label:"Negative Marks Per Question",type:"number",name:"negativeMarking",value:y.negativeMarking||"",onChange:_,InputLabelProps:{style:{fontSize:12}}})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:4,children:(0,re.jsx)(Ft.A,{fullWidth:!0,variant:"outlined",size:"small",required:!0,label:"Marks Per Question",type:"number",name:"mark",value:y.mark||"",onChange:_,InputLabelProps:{style:{fontSize:12}}})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:4,children:(0,re.jsx)(Ft.A,{fullWidth:!0,variant:"outlined",label:"Pass percentage (%)",size:"small",required:!0,type:"number",name:"passingMark",value:y.passingMark||"",onChange:_,InputLabelProps:{style:{fontSize:12}}})})]}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,children:(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"flex-end",gap:"3%",mt:3},children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",color:"error",onClick:T,children:"Cancel"}),(0,re.jsx)(pt.A,{loading:f,variant:"contained",type:"submit",size:"small",sx:{background:"#1b3779","&:hover":{background:"#1b3779"}},children:"Submit"})]})})]})})}function Ua(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list,{params:{schoolId:e._id}});o(t.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),x.setFieldValue("academicYear",t.result[0]._id)}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});d(t.result.map((e=>({...e,label:e.name,value:e._id})))),x.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]);const u=async t=>{try{a(!0);const{data:l}=await(0,Se.Jt)(ke.r.preadmissionExam.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,class:t.class}}});i(l.result.map((e=>({...e,class:e.class.name}))))}catch(l){console.log(l)}a(!1)},x=(0,tt.Wx)({initialValues:{academicYear:"",class:""},onSubmit:u});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exams"}),(0,re.jsx)(dt,{title:"Add Exam",onAddClick:()=>m(!0)}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:x.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:x,label:"Select Academic Year",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:x,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{loading:t,size:"small",variant:"contained",type:"submit",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:_a,bodyDataModal:"exams",bodyData:n,onDeleteClick:async e=>{try{const{data:t}=await(0,Se.Jt)(ke.r.preadmissionExam.delete+"/"+e);u(),x.handleSubmit()}catch(t){console.error(t)}}}),(0,re.jsx)(La,{open:c,onClose:()=>m(!1)})]})}var Oa=a(19090);function Ha(e){let{open:t,selectedSetting:a,handleClose:n=(()=>{})}=e;const[i,s]=(0,l.useState)(),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)([]),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),p=(0,tt.Wx)({initialValues:{academicYear:"",classId:"",examId:"",startTime:"",endTime:"",roomNumber:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async e=>{try{const t={...e,schoolId:a._id,dateOfExam:Le()(e.dateOfExam).format("YYYY/MM/DD")};if(r(!0),console.log(t,"ppppppp"),i){const{data:e}=await(0,Se.yJ)(ke.r.preadmissionExamSchedule.update+"/"+i._id,t)}else{const{data:e}=await(0,Se.bE)(ke.r.preadmissionExamSchedule.create,t)}n()}catch(t){console.log(t)}r(!1)}});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list,{params:{schoolId:a._id}});c(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),p.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});u(e.result.map((e=>({...e,label:e.name,value:e._id})))),p.setFieldValue("classId",e.result[0]._id)}catch(e){console.log(e)}})()}),[a._id]),(0,l.useEffect)((()=>{null!==p&&void 0!==p&&p.values.academicYear&&null!==p&&void 0!==p&&p.values.classId&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.preadmissionExam.list,{params:{schoolId:a._id,search:{academicYear:null===p||void 0===p?void 0:p.values.academicYear,class:null===p||void 0===p?void 0:p.values.classId}}});h(e.result.map((e=>({label:e.examName,value:e._id})))),p.setFieldValue("examId",e.result[0]._id)}catch(e){console.log(e)}})()}),[null===p||void 0===p?void 0:p.values.academicYear,null===p||void 0===p?void 0:p.values.classId,a]),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(jt,{open:t,formik:p,formTitle:i?"Update Exam Schedules":"Add Exam Schedules",onClose:n,submitButtonTitle:i?"Update":"Submit",adding:o,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:p,label:"Select Academic Year",options:d})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"classId",formik:p,label:"Select Class",options:m})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"examId",formik:p,label:"Select Exam",options:x})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,formik:p,name:"dateOfExam",label:"Date of Exam"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,formik:p,type:"time",name:"startTime",label:"Start Time"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,formik:p,type:"time",name:"endTime",label:"End Time"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"roomNumber",label:"Room No."})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"address",label:"Address"})})]})})})}var Ga=a(95540),Ka=a(9048),Qa=a.n(Ka),Za=a(24914),$a=a(51387),Xa=a(73368);const el={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:2};function tl(e){return console.log(e,"llkprops"),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(Xa.A,{"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",open:e.deleteModal,onClose:()=>e.setDeleteModal(!1),children:(0,re.jsxs)(s.A,{sx:el,children:[(0,re.jsx)(s.A,{sx:{textAlign:"center",margin:"10px auto"},children:(0,re.jsx)("img",{src:st,width:50,height:50})}),(0,re.jsx)(u.A,{textAlign:"center",sx:{fontSize:"18px",fontWeight:700},children:"Delete Confirmation"}),(0,re.jsx)(u.A,{sx:{mt:2,textAlign:"center"},children:"Are you sure want to delete this item?"}),(0,re.jsxs)(s.A,{my:3,sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>e.setDeleteModal(!1),children:"Cancel"}),(0,re.jsx)(Xe.A,{onClick:()=>{e.handleDelete(e.id,e.routineIndex),e.setDeleteModal(!1)},color:"primary",size:"small",variant:"contained",children:"Delete"})]})]})})})}function al(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[g,y]=l.useState(!1),[A,f]=l.useState(0),[b,v]=l.useState(10);(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list,{params:{schoolId:e._id}});i(t.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),k.setFieldValue("academicYear",t.result[0]._id)}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});r(t.result.map((e=>({...e,label:e.name,value:e._id})))),k.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]);const k=(0,tt.Wx)({initialValues:{academicYear:"",class:"",exam:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async t=>{console.log(t,"exam values");try{x(!0);const{data:l}=await(0,Se.Jt)(ke.r.preadmissionExamSchedule.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,class:t.class,exam:t.exam,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")}}});console.log(l.result,"exam list"),a(l.result.map((e=>({...e,class:e.class.name}))))}catch(l){console.log(l)}x(!1)}});(0,l.useEffect)((()=>{null!==k&&void 0!==k&&k.values.academicYear&&null!==k&&void 0!==k&&k.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.preadmissionExam.list,{params:{schoolId:e._id,search:{academicYear:null===k||void 0===k?void 0:k.values.academicYear,class:null===k||void 0===k?void 0:k.values.class}}});c(t.result.map((e=>({label:e.examName,value:e._id})))),k.setFieldValue("exam",t.result[0]._id)}catch(t){console.log(t)}})()}),[null===k||void 0===k?void 0:k.values.academicYear,null===k||void 0===k?void 0:k.values.class,e]);const D=async e=>{try{await(0,Se.yH)(ke.r.preadmissionExamSchedule.delete+"/"+e)}catch(t){console.error(t)}};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exam Schedules"}),(0,re.jsx)(dt,{title:"Add Exam Schedules",onAddClick:()=>{j(!0)}}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:k.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:k,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:k,label:"Select Class",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:k,label:"Select Exam",options:d})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:k,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:k,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",type:"submit",children:"Find"})})]})}),(0,re.jsxs)(ia.A,{component:ue.A,children:[(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"SL"}),(0,re.jsx)(da.A,{align:"center",children:"Academic Year"}),(0,re.jsx)(da.A,{align:"center",children:"Class"}),(0,re.jsx)(da.A,{align:"center",children:"Exam"}),(0,re.jsx)(da.A,{align:"center",children:"Exam Link"}),(0,re.jsx)(da.A,{align:"center",children:"Action"})]})}),t.map(((e,t)=>{var a;return(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:A*b+t+1}),(0,re.jsxs)(da.A,{align:"center",children:[e.academicYear.academicYearFrom,"-",e.academicYear.academicYearTo]}),(0,re.jsx)(da.A,{align:"center",children:e.class.name}),(0,re.jsx)(da.A,{align:"center",children:null===(a=e.exam)||void 0===a?void 0:a.examName}),(0,re.jsxs)(da.A,{align:"center",children:[(0,re.jsx)(S.A,{title:"".concat(!0===e.examLinkEnabled?"Enable":"Disable"),children:(0,re.jsx)(I.A,{onClick:()=>(async e=>{try{await(0,Se.yJ)("".concat(ke.r.preadmissionExamSchedule.enableExamLink).concat(e))}catch(t){console.log(t)}})(e._id),defaultChecked:!!e.examLinkEnabled},e._id)}),(0,re.jsx)(S.A,{title:"Copy Link",children:(0,re.jsx)(h.A,{size:"small",color:"primary",onClick:()=>{return t=null===e||void 0===e?void 0:e.examLink,console.log(t,"copylink"),Qa()("".concat(t)),void Ba.oR.success("Exam Link Copied successfully");var t},children:(0,re.jsx)(Za.A,{fontSize:"small",color:"primary"})})})]}),(0,re.jsx)(da.A,{children:(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2},children:[(0,re.jsx)(S.A,{title:"Update",children:(0,re.jsx)(h.A,{style:{color:"#1b3779"},size:"small",children:(0,re.jsx)(Ga.A,{fontSize:"small"})})}),(0,re.jsx)(S.A,{title:"Delete",children:(0,re.jsx)(h.A,{size:"small",color:"error",onClick:()=>y(e._id),children:(0,re.jsx)($a.A,{color:"error",fontSize:"small"})})}),(0,re.jsx)(tl,{deleteModal:g,handleDelete:D,id:e._id,setDeleteModal:y}),(0,re.jsx)(Xe.A,{size:"small",onClick:t=>(async(e,t)=>{e.preventDefault();try{await(0,Se.bE)("".concat(ke.r.preadmissionExamSchedule.sendVenueDetailsToStudents,"/").concat(t))}catch(a){console.log(a)}})(t,e._id),disabled:!0===e.notified,variant:"contained",children:!0===e.notified?"Notified":"Notify"})]})})]})}))]}),!t.length&&(0,re.jsx)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:"No data found"})]}),(0,re.jsx)(Oa.A,{rowsPerPageOptions:[10,25,50],component:"div",count:t.length,rowsPerPage:b,page:A,onPageChange:(e,t)=>{f(t)},onRowsPerPageChange:e=>{v(+e.target.value),f(0)},sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",my:1}}),(0,re.jsx)(Ha,{open:p,handleClose:()=>{j(!1)},selectedSetting:e})]})}const ll=[{name:"Name",key:"name"},{name:"Class",key:"class"},{name:"Max marks",key:"maxMarks"},{name:"Passing marks ",key:"passingMarks"},{name:"Obtained marks",key:"obtainedMarks"}],nl=(0,n.Ay)(s.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"20px"});function il(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list,{params:{schoolId:e._id}});i(t.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),r.setFieldValue("academicYear",t.result[0]._id)}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});o(t.result.map((e=>({...e,label:e.name,value:e._id})))),r.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]);const r=(0,tt.Wx)({initialValues:{academicYear:"",class:""},onSubmit:console.log("nnnn")});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Result"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:r.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:r,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:r,label:"Select Class",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,sx:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",type:"submit",children:"Find"})})]})}),(0,re.jsx)(nl,{children:(0,re.jsxs)(va.A,{variant:"outlined","aria-label":"outlined button group",children:[(0,re.jsx)(Xe.A,{variant:"contained",children:"Pending:56"}),(0,re.jsx)(Xe.A,{children:"Approved: 100"}),(0,re.jsx)(Xe.A,{children:"Rejected:0"})]})}),(0,re.jsx)(gt.A,{actions:["edit"],tableKeys:ll,bodyDataModal:"result",bodyData:t})]})}const sl=[{name:"Class",key:"name"},{name:"Active",key:"active"},{name:"Is-Public",key:"isPublic"}],ol=[{label:"Yes",value:!0},{label:"No",value:!1}],rl=[{label:"Yes",value:!0},{label:"No",value:!1}];function dl(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(null),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)([]),x=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:t._id}});n(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{x(),(async()=>{try{var e;const{data:a}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:t._id}});u(null===(e=a.result)||void 0===e?void 0:e.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(a){console.log(a)}})()}),[t]);const h=()=>{r(!1),s(null)},p=(0,tt.Wx)({initialValues:{name:(null===i||void 0===i?void 0:i.name)||"",classTeachers:(null===i||void 0===i||null===(e=i.classTeachers)||void 0===e?void 0:e.map((e=>e._id)))||[],active:(null===i||void 0===i?void 0:i.active)||!1,isPublic:(null===i||void 0===i?void 0:i.isPublic)||!1,orderSequence:(null===i||void 0===i?void 0:i.orderSequence)||a.length+1,numericName:(null===i||void 0===i?void 0:i.numericName)||"",note:(null===i||void 0===i?void 0:i.note)||""},onSubmit:async e=>{try{const a={...e,schoolId:t._id};if(c(!0),i){const{data:e}=await(0,Se.yJ)(ke.r.class.update+"/"+i._id,a);x()}else{const{data:e}=await(0,Se.bE)(ke.r.class.create,a);x()}h()}catch(a){console.log(a)}c(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Classes"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:sl,bodyDataModal:"class",bodyData:a,onEditClick:e=>{s(e),r(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.class.delete+"/"+e);x()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Class",onAddClick:()=>{r(!0)}}),(0,re.jsx)(jt,{open:o,formik:p,formTitle:i?"Update Class":"Add Class",onClose:h,submitButtonTitle:i?"Update":"Submit",adding:d,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"name",label:"Class Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:p,name:"classTeachers",label:"Class Teachers - (".concat(p.values.classTeachers.length,")"),required:!1,showSearch:!0,multiple:!0,options:m})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:p,name:"active",label:"Active",options:ol})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:p,name:"isPublic",label:"Is-Public",options:rl})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{disabled:!i,formik:p,name:"orderSequence",label:"Order Sequence",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"numericName",label:"Numeric Name"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"note",label:"Note"})})]})})]})}const cl=[{name:"Section Name",key:"name"},{name:"Active",key:"active"},{name:"Is-Public",key:"isPublic"}];var ml=a(90469),ul=a(66360);function xl(e){let{value:t,name:a="",label:n="",options:i=[],onChange:s=(()=>{}),disabled:o=!1,required:r=!1,multiple:d=!1,isSearch:c=!0}=e;const[m,u]=(0,l.useState)(!1);var x=(0,l.useRef)(void 0);const{isDarkMode:h}=(0,l.useContext)(ot.A),[p,j]=(0,l.useState)(""),g=(0,l.useMemo)((()=>i.filter((e=>((e,t)=>(null===e||void 0===e?void 0:e.toLowerCase().indexOf(null===t||void 0===t?void 0:t.toLowerCase()))>-1)(e.label,p)))),[p,i,m]);(0,l.useEffect)((()=>{j("")}),[m]);const y=o&&!h?"gray":!o&&h?"white":o||h?o&&h?"gray":"inherit":"black";return(0,re.jsxs)(Ta.A,{margin:"normal",required:r,variant:"outlined",size:"small",fullWidth:!0,sx:{top:"4px"},children:[(0,re.jsx)(Ma.A,{sx:{color:y},shrink:!0,id:n,children:n}),(0,re.jsxs)(Fa.A,{disabled:o,notched:!0,name:a,multiple:d,labelId:n,value:t||"",label:n,onChange:s,onAnimationEnd:()=>{var e;return null===x||void 0===x||null===(e=x.current)||void 0===e?void 0:e.focus()},MenuProps:{autoFocus:!1},onBlur:()=>u(!m),children:[c&&(0,re.jsx)(ml.A,{children:(0,re.jsx)(Ft.A,{onBlur:()=>u(!m),size:"small",autoFocus:!0,placeholder:"Type to search...",fullWidth:!0,InputProps:{startAdornment:(0,re.jsx)(zt.A,{position:"start",children:(0,re.jsx)(ul.A,{})})},onChange:e=>j(e.target.value),onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}})}),g.map(((e,t)=>(0,re.jsx)(C.A,{value:e.value,children:e.label},t)))]})]})}const hl=(0,l.memo)(xl),pl=[{label:"Yes",value:!0},{label:"No",value:!1}],jl=[{label:"Yes",value:!0},{label:"No",value:!1}];function gl(){var e,t;const{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(""),y=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:a._id,search:{class:j}}});i(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:a._id}});p(null===(e=t.result)||void 0===e?void 0:e.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});x(t.result.map((e=>({label:e.name,value:e._id})))),null!==(e=t.result)&&void 0!==e&&e.length&&(g(t.result[0]._id),f.setFieldValue("class",t.result[0]._id))}catch(t){console.log(t)}})()}),[a]);const A=()=>{d(!1),o(null)},f=(0,tt.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",class:(null===s||void 0===s||null===(e=s.class)||void 0===e?void 0:e._id)||"",sectionTeacher:(null===s||void 0===s||null===(t=s.sectionTeacher)||void 0===t?void 0:t._id)||"",active:(null===s||void 0===s?void 0:s.active)||!1,isPublic:(null===s||void 0===s?void 0:s.isPublic)||!1,note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async e=>{try{const t={...e,class:j,schoolId:a._id};if(t.sectionTeacher||delete t.sectionTeacher,m(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.section.update+"/"+s._id,t);y()}else{const{data:e}=await(0,Se.bE)(ke.r.section.create,t);y()}A()}catch(t){console.log(t)}m(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{j&&y()}),[j,a]);return(0,l.useEffect)((()=>{f.setFieldValue("class",j)}),[j]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Section"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(hl,{required:!0,name:"selectedClass",value:j,onChange:e=>{g(e.target.value)},label:"Select Class",options:u})})})}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:cl,bodyDataModal:"section",bodyData:n,onEditClick:e=>{o(e),d(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.section.delete+"/"+e);y()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Section",onAddClick:()=>{d(!0)}}),(0,re.jsx)(jt,{open:r,formik:f,formTitle:s?"Update Section":"Add Section",onClose:A,submitButtonTitle:s?"Update":"Add",adding:c,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:1,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:f,name:"name",label:"Section Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:f,name:"sectionTeacher",label:"Section Teacher",options:h,showSearch:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:f,name:"active",label:"Active",options:pl})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:f,name:"isPublic",label:"Is-Public",options:jl})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:f,name:"note",label:"Note"})})]})})]})}const yl=[{name:"Subject Name",key:"name"},{name:"Subject Code",key:"code"}],Al=[{label:"Mandatory",value:"mandatory"},{label:"Optional",value:"optional"}],fl=[{label:"Scholastic",value:"scholastic"},{label:"Co-scholastic",value:"co-scholastic"}];function bl(){var e,t;const{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(""),y=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:a._id,search:{class:j}}});i(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:a._id}});p(null===(e=t.result)||void 0===e?void 0:e.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});x(t.result.map((e=>({label:e.name,value:e._id})))),null!==(e=t.result)&&void 0!==e&&e.length&&(g(t.result[0]._id),f.setFieldValue("class",t.result[0]._id))}catch(t){console.log(t)}})()}),[a,a._id]);const A=()=>{d(!1),o(null)},f=(0,tt.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",code:(null===s||void 0===s?void 0:s.code)||"",subjectType:(null===s||void 0===s?void 0:s.subjectType)||"",subjectGroup:(null===s||void 0===s?void 0:s.subjectGroup)||"",class:(null===s||void 0===s||null===(e=s.class)||void 0===e?void 0:e._id)||"",subjectTeachers:(null===s||void 0===s||null===(t=s.subjectTeachers)||void 0===t?void 0:t.map((e=>e._id)))||[],note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async e=>{try{const t={...e,class:j,schoolId:a._id};if(m(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.subject.update+"/"+s._id,t);y()}else{const{data:e}=await(0,Se.bE)(ke.r.subject.create,t);y()}A()}catch(t){console.log(t)}m(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{console.log(j,"000000"),j?(i([]),y()):i([])}),[j,a._id]);return(0,l.useEffect)((()=>{f.setFieldValue("class",j)}),[j]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Subject"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(hl,{required:!0,name:"selectedClass",value:j,onChange:e=>{g(e.target.value)},label:"Select Class",options:u})})})}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:yl,bodyDataModal:"subject",bodyData:n,onEditClick:e=>{o(e),d(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.subject.delete+"/"+e);y()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Subject",onAddClick:()=>{d(!0)}}),(0,re.jsx)(jt,{open:r,formik:f,formTitle:s?"Update":"Add Subject",onClose:A,submitButtonTitle:s?"Update":"Add",adding:c,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:f,name:"name",label:"Subject Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:f,name:"code",label:"Subject Code",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,formik:f,name:"subjectType",label:"Subject Type",options:Al})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,formik:f,name:"subjectGroup",label:"Group",options:fl})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{showSearch:!0,multiple:!0,formik:f,name:"subjectTeachers",label:"Subject Teachers-(".concat(f.values.subjectTeachers.length,")"),required:!0,options:h})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:f,name:"note",label:"Note"})})]})})]})}const vl=[{name:"Section",key:"name",path:"section"},{name:"Present",key:"totalPresent"},{name:"Absent",key:"totalAbsent"},{name:"Percentage",key:"percentage"}],Sl=[{name:"Student",key:"student"},{name:"Working Days",key:"workingDays"},{name:"Present Days",key:"presentDays"},{name:"Percentage",key:"percentagePresent"}];var kl=a(79306);function Dl(e){let{bodyData:t=[],date:a=new Date(Date.now()),setBodyData:n=(()=>{}),bodyDataModal:i="Attendance data",isDataReady:o=!0,classId:r}=e;const[d,c]=(0,l.useState)(!1),{selectedSetting:m}=(0,l.useContext)(De.A),u=(e,a)=>{n(t.map((t=>t.student._id==e?{...t,attendanceStatus:a}:t)))},x=e=>{n(t.map((t=>({...t,attendanceStatus:e}))))};return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(ia.A,{component:ue.A,children:[(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"S.No"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Name"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Roll Number"}),(0,re.jsxs)(da.A,{sx:{fontWeight:"bold"},align:"center",children:["Present All"," ",(0,re.jsx)(ca.A,{checked:!t.find((e=>["absent","late"].includes(e.attendanceStatus))),onChange:()=>x("present"),inputProps:{"aria-label":"controlled"}})]}),(0,re.jsxs)(da.A,{sx:{fontWeight:"bold"},align:"center",children:["Absent All"," ",(0,re.jsx)(ca.A,{checked:!t.find((e=>["present","late"].includes(e.attendanceStatus))),onChange:()=>x("absent"),inputProps:{"aria-label":"controlled"}})]})]})}),(0,re.jsx)(ma.A,{children:t.length?t.map(((e,t)=>{var a,l,n,i;return(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:null===(a=e.student)||void 0===a||null===(l=a.basicInfo)||void 0===l?void 0:l.name}),(0,re.jsx)(da.A,{align:"center",children:null===(n=e.student)||void 0===n||null===(i=n.academicInfo)||void 0===i?void 0:i.rollNumber}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{checked:"present"===e.attendanceStatus,onChange:()=>{var t;return u(null===e||void 0===e||null===(t=e.student)||void 0===t?void 0:t._id,"present")},inputProps:{"aria-label":"controlled"}})}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{checked:"absent"===e.attendanceStatus,onChange:()=>{var t;return u(null===e||void 0===e||null===(t=e.student)||void 0===t?void 0:t._id,"absent")},inputProps:{"aria-label":"controlled"}})})]},e._id)})):null})]}),o?(0,re.jsx)(kl.A,{dataPresent:t.length,title:i}):null,t.length?(0,re.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end",padding:"5px 10px",alignItems:"center"},children:(0,re.jsx)(pt.A,{variant:"contained",loading:d,onClick:async()=>{try{c(!0);const{data:e}=await(0,Se.yJ)(ke.r.studentAttendance.update,{attendanceData:t.map((e=>({...e,student:e.student._id}))),date:a,schoolId:m._id,classId:r})}catch(e){console.log(e)}c(!1)},size:"small",children:"Update"})}):null]})})}var Cl=a(72450);function wl(){let e=arguments.length>2?arguments[2]:void 0;const t=new Blob([arguments.length>1?arguments[1]:void 0],{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,Cl.saveAs)(t,e)}function Il(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=!0;for(const n in e)t.includes(n)||e[n]||(l=!1,a&&Ba.oR.error('Value for "'.concat(n,'" is missing!')));return l}function Nl(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(0),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)(!1),[f,b]=(0,l.useState)(!1),v=(0,tt.Wx)({initialValues:{class:"",section:"",date:Le()(new Date).format("YYYY/MM/DD")},onSubmit:async t=>{try{p(!0);const{data:a}=await(0,Se.Jt)(ke.r.studentAttendance.list,{params:{schoolId:e._id,classId:t.class,sectionId:t.section,date:Le()(t.date).format("YYYY-MM-DD")}});console.log(a),g(a.result)}catch(a){console.log(a)}p(!1)}});(0,l.useEffect)((()=>{g([])}),[v.values]);const S=(0,tt.Wx)({initialValues:{class:"",date:Le()(new Date).format("YYYY/MM/DD")},onSubmit:async t=>{try{const{data:a}=await(0,Se.Jt)(ke.r.studentAttendance.getAttendanceOverview,{params:{schoolId:e._id,date:Le()(t.date).format("YYYY/MM/DD"),classId:t.class}});i(a.result.map((e=>({...e,section:e.sectionInfo})))),console.log(a,"1111111111")}catch(a){console.log(a)}}});(0,l.useEffect)((()=>{S.values.class&&S.values.date&&S.handleSubmit()}),[S.values.class,S.values.date]);const k=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",month:null},onSubmit:async t=>{try{b(!0);const{data:l}=await(0,Se.Jt)(ke.r.studentAttendance.getAttendanceReport,{params:{schoolId:e._id,academicYearId:t.academicYear,classId:t.class,sectionId:t.section,month:Le()(new Date(t.month)).get("month")+1,year:Le()(new Date(t.month)).get("year")}});a(l.result),b(!1)}catch(l){console.log(l),b(!1)}},enableReinitialize:!0});return(0,l.useEffect)((()=>{(S.values.class||v.values.class||k.values.class)&&(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:S.values.class||v.values.class||k.values.class}}});x(l.result.map((e=>({...e,label:e.name,value:e._id})))),v.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id),k.setFieldValue("section",null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(l){console.log(l)}})()}),[S.values.class,v.values.class,k.values.class,e._id]),(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);d(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),k.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{var t,a,l;const{data:n}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});m(n.result.map((e=>({...e,label:e.name,value:e._id})))),S.setFieldValue("class",null===(t=n.result[0])||void 0===t?void 0:t._id),v.setFieldValue("class",null===(a=n.result[0])||void 0===a?void 0:a._id),k.setFieldValue("class",null===(l=n.result[0])||void 0===l?void 0:l._id)}catch(n){console.log(n)}})()}),[e._id]),(0,l.useEffect)((()=>{v.resetForm(),k.resetForm(),S.resetForm()}),[s]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Attedance"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{o(t)},value:s,labels:["Overview","Attedance","Report"]}),(0,re.jsxs)(Ct.A,{index:0,value:s,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:S,label:"Select Class",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(Yt.A,{disableFutureDates:!0,formik:S,label:"Date",name:"date"})})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"overview",bodyData:n,tableKeys:vl})]}),(0,re.jsxs)(Ct.A,{index:1,value:s,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:v,label:"Select Class",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:v,label:"Select Section",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{disableFutureDates:!0,formik:v,label:"Date",name:"date"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",gap:1,justifyContent:"flex-end",children:[(0,re.jsx)(pt.A,{loading:h,onClick:v.handleSubmit,size:"small",variant:"contained",children:"Find"}),(0,re.jsx)(pt.A,{loading:y,onClick:async()=>{try{A(!0);const{data:t}=await(0,Se.Jt)(ke.r.studentAttendance.donwloadAbsentReport,{params:{schoolId:e._id,date:Le()(v.values.date).format("YYYY-MM-DD"),classId:v.values.class,sectionId:v.values.section}});wl("application/pdf",t,"student-absent-list"),A(!1)}catch(t){A(!1)}},size:"small",variant:"contained",children:"Print"})]})]})}),(0,re.jsx)(Dl,{date:v.values.date,bodyData:j,setBodyData:g,classId:v.values.class})]}),(0,re.jsxs)(Ct.A,{index:2,value:s,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:k,label:"Select Academic Year",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:k,label:"Select Class",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:k,label:"Select Section",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{disableFutureDates:!0,formik:k,label:"Month",name:"month",openTo:"month",inputFormat:"MM",views:["month"],required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",gap:1,justifyContent:"flex-end",children:(0,re.jsx)(pt.A,{loading:f,onClick:k.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"reports",bodyData:t,tableKeys:Sl})]})]})}const _l=[{name:"Employee Name",key:"employee"},{name:"Working Days",key:"workingDays"},{name:"Present Days",key:"presentDays"},{name:"Percentage",key:"percentagePresent"}];function Tl(e){let{bodyData:t=[],date:a=new Date(Date.now()),setBodyData:n=(()=>{}),bodyDataModal:i="Attendance data",isDataReady:o=!0}=e;const[r,d]=(0,l.useState)(!1),{selectedSetting:c}=(0,l.useContext)(De.A),m=(e,a)=>{n(t.map((t=>t.employee._id==e?{...t,attendanceStatus:a}:t)))},u=e=>{n(t.map((t=>({...t,attendanceStatus:e}))))};return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(ia.A,{component:ue.A,children:[(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"S.No"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Name"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Employee Id"}),(0,re.jsxs)(da.A,{sx:{fontWeight:"bold"},align:"center",children:["Present All"," ",(0,re.jsx)(ca.A,{checked:!t.find((e=>["absent","late"].includes(e.attendanceStatus))),onChange:()=>u("present"),inputProps:{"aria-label":"controlled"}})]}),(0,re.jsxs)(da.A,{sx:{fontWeight:"bold"},align:"center",children:["Absent All"," ",(0,re.jsx)(ca.A,{checked:!t.find((e=>["present","late"].includes(e.attendanceStatus))),onChange:()=>u("absent"),inputProps:{"aria-label":"controlled"}})]}),(0,re.jsxs)(da.A,{sx:{fontWeight:"bold"},align:"center",children:["Late All"," ",(0,re.jsx)(ca.A,{checked:!t.find((e=>["present","absent"].includes(e.attendanceStatus))),onChange:()=>u("late"),inputProps:{"aria-label":"controlled"}})]})]})}),(0,re.jsx)(ma.A,{children:t.length?t.map(((e,t)=>{var a,l,n,i;return(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:null===(a=e.employee)||void 0===a||null===(l=a.basicInfo)||void 0===l?void 0:l.name}),(0,re.jsx)(da.A,{align:"center",children:null===(n=e.employee)||void 0===n||null===(i=n.basicInfo)||void 0===i?void 0:i.empId}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{checked:"present"===e.attendanceStatus,onChange:()=>{var t;return m(null===e||void 0===e||null===(t=e.employee)||void 0===t?void 0:t._id,"present")},inputProps:{"aria-label":"controlled"}})}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{checked:"absent"===e.attendanceStatus,onChange:()=>{var t;return m(null===e||void 0===e||null===(t=e.employee)||void 0===t?void 0:t._id,"absent")},inputProps:{"aria-label":"controlled"}})}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{checked:"late"===e.attendanceStatus,onChange:()=>{var t;return m(null===e||void 0===e||null===(t=e.employee)||void 0===t?void 0:t._id,"late")},inputProps:{"aria-label":"controlled"}})})]},e._id)})):null})]}),o?(0,re.jsx)(kl.A,{dataPresent:t.length,title:i}):null,t.length?(0,re.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end",padding:"5px 10px",alignItems:"center"},children:(0,re.jsx)(pt.A,{variant:"contained",loading:r,onClick:async()=>{try{d(!0);const{data:e}=await(0,Se.yJ)(ke.r.employeeAttendance.update,{attendanceData:t.map((e=>({...e,employee:e.employee._id}))),date:a,schoolId:c._id})}catch(e){console.log(e)}d(!1)},size:"small",children:"Update"})}):null]})})}function Ml(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(0),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list),t=e.result.filter((e=>{var t;return"student"!==(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())})).map((e=>({label:e.name,value:e._id})));o(t)}catch(e){console.log(e)}})()}),[]);const h=(0,tt.Wx)({initialValues:{role:"",date:Le()(new Date)},onSubmit:async t=>{try{m(!0);const{data:a}=await(0,Se.Jt)(ke.r.employeeAttendance.list,{params:{schoolId:e._id,roleId:t.role,date:t.date}});d(a.result)}catch(a){console.log(a)}m(!1)}});(0,l.useEffect)((()=>{h.values.date&&h.values.role&&(d([]),h.handleSubmit())}),[h.values,e._id]);const p=(0,tt.Wx)({initialValues:{role:"",date:Le()(new Date),fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async t=>{try{x(!0);const{data:l}=await(0,Se.Jt)(ke.r.employeeAttendance.getAttendanceReport,{params:{schoolId:e._id,roleId:t.role,fromDate:t.fromDate,toDate:t.toDate}});a(l.result)}catch(l){console.log(l)}x(!1)}});return(0,l.useEffect)((()=>{p.values.fromDate&&p.values.role&&p.values.toDate&&(a([]),p.handleSubmit())}),[p.values,e._id]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee Attedance"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{i(t)},value:n,labels:["Attedance","Report"]}),(0,re.jsxs)(Ct.A,{index:0,value:n,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"role",formik:h,label:"Select Roles",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{disableFutureDates:!0,formik:h,label:"Date",name:"date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{loading:c,onClick:h.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(Tl,{date:h.values.date,bodyData:r,setBodyData:d})]}),(0,re.jsxs)(Ct.A,{index:1,value:n,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"role",formik:p,label:"Select Roles",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{disableFutureDates:!0,formik:p,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{disableFutureDates:!0,formik:p,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{onClick:p.handleSubmit,loading:u,size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"reports",bodyData:t,tableKeys:_l})]})]})}function Fl(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(null),[p,j]=(0,l.useState)(!1),g=(0,tt.Wx)({initialValues:{class:"",section:"",subject:"",teacher:"",roomNo:"",startTime:"",endTime:""},onSubmit:console.log("nnnnnnn")}),y=(0,tt.Wx)({initialValues:{class:""},onSubmit:console.log("nnnnnnn")});return(0,l.useEffect)((()=>{g.values.class&&((async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:g.values.class}}});g.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id),o(a.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(a){console.log(a)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:e._id,search:{class:g.values.class}}});d(t.result.map((e=>({label:e.name,value:e._id})))),g.setFieldValue("subject",t.result[0]._id)}catch(t){console.error(t)}})())}),[g.values.class]),(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});i(t.result.map((e=>({...e,label:e.name,value:e._id})))),y.setFieldValue("class",t.result[0]._id),g.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id}});m(null===(t=a.result)||void 0===t?void 0:t.filter((e=>e.role.name.toLowerCase().match(new RegExp("Teacher","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(a){console.log(a)}})()}),[e._id]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Class Routine"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:y,label:"Select Class",options:n})})})}),(0,re.jsx)(u.A,{component:"h1",sx:{fontWeight:"bold",mt:1},children:"Sections"}),(0,re.jsx)(dt,{title:"Add Class Routine",onAddClick:()=>{a(!0)}}),(0,re.jsx)(jt,{open:t,formik:g,formTitle:x?"Update Class Routine":"Add Routine",onClose:()=>{a(!1),h(null)},submitButtonTitle:x?"Update":"Submit",adding:p,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:g,name:"class",label:"Class",required:!0,options:n})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:g,name:"section",label:"Section",required:!0,options:s})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:g,name:"subject",label:"Subject",required:!0,options:r})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:g,name:"teacher",label:"Teacher",required:!0,options:c})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"roomNo",label:"Room Number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"startTime",label:"Start Time"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"endTime",label:"End Time"})})]})})]})}const zl=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.dark,borderRadius:"5px",padding:"2px 5px",width:"60px",display:"flex",alignItems:"center",justifyContent:"center"}})),El=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",alignItems:"center"}}));function ql(e){let{title:t="",count:a=0,showTitle:l=!1}=e;return(0,re.jsxs)(v.A,{direction:"row",columnGap:l?1:0,children:[l?(0,re.jsx)(zl,{children:(0,re.jsx)(u.A,{sx:{fontSize:"14px",color:"white",fontWeight:"bold"},children:t})}):null,(0,re.jsx)(El,{children:(0,re.jsx)(u.A,{sx:{fontSize:"14px",fontWeight:"bold"},children:a})})]})}const Yl=(0,n.Ay)(da.A)((e=>{let{theme:t}=e;return{borderRight:"1px solid grey"}})),Wl=(0,n.Ay)(x.A)((e=>{let{theme:t}=e;return{borderBottomColor:"grey",width:"100%"}})),Rl=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{marginTop:"52px",display:"flex",rowGap:"2px",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingBottom:"10px"}}));function Pl(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(""),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(0),[u,h]=(0,l.useState)(0),[p,j]=(0,l.useState)(0),[g,y]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list);n(t.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),o(null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[t]),(0,l.useEffect)((()=>{(async()=>{try{if(i){const{data:e}=await(0,Se.Jt)(ke.r.student.overView,{params:{schoolId:t._id,academicYear:i}});d(null===e||void 0===e?void 0:e.result),m(e.result.totalStudentsCount),h(e.result.totalMaleStudentsCount),j(e.result.totalFemaleStudentsCount)}}catch(e){console.log(e)}})()}),[i,t]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Overview"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,re.jsx)(hl,{required:!0,name:"academicYear",value:i,onChange:e=>o(e.target.value),label:"Select Academic Year",options:a})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center",mt:2},children:(0,re.jsx)(S.A,{title:"Download",children:(0,re.jsx)(pt.A,{loading:g,size:"small",variant:"contained",onClick:async()=>{try{y(!0);wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,Se.Jt)(ke.r.student.downloadAllStudentsExcel,{params:{schoolId:t._id,academicYearId:i},responseType:"blob"})).data,"student.xlsx"),y(!1)}catch(e){y(!1),console.log(e)}},children:"Download Students"})})})]})}),(0,re.jsx)(s.A,{sx:{fontSize:{md:"15px",sm:"12px"},padding:"1.2rem"},children:(0,re.jsxs)(s.A,{sx:{display:"flex",gap:"1rem"},children:[(0,re.jsxs)(s.A,{children:["Total Students:",c]}),(0,re.jsxs)(s.A,{children:["Total Male Students:",u]}),(0,re.jsxs)(s.A,{children:["Total Female Students:",p]})]})}),(0,re.jsx)(ia.A,{component:ue.A,children:(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(Yl,{align:"center",children:"Class"}),(0,re.jsx)(Yl,{align:"center",children:"Students"}),(0,re.jsx)(Yl,{align:"center",children:"Sections"})]})}),(0,re.jsx)(ma.A,{children:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.map(((e,t)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{sx:{borderRight:"1px solid grey"},align:"center",children:e.name}),(0,re.jsx)(da.A,{sx:{borderRight:"1px solid grey",padding:0},align:"center",children:(0,re.jsxs)(Rl,{children:[(0,re.jsx)(ql,{showTitle:!0,title:"Male",count:e.maleStudents}),(0,re.jsx)(Wl,{}),(0,re.jsx)(ql,{showTitle:!0,title:"Female",count:e.femaleStudents}),(0,re.jsx)(Wl,{}),(0,re.jsx)(ql,{showTitle:!0,title:"Total",count:e.totalStudents})]})}),(0,re.jsx)(da.A,{align:"left",children:(0,re.jsx)(ia.A,{component:ue.A,children:(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsx)(ra.A,{children:e.sections.map(((e,t)=>(0,re.jsx)(da.A,{align:"left",children:e.section})))})}),(0,re.jsx)(ma.A,{children:(0,re.jsx)(ra.A,{children:e.sections.map(((e,t)=>(0,re.jsx)(da.A,{align:"left",children:(0,re.jsxs)(s.A,{sx:{display:"flex",rowGap:"2px",flexDirection:"column"},children:[(0,re.jsx)(ql,{title:"Male",count:e.maleCount}),(0,re.jsx)(x.A,{sx:{background:"grey"}}),(0,re.jsx)(ql,{title:"Female",count:e.femaleCount}),(0,re.jsx)(x.A,{sx:{background:"grey"}}),(0,re.jsx)(ql,{title:"Total",count:e.count})]})},t)))})})]})})})]},e.className)))})]})})]})}var Jl=a(26225),Vl=a(95676);const Bl=[{name:"Photo",key:"photo",type:"image"},{name:"Name",key:"name",path:"basicInfo"},{name:"Active",key:"active"},{name:"Section",key:"name",path:"section"},{name:"Roll No",key:"rollNumber",path:"rollNumber"},{name:"Admission No",key:"admissionNumber",path:"academicInfo"}];var Ll=a(41132),Ul=a(95855);const Ol=[{label:"Active",value:!0},{label:"In-Active",value:!1}],Hl={bgcolor:"background.paper",height:"auto",p:2};function Gl(){const{selectedSetting:e}=(0,l.useContext)(De.A),t=(0,_.Zp)(),a=(0,i.A)(),n=(0,ct.A)(a.breakpoints.down("sm")),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(!1),[y,A]=(0,l.useState)(!1),[f,b]=(0,l.useState)(!1),[k,D]=(0,l.useState)(!1),[C,w]=(0,l.useState)([]),[I,N]=(0,l.useState)([]),T=(e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"admitFile"===t?N(l):"updateFile"===t&&w(l)}else console.log("No files selected")},M=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"all",active:!0},onSubmit:async t=>{try{if("all"===t.section){const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,active:t.active}}});r(a.result.map((e=>({...e,section:e.academicInfo.section,rollNumber:e.academicInfo}))))}else{const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section,active:t.active}}});r(a.result.map((e=>({...e,section:e.academicInfo.section,rollNumber:e.academicInfo}))))}}catch(a){console.log(a)}},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list);c(t.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),M.setFieldValue("academicYear",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});x(a.result.map((e=>({label:e.name,value:e._id})))),M.setFieldValue("class",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e._id]),(0,l.useEffect)((()=>{M.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:M.values.class}}}),a=[{label:"All",value:"all"},...t.result.map((e=>({label:e.name,value:e._id})))];p(a),M.setFieldValue("section","all")}catch(t){console.log(t)}})()}),[M.values.class,e._id]),(0,l.useEffect)((()=>{M.values.academicYear&&M.values.class&&M.values.section&&M.handleSubmit()}),[M.values,e._id]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Students"}),(0,re.jsxs)(ue.A,{sx:{padding:2,marginBottom:2},children:[(0,re.jsx)("form",{onSubmit:M.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:M,label:"Select Academic Year",options:d})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:M,label:"Select Class",options:m})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:M,label:"Select Section",options:h})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"active",formik:M,label:"Select Status",options:Ol})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",type:"submit",children:"Find"})})]})}),(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,re.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:M.values.academicYear&&M.values.class&&"all"!==M.values.section&&(0,re.jsxs)(v.A,{gap:1,direction:{xs:"column",sm:"row",md:"row"},children:[(0,re.jsx)(S.A,{title:"Bulk Admit",children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>A(!0),children:"BULK ADMIT"})}),(0,re.jsx)(S.A,{title:"Bulk Update",children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>g(!0),children:"BULK UPDATE"})})]})}),(0,re.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",mt:1},children:(0,re.jsxs)(v.A,{direction:"row",children:[(0,re.jsx)(S.A,{title:"Download",children:(0,re.jsx)(pt.A,{loading:f,onClick:async()=>{try{b(!0);wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,Se.Jt)(ke.r.student.downloadStudentsExcel,{params:{schoolId:e._id,academicYearId:M.values.academicYear,classId:M.values.class,sectionId:M.values.section,active:M.values.active},responseType:"blob"})).data,"students.xlsx"),b(!1)}catch(t){console.log(t),b(!1)}},children:(0,re.jsx)(Vl.A,{color:"primary"})})}),(0,re.jsx)(S.A,{title:"Print",children:(0,re.jsx)(pt.A,{loading:k,onClick:async()=>{try{D(!0);wl("application/pdf",(await(0,Se.Jt)(ke.r.student.downloadStudentsPdf,{params:{schoolId:e._id,academicYearId:M.values.academicYear,classId:M.values.class,active:M.values.active},responseType:"blob"})).data,"student-list.pdf"),D(!1)}catch(t){console.log(t),D(!1)}},children:(0,re.jsx)(Jl.A,{color:"primary"})})}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{t("/sch/student/bulk-photo")},children:"Bulk Photo"})]})})]})]}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:Bl,bodyDataModal:"students",bodyData:o,onEditClick:e=>{t("/sch/student/edit-student/".concat(e._id))},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.student.delete+"/"+e);M.handleSubmit()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Students",onAddClick:e=>{t("/sch/student/add-student")}}),(0,re.jsx)(mt.A,{fullScreen:n,maxWidth:"md",open:y,onClose:()=>A(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:{xs:"100%",sm:350,md:350,lg:400}}}},children:(0,re.jsx)(s.A,{sx:Hl,children:(0,re.jsx)("form",{onSubmit:async t=>{t.preventDefault();try{const t=new FormData;t.append("academicYearId",M.values.academicYear),t.append("classId",M.values.class),t.append("sectionId",M.values.section),t.append("schoolId",e._id),I.forEach((e=>t.append("file",e))),await(0,Se.bE)(ke.r.student.bulkStudentAdmit,t,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){console.log(a)}},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:1,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(u.A,{variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Admit"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,re.jsx)(Xe.A,{variant:"contained",size:"small",endIcon:(0,re.jsx)(Ll.A,{}),onClick:async()=>{try{wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,Se.Jt)(ke.r.student.getBulkStudentAdmitSheet,{params:{schoolId:e._id},responseType:"blob"})).data,"studentAdmit_list.xlsx")}catch(t){console.log(t)}},children:"Sample"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,re.jsx)(Ul.A,{label:"Select  File",onChange:e=>T(e,"admitFile"),customOnChange:!0,selectedFiles:I,multi:!1})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>{A(!1),N([])},children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",type:"submit",children:"Submit"})]})]})})})}),(0,re.jsx)(mt.A,{fullScreen:n,open:j,onClose:()=>g(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:{xs:"100%",sm:350,md:350,lg:400}}}},children:(0,re.jsx)(s.A,{sx:Hl,children:(0,re.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=new FormData;C.forEach((t=>e.append("file",t)));const{data:t}=await(0,Se.yJ)(ke.r.student.bulkUpdate,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){console.log(t)}},children:[" ",(0,re.jsxs)(xe.Ay,{container:!0,spacing:1,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(u.A,{variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Update"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,re.jsx)(Xe.A,{variant:"contained",size:"small",onClick:async()=>{try{wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,Se.Jt)(ke.r.student.bulkUpdateSheet,{params:{schoolId:e._id,academicYearId:M.values.academicYear,classId:M.values.class,sectionId:M.values.section},responseType:"blob"})).data,"student_list.xlsx")}catch(t){console.log(t)}},endIcon:(0,re.jsx)(Ll.A,{}),children:"Download"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,re.jsx)(Ul.A,{label:"Select File",onChange:e=>T(e,"updateFile"),customOnChange:!0,selectedFiles:C,multi:!1})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>{g(!1),w([])},children:"Cancel"}),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",type:"submit",children:"Submit"})]})]})]})})})]})}const Kl=e=>{let{children:t,content:a}=e;const[n,i]=(0,l.useState)(!0);return(0,l.useEffect)((()=>()=>{}),[]),(0,re.jsx)(re.Fragment,{children:n&&a&&(0,re.jsx)("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:"whitesmoke",padding:"15px",zIndex:1e3},children:a})})};var Ql=a(55756);const Zl={inputProps:{"aria-label":"Checkbox demo"}},$l={bgcolor:"background.paper",height:"auto",p:2};function Xl(){const{selectedSetting:e}=(0,l.useContext)(De.A),t=(0,Ql.u)(),a=(0,ct.A)(t.breakpoints.down("sm")),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)([]),[f,b]=(0,l.useState)(!1),[v,S]=l.useState(0),[k,D]=l.useState(10),C=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",newSection:""},onSubmit:async t=>{try{if(!Il(t,[]))return;const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section}}});g(a.result)}catch(a){console.log(a)}}});(0,l.useEffect)((()=>{g([])}),[C.values]);(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list);i(t.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),C.setFieldValue("academicYear",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});r(a.result.map((e=>({label:e.name,value:e._id})))),C.setFieldValue("class",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[]),(0,l.useEffect)((()=>{C.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:C.values.class}}});c(a.result.map((e=>({label:e.name,value:e._id})))),C.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[C.values.class,e]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Reshuffle"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:C.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:C,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:C,label:"Select Class",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:C,label:"Current Section",options:d})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"newSection",formik:C,label:"Change To",options:d.filter((e=>e.value!==C.values.section))})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:"10px",children:[(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>x(!0),children:"Bulk Reshuffle"})]})]})})}),(0,re.jsx)(ia.A,{component:ue.A,children:(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"S.No"}),(0,re.jsx)(da.A,{align:"center",children:"Name"}),(0,re.jsx)(da.A,{align:"center",children:"Roll No"}),(0,re.jsx)(da.A,{align:"center",children:"Father Name"}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{onChange:e=>{if(e.target.checked){const e=j.map((e=>e._id));A([...e])}else A([])},...Zl,sx:{padding:0,color:"#fff","&.Mui-checked":{color:"#fff"}}})})]})}),(0,re.jsx)(ma.A,{children:j.map(((e,t)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:e.basicInfo.name}),(0,re.jsx)(da.A,{align:"center",children:e.academicInfo.rollNumber}),(0,re.jsx)(da.A,{align:"center",children:e.fatherInfo.name}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{checked:y.includes(e._id),onChange:t=>((e,t)=>{t.target.checked?A((t=>[...t,e])):A(y.filter((t=>t!==e)))})(e._id,t),...Zl,sx:{color:"#1b3779","&.Mui-checked":{color:"#1b3779"}}})})]},e._id)))}),!j.length&&(0,re.jsx)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:"No data found"})]})}),(0,re.jsx)(Oa.A,{rowsPerPageOptions:[10,25,50],component:"div",count:j.length,rowsPerPage:k,page:v,onPageChange:(e,t)=>{S(t)},onRowsPerPageChange:e=>{D(+e.target.value),S(0)},sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",my:1}}),j.length>0&&(0,re.jsx)(Kl,{content:(0,re.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,re.jsx)(pt.A,{loading:f,varient:"contained",size:"small",type:"submit",onClick:async()=>{try{const t={schoolId:e._id,sectionId:C.values.newSection,classId:C.values.class,currentSectionId:C.values.section,studentIds:y};b(!0);const{data:a}=await(0,Se.yJ)(ke.r.student.resuffle,t);C.resetForm()}catch(t){console.log(t)}b(!1)},sx:{background:"#1b3779",":hover":{background:"#1b3779"},color:"#fff"},children:"Reshuffle"})})}),(0,re.jsx)(mt.A,{fullScreen:a,maxWidth:"md",open:m,onClose:()=>x(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,re.jsx)(s.A,{sx:$l,children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:1,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(u.A,{variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Admit"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,re.jsx)(Xe.A,{variant:"contained",endIcon:(0,re.jsx)(Ll.A,{}),children:"Get Sample"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,re.jsx)(Ul.A,{label:"Select File",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}p(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:h,multi:!1})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(Xe.A,{variant:"contained",type:"submit",children:"Submit"})})]})})})]})}const en={inputProps:{"aria-label":"Checkbox demo"}};function tn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)({}),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(!1),[y,A]=l.useState(0),[f,b]=l.useState(10),v=(0,tt.Wx)({initialValues:{promoteAcademicYearId:"",currentClassId:"",currentSectionId:"",promoteClassId:"",promoteSectionId:""},onSubmit:async e=>{try{if(!Il(e,[]))return;const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{search:{academicYear:m._id,"academicInfo.section":e.currentSectionId,"academicInfo.class":e.currentClassId}}});a(t.result)}catch(t){console.log(t)}}});(0,l.useEffect)((()=>{a([])}),[v.values]);(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.academicYear.list);i(t.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id})))),x(t.result.find((e=>e.active))),v.setFieldValue("promoteAcademicYearId",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});r(a.result.map((e=>({...e,label:e.name,value:e._id})))),v.setFieldValue("currentClassId",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id}});c(a.result.map((e=>({...e,label:e.name,value:e._id})))),v.setFieldValue("currentSectionId",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e._id]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Promotion"}),(0,re.jsxs)(ue.A,{sx:{padding:2,marginBottom:2},children:[(0,re.jsxs)(s.A,{sx:{fontSize:16,fontWeight:"bold"},children:[(0,re.jsxs)(u.A,{component:"span",color:"forestgreen",fontWeight:"bold",children:["Running Session:"," "]}),(0,re.jsxs)(u.A,{component:"span",fontWeight:"bold",children:[null===m||void 0===m?void 0:m.from,"-",null===m||void 0===m?void 0:m.to]})]}),(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"promoteAcademicYearId",formik:v,label:"Promote To Session",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"currentClassId",formik:v,label:"Current Class",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"currentSectionId",formik:v,label:"Current Section",options:d.filter((e=>e.class._id===v.values.currentClassId)).map((e=>({label:e.name,value:e._id})))})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"promoteClassId",formik:v,label:"Promote Class",options:o.filter((e=>e._id!==v.values.currentClassId)).map((e=>({label:e.name,value:e._id})))})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"promoteSectionId",formik:v,label:"Promote Section",options:d.filter((e=>e.class._id===v.values.promoteClassId)).map((e=>({label:e.name,value:e._id})))})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:2,display:"flex",alignItems:"center",children:(0,re.jsx)(Xe.A,{disabled:!Il(v.values,[],!1),onClick:v.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})]}),(0,re.jsxs)(ia.A,{component:ue.A,children:[(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"S.No"}),(0,re.jsx)(da.A,{align:"center",children:"Name"}),(0,re.jsx)(da.A,{align:"center",children:"Roll No"}),(0,re.jsx)(da.A,{align:"center",children:"Father Name"}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{onClick:e=>{if(e.target.checked){const e=t.map((e=>e._id));p([...e])}else p([])},...en,sx:{padding:0,color:"#fff","&.Mui-checked":{color:"#fff"}}})})]})}),(0,re.jsx)(ma.A,{children:t.slice(y*f,y*f+f).map(((e,t)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:e.basicInfo.name}),(0,re.jsx)(da.A,{align:"center",children:e.academicInfo.rollNumber}),(0,re.jsx)(da.A,{align:"center",children:e.fatherInfo.name}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(ca.A,{size:"small",checked:h.includes(e._id),onChange:t=>((e,t)=>{t.target.checked?p((t=>[...t,e])):p(h.filter((t=>t!==e)))})(e._id,t),...en,sx:{color:"#1b3779","&.Mui-checked":{color:"#1b3779"}}})})]},e._id)))})]}),!t.length&&(0,re.jsx)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:"No data found"})]}),(0,re.jsx)(Oa.A,{rowsPerPageOptions:[10,25,50],component:"div",count:t.length,rowsPerPage:f,page:y,onPageChange:(e,t)=>{A(t)},onRowsPerPageChange:e=>{b(+e.target.value),A(0)},sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",my:1}}),t.length>0&&(0,re.jsx)(Kl,{content:(0,re.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,re.jsx)(pt.A,{loading:j,varient:"contained",size:"small",type:"submit",onClick:async()=>{try{const t={schoolId:e._id,...v.values,studentIds:h};g(!0);const{data:a}=await(0,Se.yJ)(ke.r.student.promote,t);v.resetForm()}catch(t){console.log(t)}g(!1)},children:"Promote"})})})]})}const an=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"16px"}}));function ln(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)(null),m=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:console.log("nnnn")});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);m.setFieldValue("academicYear",e.result[0]._id),a(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});i(t.result.map((e=>({...e,label:e.name,value:e._id})))),m.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e]),(0,l.useEffect)((()=>{m.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:m.values.class}}});m.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id),r(a.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(a){console.log(a)}})()}),[m.values.class]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Bulk Admission"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:m,label:"Select Academic Year",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:m,label:"Select Class",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:m,label:"Select Section",options:o})}),(0,re.jsx)(xe.Ay,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Xe.A,{size:"large",component:"label",children:(0,re.jsx)("input",{visibility:"hidden",type:"file",onChange:e=>{c(e.target.files[0])}})})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(pt.A,{onClick:async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.student.getBulkStudentAdmitSheet,{responseType:"blob",params:{schoolId:e._id}});wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t,"Bulk Admission Sheet")}catch(t){console.log(t)}},endIcon:(0,re.jsx)(Ll.A,{}),size:"small",variant:"contained",children:"Get Sample"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsxs)(an,{component:"ul",children:[(0,re.jsxs)(an,{component:"li",children:["School role type configured with",(0,re.jsx)("span",{style:{color:"red"},children:" manual"}),", please mention role number in column."]}),(0,re.jsxs)(an,{component:"li",children:["School admission_no configured with auto"," ",(0,re.jsx)("span",{style:{color:"red"},children:" auto _ascending_no, "}),"admission_no column will be ignored."]})]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(pt.A,{onClick:async()=>{try{const t=new FormData;t.append("classId",m.values.class),t.append("sectionId",m.values.section),t.append("academicYearId",m.values.academicYear),t.append("schoolId",e._id),t.append("file",d);const{data:a}=await(0,Se.yJ)(ke.r.student.bulkStudentAdmit,t,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){console.log(t)}},size:"small",variant:"contained",children:"Submit"})})]})}),(0,re.jsxs)(s.A,{sx:{padding:"20px",borderRadius:"5px",backgroundColor:e=>"dark"===e.palette.mode?"rgba(32,33,32,1)":"#FFF9C4"},children:[(0,re.jsx)(u.A,{sx:{fontSize:"22px"},fontWeight:"bold",children:"Instruction:"}),(0,re.jsxs)(an,{component:"ol",children:[(0,re.jsx)(an,{component:"li",children:"At first select the (School), Class and Section"}),(0,re.jsx)(an,{component:"li",children:"Generate CSV file."}),(0,re.jsx)(an,{component:"li",children:"Open the downloaded CSV file and enter student information with unique username."}),(0,re.jsx)(an,{component:"li",children:"Save the edited CSV file."}),(0,re.jsx)(an,{component:"li",children:"Upload again CSV file you just edited and submit."})]})]})]})}const nn=[{name:"Name",key:"name"},{name:"User Name",key:"username"},{name:"Roll No",key:"rollNumber",path:"rollNumber"},{name:"Father Name",key:"fatherName"}];function sn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(!1),u=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},onSubmit:async t=>{m(!0);try{const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:u.values.academicYear,"academicInfo.class":u.values.class,"academicInfo.section":u.values.section}}});a(t.result.map((e=>({username:e.username,fatherName:e.fatherInfo.name,name:e.basicInfo.name,rollNumber:e.academicInfo}))))}catch(l){console.error(l)}m(!1)}});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);u.setFieldValue("academicYear",e.result[0]._id),i(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});o(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,l.useEffect)((()=>{u.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:u.values.class}}});d(a.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[u.values.class,e._id]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Credentials"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:u.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:u,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:u,label:"Select Class",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:u,label:"Select Section",options:r})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,re.jsx)(pt.A,{loading:c,size:"small",type:"submit",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:[],tableKeys:nn,bodyDataModal:"credentials",bodyData:t})]})}const on=[{label:"Male",value:"male"},{label:"Female",value:"female"}],rn=[{label:"Yes",value:!0},{label:"No",value:!1}];function dn(){const{selectedSetting:e,setSettings:t,setSelectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),h=(0,tt.Wx)({initialValues:{academicYear:"",name:"",admissionNumber:"",admissionDate:null,dob:null,gender:"",caste:"",contactNumber:"",fatherName:"",fatherContactNumber:"",motherName:"",motherContactNumber:"",class:"",section:"",rollNumber:"",active:""},onSubmit:async t=>{console.log(t.caste,"check error");try{const a={basicInfo:{name:t.name,admissionDate:Le()(t.admissionDate).format("YYYY/MM/DD"),dob:Le()(t.dob).format("YYYY/MM/DD"),gender:t.gender,caste:t.caste},motherInfo:{name:t.motherName,contactNumber:t.motherPhone},fatherInfo:{name:t.fatherName,contactNumber:t.fatherPhone},academicInfo:{class:t.class,section:t.section,rollNumber:t.rollNumber,admissionNumber:t.admissionNumber},contactNumber:t.contactNumber,academicYear:t.academicYear,schoolId:null===e||void 0===e?void 0:e._id,active:t.active||!0},l=new FormData;l.append("body",JSON.stringify(a)),x(!0);const{data:n}=await(0,Se.bE)(ke.r.student.create,l,{headers:{"Content-Type":"multipart/form-data"}});h.resetForm()}catch(a){console.log(a)}x(!1)}});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);i(e.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});r(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[e]),(0,l.useEffect)((()=>{h.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:null===e||void 0===e?void 0:e._id,search:{class:h.values.class}}});c(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[h.values.class,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Quick Admit"}),(0,re.jsxs)(s.A,{onSubmit:h.handleSubmit,component:"form",children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:[(0,re.jsxs)(u.A,{component:"span",color:"red",fontWeight:"bold",sx:{display:"inline"},children:["Note:"," "]}),(0,re.jsx)(u.A,{variant:"h6",component:"span",fontWeight:"bold",sx:{display:"inline"},children:"Student will be admited to session"})]}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:h,label:"Select Academic Year",options:n})})]})}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",children:"Basic Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:h,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:"manual"===(null===e||void 0===e?void 0:e.admissionNo),name:"admissionNumber",formik:h,label:"Admission No.",disabled:"manual"!=(null===e||void 0===e?void 0:e.admissionNo)})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"admissionDate",formik:h,label:"Admission Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"dob",formik:h,label:"DOB"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"gender",formik:h,label:"Select Gender",options:on})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"caste",formik:h,label:"Caste"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"contactNumber",formik:h,label:"Contact Number"})})]})}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",children:"Parent Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherName",formik:h,label:"Father Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherContactNumber",formik:h,label:"Father Phone Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherName",formik:h,label:"Mother Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherContactNumber",formik:h,label:"Mother Phone Number"})})]})}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",children:"Academic Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:h,label:"Select Class",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:h,label:"Select Section",options:d})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"rollNumber",formik:h,label:"Roll No",disabled:"manual"!==(null===e||void 0===e?void 0:e.rollNumberType)})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"active",formik:h,label:"Select Active Status",options:rn})})]})}),(0,re.jsx)(s.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,re.jsx)(pt.A,{loading:m,size:"small",variant:"contained",type:"submit",children:"Submit"})})]})]})}const cn=[{name:"Name",key:"name"},{name:"Date",key:"createdAt",isDate:!0}];function mn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)({class:"",section:"",academicYear:"",student:""}),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)([]),f=async t=>{try{const{data:l}=await(0,Se.Jt)(ke.r.studentActivity.list,{params:{schoolId:e._id,search:{student:t.student,academicYear:t.academicYear}}});a(l.result)}catch(l){console.log(l)}},b=async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:S.values.class}}});S.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id),A(a.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(a){console.log(a)}},v=()=>{S.handleSubmit(),i(!1),o(null)},S=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},onSubmit:f,enableReinitialize:!0}),k=(0,tt.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",description:(null===s||void 0===s?void 0:s.description)||"",student:S.values.student||"",academicYear:S.values.academicYear||""},onSubmit:async t=>{try{const a={student:t.student,description:t.description,name:t.name,academicYear:t.academicYear,schoolId:e._id};if(d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.studentActivity.update+"/"+s._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.studentActivity.create,a)}v()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{S.values.class&&b()}),[S.values.class]),(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);S.setFieldValue("academicYear",e.result[0]._id),m(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});g(t.result.map((e=>({...e,label:e.name,value:e._id})))),S.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,l.useEffect)((()=>{S.values.academicYear&&S.values.class&&S.values.section&&e&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:S.values.academicYear,"academicInfo.class":S.values.class,"academicInfo.section":S.values.section}}});x(a.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),S.setFieldValue("student",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[S.values.academicYear,S.values.class,S.values.section,e]),(0,l.useEffect)((()=>{S.values.class&&b()}),[S.values.class]);(0,l.useEffect)((()=>{S.values.academicYear&&f()}),[S.values.academicYear]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Activity"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"div",onSubmit:S.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:S,label:"Select Academic Year",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:S,label:"Select Class",options:j})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:S,label:"Select Section",options:y})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:S,label:"Select Student",options:u})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",disabled:!S.values.student,onClick:S.handleSubmit,children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:cn,bodyDataModal:"student activity",bodyData:t,onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.studentActivity.delete+"/"+e);S.handleSubmit()}catch(t){console.log(t)}}}),(0,re.jsx)(dt,{title:"Student Activity",onAddClick:()=>{i(!0)},disabled:!S.values.student}),(0,re.jsx)(jt,{open:n,formik:k,formTitle:s?"Update Student Activity":"Add Student Activity",onClose:v,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:12,item:!0,children:(0,re.jsx)(At.A,{formik:k,name:"name",label:"Activity Name"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,item:!0,children:(0,re.jsx)(At.A,{formik:k,name:"description",label:"Description"})})]})})]})}const un=[{name:"Assignment Title",key:"title"},{name:"Class",key:"className"},{name:"Subject",key:"subjectName"},{name:"Created At",key:"createdAt",isDate:!0},{name:"Deadline",key:"deadline",isDate:!0}];function xn(e){var t,a;let{dataToEdit:n="",handleClose:i=(()=>{}),onUpdateFormik:s=(()=>{})}=e;const{selectedSetting:o}=(0,l.useContext)(De.A),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(!1),y=(0,tt.Wx)({initialValues:{title:(null===n||void 0===n?void 0:n.title)||"",class:(null===n||void 0===n?void 0:n.class)||"",section:(null===n||void 0===n?void 0:n.section)||"",subject:(null===n||void 0===n?void 0:n.subject)||"",assignmentType:(null===n||void 0===n?void 0:n.assignmentType)||"",deadline:null!==n&&void 0!==n&&n.deadline?Le()(n.deadline).format("YYYY/MM/DD"):null,attachmentType:(null===n||void 0===n?void 0:n.attachmentType)||"",isPublish:(null===n||void 0===n?void 0:n.isPublish)||!1,note:(null===n||void 0===n?void 0:n.note)||"",link:(null===n||void 0===n?void 0:n.link)||""},onSubmit:async e=>{const t=new FormData;t.append("title",e.title),t.append("class",e.class),t.append("section",e.section),t.append("subject",e.subject),t.append("assignmentType",e.assignmentType),t.append("deadline",Le()(e.deadline).format("YYYY-MM-DD")),t.append("attachmentType",e.attachmentType),t.append("isPublic",!!e.isPublic),t.append("note",e.note),t.append("link",e.link),h.forEach((e=>t.append("file",e))),t.append("schoolId",o._id);try{if(g(!0),n){const{data:e}=await(0,Se.yJ)(ke.r.assignment.update+"/"+n.id,t,{headerd:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.assignment.create,t,{headers:{"Content-type":"multipart/form-data"}})}s.handleSubmit(),i()}catch(a){console.log(a)}g(!1)},enableReinitialize:!0});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:o._id}});d(e.result.map((e=>({label:e.name,value:e._id})))),y.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})()}),[o._id]),(0,l.useEffect)((()=>{y.values.class&&((async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:o._id,search:{class:y.values.class}}});console.log(e,"section"),m(e.result.map((e=>({label:e.name,value:e._id})))),y.setFieldValue("section",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:o._id,search:{class:y.values.class}}});x(e.result.map((e=>({label:e.name,value:e._id})))),y.setFieldValue("subject",e.result[0]._id)}catch(e){console.log(e)}})())}),[y.values.class,o._id]),console.log(n,"dataToEdit"),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:y.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"title",formik:y,label:"Assignment Title"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:y,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:y,label:"Select Section",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:y,label:"Select Subject",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"assignmentType",formik:y,label:"Select Assignment Type",options:[{label:"Class",value:"class"},{label:"Assignment",value:"assignment"}]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,formik:y,name:"deadline",label:"Deadline"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"attachmentType",formik:y,label:"Select Attachment Type",options:[{label:"File",value:"File"},{label:"Link",value:"Link"}]})}),"File"===(null===(t=y.values)||void 0===t?void 0:t.attachmentType)&&(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{name:"file",label:"Select File",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}p(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:h})}),"Link"===(null===(a=y.values)||void 0===a?void 0:a.attachmentType)&&(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"link",label:"Link",required:!0,formik:y})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"isPublish",formik:y,label:"Publish To Web",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{name:"note",formik:y,label:"Note"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:i,children:"Cancel"}),(0,re.jsx)(pt.A,{size:"small",type:"submit",variant:"contained",sx:{ml:2},loading:j,children:"Submit"})]})]})})})}function hn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)(0),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),u=[{label:"All",value:"all"},...c],[x,h]=(0,l.useState)(!1),p=async t=>{try{if(h(!0),"all"===(null===t||void 0===t?void 0:t.section)){const{data:l}=await(0,Se.Jt)(ke.r.assignment.list,{params:{schoolId:e._id,search:{class:t.class}}});"OK"===l.responseCode&&a(l.result.map((e=>({...e,className:e.class.name,subjectName:e.subject.name,id:e._id}))))}else{const{data:l}=await(0,Se.Jt)(ke.r.assignment.list,{params:{schoolId:e._id,search:{class:t.class,section:t.section}}});"OK"===l.responseCode&&a(l.result.map((e=>({...e,className:e.class.name,subjectName:e.subject.name,id:e._id}))))}h(!1)}catch(l){console.log(l),h(!1)}},j=(0,tt.Wx)({initialValues:{class:"",section:""},onSubmit:p,enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});d(t.result.map((e=>({label:e.name,value:e._id})))),j.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,l.useEffect)((()=>{j.values.class&&((async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:j.values.class}}});m(t.result.map((e=>({label:e.name,value:e._id})))),j.setFieldValue("section",t.result[0]._id)}catch(t){console.log(t)}})(),p())}),[j.values.class,e._id]);(0,l.useEffect)((()=>{0===s&&i(null)}),[s]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Assignment"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{o(t)},value:s,labels:["Assignment",n&&0!=s?"Edit Assignment":"Add Assignment"]}),(0,re.jsxs)(Ct.A,{index:0,value:s,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:j.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:j,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:j,label:"Select Section",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{loading:x,size:"small",type:"submit",variant:"contained",sx:{ml:2},children:"Search"})})]})}),(0,re.jsx)(gt.A,{actions:["view","edit","delete"],bodyDataModal:"Assignment",bodyData:t,tableKeys:un,onEditClick:e=>{i({...e,class:e.class._id,subject:e.subject._id}),o(1)},onViewClick:e=>{try{e.file?window.open(e.file,"_blank"):window.open(e.link,"_blank")}catch(t){console.error("No file or link found in the data")}},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.assignment.delete+"/"+e);p(),j.handleSubmit()}catch(t){console.error(t)}}})]}),(0,re.jsx)(Ct.A,{index:1,value:s,children:(0,re.jsx)(xn,{dataToEdit:n,handleClose:()=>{o(0),i(null),p()},onUpdateFormik:j})})]})}const pn=[{name:"Title",key:"title"},{name:"Date",key:"date",isDate:!0},{name:"Is Public",key:"isPublic"}],jn=[{label:"Yes",value:!0},{label:"No",value:!1}];function gn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(!1),u=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.notice.list,{params:{schoolId:e._id}});a(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{u()}),[e]);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list),t=[{label:"All",value:"all"},...e.result.map((e=>({label:e.name,value:e._id})))];d(t)}catch(e){console.log(e)}})()}),[e]);const x=()=>{i(!1),o(null)},h=(0,tt.Wx)({initialValues:{title:s?s.title:"",date:null!==s&&void 0!==s&&s.date?Le()(s.date).format("YYYY/MM/DD"):null,noticeFor:s?s.noticeFor:"",notice:s?s.notice:"",isPublic:!!s&&s.isPublic},onSubmit:async t=>{try{const a={...t,schoolId:e._id,date:Le()(t.date).format("YYYY/MM/DD")};if(m(!0),s){await(0,Se.yJ)(ke.r.notice.update+"/"+s._id,a);u()}else{await(0,Se.bE)(ke.r.notice.create,a);u()}x()}catch(a){console.log(a)}m(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Notice"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"Notice",bodyData:t,tableKeys:pn,adding:c,onEditClick:e=>{console.log(e),o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.notice.delete+"/"+e);u()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Notice",onAddClick:()=>{i(!0)}}),(0,re.jsx)(jt,{open:n,formik:h,formTitle:s?"Update Notice":"Add Notice",onClose:x,submitButtonTitle:s?"Update":"Submit",adding:c,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"title",label:"Title",type:"text",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"date",formik:h,label:"Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"noticeFor",type:"text",formik:h,label:"Notice For",options:r,required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"notice",label:"Notice",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"isPublic",formik:h,label:"Is Public",options:jn,required:!0})})]})})]})}const yn=[{name:"Title",key:"title"},{name:"Date",key:"date",isDate:!0},{name:"Is Public",key:"isPublic"}],An=[{label:"Yes",value:!0},{label:"No",value:!1}];function fn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),u=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.news.list,{params:{schoolId:e._id}});o(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{u()}),[e]);const x=()=>{a(!1),i(null)},h=(0,tt.Wx)({initialValues:{title:(null===n||void 0===n?void 0:n.title)||"",date:(null===n||void 0===n?void 0:n.date)||null,date:null!==n&&void 0!==n&&n.date?Le()(n.date).format("YYYY/MM/DD"):null,news:(null===n||void 0===n?void 0:n.news)||"",shortNews:(null===n||void 0===n?void 0:n.shortNews)||"",isPublic:(null===n||void 0===n?void 0:n.isPublic)||!1},onSubmit:async t=>{try{const a=new FormData;if(a.append("title",t.title),a.append("schoolId",e._id),a.append("date",Le()(t.date).format("YYYY-MM-DD")),a.append("news",t.news),a.append("shortNews",t.shortNews),a.append("isPublic",t.isPublic),c.forEach((e=>a.append("file",e))),d(!0),n){await(0,Se.yJ)(ke.r.news.update+"/"+n._id,a,{headers:{"Content-Type":"multipart/form-data"}});u()}else{await(0,Se.bE)(ke.r.news.create,a,{headers:{"Content-Type":"multipart/form-data"}});u()}x()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"News"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"News",bodyData:s,tableKeys:yn,onEditClick:e=>{console.log(e),i(e),a(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.news.delete+"/"+e);u()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add News",onAddClick:()=>{a(!0)}}),(0,re.jsx)(jt,{open:t,formik:h,formTitle:n?"Update News":"Add News",onClose:x,submitButtonTitle:n?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"title",label:"Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"date",formik:h,label:"Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"isPublic",formik:h,label:"Is Public",options:An,required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"image",label:"Select Image",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}m(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:c,onRemove:e=>((e,t)=>{console.log(e,"gii"),m(c.filter((t=>t.name!=e)))})(e)})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{name:"shortNews",formik:h,label:"Short News",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"news",label:"News",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,display:"flex",justifyContent:"center",children:n&&n.image&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)("img",{src:n.image,alt:"image",style:{maxWidth:"100px",marginTop:"10px"}})})})]})})]})}const bn=[{name:"Title",key:"title"},{name:"From Date",key:"fromDate",isDate:!0},{name:"To Date",key:"toDate",isDate:!0},{name:"Is Public",key:"isPublic"}],vn=[{label:"Yes",value:!0},{label:"No",value:!1}];function Sn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),j=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.holiday.list,{params:{schoolId:e._id}});o(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{j(),y()}),[e]);const g=()=>{a(!1),i(null),j()},y=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});p(t.result.map((e=>({label:e.name,value:e._id})))),A.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}},A=(0,tt.Wx)({initialValues:{title:(null===n||void 0===n?void 0:n.title)||"",fromDate:null!==n&&void 0!==n&&n.fromDate?Le()(n.fromDate).format("YYYY/MM/DD"):null,toDate:null!==n&&void 0!==n&&n.toDate?Le()(n.toDate).format("YYYY/MM/DD"):null,note:(null===n||void 0===n?void 0:n.note)||"",isPublic:(null===n||void 0===n?void 0:n.isPublic)||"",class:(null===n||void 0===n?void 0:n.class)||"",section:(null===n||void 0===n?void 0:n.section)||""},onSubmit:async t=>{try{const a={...t,schoolId:e._id,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")};if(d(!0),n){await(0,Se.yJ)(ke.r.holiday.update+"/"+n._id,a)}else{await(0,Se.bE)(ke.r.holiday.create,a)}g()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});return(0,l.useEffect)((()=>{A.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:A.values.class}}});x(t.result.map((e=>({label:e.name,value:e._id})))),A.setFieldValue("section",t.result[0]._id)}catch(t){console.log(t)}})()}),[A.values.class,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Holiday"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"Holiday",bodyData:s,tableKeys:bn,onEditClick:e=>{console.log(e),i(e),a(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.holiday.delete+"/"+e);j()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Holiday",onAddClick:()=>{a(!0)}}),(0,re.jsx)(jt,{open:t,formik:A,formTitle:n?"Update Holiday":"Add Holiday",onClose:g,submitButtonTitle:n?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,name:"title",label:"Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"fromDate",formik:A,label:"From Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"toDate",formik:A,label:"To Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"isPublic",formik:A,label:"Is Public",options:vn,required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:A,name:"note",label:"Note"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,mt:1,children:(0,re.jsx)(Ea.A,{control:(0,re.jsx)(ca.A,{checked:c,onChange:e=>{m(e.target.checked)}}),label:"Update All student attendance as holiday"})}),c&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:A,label:"Select Class",options:h})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:A,label:"Select Section",options:u})})]})]})})]})}const kn=[{name:"Title",key:"title"},{name:"Date",key:"date",isDate:!0},{name:"Location",key:"location"},{name:"Is Public",key:"isPublic"}],Dn=[{label:"Yes",value:!0},{label:"No",value:!1}];function Cn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),u=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.awards.list,{params:{schoolId:e._id}});a(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{u()}),[e]);const x=()=>{i(!1),o(null)},h=(0,tt.Wx)({initialValues:{title:(null===s||void 0===s?void 0:s.title)||"",date:null!==s&&void 0!==s&&s.date?Le()(s.date).format("YYYY/MM/DD"):null,location:(null===s||void 0===s?void 0:s.location)||"",hostedBy:(null===s||void 0===s?void 0:s.hostedBy)||"",headlines:(null===s||void 0===s?void 0:s.headlines)||"",note:(null===s||void 0===s?void 0:s.note)||"",isPublic:(null===s||void 0===s?void 0:s.isPublic)||!1},onSubmit:async(t,a)=>{let{resetForm:l}=a;const n=new FormData;n.append("title",t.title),n.append("date",Le()(t.date).format("YYYY-MM-DD")),n.append("location",t.location),n.append("hostedBy",t.hostedBy),n.append("headlines",t.headlines),n.append("note",t.note),n.append("isPublic",t.isPublic),c.forEach((e=>n.append("file",e))),n.append("schoolId",e._id);try{if(d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.awards.update+"/"+s._id,n,{headers:{"Content-Type":"multipart/form-data"}});u()}else{const{data:e}=await(0,Se.bE)(ke.r.awards.create,n,{headers:{"Content-Type":"multipart/form-data"}});l(),u()}x()}catch(i){console.error(i)}d(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Award And Achievements"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"Award and Achievements",bodyData:t,tableKeys:kn,onEditClick:e=>{console.log(e),o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.awards.delete+"/"+e);u()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Awards & Achievement",onAddClick:()=>{i(!0)}}),(0,re.jsx)(jt,{open:n,formik:h,formTitle:s?"Update Awards & Achievement":"Add Awards & Achievement",onClose:x,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"title",label:"Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"location",label:"Location",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"date",formik:h,label:"Date"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"hostedBy",label:"Hosted By",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"headlines",label:"Headlines",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"image",label:"Select Image",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}m(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:c,onRemove:e=>((e,t)=>{m(c.filter((t=>t.name!=e)))})(e)})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"isPublic",formik:h,label:"Is Public",options:Dn})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"note",label:"Note"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,display:"flex",justifyContent:"center",children:s&&s.image&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)("img",{src:s.image,alt:"image",style:{maxWidth:"100px",marginTop:"10px"}})})})]})})]})}const wn=[{name:"Title",key:"title"},{name:"Text",key:"text"}];function In(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)([]),c=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.splashNews.list,{params:{schoolId:e._id}}),a=t.result.filter((e=>"Popup"!==e.type));d(a)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{c()}),[e]);const m=()=>{a(!1),i(null)},u=(0,tt.Wx)({initialValues:{title:(null===n||void 0===n?void 0:n.title)||"",text:(null===n||void 0===n?void 0:n.text)||""},onSubmit:async(t,a)=>{let{resetForm:l}=a;try{o(!0);const a={...t,schoolId:e._id};if(c(),n){await(0,Se.yJ)(ke.r.splashNews.update+"/"+n._id,a);c()}else{await(0,Se.bE)(ke.r.splashNews.create,a);l(),c()}m()}catch(i){console.log(i)}o(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(gt.A,{actions:["edit","delete","switch"],bodyDataModal:"Horizontal Splash News",bodyData:r,tableKeys:wn,onEditClick:e=>{console.log(e),i(e),a(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.splashNews.delete+"/"+e);c()}catch(t){console.error(t)}},onToggleSwitch:async e=>{try{await(0,Se.yJ)(ke.r.splashNews.toggle+"/"+e._id);c()}catch(t){console.error(t)}},toggleStatus:"enabled"}),(0,re.jsx)(dt,{title:"Add Horizontal Splash News",onAddClick:()=>{a(!0)}}),(0,re.jsx)(jt,{open:t,formik:u,formTitle:n?"Update Horizontal Splash News":"Add Horizontal Splash News",onClose:m,submitButtonTitle:n?"Update":"Submit",adding:s,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"title",label:"Title"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"text",label:"Text"})})]})})]})}const Nn=[{name:"Title",key:"title"}],_n=[{label:"Link",value:"Link"},{label:"Text",value:"Text"},{label:"Image",value:"Image"},{label:"Document",value:"Document"}];function Tn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),h=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.splashNews.list,{params:{schoolId:e._id}}),a=t.result.filter((e=>"Popup"===e.type));d(a),console.log(t.result,"result")}catch(t){console.log(t)}};(0,l.useEffect)((()=>{h()}),[e]);const p=()=>{a(!1),i(null)},j=(0,tt.Wx)({initialValues:{title:(null===n||void 0===n?void 0:n.title)||"",contentType:(null===n||void 0===n?void 0:n.contentType)||"",text:(null===n||void 0===n?void 0:n.text)||"",link:(null===n||void 0===n?void 0:n.link)||"",document:(null===n||void 0===n?void 0:n.document)||"",image:(null===n||void 0===n?void 0:n.image)||""},onSubmit:async(t,a)=>{let{resetForm:l}=a;const i=new FormData;i.append("title",t.title),i.append("link",t.link),i.append("text",t.text),i.append("type","Popup"),i.append("contentType",t.contentType),i.append("schoolId",e._id),c.forEach((e=>i.append("image",e))),u.forEach((e=>i.append("document",e)));try{if(o(!0),n){await(0,Se.yJ)(ke.r.splashNews.update+"/"+n._id,i,{headers:{"Content-Type":"multipart/form-data"}});h()}else{await(0,Se.bE)(ke.r.splashNews.create,i,{headers:{"Content-Type":"multipart/form-data"}});l(),h()}p()}catch(s){console.log(s)}o(!1)},enableReinitialize:!0}),g=(e,t)=>{m(c.filter((t=>t.name!=e))),x(u.filter((t=>t.name!=e)))},y=(e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"image"===t?m(l):x(l)}else console.log("No files selected")};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(gt.A,{actions:["edit","delete","switch"],bodyDataModal:"Popup Splash News",bodyData:r,tableKeys:Nn,onEditClick:e=>{console.log(e),i(e),a(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.splashNews.delete+"/"+e);h()}catch(t){console.error(t)}},onToggleSwitch:async e=>{try{await(0,Se.yJ)(ke.r.splashNews.toggle+"/"+e._id);h()}catch(t){console.error(t)}},toggleStatus:"enabled"}),(0,re.jsx)(dt,{title:"Add Vertical Splash News",onAddClick:()=>{a(!0)}}),(0,re.jsxs)(jt,{open:t,formik:j,formTitle:n?"Update Vertical Splash News":"Add Vertical Splash News",onClose:p,submitButtonTitle:n?"Update":"Submit",adding:s,children:[(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"title",label:"Title"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:j,name:"contentType",label:"Content Type",required:!0,options:_n})}),"Link"===j.values.contentType&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"link",label:"Link",required:!0})}),"Text"===j.values.contentType&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"text",label:"Text",required:!0})}),"Image"===j.values.contentType&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"image",multi:!1,label:"Select Photo",onChange:e=>y(e,"image"),customOnChange:!0,selectedFiles:c,onRemove:e=>g(e),accept:"image/jpeg, image/png"})}),"Document"===j.values.contentType&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"document",label:"Select File",onChange:e=>y(e,"document"),customOnChange:!0,selectedFiles:u,onRemove:e=>g(e),accept:"image/*,.pdf"})})]}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:n&&n.image&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)("img",{src:n.image,alt:"image",style:{maxWidth:"100px",marginTop:"10px"}})})})]})]})}function Mn(){const[e,t]=(0,l.useState)(0);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Splash News"}),(0,re.jsx)(Dt.A,{onChange:(e,a)=>{t(a)},value:e,labels:["Horizontal","Popup"]}),(0,re.jsx)(Ct.A,{index:0,value:e,children:(0,re.jsx)(In,{})}),(0,re.jsx)(Ct.A,{index:1,value:e,children:(0,re.jsx)(Tn,{})})]})}const Fn=[{name:"Gallery Title",key:"title"},{name:"Is view on web",key:"isPublic"}];function zn(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(0),[r,d]=(0,l.useState)(null),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)([]),[p,j]=(0,l.useState)(r?Le()(r.date):null);console.log(r,"gall dataToEdit");const g=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.gallery.list,{params:{schoolId:t._id}});n(e.result)}catch(e){console.log(e)}},y=(0,tt.Wx)({initialValues:{title:(null===r||void 0===r?void 0:r.title)||"",note:(null===r||void 0===r?void 0:r.note)||"",isPublic:(null===r||void 0===r?void 0:r.isPublic)||!1,date:null!==r&&void 0!==r&&r.date?Le()(r.date).format("YYYY/MM/DD"):null},onSubmit:async e=>{const a=new FormData;a.append("title",e.title),a.append("date",Le()(e.date).format("YYYY-MM-DD")),a.append("isPublic",!!e.isPublic),a.append("note",e.note),u.forEach((e=>a.append("file",e))),a.append("schoolId",t._id);try{if(m(!0),r){const{data:e}=await(0,Se.yJ)(ke.r.gallery.update+"/"+r._id,a,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.gallery.create,a,{headers:{"Content-Type":"multipart/form-data"}})}A()}catch(l){console.error(l)}m(!1)},enableReinitialize:!0}),A=()=>{o(0),d(null),x([]),g()};(0,l.useEffect)((()=>{g()}),[t]);(0,l.useEffect)((()=>{0===i&&y.resetForm()}),[i]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Gallery"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{o(t),d(null)},value:i,labels:["Gallery List","".concat(r&&0!=i?"Edit Gallery":"Add Gallery")]}),(0,re.jsx)(Ct.A,{index:0,value:i,children:(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"Gallery",bodyData:a,onEditClick:e=>{d(e),o(1)},tableKeys:Fn,onDeleteClick:async e=>{try{const{data:t}=await(0,Se.Jt)(ke.r.gallery.delete+"/"+e);g()}catch(t){console.log(t)}}})}),(0,re.jsx)(Ct.A,{index:1,value:i,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:y.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"title",formik:y,label:"Gallery Title"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:y,label:"Date",name:"date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"isPublic",formik:y,label:"Is Public Web",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{name:"images",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}x(l)}else console.log("No files selected")})(e),customOnChange:!0,label:"Select Image",selectedFiles:u,onRemove:e=>((e,t)=>{x(u.filter((t=>t.name!=e)))})(e)})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{name:"note",formik:y,label:"Note"})}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:12,m:2,gap:2,sx:{display:"flex",overflowX:"auto"},children:null===r||void 0===r||null===(e=r.images)||void 0===e?void 0:e.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{justifyContent:"center",backgroundSize:"cover","&:hover":{position:"relative",display:"inline-block"}},children:[(0,re.jsx)("img",{src:e,alt:"image",style:{width:"100px",height:"100px",borderRadius:"5px",boxShadow:"0px 0px 2px 0px gray",objectFit:"center"}}),(0,re.jsx)(h.A,{color:"error","aria-label":"delete",onClick:()=>(async e=>{try{const{data:t}=await(0,Se.yJ)(ke.r.gallery.removeFile+"/"+r._id,{file:e});d(t.result)}catch(t){console.log(t)}})(e),sx:{position:"absolute",top:0,right:0,borderRadius:"50px",padding:"2px",cursor:"pointer",background:"#DEE0E2"},children:(0,re.jsx)(Sa.A,{color:"error"})})]},t)))})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:A,children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",sx:{ml:2},children:"Submit"})]})]})})})]})}const En=[{name:"Subject",key:"subject"},{name:"Type",key:"type"},{name:"Message",key:"message"},{name:"Total SMS",key:"totalSMS"},{name:"Time/Date",key:"female"}];function qn(){const[e,t]=(0,l.useState)([]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Notifications"}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"Notifications",bodyData:e,tableKeys:En})]})}const Yn=[{name:"Event Title",key:"title"},{name:"Location",key:"location"},{name:"From Date",key:"fromDate",isDate:!0},{name:"To Date",key:"toDate",isDate:!0},{name:"Hosted By",key:"hostedBy"}];function Wn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),h=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.event.list,{params:{schoolId:e._id}});a(t.result)}catch(t){console.log(t)}},p=(0,tt.Wx)({initialValues:{title:(null===s||void 0===s?void 0:s.title)||"",eventFor:(null===s||void 0===s?void 0:s.eventFor)||"",location:(null===s||void 0===s?void 0:s.location)||"",fromDate:null!==s&&void 0!==s&&s.fromDate?Le()(s.fromDate).format("YYYY/MM/DD"):null,toDate:null!==s&&void 0!==s&&s.toDate?Le()(s.toDate).format("YYYY/MM/DD"):null,isPublic:(null===s||void 0===s?void 0:s.isPublic)||!1,video:(null===s||void 0===s?void 0:s.video)||null,shortEvent:(null===s||void 0===s?void 0:s.shortEvent)||"",note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async t=>{const a=new FormData;a.append("title",t.title),a.append("eventFor",t.eventFor),a.append("location",t.location),a.append("fromDate",Le()(t.fromDate).format("YYYY-MM-DD")),a.append("toDate",Le()(t.toDate).format("YYYY-MM-DD")),a.append("isPublic",!!t.isPublic),a.append("video",t.video),a.append("shortEvent",t.shortEvent),a.append("note",t.note),u.forEach((e=>a.append("file",e))),a.append("schoolId",e._id);try{if(d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.event.update+"/"+s._id,a,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.event.create,a,{headers:{"Content-Type":"multipart/form-data"}})}j()}catch(l){console.error(l)}d(!1)},enableReinitialize:!0}),j=()=>{i(!1),o(null),h()};(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);m(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),h()}),[e._id]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Events"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"events",bodyData:t,tableKeys:Yn,onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{const{data:t}=await(0,Se.Jt)(ke.r.event.delete+"/"+e);h()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Events",onAddClick:()=>{i(!0)}}),(0,re.jsx)(jt,{open:n,formik:p,formTitle:"Add Events",onClose:j,submitButtonTitle:"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:p.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"title",label:"Event Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:p,name:"eventFor",label:"Select Event For",required:!0,options:c})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"location",label:"Location",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,name:"fromDate",label:"From Date"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,formik:p,name:"toDate",label:"To Date"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"hostedBy",label:"Hosted By"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"video",label:"Video Link"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"image",onChange:e=>(e=>{const{files:t}=e.target;let a=[];if((null===t||void 0===t?void 0:t.length)>0){for(let e=0;e<(null===t||void 0===t?void 0:t.length);e++){const l=t[e];a.push(l)}x(a)}else console.log("No files selected")})(e),customOnChange:!0,label:"Select Photo",selectedFiles:u,multi:!1})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:p,name:"isPublic",label:"Is Web View",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,formik:p,name:"shortEvent",label:"Short event"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"note",label:"Note"})})]})})]})}const Rn=[{name:"Exam Grade",key:"grade"},{name:"Group",key:"group"},{name:"Grade Point",key:"gradePoint"},{name:"Percentage From",key:"markFrom"},{name:"Percentage To",key:"markTo"},{name:"Note",key:"note"}],Pn=[{label:"Scholastic",value:"scholastic"},{label:"Co-scholastic",value:"co-scholastic"}];function Jn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),c=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.examGrade.list,{params:{schoolId:e._id}});a(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{c()}),[e]);const m=()=>{i(!1),o(null)},u=(0,tt.Wx)({initialValues:{grade:(null===s||void 0===s?void 0:s.grade)||"",group:(null===s||void 0===s?void 0:s.group)||"",gradePoint:(null===s||void 0===s?void 0:s.gradePoint)||"",markFrom:(null===s||void 0===s?void 0:s.markFrom)||"",markTo:(null===s||void 0===s?void 0:s.markTo)||"",note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async t=>{const a={...t,schoolId:e._id};d(!0);try{if(s){const{data:e}=await(0,Se.yJ)(ke.r.examGrade.update+"/"+s._id,a);c()}else{const{data:e}=await(0,Se.bE)(ke.r.examGrade.create,a);c()}m()}catch(l){console.log(l)}d(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exam Grade"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:Rn,bodyDataModal:"exam grades",bodyData:t,onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.examGrade.delete+"/"+e);c()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Exam Grade",onAddClick:()=>{i(!0)}}),(0,re.jsx)(jt,{open:n,formik:u,formTitle:s?"Update Exam Grade":"Add Exam Grade",onClose:m,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"grade",label:"Exam Grade",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:u,name:"group",label:"Group",required:!0,options:Pn})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"gradePoint",label:"Grade Point",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,required:!0,name:"markFrom",label:"Mark From"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,required:!0,name:"markTo",label:"Mark To"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"note",label:"Note"})})]})})]})}const Vn=[{name:"Exam Title",key:"title"},{name:"Type",key:"examType"}],Bn=[{label:"Yes",value:!0},{label:"No",value:!1}],Ln=[{label:"Yes",value:!0},{label:"No",value:!1}],Un=[{label:"General",value:"general"},{label:"Competitive",value:"competitive"}];function On(){const[e,t]=(0,l.useState)([]),{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)(null),c=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:a._id}});t(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{c()}),[a]);const m=()=>{i(!1),d(null)},u=(0,tt.Wx)({initialValues:{title:(null===r||void 0===r?void 0:r.title)||"",examType:(null===r||void 0===r?void 0:r.examType)||"",marksAssignmentAllowed:(null===r||void 0===r?void 0:r.marksAssignmentAllowed)||!1,note:(null===r||void 0===r?void 0:r.note)||"",isPublic:(null===r||void 0===r?void 0:r.isPublic)||!1},onSubmit:async e=>{try{const t={...e,schoolId:a._id};if(o(!0),r){const{data:e}=await(0,Se.yJ)(ke.r.examTerm.update+"/"+r._id,t);c()}else{const{data:e}=await(0,Se.bE)(ke.r.examTerm.create,t);c()}m()}catch(t){console.log(t)}o(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exam Term"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"exam terms",bodyData:e,tableKeys:Vn,onEditClick:e=>{d(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.examTerm.delete+"/"+e);c()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Exam Term",onAddClick:()=>{i(!0)}}),(0,re.jsx)(jt,{open:n,formik:u,formTitle:r?"Update Exam Term":"Add Exam Term",onClose:m,submitButtonTitle:r?"Update":"Submit",adding:s,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"title",label:"Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:u,name:"examType",label:"Exam Type",required:!0,options:Un})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:u,name:"marksAssignmentAllowed",label:"Marks Assignment Allowed",options:Ln,required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:u,name:"isPublic",label:"Is Public",options:Bn})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"note",label:"Note"})})]})})]})}const Hn=[{name:"Exam Title",key:"title"},{name:"Type",key:"examType"}],Gn=[{name:"Subject",key:"name",path:"subject"},{name:"Date",key:"examDate",isDate:!0},{name:"Time",key:"startTime"},{name:"Max Marks",key:"maximumMarks"},{name:"Min Marks",key:"minimumMarks"}],Kn=[{label:"Yes",value:!0},{label:"No",value:!1}],Qn=[{label:"Yes",value:!0},{label:"No",value:!1}],Zn=[{label:"Active",value:"active"},{label:"In active",value:"inactive"}];function $n(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(0),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(null),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)([]),y=async t=>{try{const{data:l}=await(0,Se.Jt)(ke.r.examSchedule.list,{params:{schoolId:e._id,search:{class:t.class,examTerm:t.examTerm}}});a(l.result.map((e=>({...e,subject:e.subject}))))}catch(l){console.log(l)}},A=()=>{d(!1)},f=(0,tt.Wx)({initialValues:{class:"",examTerm:""},onSubmit:y,enableReinitialize:!0}),b=(0,tt.Wx)({initialValues:{examTerm:(null===u||void 0===u?void 0:u.examTerm._id)||"",class:(null===u||void 0===u?void 0:u.class._id)||"",subject:(null===u||void 0===u?void 0:u.subject._id)||"",examDate:null!==u&&void 0!==u&&u.examDate?Le()(u.examDate).format("YYYY/MM/DD"):null,startTime:(null===u||void 0===u?void 0:u.startTime)||"",endTime:(null===u||void 0===u?void 0:u.endTime)||"",marksFreezDate:null!==u&&void 0!==u&&u.marksFreezDate?Le()(null===u||void 0===u?void 0:u.marksFreezDate).format("YYYY/MM/DD"):null,maximumMarks:(null===u||void 0===u?void 0:u.maximumMarks)||"",pratical:(null===u||void 0===u?void 0:u.pratical)||"",minimumMarks:(null===u||void 0===u?void 0:u.minimumMarks)||"",praticalMarks:(null===u||void 0===u?void 0:u.praticalMarks)||"",showInHallTick:(null===u||void 0===u?void 0:u.showInHallTick)||"",showInExamResults:(null===u||void 0===u?void 0:u.showInExamResults)||"",orderSequence:(null===u||void 0===u?void 0:u.orderSequence)||"",praticalMarks:(null===u||void 0===u?void 0:u.praticalMarks)||"",showInHallTick:(null===u||void 0===u?void 0:u.showInHallTick)||!0,showInExamResults:(null===u||void 0===u?void 0:u.showInExamResults)||!0,obtainedMarks:(null===u||void 0===u?void 0:u.obtainedMarks)||0},onSubmit:async t=>{try{const a={...t,schoolId:e._id,examDate:Le()(t.examDate).format("YYYY/MM/DD"),marksFreezDate:Le()(t.marksFreezDate).format("YYYY/MM/DD")};if(m(!0),u){const{data:e}=await(0,Se.yJ)(ke.r.examSchedule.update+"/"+u._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.examSchedule.create,a)}A()}catch(a){console.log(a)}m(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:e._id}});o(l.result.map((e=>({...e,label:e.title,value:e._id})))),b.setFieldValue("examTerm",null===(t=l.result[0])||void 0===t?void 0:t._id),f.setFieldValue("examTerm",null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(l){console.log(l)}})(),(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});p(l.result.map((e=>({...e,label:e.name,value:e._id})))),b.setFieldValue("class",null===(t=l.result[0])||void 0===t?void 0:t._id),f.setFieldValue("class",null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(l){console.log(l)}})()}),[e]),(0,l.useEffect)((()=>{b.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:e._id,search:{class:b.values.class}}});g(t.result.map((e=>({...e,label:e.name,value:e._id})))),b.setFieldValue("subject",t.result[0]._id)}catch(t){console.log(t)}})()}),[e,b.values.class]),(0,l.useEffect)((()=>{f.values.class&&f.values.examTerm&&f.handleSubmit()}),[f.values.class,f.values.examTerm,e]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exam Schedule"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{i(t)},value:n,labels:["Exam List","Schedule List"]}),(0,re.jsxs)(Ct.A,{index:0,value:n,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:f,label:"Select Class"})})})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"exam list",bodyData:s,tableKeys:Hn})]}),(0,re.jsxs)(Ct.A,{index:1,value:n,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{name:"class",formik:f,label:"Select Class",options:h})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{name:"examTerm",formik:f,label:"Select Exam",options:s})})]})}),(0,re.jsx)(dt,{title:"Add Exam Schedule",onAddClick:()=>{d(!0)}}),(0,re.jsx)(jt,{open:r,formik:b,formTitle:u?"Update Exam Schedule":"Add Exam Schedule",onClose:A,submitButtonTitle:u?"Update":"Submit",adding:c,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:b,name:"examTerm",label:"Exam",required:!0,options:s})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:b,name:"class",label:"Class",required:!0,options:h})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:b,name:"subject",label:"Subject",required:!0,options:j})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"examDate",formik:b,label:"Exam Date"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"startTime",type:"time",formik:b,label:"Start Time"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"endTime",type:"time",formik:b,label:"End Time"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,label:"Marks Freez Date",formik:b,name:"marksFreezDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"pratical",formik:b,label:"Pratical"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"maximumMarks",formik:b,label:"Maximum Marks"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"minimumMarks",formik:b,label:"MinMarks"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:b,name:"orderSequence",label:"Order Sequence",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:b,name:"showInHallTick",label:"ShowIn HallTick",options:Kn})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:b,name:"showInExamResults",label:"Show In Exam Results",options:Qn})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:b,name:"praticalMarks",label:"Pratical Marks",options:Zn})})]})}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"schedule list",bodyData:t,tableKeys:Gn,onEditClick:e=>{x(e),d(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.examSchedule.delete+"/"+e);y(),f.handleSubmit()}catch(t){console.error(t)}}})]})]})}function Xn(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),r=(0,tt.Wx)({initialValues:{exam:"",class:"",section:""},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});a(t.result.map((e=>({...e,label:e.name,value:e._id})))),r.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:e._id}});o(t.result.map((e=>({...e,label:e.title,value:e._id})))),r.setFieldValue("exam",t.result[0]._id)}catch(t){console.log(t)}})()}),[e]),(0,l.useEffect)((()=>{r.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:r.values.class}}});i(t.result.map((e=>({...e,label:e.name,value:e._id})))),r.setFieldValue("section",t.result[0]._id)}catch(t){console.log(t)}})()}),[r.values.class,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exam Hall Ticket"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:r,label:"Select Exam",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:r,label:"Select Class",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:r,label:"Select Section",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Generate"})})]})})]})}function ei(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),r=(0,tt.Wx)({initialValues:{class:"",section:"",exam:""},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{(async()=>{try{var t;const{data:l}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});a(l.result.map((e=>({...e,label:e.name,value:e._id})))),r.setFieldValue("class",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:e._id}});o(a.result.map((e=>({label:e.title,value:e._id})))),r.setFieldValue("exam",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e]),(0,l.useEffect)((()=>{r.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:r.values.class}}});i(a.result.map((e=>({...e,label:e.name,value:e._id})))),r.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[r.values.class,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Division Wise Report"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:r,label:"Select Class",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:r,label:"Select Section",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:r,label:"Select Exam",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})})]})})]})}function ti(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),c=(0,tt.Wx)({initialValues:{class:"",section:"",subject:"",exam:""},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{(async()=>{try{var t;const{data:l}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});a(l.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("class",null===(t=l.result[0])||void 0===t?void 0:t._id)}catch(l){console.log(l)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:e._id}});o(a.result.map((e=>({label:e.title,value:e._id})))),c.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e]),(0,l.useEffect)((()=>{c.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:c.values.class}}});i(a.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[c.values.class,e]),(0,l.useEffect)((()=>{c.values.class&&c.values.section&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:e._id,search:{class:c.values.class,section:c.values.section}}});d(a.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("subject",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[c.values.class,c.values.section,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Subject Wise Report"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:c,label:"Select Class",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:c,label:"Select Section",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:c,label:"Select Subject",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:c,label:"Select Exam",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})})]})})]})}const ai=[{name:"Name",key:"name"}];function li(){const[e,t]=(0,l.useState)([]),{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),c=(0,tt.Wx)({initialValues:{class:"",section:""},onSubmit:console.log("nnnn")});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});i(e.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})()}),[a]),(0,l.useEffect)((()=>{c.values.class&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:a._id,search:{class:c.values.class}}});o(e.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("section",e.result[0]._id)}catch(e){console.log(e)}})()}),[c.values.class,a]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Consolidate Marks Sheet"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:c,label:"Select Class",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:c,label:"Select Section",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Add exams"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",gap:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"compress",formik:c,label:"Compress"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:c,label:"Select Exam"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,item:!0,display:"flex",alignItems:"center",children:[(0,re.jsx)(h.A,{color:"error",children:(0,re.jsx)(Sa.A,{})}),(0,re.jsx)(Xe.A,{children:"Add Subject"})]})]}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",gap:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"compress",formik:c,label:"Compress"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:c,label:"Select Subject"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,display:"flex",alignItems:"center",children:(0,re.jsx)(h.A,{color:"error",children:(0,re.jsx)(Sa.A,{})})})]})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"Consolidate marks card",bodyData:e,tableKeys:ai})]})}const ni=[{name:"Type",key:"type"},{name:"Published to web",key:"webPublish"},{name:"Published to app",key:"appPublish"}];function ii(){const[e,t]=(0,l.useState)([]),{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),c=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});o(e.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);i(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),c.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})()}),[a]),(0,l.useEffect)((()=>{c.values.class&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:a._id,search:{class:c.values.class}}});d(e.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("section",e.result[0]._id)}catch(e){console.log(e)}})()}),[c.values.class,a]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Marks Card"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:c,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:c,label:"Select Class",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:c,label:"Select Section",options:r})})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"marks card",bodyData:e,tableKeys:ni})]})}const si=[{name:"Name",key:"name"},{name:"Roll No",key:"roleNumber"},{name:"Photo",key:"image"},{name:"Exam Mark",key:"totalMarks"},{name:"Obtained Mark",key:"obtainedMarks"},{name:"Percentage",key:"percentage"},{name:"Grade",key:"overallGrade"},{name:"action",key:"true"}];function oi(e){var t,a;let{title:n="",open:i=!1,tableData:o,onClose:r=(()=>{})}=e;const{isDarkMode:d}=(0,l.useContext)(ot.A);return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(mt.A,{onClose:r,"aria-labelledby":"customized-dialog-title",open:i,children:[(0,re.jsx)(ut.A,{sx:{m:0,p:2,backgroundColor:d?"#333":"#fff",color:d?"#fff":"#000"},id:"customized-dialog-title",children:n}),(0,re.jsx)(h.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8,color:d?"#fff":"#000"},children:(0,re.jsx)(Sa.A,{})}),(0,re.jsxs)(xt.A,{sx:{backgroundColor:d?"#333":"#fff",color:d?"#fff":"#000"},children:[(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"S.No"}),(0,re.jsx)(da.A,{align:"center",children:"Subject"}),(0,re.jsx)(da.A,{align:"center",children:"Total Marks"}),(0,re.jsx)(da.A,{align:"center",children:"Obtained Marks"}),(0,re.jsx)(da.A,{align:"center",children:"Grade"})]})}),(0,re.jsx)(ma.A,{children:null===o||void 0===o||null===(t=o.subjects)||void 0===t?void 0:t.map(((e,t)=>{var a;return(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:null===e||void 0===e||null===(a=e.subject)||void 0===a?void 0:a.name}),(0,re.jsx)(da.A,{align:"center",children:null===e||void 0===e?void 0:e.totalMarks}),(0,re.jsx)(da.A,{align:"center",children:null===e||void 0===e?void 0:e.obtainedMarks}),(0,re.jsx)(da.A,{align:"center",children:null===e||void 0===e?void 0:e.grade})]})}))})]}),(0,re.jsxs)(s.A,{mt:1,children:[(0,re.jsxs)(u.A,{variant:"subtitle1",children:[(0,re.jsx)("b",{children:"Total Subject:"})," ",null===(a=o.subjects)||void 0===a?void 0:a.length]}),(0,re.jsxs)(u.A,{variant:"subtitle1",children:[(0,re.jsx)("b",{children:"Max Marks:"})," ",o.totalMarks]}),(0,re.jsxs)(u.A,{variant:"subtitle1",children:[(0,re.jsx)("b",{children:"Obtained Marks:"})," ",o.obtainedMarks]}),(0,re.jsxs)(u.A,{variant:"subtitle1",children:[(0,re.jsx)("b",{children:"Percentage: "}),o.percentage?o.percentage.toFixed(2):"0.00","%"]})]})]})]})})}function ri(){const[e,t]=(0,l.useState)([]),{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[y,A]=(0,l.useState)(!1),[f,b]=(0,l.useState)({open:!1,tableData:"",action:()=>{}}),v=(0,tt.Wx)({initialValues:{class:"",section:"",exam:""},onSubmit:async e=>{try{const{data:l}=await(0,Se.Jt)(ke.r.studentMarks.getExamResult,{params:{schoolId:a._id,classId:e.class,sectionId:e.section,examId:e.exam}});t(l.result.map((e=>{var t,a,l;return{...e,name:null===(t=e.student.basicInfo)||void 0===t?void 0:t.name,roleNumber:null===(a=e.student.academicInfo)||void 0===a?void 0:a.rollNumber,image:null===(l=e.student)||void 0===l?void 0:l.photo}})))}catch(l){console.log(l)}}});(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});i(t.result.map((e=>({...e,label:e.name,value:e._id})))),v.setFieldValue("class",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:a._id}});d(t.result.map((e=>({label:e.title,value:e._id})))),v.setFieldValue("exam",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[a]),(0,l.useEffect)((()=>{v.values.class&&(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:a._id,search:{class:v.values.class}}});o(t.result.map((e=>({...e,label:e.name,value:e._id})))),v.setFieldValue("section",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[v.values.class,a]),console.log(e,"bvd");return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exam Result"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:v,label:"Select Class",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:v,label:"Select Section",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:v,label:"Select Exam",options:r})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,sx:{alignSelf:"center"},item:!0,children:[(0,re.jsx)(pt.A,{onClick:v.handleSubmit,size:"small",variant:"contained",children:"Find"}),(0,re.jsx)(pt.A,{onClick:()=>A(!0),size:"small",variant:"contained",sx:{ml:1},children:"Bulk Upload"})]})]})}),(0,re.jsx)(gt.A,{actions:["view","download"],bodyDataModal:"exam result",bodyData:e,tableKeys:si,onViewClick:e=>{console.log(e,"vvvvvb"),b({...f,open:!0,tableData:e})}}),(0,re.jsx)(oi,{title:"Exam Result Information",open:null===f||void 0===f?void 0:f.open,tableData:(null===f||void 0===f?void 0:f.tableData)||[],onClose:e=>{b({...f,open:!1})}})]})}function di(e){let{name:t,label:a="default label",required:l=!1,onChange:n=(()=>{}),value:s,style:o={},...r}=e;const d=(0,i.A)();return(0,re.jsx)(Ft.A,{required:l,id:t,name:t,label:a,placeholder:"Enter ".concat(a),fullWidth:!0,value:s||"",onChange:n,sx:{mt:2,borderWidth:1,borderRadius:d.shape.borderRadius,...o},variant:"outlined",InputLabelProps:{shrink:!0},InputProps:{multiple:!0,style:{borderWidth:1,height:"40px",borderRadius:d.shape.borderRadius}},...r})}const ci={bgcolor:"background.paper",height:"auto",p:2};function mi(){const[e,t]=(0,l.useState)([]),a=(0,i.A)(),n=(0,ct.A)(a.breakpoints.down("sm")),{selectedSetting:o}=(0,l.useContext)(De.A),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)(!1),[b,S]=(0,l.useState)(!1),[k,D]=(0,l.useState)(!1),[C,w]=(0,l.useState)([]),I=(0,tt.Wx)({initialValues:{exam:"",class:"",section:"",subject:""},onSubmit:async e=>{try{S(!0);const{data:t}=await(0,Se.Jt)(ke.r.studentMarks.listStudentMarks,{params:{schoolId:o._id,classId:e.class,sectionId:e.section,subjectId:e.subject,examId:e.exam}});S(!1);let a=t.result.map((e=>{var t,a,l,n;return{rollNumber:e.academicInfo.rollNumber,name:e.basicInfo.name,studentId:e._id,obtainedMarks:(null===(t=e.studentMarks)||void 0===t?void 0:t.obtainedWrittenMarks)||0,comment:(null===(a=e.studentMarks)||void 0===a?void 0:a.comment)||"",grade:(null===(l=e.studentMarks)||void 0===l||null===(n=l.grade)||void 0===n?void 0:n.grade)||"NA"}}));y(a)}catch(t){S(!1),console.log(t)}}});(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:o._id}});d(t.result.map((e=>({...e,label:e.name,value:e._id})))),I.setFieldValue("class",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:o._id}});h(t.result.map((e=>({label:e.title,value:e._id})))),I.setFieldValue("exam",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[o]),(0,l.useEffect)((()=>{I.values.class&&(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:o._id,search:{class:I.values.class}}});m(t.result.map((e=>({...e,label:e.name,value:e._id})))),I.setFieldValue("section",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[I.values.class,o]),(0,l.useEffect)((()=>{I.values.class&&I.values.section&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:o._id,search:{class:I.values.class}}});j(e.result.map((e=>({...e,label:e.name,value:e._id})))),I.setFieldValue("subject",e.result[0]._id)}catch(e){console.log(e)}})()}),[I.values.class,I.values.section,o]),(0,l.useEffect)((()=>{y([])}),[I.values]);const N=(e,t)=>{let a=[...g];a[t][e.target.name]=e.target.value,y(a)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Manage Marks"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:I,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:I,label:"Select Section",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:I,label:"Select Exam",options:x})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:I,label:"Select Subject",options:p})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsxs)(v.A,{direction:"row",spacing:2,children:[(0,re.jsx)(pt.A,{loading:b,onClick:I.handleSubmit,size:"small",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{onClick:()=>D(!0),size:"small",variant:"contained",children:"Bulk Update"})]})})]})}),(0,re.jsx)(ia.A,{component:ue.A,children:(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"S.No"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Name"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Roll Number"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Obtained Marks"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Grade"}),(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"center",children:"Comment"})]})}),(0,re.jsx)(ma.A,{children:g.map(((e,t)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:e.name}),(0,re.jsx)(da.A,{align:"center",children:e.rollNumber}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(di,{type:"number",style:{maxWidth:"150px"},name:"obtainedMarks",value:e.obtainedMarks,label:"Obtained Marks",onChange:e=>N(e,t)})}),(0,re.jsx)(da.A,{align:"center",children:e.grade}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(di,{style:{maxWidth:"200px"},name:"comment",value:e.comment,label:"Comment",onChange:e=>N(e,t)})})]},e.studentId)))})]})}),g.length>0&&(0,re.jsx)(Kl,{content:(0,re.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,re.jsx)(pt.A,{loading:A,size:"small",sx:{background:"#1b3779",":hover":{background:"#1b3779"}},onClick:async()=>{try{const e={schoolId:o._id,classId:I.values.class,sectionId:I.values.section,subjectId:I.values.subject,examId:I.values.exam,studentMarks:g};f(!0);const{data:t}=await(0,Se.yJ)(ke.r.studentMarks.updateStudentsMarks,e);y(t.result.map((e=>{var t;return{studentId:e.student._id,rollNumber:e.student.academicInfo.rollNumber,name:e.student.basicInfo.name,obtainedMarks:e.obtainedWrittenMarks||0,comment:e.comment,grade:(null===e||void 0===e||null===(t=e.grade)||void 0===t?void 0:t.grade)||"NA"}}))),f(!1)}catch(e){console.log(e),f(!1)}},variant:"contained",children:"Update"})})}),(0,re.jsx)(mt.A,{fullScreen:n,open:k,onClose:()=>D(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:{xs:"100%",sm:350,md:350,lg:350}}}},children:(0,re.jsx)(s.A,{component:"form",onSubmit:async e=>{e.preventDefault();try{const e=new FormData;e.append("schoolId",o._id),e.append("classId",I.values.class),e.append("sectionId",I.values.section),e.append("subjectId",I.values.subject),e.append("examTermId",I.values.exam),C.forEach((t=>e.append("file",t)));const{data:t}=await(0,Se.yJ)(ke.r.studentMarks.bulkUpdateStudentMarks,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){}},sx:ci,children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:1,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(u.A,{variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Upload"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(pt.A,{variant:"contained",sx:{width:"100%",background:"rgb(27, 55, 121)",":hover":{background:"rgb(27, 55, 121)"},color:"#fff"},endIcon:(0,re.jsx)(Ll.A,{}),onClick:async e=>{e.preventDefault();try{const{data:e}=await(0,Se.Jt)(ke.r.studentMarks.getbulkUpdateStudentMarks,{params:{schoolId:o._id,classId:I.values.class,sectionId:I.values.section,subjectId:I.values.subject,examTermId:I.values.exam},responseType:"blob"});wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e,"studentMarks")}catch(t){}},children:"Download"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(pt.A,{variant:"contained",style:{width:"100%",background:"rgb(27, 55, 121)",":hover":{background:"rgb(27, 55, 121)"}},endIcon:(0,re.jsx)(Ll.A,{}),children:"Download All Students"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(Ul.A,{name:"student_marks",label:"Select updated File",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}w(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:C,onRemove:e=>((e,t)=>{w(C.filter((t=>t.name!=e)))})(e),multi:!1})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(pt.A,{variant:"contained",sx:{background:"rgb(27, 55, 121)",":hover":{background:"rgb(27, 55, 121)"}},type:"submit",children:"Update Marks"})})]})})})]})}const ui=[{name:"Photo",key:"image"},{name:"Name",key:"name"},{name:"Phone",key:"contactNumber"},{name:"Roll No",key:"roleNumber"},{name:"Attend All",key:"true"}];function xi(){const[e,t]=(0,l.useState)([]),{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),u=(0,tt.Wx)({initialValues:{class:"",section:"",exam:"",subject:""},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});i(e.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.examTerm.list,{params:{schoolId:a._id}});d(t.result.map((e=>({label:e.title,value:e._id})))),u.setFieldValue("exam",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[a]),(0,l.useEffect)((()=>{u.values.class&&(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:a._id,search:{class:u.values.class}}});o(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("section",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[u.values.class,a]),(0,l.useEffect)((()=>{u.values.class&&u.values.section&&(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:a._id,search:{class:u.values.class,section:u.values.section}}});m(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("subject",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[u.values.class,u.values.section,a]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Exam Attendance"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:u,label:"Select Class",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:u,label:"Select Section",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"exam",formik:u,label:"Select Exam",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:u,label:"Select Subject",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"exam attendance",bodyData:e,tableKeys:ui})]})}var hi=a(87539),pi=a(98533);const ji=(0,n.Ay)(da.A)((()=>({textAlign:"center"}))),gi=(0,n.Ay)(da.A)((()=>({fontWeight:"bold",textAlign:"center",color:"#ffff"}))),yi=(0,n.Ay)(s.A)((()=>({background:"rgb(133 140 223 / 19%)",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"10px",color:"black"})));function Ai(){const{selectedSetting:e}=(0,l.useContext)(De.A),t=(0,i.A)(),a=(0,ct.A)(t.breakpoints.down("sm")),[n,s]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(""),[p,j]=(0,l.useState)(),[g,y]=l.useState(!1),[A,f]=l.useState(!1),[b,k]=(0,l.useState)(null),[D,C]=(0,l.useState)(null),[w,I]=(0,l.useState)(!1),N=(0,_.Zp)(),[T,M]=l.useState(0),[F,z]=l.useState(10);(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});r(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[e]);const E=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.course.list,{params:{schoolId:e._id,search:{classIds:d}}});s(t.result)}catch(t){console.error(t)}};(0,l.useEffect)((()=>{d&&E()}),[d,e._id]);const q=()=>{y(!1),k(null)},Y=async e=>{try{await(0,Se.yH)(ke.r.course.delete+"/"+e);E()}catch(t){console.error(t)}};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Courses"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"flex-end",alignItems:"center",children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,re.jsx)(hl,{required:!0,name:"class",multiple:!0,value:d,onChange:e=>{c(e.target.value)},label:"Select Class",options:o})})})}),(0,re.jsxs)(ia.A,{component:ue.A,children:[(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(gi,{children:"S.No"}),(0,re.jsx)(gi,{children:"Class"}),(0,re.jsx)(gi,{children:"Course Name"}),(0,re.jsx)(gi,{children:"Subject "}),(0,re.jsx)(gi,{children:"Duration"}),(0,re.jsx)(gi,{children:"Content"}),(0,re.jsx)(gi,{children:"Material"}),(0,re.jsx)(gi,{children:"Action"})]})}),(0,re.jsx)(ma.A,{children:n.slice(T*F,T*F+F).map(((e,t)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(ji,{children:t+1}),(0,re.jsx)(ji,{children:e.class.map((e=>e.name)).join(" | ")}),(0,re.jsx)(ji,{children:e.title}),(0,re.jsx)(ji,{children:e.class.length>1?"Universal":e.subject.name}),(0,re.jsx)(ji,{children:e.courseHours}),(0,re.jsx)(ji,{children:(0,re.jsx)(Xe.A,{onClick:()=>(e=>{const t=n.find((t=>t._id===e));if(t){const a=t.title;N("/sch/lms/course-content",{state:{selectedCourseIds:e,selectedCourseTitle:a}})}})(e._id),children:"Upload"})}),(0,re.jsx)(ji,{children:(0,re.jsx)(S.A,{title:"Upload Material",children:(0,re.jsx)(Xe.A,{onClick:()=>((e,t)=>{if(y(!0),x(e),t){const e=new URL(t),a=decodeURIComponent(e.pathname.split("/").pop());k(a)}j(t)})(e._id,e.material),children:(0,re.jsx)(hi.A,{})})})}),(0,re.jsxs)(ji,{children:[(0,re.jsx)(S.A,{title:"Edit",children:(0,re.jsx)(Xe.A,{onClick:()=>(e=>{N("/sch/lms/edit-courses/".concat(e._id),{state:{courseData:e}})})(e),children:(0,re.jsx)(Ga.A,{color:"primary",fontSize:"small"})})}),(0,re.jsx)(S.A,{title:"Delete",children:(0,re.jsx)(h.A,{color:"error",size:"small",onClick:()=>f(e._id),children:(0,re.jsx)($a.A,{color:"error",fontSize:"small"})})}),(0,re.jsx)(tl,{deleteModal:A,handleDelete:Y,id:e._id,setDeleteModal:f})]})]},e._id)))})]}),!n.length&&(0,re.jsx)(u.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:"No data found"})]}),(0,re.jsx)(Oa.A,{rowsPerPageOptions:[10,25,50],component:"div",count:n.length,rowsPerPage:F,page:T,onPageChange:(e,t)=>{M(t)},onRowsPerPageChange:e=>{z(+e.target.value),M(0)},sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",my:1}}),(0,re.jsxs)(mt.A,{fullScreen:a,open:g,onClose:q,"aria-labelledby":"responsive-dialog-title",children:[(0,re.jsxs)(ut.A,{id:"responsive-dialog-title",sx:{fontSize:"20px",fontWeight:"bold"},children:["Upload Your Material"," ",n.material]}),(0,re.jsx)(xt.A,{children:(0,re.jsx)(pi.A,{children:(0,re.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];C(t)}})})}),(0,re.jsx)(xt.A,{children:b?(0,re.jsxs)(yi,{px:2,py:1,children:[(0,re.jsx)(u.A,{children:b}),(0,re.jsxs)(v.A,{direction:"row",children:[b?(0,re.jsx)(Xe.A,{size:"small",onClick:()=>{try{window.open(p,"_blank")}catch(e){console.error(e)}},color:"error",children:(0,re.jsx)(Ll.A,{fontSize:"small",color:"primary"})}):null,(0,re.jsx)(Xe.A,{size:"small",onClick:async e=>{e.preventDefault();try{await(0,Se.yH)(ke.r.course.deleteMaterial+"/"+m);E(),k(null)}catch(t){console.error(t)}},color:"error",children:(0,re.jsx)(Kt.A,{fontSize:"small"})})]})]}):""}),(0,re.jsxs)(ht.A,{children:[(0,re.jsx)(Xe.A,{variant:"contained",color:"error",size:"small",onClick:q,children:"Cancel"}),(0,re.jsx)(pt.A,{size:"small",variant:"contained",loading:w,onClick:async t=>{t.preventDefault(),I(!0);try{const t=new FormData;t.append("schoolId",e._id),t.append("file",D);const{data:a}=await(0,Se.yJ)(ke.r.course.uploadCourseMaterial+"/"+m,t,{headers:{"Content-Type":"multipart/form-data"}});I(!1),E(),q()}catch(a){console.error(a),I(!1)}I(!1)},autoFocus:!0,children:"Upload"})]})]}),(0,re.jsx)(dt,{onAddClick:()=>{N("/sch/lms/add-courses")}})]})}var fi=a(61041),bi=a(21786),vi=a(98703),Si=a(63481),ki=a(27199),Di=a(88645),Ci=a(59540);const wi=(0,n.Ay)(da.A)((()=>({width:"150px",fontSize:"15px",fontWeight:"bold",color:"black"})));function Ii(e){var t;let{chapter:a,courseId:l,onEditClick:n=(()=>{}),handelOpenDelModel:i=(()=>{}),handleDeleteChapter:o=(()=>{})}=e;return console.log(a,"gau"),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ia.A,{children:(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(wi,{align:"center",children:"S.No"}),(0,re.jsx)(wi,{align:"center",children:"Content Type"}),(0,re.jsx)(wi,{align:"center",children:"Content Title"}),(0,re.jsx)(wi,{align:"center",children:"Action"}),(0,re.jsx)(wi,{align:"center",children:"Sort"})]})}),(0,re.jsx)(ma.A,{children:null===(t=a.contents)||void 0===t?void 0:t.map(((e,t)=>{var l;return console.log(e,"ttete"),(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(u.A,{sx:{pr:"10px"},children:t+1})}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",columnGap:"5px"},children:["Video"===e.type?(0,re.jsx)(vi.A,{fontSize:"small",color:"error"}):null,"Quiz"===e.type?(0,re.jsx)(fi.A,{fontSize:"small",color:"success"}):null,"FlashCard"===e.type?(0,re.jsx)(Si.A,{fontSize:"small",color:"warning"}):null,"Material"===e.type?(0,re.jsx)(ki.A,{fontSize:"small",color:"info"}):null,"CodePractice"===e.type?(0,re.jsx)(bi.A,{fontSize:"small",sx:{color:"#1b3779"}}):null]})}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,re.jsx)(u.A,{variant:"inherit",children:null===(l=e.title)||void 0===l?void 0:l.substring(0,80)})})}),(0,re.jsxs)(da.A,{align:"center",children:[(0,re.jsx)(h.A,{onClick:()=>n(e),children:(0,re.jsx)(Ga.A,{fontSize:"small"})}),(0,re.jsx)(h.A,{color:"error",onClick:i,children:(0,re.jsx)(Ya.A,{color:"error",fontSize:"small"})})]}),(0,re.jsxs)(da.A,{align:"center",children:[t===a.contents.length-1?null:(0,re.jsx)(h.A,{children:(0,re.jsx)(Di.A,{})}),0===t?null:(0,re.jsx)(h.A,{children:(0,re.jsx)(Ci.A,{})})]})]})}))})]})})})}function Ni(e){let{open:t,title:a,courseId:n,chapter:i,dataToEdit:s,setDataToEdit:o=(()=>{}),setOpenVideo:r=(()=>{}),onUpdate:d=(()=>{}),Formik:c}=e;const{selectedSetting:m}=(0,l.useContext)(De.A),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),j=(0,tt.Wx)({initialValues:{title:(null===s||void 0===s?void 0:s.title)||"",contentHours:(null===s||void 0===s?void 0:s.contentHours)||"",video:(null===s||void 0===s?void 0:s.video)||""},onSubmit:async e=>{const t=new FormData,a={type:"Video",orderSequence:i.contents?i.contents.length+1:1,title:e.name,description:"",chapterId:null===i||void 0===i?void 0:i._id,contentHours:e.contentHours};t.append("material",JSON.stringify(a)),u.forEach((e=>t.append("file",e))),t.append("schoolId",m._id);try{if(p(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.courseContent.updateContent+"/"+n,t,{headerd:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.courseContent.addContentToChapter+"/"+n,t,{headers:{"Content-type":"multipart/form-data"}})}g(),d()}catch(l){console.error(l)}p(!1)},enableReinitialize:!0}),g=()=>{r(!1),o(null),c.setFieldValue("contents","")};return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(jt,{open:t,formik:j,formTitle:s?"Update ".concat(a):"Add ".concat(a),onClose:g,submitButtonTitle:s?"Update":"Submit",adding:h,children:(0,re.jsxs)(xe.Ay,{spacing:1,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"title",label:"Video Name 0/80*",required:!0,inputProps:{maxLength:80}})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"contentHours",label:"Content Hours",required:!0,type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(Ul.A,{name:"file",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}x(l)}else Ba.oR.error("No files selected")})(e),customOnChange:!0,selectedFiles:u,label:"Upload Video",multi:!1,accept:"video/*"})}),u.length?null===u||void 0===u?void 0:u.map((e=>(0,re.jsx)("video",{src:URL.createObjectURL(e),style:{backgroundColor:"black",margin:"20px 20px",borderRadius:"10px",overflow:"hidden",textAlign:"center"},controls:!0,type:"video/mp4"}))):""]})})})}const _i=(0,n.Ay)(Ma.A)((()=>({fontSize:"12px",fontWeight:580,color:"#616161",paddingLeft:"10px"}))),Ti=(0,n.Ay)(s.A)((()=>({display:"flex",justifyContent:"flex-start",alignItems:"center"}))),Mi={inputProps:{"aria-label":"Checkbox demo"}};function Fi(e){let{title:t,open:a,Formik:n,setOpenQuiz:i}=e;const[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([{question:"",options:["","","",""],correctOption:""}]),u=(0,tt.Wx)({initialValues:{title:"",contentHours:"",description:"",question:"",option:""},onSubmit:console.log("q")});return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(jt,{open:a,formik:u,formTitle:s?"Update ".concat(t):"Add ".concat(t),onClose:()=>{i(!1),o(null)},submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"title",label:"Title 0/80*",type:"text",required:!0,inputProps:{maxLength:80}})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"contentHours",label:"Content Hours",required:!0,type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"description",label:"Description"})}),null===c||void 0===c?void 0:c.map(((e,t)=>(0,re.jsxs)(xe.Ay,{container:!0,rowSpacing:2,sx:{margin:"20px",backgroundColor:"#F0F8FF",borderRadius:"5px",padding:"0 15px 20px 15px",border:"1px solid lightgrey"},children:[(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,children:[(0,re.jsxs)(_i,{children:[t+1,".",e.question?"Update Your Question!":"Write your question"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,size:"small",name:"question",value:e.question,placeholder:"Type here...",InputProps:{endAdornment:(0,re.jsx)(zt.A,{position:"end",children:t>0?(0,re.jsx)(h.A,{color:"error",size:"small"}):null})}})]}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,children:(0,re.jsx)(xe.Ay,{container:!0,rowGap:2,columnSpacing:2,children:e.options.map(((t,a)=>(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:6,children:[(0,re.jsxs)(Ti,{children:[(0,re.jsx)(qa.A,{size:"small",...Mi,color:"default",checked:e.correctOption&&e.correctOption===t,value:t,type:"radio"}),(0,re.jsxs)(_i,{children:["Option ",a+1]})]}),(0,re.jsx)(Ft.A,{fullWidth:!0,size:"small",name:"option".concat(a+1),value:t})]},a)))})})]},t)))]})})})}function zi(e){let{chapter:t,title:a,open:n,setOpenFlashcard:i,courseId:s,onUpdate:o=(()=>{}),setDataToEdit:r=(()=>{}),dataToEdit:d}=e;const{selectedSetting:c}=(0,l.useContext)(De.A),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)(!1);console.log(d,"dataToEdit"),console.log(t,"flash ch");const p=(0,tt.Wx)({initialValues:{title:(null===d||void 0===d?void 0:d.title)||"",contentHours:(null===d||void 0===d?void 0:d.contentHours)||"",description:(null===d||void 0===d?void 0:d.description)||"",cardType:(null===d||void 0===d?void 0:d.cardType)||"",text:(null===d||void 0===d?void 0:d.text)||""},onSubmit:async e=>{const a=new FormData,l={type:"FlashCard",orderSequence:t.contents?t.contents.length+1:1,flashCard:{cardType:e.cardType,text:"Text"},title:e.title,description:e.description,chapterId:null===t||void 0===t?void 0:t._id,contentHours:e.contentHours};if("Image"===e.cardType&&!m.length)return Ba.oR.error("Please select an Image file for Flash Card!");a.append("material",JSON.stringify(l)),m.forEach((e=>a.append("file",e))),a.append("schoolId",c._id);try{if(d){h(!0);const{data:e}=await(0,Se.yJ)(ke.r.courseContent.updateContent+"/"+s,a,{headerd:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.courseContent.addContentToChapter+"/"+s,a,{headers:{"Content-type":"multipart/form-data"}})}j(),o()}catch(n){console.log(n)}h(!1)},enableReinitialize:!0}),j=()=>{i(!1),r(null)};return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(jt,{open:n,formik:p,formTitle:d?"Update ".concat(a):"Add ".concat(a),onClose:j,submitButtonTitle:d?"Update":"Submit",adding:x,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"title",label:"Title 0/80*",type:"text",required:!0,inputProps:{maxLength:80}})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"contentHours",label:"Content Hours",required:!0,type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:p,required:!0,name:"cardType",label:"Select Card Type",options:[{label:"Flashcard Text",value:"Text"},{label:"Flashcard Image",value:"Image"}]})}),"Text"===p.values.cardType?(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"text",label:"Flashcard Text",required:"Text"===p.values.cardType})}):(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"file",required:"Image"===p.values.cardType,onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}u(l)}else Ba.oR.error("No files selected")})(e),customOnChange:!0,selectedFiles:m,label:"Upload Flashcard Image",accept:"image/*"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"description",label:"Description"})})]})})})}function Ei(e){let{chapter:t,courseId:a,title:n,open:i,setOpenMaterial:s,onUpdate:o=(()=>{}),setDataToEdit:r=(()=>{}),dataToEdit:d}=e;const{selectedSetting:c}=(0,l.useContext)(De.A),[m,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)([]),p=(0,tt.Wx)({initialValues:{title:(null===d||void 0===d?void 0:d.title)||"",contentHours:(null===d||void 0===d?void 0:d.contentHours)||""},onSubmit:async e=>{const l=new FormData,n={type:"Material",orderSequence:t.contents?t.contents.length+1:1,title:e.material,chapterId:t._id,contentHours:e.contentHours};l.append("material",JSON.stringify(n)),x.forEach((e=>l.append("file",e))),l.append("schoolId",c._id);try{if(d){u(!0);const{data:e}=await(0,Se.yJ)(ke.r.courseContent.updateContent+"/"+a,l,{headerd:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.courseContent.addContentToChapter+"/"+a,l,{headers:{"Content-type":"multipart/form-data"}})}j(),o()}catch(i){console.log(i)}u(!1)},enableReinitialize:!0}),j=()=>{s(!1),r(null)};return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(jt,{open:i,formik:p,formTitle:d?"Update ".concat(n):"Add ".concat(n),onClose:j,submitButtonTitle:d?"Update":"Submit",adding:m,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"title",label:"Material Name",required:!0,inputProps:{maxLength:80}})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:p,name:"contentHours",label:"Content Hours",required:!0,type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"file",required:!0,onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}h(l)}else Ba.oR.error("No files selected")})(e),customOnChange:!0,selectedFiles:x,label:"Upload Flashcard Image",accept:"image/*"})})]})})})}var qi=a(41952);function Yi(e){let{title:t,open:a,setOpenChaper:n=(()=>{}),setChapterData:i=(()=>{}),chapterData:s}=e;const{selectedSetting:o}=(0,l.useContext)(De.A),{courseId:r,onUpdate:d}=(0,l.useContext)(qi.A),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)(!1);console.log(s,"gaua");const h=(0,tt.Wx)({initialValues:{title:(null===s||void 0===s?void 0:s.title)||""},onSubmit:async e=>{try{if(x(!0),s){const t=new FormData;c.forEach((e=>t.append("file",e))),t.append("schoolId",o._id),t.append("chapterId",null===s||void 0===s?void 0:s._id),t.append("title",e.title);const{data:a}=await(0,Se.yJ)(ke.r.courseContent.updateChapterDetails+"/"+r,t,{headers:{"Content-Type":"multipart/form-data"}})}else{const t=new FormData,a={title:e.title};t.append("body",JSON.stringify(a)),c.forEach((e=>t.append("file",e))),t.append("schoolId",o._id),console.log(r,"courseId");const{data:l}=await(0,Se.bE)(ke.r.courseContent.create+"/"+r,t,{headers:{"Content-type":"multipart/form-data"}})}p()}catch(t){console.log(t)}x(!1)},enableReinitialize:!0}),p=()=>{n(!1),i(null),h.resetForm(),d()};return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(jt,{open:a,formik:h,formTitle:s?"Update ".concat(t):"Add ".concat(t),onClose:p,submitButtonTitle:s?"Update":"Submit",adding:u,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"title",label:"Chapter Name",required:!0,inputProps:{maxLength:80}})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"file",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}m(l)}else Ba.oR.error("No files selected")})(e),customOnChange:!0,selectedFiles:c,label:"Upload Material"})})]})})})}const Wi=(0,l.createContext)(null),Ri=[{id:1,label:"Video",value:"video"},{id:2,label:"Quiz",value:"quiz"},{id:3,label:"FlashCard",value:"flashcard"},{id:4,label:"Material",value:"material"}];function Pi(e){let{course:t,handleEditChapter:a=(()=>{})}=e;const{selectedSetting:n}=(0,l.useContext)(De.A),{chapter:i}=(0,l.useContext)(Wi),{courseId:o,onUpdate:r}=(0,l.useContext)(qi.A),[d,c]=(0,l.useState)(null),[m,x]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[A,f]=(0,l.useState)(!1),[b,v]=(0,l.useState)(!1),[k,D]=(0,l.useState)(!1);console.log(k,"openDeleteModel"),console.log(i,"chapter");const C=(0,tt.Wx)({initialValues:{contents:""},onSubmit:console.log("jj")});(0,l.useEffect)((()=>{"video"===C.values.contents?x("video"===C.values.contents):"quiz"===C.values.contents?j("quiz"===C.values.contents):"flashcard"===C.values.contents?y("flashcard"===C.values.contents):"material"===C.values.contents?f("material"===C.values.contents):v("codepractice"===C.values.contents)}),[C.values.contents,n._id]);const w=()=>{D(!0)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(s.A,{sx:{border:"1px solid lightgray",borderRadius:"5px",px:1,mb:3,backgroundColor:"aliceblue"},children:(0,re.jsxs)(xe.Ay,{container:!0,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:6,sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:(0,re.jsxs)(u.A,{width:"100%",variant:"h6",component:"div",fontWeight:600,fontSize:16,display:"flex",alignItems:"center",children:[(0,re.jsx)(S.A,{title:"Delete Chapter",children:(0,re.jsx)(h.A,{size:"small",color:"error",children:(0,re.jsx)(Ya.A,{fontSize:"small",color:"error",onClick:w})})}),(0,re.jsx)(S.A,{title:"Update Chapter",style:{color:"#1b3779"},children:(0,re.jsx)(h.A,{size:"small",children:(0,re.jsx)(Ga.A,{fontSize:"small",onClick:a})})}),"Chapter: ",null===i||void 0===i?void 0:i.title]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:6,sm:6,md:2,children:(0,re.jsx)(et.A,{required:!0,name:"contents",formik:C,label:"Add Content",options:Ri})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,re.jsx)(Ii,{chapter:i,courseId:o,onEditClick:e=>{let t=Ri.find((t=>t.label===(null===e||void 0===e?void 0:e.type)));C.setFieldValue("contents",null===t||void 0===t?void 0:t.value),c(e)},handelOpenDelModel:w})})]})}),(0,re.jsx)(tl,{deleteModal:k,handleDelete:async e=>{let t={...e,chapterId:e};try{const{data:e}=await(0,Se.yJ)(ke.r.courseContent.deleteChapter+"/"+o,t);r()}catch(a){console.error(a)}},id:null===i||void 0===i?void 0:i._id,setDeleteModal:D}),(0,re.jsx)(Ni,{title:"Video for Course",open:m,courseId:o,Formik:C,setOpenVideo:x,chapter:i,onUpdate:r,setDataToEdit:c,dataToEdit:d}),(0,re.jsx)(Fi,{title:"Quiz",open:p,courseId:o,Formik:C,setOpenQuiz:j,chapter:i,onUpdate:r}),(0,re.jsx)(zi,{title:"Flashcard",open:g,chapter:i,courseId:o,Formik:C,setOpenFlashcard:y,onUpdate:r,setDataToEdit:c,dataToEdit:d}),(0,re.jsx)(Ei,{title:"Material",open:A,Formik:C,chapter:i,courseId:o,setOpenMaterial:f,onUpdate:r,setDataToEdit:c,dataToEdit:d})]})}(0,n.Ay)("label")((()=>({fontWeight:650,fontSize:"15px",color:"#424242"})));const Ji=(0,n.Ay)(xe.Ay)((()=>({padding:1,display:"flex",justifyContent:"space-between",alignItems:"center"})));function Vi(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)({chapters:[]}),[c,m]=(0,l.useState)(null),u=(0,tt.Wx)({initialValues:{courseId:""},onSubmit:async e=>{try{const{data:a}=await(0,Se.Jt)(ke.r.courseContent.getDetailsTeachers+"/"+e.courseId,{params:{schoolId:t._id}});d(a.result)}catch(a){console.log(a)}},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:a}=await(0,Se.Jt)(ke.r.course.list,{params:{schoolId:t._id}});n(a.result.map((e=>({...e,label:e.title,value:e._id})))),u.setFieldValue("courseId",null===a||void 0===a||null===(e=a.result[0])||void 0===e?void 0:e._id)}catch(a){console.error(a)}})()}),[]),(0,l.useEffect)((()=>{a.length&&u.handleSubmit()}),[a,u.values.courseId]);return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(qi.A.Provider,{value:{courses:a,courseId:u.values.courseId,onUpdate:u.handleSubmit},children:[(0,re.jsx)(ce.A,{title:"Course Content"}),(0,re.jsx)(Ji,{container:!0,children:(0,re.jsxs)(xe.Ay,{item:!0,xs:12,sm:12,md:12,my:2,gap:2,display:"flex",alignItems:"center",children:[(0,re.jsx)(s.A,{sx:{width:260},children:(0,re.jsx)(et.A,{required:!0,name:"courseId",formik:u,label:"Select Course To Add Content",options:a})}),(0,re.jsx)(Xe.A,{variant:"contained",size:"medium",disabled:!a.length,startIcon:(0,re.jsx)(rt.A,{}),sx:{mt:1},multi:!1,onClick:e=>{o(!0)},children:"Chapter"})]})}),(0,re.jsx)(x.A,{}),null===(e=r.chapters)||void 0===e?void 0:e.map(((e,t)=>(0,re.jsx)(Wi.Provider,{value:{chapter:e},children:(0,re.jsx)(Pi,{chapter:e,courseId:u.values.courseId,course:r,handleEditChapter:()=>{return t=e,console.log(t,"upd"),o(!0),void m(t);var t}},t)}))),(0,re.jsx)(Yi,{title:"Chapter for Course",open:i,setOpenChaper:o,courseId:u.values.courseId,chapterData:c,setChapterData:m,onUpdate:()=>u.handleSubmit()})]})})}var Bi=a(28242),Li=a(86178),Ui=a.n(Li);const Oi=(0,n.Ay)(da.A)((()=>({textAlign:"center",color:"#ffff",fontWeight:600}))),Hi=(0,n.Ay)(da.A)((()=>({textAlign:"center"}))),Gi=(0,n.Ay)("label")((()=>({fontWeight:650,fontSize:"15px",color:"#424242",paddingLeft:"10px"}))),Ki=(0,n.Ay)(s.A)((()=>({display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"10px",marginBottom:1}))),Qi=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"27/09/2024 14:30").split(" "),t=e[0].split("/"),a=parseInt(t[2],10),l=parseInt(t[1],10)-1,n=parseInt(t[0],10),i=e[1].split(":"),s=parseInt(i[0],10),o=parseInt(i[1],10);return new Date(a,l,n,s,o)},Zi=(e,t,a,l)=>{let n=Date.now(),i="".concat(Ui()(e).format("DD/MM/YYYY")," ").concat(t,"}"),s="".concat(Ui()(a).format("DD/MM/YYYY")," ").concat(l),o="".concat(Ui()(n).format("DD/MM/YYYY")," ").concat(Ui()(n).format("LT")),r=Qi(i),d=Qi(s),c=Qi(o);return r>c?"Upcoming":r<c&&d>c?"Available":"Expired"},$i=[{label:"Student",value:"student"},{label:"Employee",value:"employee"}],Xi=[{label:"Single",value:"Single"},{label:"Class Students",value:"Class Students"},{label:"Selected",value:"Selected"}],es=[{label:"One-On-One Call",value:"OneONoneCall"},{label:"Group Call",value:"GroupCall"},{label:"Live Streaming",value:"LiveStreaming"}];function ts(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),[b,v]=(0,l.useState)([]),[k,D]=(0,l.useState)([]),w=(0,_.Zp)(),[I,N]=(0,l.useState)([]),[T,M]=l.useState(!1),[F,z]=(0,l.useState)("All"),E=async t=>{try{const{data:t}=await(0,Se.Jt)(ke.r.meeting.list,{params:{schoolId:e._id}});a(t.result),i(t.result)}catch(l){console.log(l)}},q=()=>{r(!1),x(null)};(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});j(t.result.map((e=>({...e,label:e.name,value:e._id})))),y(t.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);D(e.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[e]),(0,l.useEffect)((()=>{E()}),[e]),(0,l.useEffect)((()=>{Qi()}),[]);const Y=(0,tt.Wx)({initialValues:{classId:(null===m||void 0===m?void 0:m.classId)||[],expiryDate:null!==m&&void 0!==m&&m.expiryDate?Le()(m.expiryDate).format("YYYY/MM/DD"):null,expiryTime:(null===m||void 0===m?void 0:m.expiryTime)||"",startDate:null!==m&&void 0!==m&&m.startDate?Le()(null===m||void 0===m?void 0:m.startDate).format("YYYY/MM/DD"):null,startTime:(null===m||void 0===m?void 0:m.startTime)||"",createdBy:(null===m||void 0===m?void 0:m.createdBy)||"",meetingType:(null===m||void 0===m?void 0:m.meetingType)||"",participantType:(null===m||void 0===m?void 0:m.participantType)||"",userTypes:(null===m||void 0===m?void 0:m.userTypes)||[],participants:[],roles:[],section:[],employeeParticipants:[],studentParticipants:[]},onSubmit:async(t,a)=>{let{resetForm:l}=a;try{const a={...t,schoolId:e._id,startDate:Le()(t.startDate).format("YYYY/MM/DD"),expiryDate:Le()(t.expiryDate).format("YYYY/MM/DD"),participants:"Single"===Y.values.participantType?[Y.values.participants]:Y.values.participants,employeeParticipants:I.filter((e=>Y.values.roles.includes(e.role)&&Y.values.employeeParticipants.includes(e._id))),studentParticipants:b.filter((e=>{var t,a,l,n;return Y.values.classId.includes(null===e||void 0===e||null===(t=e.academicInfo)||void 0===t||null===(a=t.class)||void 0===a?void 0:a._id)&&Y.values.section.includes(null===e||void 0===e||null===(l=e.academicInfo)||void 0===l||null===(n=l.section)||void 0===n?void 0:n._id)&&Y.values.studentParticipants.includes(null===e||void 0===e?void 0:e._id)}))};if(c(!0),m){const{data:e}=await(0,Se.yJ)(ke.r.meeting.update+"/"+m._id,a);E(),q()}else{const{data:e}=await(0,Se.bE)(ke.r.meeting.create,a);E(),q()}}catch(n){console.log(n)}c(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{Y.values.roles&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id,search:{role:{$in:Y.values.roles}}}});console.log(t,"jjjjjjjjjjjjj"),N(t.result.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})()}),[Y.values.roles,e]),(0,l.useEffect)((()=>{Y.values.classId&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:Y.values.classId}}});f(t.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[Y.values.classId,e]),(0,l.useEffect)((()=>{Y.values.classId&&Y.values.section&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.class":Y.values.classId,"academicInfo.section":Y.values.section}}});v(t.result.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(t){console.log(t)}})()}),[Y.values.classId,Y.values.section,e]);(0,l.useEffect)((()=>{F&&i("All"===F?t:t.filter((e=>e.meetingType===F)))}),[F,e]);const W=async e=>{try{await(0,Se.yH)(ke.r.meeting.delete+"/"+e);E()}catch(t){console.error(t)}};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Live"}),(0,re.jsx)(Ki,{children:(0,re.jsxs)(Ta.A,{size:"small",sx:{m:1,minWidth:250},children:[(0,re.jsxs)(Gi,{id:"demo-simple-select-label",children:[(0,re.jsx)(Bi.A,{fontSize:"small"})," Filter Meeting"]}),(0,re.jsxs)(Fa.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",placeholder:"Select Course",value:F,onChange:e=>{z(e.target.value)},children:[(0,re.jsx)(C.A,{value:"All",children:" All "}),(0,re.jsx)(C.A,{value:"OneONoneCall",children:"One-On-One Call "}),(0,re.jsx)(C.A,{value:"GroupCall",children:"Group Call "}),(0,re.jsx)(C.A,{value:"LiveStreaming",children:"Live Streaming"})]})]})}),(0,re.jsxs)(ia.A,{component:ue.A,children:[(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(Oi,{children:"S.No"}),(0,re.jsx)(Oi,{children:"Meeting Date"}),(0,re.jsx)(Oi,{children:"Meeting Type"}),(0,re.jsx)(Oi,{children:"Status"}),(0,re.jsx)(Oi,{children:"Start Meeting"}),(0,re.jsx)(Oi,{children:"Action"})]})})," ",(0,re.jsx)(ma.A,{children:(n||t).map(((e,a)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(Hi,{children:a+1}),(0,re.jsxs)(Hi,{children:[Le()(e.startDate).format("DD-MM-YYYY"),", Time:"," ",e.startTime]}),(0,re.jsx)(Hi,{children:e.meetingType}),(0,re.jsx)(Hi,{children:(0,re.jsx)(s.A,{sx:{py:1,objectFit:"contain",borderRadius:"5px",background:"Expired"===Zi(e.startDate,e.startTime,e.expiryDate,e.expiryTime)?"#85848430":"#8281e74d"},children:Zi(e.startDate,e.startTime,e.expiryDate,e.expiryTime)})}),(0,re.jsx)(Hi,{children:(0,re.jsx)(Xe.A,{disabled:"Expired"===Zi(e.startDate,e.startTime,e.expiryDate,e.expiryTime),onClick:()=>(e=>{const a=t.find((t=>t._id===e));if(console.log(a),a){const e=a.meetingType;w("/sch/lms/room/".concat(a.roomId),{state:{meetingType:e}})}})(e._id),variant:"contained",size:"small",children:"Join"})}),(0,re.jsxs)(Hi,{children:[(0,re.jsx)(S.A,{title:"Edit",children:(0,re.jsx)(h.A,{size:"small",onClick:()=>(e=>{console.log(e,"idddddd"),x(e);let a=t.filter((t=>t._id==e))[0];if(a.userTypes.includes("employee")){let e=[];for(let t of a.employeeParticipants)e.filter((e=>e==t.role)).length<1&&e.push(t.role);Y.setFieldValue("roles",e),Y.setFieldValue("employeeParticipants",a.employeeParticipants.map((e=>e._id)))}if(a.userTypes.includes("student")){let e=[],t=[];for(let l of a.studentParticipants)t.filter((e=>e==l.academicInfo.class)).length<1&&t.push(l.academicInfo.section),e.filter((e=>e==l.academicInfo.class)).length<1&&e.push(l.academicInfo.class);Y.setFieldValue("classId",e),Y.setFieldValue("section",t),Y.setFieldValue("studentParticipants",a.studentParticipants.map((e=>e._id)))}"Class Students"===a.participantType&&Y.setFieldValue("classId",a.classId.map((e=>e._id))),Y.setFieldValue("meetingType",a.meetingType),Y.setFieldValue("expiryDate",a.expiryDate),Y.setFieldValue("startTime",a.startTime),Y.setFieldValue("expiryTime",a.expiryTime),Y.setFieldValue("participantType",a.participantType),Y.setFieldValue("userTypes",a.userTypes),r(!0)})(e._id),children:(0,re.jsx)(Ga.A,{color:"primary",fontSize:"small"})})}),(0,re.jsx)(S.A,{title:"Delete",children:(0,re.jsx)(h.A,{size:"small",onClick:()=>M(e._id),children:(0,re.jsx)($a.A,{fontSize:"small",color:"error"})})}),(0,re.jsx)(tl,{deleteModal:T,handleDelete:W,id:e._id,setDeleteModal:M})]})]})))})]}),!t.length&&(0,re.jsx)(s.A,{align:"center",colSpan:12,py:2,children:(0,re.jsx)(u.A,{variant:"h6",align:"center",children:"Live sessions Not found!"})}),0===!n.length&&(0,re.jsx)(s.A,{align:"center",colSpan:12,py:2,children:(0,re.jsx)(u.A,{variant:"h6",align:"center",children:"Live sessions Not found!"})})]}),(0,re.jsx)(jt,{open:o,formik:Y,formTitle:m?"Update Meeting":"Add Meeting",onClose:q,submitButtonTitle:m?"Update":"Submit",adding:d,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"meetingType",label:"Meeting Type",options:es})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"participantType",label:"Participant Type",options:Xi})}),("Single"===Y.values.participantType||"Selected"===Y.values.participantType)&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{multiple:!0,formik:Y,name:"userTypes",label:"User Type",options:$i})})}),Y.values.userTypes.includes("student")&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"classId",label:"Select Class",options:p})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"section",label:"Select Section",options:A})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"studentParticipants",multiple:"Single"!==Y.values.participantType,label:"Select Student",options:b})})]}),Y.values.userTypes.includes("employee")&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"roles",label:"Select Role",options:k})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"employeeParticipants",label:"Select Employee",options:I})})]}),"Class Students"===Y.values.participantType&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:Y,name:"classId",multiple:"Class Students"===Y.values.participantType,label:"Select Class",options:g})})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:Y,label:"Enter Start Date",name:"startDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:Y,label:"Enter Start Time",type:"time",name:"startTime",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:Y,label:"Enter Expiry Date",name:"expiryDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:Y,label:"Enter Expiry Time",type:"time",name:"expiryTime",required:!0})})]})}),(0,re.jsx)(dt,{title:"Add Meeting",onAddClick:()=>{r(!0)}})]})}const as=(0,n.Ay)(u.A)((()=>({border:"1px solid lightGrey",fontWeight:"600",padding:10,borderRadius:5,textAlign:"center"}))),ls=(0,n.Ay)(s.A)((()=>({display:"flex",justifyContent:"center",alignItems:"center"}))),ns=()=>{const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)({totalStorage:0,usedStorage:0});return(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.storage.details,{params:{schoolId:e._id}});a(t.result)}catch(t){console.error(t)}})()}),[e._id]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Storage"}),(0,re.jsx)(ls,{children:(0,re.jsx)(ue.A,{sx:{padding:4,width:{xs:"100%",sm:"70%",md:"50%",lg:"40%"}},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsxs)(as,{children:["Total Storage:"," ",(0,re.jsx)(u.A,{component:"span",fontWeight:"bold",color:"#607d8b",children:t.totalStorage})]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsxs)(as,{children:["Used Storage:"," ",(0,re.jsx)(u.A,{component:"span",fontWeight:"bold",color:"#607d8b",children:t.usedStorage})]})})]})})})]})},is=[{name:"Book Title",key:"title"},{name:"Book Id",key:"id"},{name:"Author",key:"author"},{name:"Book Cover",key:"bookCover",type:"image"},{name:"Price",key:"price"},{name:"Quantity",key:"quantity"},{name:"Issue",key:"issueNumber"},{name:"Available",key:"available"}],ss=(0,n.Ay)(ra.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",color:a?"#fff":"#000","&:nth-of-type(odd)":{backgroundColor:a?"transparent":"#F0F8FF"}}})),os=(0,n.Ay)(da.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",border:"1px solid gray",color:a?"#fff":"#000",["&.".concat(ba.A.head)]:{backgroundColor:a?"transparent":"blue",color:a?"#fff":"#000"},["&.".concat(ba.A.body)]:{fontSize:15}}}));function rs(e){let{title:t="",onClose:a=(()=>{}),open:n=!0,tableData:i,schoolName:s}=e;const{isDarkMode:o}=(0,l.useContext)(ot.A);return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ka,{title:t,onClose:a,open:n,children:(0,re.jsx)(sa.A,{"aria-label":"customized table",children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"School Name"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:s})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Book Title"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.title})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Book ID"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.id})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Author"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.author})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Language"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.language})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Quantity"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.quantity})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Price"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.price})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Almira No"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.almiraNo})]}),(0,re.jsxs)(ss,{isDarkMode:o,children:[(0,re.jsx)(os,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Created"}),(0,re.jsx)(os,{align:"left",width:100,isDarkMode:o,children:Le()(null===i||void 0===i?void 0:i.createdAt).format("DD-MM-YYYY")})]})]})})})})}function ds(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)({open:!1,tableData:"",schoolName:"",action:()=>{}}),h=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.book.list,{params:{schoolId:e._id}});a(t.result),console.log(t.result,"llllllllll")}catch(t){console.log(t)}};(0,l.useEffect)((()=>{h()}),[e]);const p=()=>{o(!1),i(null)},j=(0,tt.Wx)({initialValues:{title:(null===n||void 0===n?void 0:n.title)||"",id:(null===n||void 0===n?void 0:n.id)||"",department:(null===n||void 0===n?void 0:n.department)||"",cellNumber:(null===n||void 0===n?void 0:n.cellNumber)||"",isbnNo:(null===n||void 0===n?void 0:n.isbnNo)||"",edison:(null===n||void 0===n?void 0:n.edison)||"",author:(null===n||void 0===n?void 0:n.author)||"",language:(null===n||void 0===n?void 0:n.language)||"",price:(null===n||void 0===n?void 0:n.price)||"",quantity:(null===n||void 0===n?void 0:n.quantity)||"",almiraNo:(null===n||void 0===n?void 0:n.almiraNo)||""},onSubmit:async t=>{const a=new FormData;a.append("schoolId",e._id),a.append("title",t.title),a.append("id",t.id),a.append("department",t.department),a.append("cellNumber",t.cellNumber),a.append("isbnNo",t.isbnNo),a.append("edison",t.edison),a.append("author",t.author),a.append("language",t.language),a.append("price",t.price),a.append("quantity",t.quantity),a.append("almiraNo",t.almiraNo),c.forEach((e=>a.append("bookCover",e)));try{if(d(!0),n){const{data:e}=await(0,Se.yJ)(ke.r.book.update+"/"+n._id,a,{headers:{"Content-Type":"multipart/form-data"}});h()}else{const{data:e}=await(0,Se.bE)(ke.r.book.create,a,{headers:{"Content-Type":"multipart/form-data"}});h()}p()}catch(l){console.log(l)}d(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Library"}),(0,re.jsx)(ue.A,{sx:{padding:2,mb:1},children:(0,re.jsxs)(v.A,{spacing:2,direction:{xs:"column",md:"row"},children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Download"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Count By title"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Stock Verification"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Bulk Upload"})]})}),(0,re.jsx)(gt.A,{actions:["edit","delete","view"],tableKeys:is,bodyDataModal:"book",bodyData:t,onEditClick:e=>{i(e),o(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.book.delete+"/"+e);h()}catch(t){console.error(t)}},onViewClick:t=>{x({...u,open:!0,tableData:t,schoolName:null===e||void 0===e?void 0:e.name})}}),(0,re.jsx)(dt,{title:"Add Books",onAddClick:()=>{o(!0)}}),(0,re.jsx)(jt,{open:s,formik:j,formTitle:n?"Update Books":"Add Books",onClose:p,submitButtonTitle:n?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"title",label:"Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"id",label:"Book Id",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"department",label:"Department",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"cellNumber",label:"Cell Number",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"isbnNo",label:"ISBN No"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"edison",label:"Edison"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"author",label:"Author"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"language",label:"Language"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"price",label:"Price"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"quantity",required:!0,label:"Quantity"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"almiraNo",label:"Almira No"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"bookCover",label:"Select Book",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}m(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:c,onRemove:e=>((e,t)=>{m(c.filter((t=>t.name!=e)))})(e)})})]})}),(0,re.jsx)(rs,{title:"Book Information",open:null===u||void 0===u?void 0:u.open,tableData:null===u||void 0===u?void 0:u.tableData,schoolName:null===u||void 0===u?void 0:u.schoolName,onClose:()=>{x({...u,open:!1})}})]})}const cs=[{name:"Title",key:"title"},{name:"Type",key:"type"},{name:"Issue Number",key:"issueNumber"},{name:"Volume Number",key:"volumeNumber"},{name:"Book Cover",key:"bookCover",type:"image"},{name:"Price",key:"price"},{name:"Quantity",key:"quantity"},{name:"Journal Entry Date",key:"entryDate",isDate:!0}];function ms(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),h=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.periodical.list);console.log(e,"perr"),a(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{h()}),[e._id]);const p=()=>{m(!1),i(null),h()},j=(0,tt.Wx)({initialValues:{title:(null===n||void 0===n?void 0:n.title)||"",type:(null===n||void 0===n?void 0:n.type)||"",department:(null===n||void 0===n?void 0:n.department)||"",issueNumber:(null===n||void 0===n?void 0:n.issueNumber)||"",volumeNumber:(null===n||void 0===n?void 0:n.volumeNumber)||"",quantity:(null===n||void 0===n?void 0:n.quantity)||"",price:(null===n||void 0===n?void 0:n.price)||"",entryDate:(null===n||void 0===n?void 0:n.entryDate)||""},onSubmit:async t=>{const a=new FormData;a.append("title",t.title),a.append("type",t.type),a.append("department",t.department),a.append("issueNumber",t.issueNumber),a.append("volumeNumber",t.volumeNumber),a.append("quantity",t.quantity),a.append("price",t.price),a.append("entryDate",Le()(t.entryDate).format("YYYY-MM-DD")),s.forEach((e=>a.append("bookCover",e))),a.append("schoolId",e._id);try{if(d(!0),n){const{data:e}=await(0,Se.yJ)(ke.r.periodical.update+"/"+n._id,a,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.periodical.create,a,{headers:{"Content-Type":"multipart/form-data"}})}p()}catch(l){console.error(l)}d(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Periodical List"}),(0,re.jsx)(ue.A,{sx:{padding:2,mb:1},children:(0,re.jsxs)(v.A,{spacing:2,direction:{xs:"column",md:"row"},children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{console.log("ggg")},children:"Download"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Count By title"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Bulk Upload"})]})}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:cs,bodyDataModal:"periodical list",bodyData:t,onEditClick:e=>{m(!0),h(),i(e)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.periodical.delete+"/"+e);h(),j.handleSubmit()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Periodical List",onAddClick:()=>{m(!0)}}),(0,re.jsx)(jt,{open:c,formik:j,formTitle:"Add Periodical List",onClose:p,submitButtonTitle:"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:j.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"title",label:"Periodical Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,formik:j,name:"type",label:"Select Type",options:[{label:"Journal",value:"journal"},{label:"Magazine",value:"magazine"},{label:"Newspaper",value:"newspaper"}]})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"department",label:"Department",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"issueNumber",label:"Issue Number",type:"number",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"volumeNumber",label:"Volume Number",type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{required:!0,formik:j,name:"quantity",label:"Quantity",type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"price",label:"price",type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,formik:j,name:"entryDate",label:"Select Entry Date"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"bookCover",onChange:e=>(e=>{const{files:t}=e.target;let a=[];if(t.length>0){for(let e=0;e<t.length;e++){const l=t[e];a.push(l)}o(a)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:s,label:"Select Book Cover",accept:"image/*"})})]})})]})}const us=[{name:"Photo",key:"photo",type:"image"},{name:"Name",key:"name",path:"studentName"},{name:"Class",key:"name",path:"className"},{name:"Section",key:"name",path:"sectionName"},{name:"Roll No",key:"rollNumber",path:"rollNo"},{name:"Library Id",key:"id"}],xs=[{name:"Photo",key:"photo",type:"image"},{name:"Name",key:"name",path:"studentName"},{name:"Class",key:"name",path:"className"},{name:"Section",key:"name",path:"sectionName"},{name:"Roll No",key:"rollNumber",path:"rollNo"},{name:"Library Id",key:"id"}];var hs=a(70141),ps=a(48920);const js=e=>{let{onUpdate:t=(()=>{}),data:a={},actionType:n}=e;const[i,s]=(0,l.useState)(!1),[o,r]=(0,l.useState)(!1),d=()=>{r(!1)},c=(0,tt.Wx)({initialValues:{},onSubmit:async()=>{try{s(!0),"add"===n?await(0,Se.yJ)(ke.r.student.updateLibraryMember+"/"+a._id):await(0,Se.yH)(ke.r.student.removeLibraryMember+"/"+a._id),t(),d(),s(!1)}catch(e){console.log(e),s(!1)}}}),m="add"===n?"Add Member":"Remove Member",x="add"===n?"Do you want to add this student to the library member list?":"Do you want to remove this student from the library member list?";return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(v.A,{direction:"row",spacing:1,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",startIcon:"add"===n?(0,re.jsx)(hs.A,{}):(0,re.jsx)(ps.A,{}),onClick:()=>{r(!0)},children:"Member"})}),(0,re.jsx)(jt,{open:o,formik:c,formTitle:m,onClose:d,submitButtonTitle:"Submit",adding:i,children:(0,re.jsx)(xe.Ay,{spacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(u.A,{children:x})})})})]})};function gs(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),r=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id}}),a=t.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.libraryMember})).map((e=>({...e,studentName:e.basicInfo,className:e.academicInfo.class,sectionName:e.academicInfo.section,rollNo:e.academicInfo}))),l=t.result.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.otherInfo)&&void 0!==t&&t.libraryMember)})).map((e=>({...e,studentName:e.basicInfo,className:e.academicInfo.class,sectionName:e.academicInfo.section,rollNo:e.academicInfo})));i(a),o(l)}catch(t){console.log(t)}};return(0,l.useEffect)((()=>{r()}),[e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Library Member"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Student Member List","Student Non Member List"]}),(0,re.jsx)(Ct.A,{index:0,value:t,children:(0,re.jsx)(gt.A,{actions:["custom"],tableKeys:us,bodyData:n,bodyDataModal:"student",CustomAction:e=>(0,re.jsx)(js,{...e,actionType:"remove"}),onUpdate:r})}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(gt.A,{actions:["custom"],tableKeys:xs,bodyData:s,bodyDataModal:"student",CustomAction:e=>(0,re.jsx)(js,{...e,actionType:"add"}),onUpdate:r})})]})}const ys=[{name:"Name",key:"name",path:"issuedName"},{name:"Library Id",key:"id"},{name:"Title",key:"title",path:"bookName"},{name:"Book Id",key:"id",path:"bookId"},{name:"Issue Date",key:"issueDate",isDate:!0},{name:"Due Date",key:"dueDate",isDate:!0}],As=[{name:"Name",key:"name",path:"issuedName"},{name:"Library Id",key:"id"},{name:"Title",key:"title",path:"bookName"},{name:"Book Id",key:"id",path:"bookId"},{name:"Issue Date",key:"issueDate",isDate:!0},{name:"Due Date",key:"dueDate",isDate:!0}],fs=[{name:"Name",key:"name",path:"issuedName"},{name:"Library Id",key:"id"},{name:"Title",key:"title",path:"bookName"},{name:"Book Id",key:"id",path:"bookId"},{name:"Issue Date",key:"issueDate",isDate:!0},{name:"Due Date",key:"dueDate",isDate:!0}],bs=(0,n.Ay)(ue.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-around"}})),vs=[{label:"Student",value:"student"},{label:"Employee",value:"employee"}],Ss=e=>{let{onUpdate:t=(()=>{}),data:a={}}=e;const[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(!1),r=()=>{o(!1)},d=(0,tt.Wx)({initialValues:{},onSubmit:async()=>{try{i(!0),await(0,Se.yJ)(ke.r.bookIssue.submit+"/"+a._id),t(),r(),i(!1)}catch(e){console.log(e),i(!1)}}});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(v.A,{direction:"row",spacing:1,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{o(!0)},children:"Return"})}),(0,re.jsx)(jt,{open:s,formik:d,formTitle:"Return Book",onClose:r,submitButtonTitle:"Submit",adding:n,children:(0,re.jsx)(xe.Ay,{spacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(u.A,{children:"Are you sure you want to change the issue status to return?"})})})})]})};function ks(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),b=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.bookIssue.list,{params:{schoolId:e._id}}),a=t.result.filter((e=>null==e.submissionDate)).map((e=>({...e,bookName:e.book,bookId:e.book,issuedName:e.issuedTo.basicInfo}))),l=new Date,n=t.result.filter((e=>e.dueDate&&new Date(e.dueDate)<l&&null==e.submissionDate)).map((e=>({...e,bookName:e.book,bookId:e.book,issuedName:e.issuedTo.basicInfo})));o(a),y(n)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{b()}),[e]);const S=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.book.list,{params:{schoolId:e._id}});j(t.result.map((e=>({...e,label:e.title,value:e._id}))))}catch(t){console.log(t)}};(0,l.useEffect)((()=>{S(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id}}),a=t.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.libraryMember})).map((e=>({...e,label:e.basicInfo.name,value:e._id})));m(a)}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id}}),a=t.result.filter((e=>null===e||void 0===e?void 0:e.libraryMember)).map((e=>({...e,label:e.basicInfo.name,value:e._id})));h(a)}catch(t){console.log(t)}})()}),[e]);const k=(0,tt.Wx)({initialValues:{fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async t=>{try{const{data:a}=await(0,Se.Jt)(ke.r.bookIssue.list,{params:{schoolId:e._id,search:{fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")}}});console.log(a.result,"issues"),f(a.result.map((e=>({...e,bookName:e.book,bookId:e.book,issuedName:e.issuedTo.basicInfo})))),console.log(a.result,"histttttttttt")}catch(a){console.log(a)}}}),D=(0,tt.Wx)({initialValues:{issueDate:null,book:"",quantity:0,dueDate:null,issuedToType:"",issuedTo:""},onSubmit:async(t,a)=>{let{resetForm:l}=a;try{const a={...t,issueDate:Le()(t.issueDate).format("YYYY/MM/DD"),dueDate:Le()(t.dueDate).format("YYYY/MM/DD"),schoolId:e._id};d(!0);const{data:n}=await(0,Se.bE)(ke.r.bookIssue.create,a);b(),l(),C(),S()}catch(n){console.log(n)}d(!1)},enableReinitialize:!0}),C=()=>{i(!1)};return(0,l.useEffect)((()=>{k.handleSubmit()}),[e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Issue & Return"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Issue List","Due List","History List"]}),(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>{i(!0)},sx:{mt:1,mb:2},children:"Issue Book"}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsxs)(bs,{sx:{padding:1},children:[(0,re.jsxs)(u.A,{variant:"h6",fontWeight:"bold",fontSize:16,children:["Total Books:"," ",p.reduce(((e,t)=>e+t.leftInStock),0)]}),(0,re.jsxs)(u.A,{variant:"h6",fontWeight:"bold",fontSize:16,children:["Issued: ",s.length]}),(0,re.jsxs)(u.A,{variant:"h6",fontSize:16,fontWeight:"bold",children:["Due: ",g.length]})]}),(0,re.jsx)(gt.A,{actions:["custom"],tableKeys:fs,bodyData:s,bodyDataModal:"issue list",CustomAction:Ss,onUpdate:b})]}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(gt.A,{actions:["custom"],tableKeys:ys,bodyData:g,bodyDataModal:"due list",CustomAction:Ss,onUpdate:b})}),(0,re.jsxs)(Ct.A,{index:2,value:t,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)("form",{onSubmit:k.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(Yt.A,{formik:k,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(Yt.A,{formik:k,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,sx:{alignSelf:"center",mt:1},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsxs)(v.A,{spacing:2,direction:{xs:"column",md:"row"},children:[(0,re.jsx)(Xe.A,{size:"small",onClick:async()=>{try{wl("application/pdf",(await(0,Se.Jt)(ke.r.bookIssue.downloadPdf,{params:{schoolId:e._id,fromDate:k.values.fromDate,toDate:k.values.toDate}})).data,"Issue_Details.pdf")}catch(t){console.log(t)}},variant:"contained",children:"Download"}),(0,re.jsx)(Xe.A,{size:"small",onClick:async()=>{try{wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,Se.Jt)(ke.r.bookIssue.downloadExcel,{params:{schoolId:e._id,fromDate:k.values.fromDate,toDate:k.values.toDate},responseType:"blob"})).data,"Issue_Details.xlsx")}catch(t){console.log(t)}},variant:"contained",children:"Print"})]})})]})]})}),(0,re.jsx)(gt.A,{actions:[],bodyData:A,bodyDataModal:"list",tableKeys:As})]}),(0,re.jsx)(jt,{open:n,formik:D,formTitle:"Add Issue",onClose:C,submitButtonTitle:"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:D,name:"book",label:"Book",required:!0,options:p})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:D,name:"issueDate",label:"Issue Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"quantity",label:"Quantity",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:D,name:"dueDate",label:"Due Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:D,name:"issuedToType",label:"Issued To Type",required:!0,options:vs})}),"student"===D.values.issuedToType&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:D,name:"issuedTo",label:"Issued To",required:!0,options:c})}),"employee"===D.values.issuedToType&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:D,name:"issuedTo",label:"Issued To",required:!0,options:x})})]})})]})}const Ds=[{name:"Name",key:"name",path:"empName"},{name:"Phone",key:"contactNumber"},{name:"Library Id",key:"libraryId"}],Cs=[{name:"Name",key:"name",path:"empName"},{name:"Phone",key:"contactNumber"},{name:"Library Id",key:"libraryId"}];var ws=a(76164);const Is=e=>{let{onUpdate:t=(()=>{}),data:a={},actionType:n}=e;const[i,s]=(0,l.useState)(!1),[o,r]=(0,l.useState)(!1),d=()=>{r(!1)},c=(0,tt.Wx)({initialValues:{},onSubmit:async()=>{try{s(!0),"add"===n?await(0,Se.yJ)(ke.r.employee.updateLibraryMember+"/"+a._id):await(0,Se.yH)(ke.r.employee.removeLibraryMember+"/"+a._id),t(),d(),s(!1)}catch(e){console.log(e),s(!1)}}}),m="add"===n?"Add Member":"Remove Member",x="add"===n?"Do you want to add this employee to the library member list?":"Do you want to remove this employee from the library member list?";return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(v.A,{direction:"row",spacing:1,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",startIcon:"add"===n?(0,re.jsx)(hs.A,{}):(0,re.jsx)(ws.A,{}),onClick:()=>{r(!0)},children:"Member"})}),(0,re.jsx)(jt,{open:o,formik:c,formTitle:m,onClose:d,submitButtonTitle:"Submit",adding:i,children:(0,re.jsx)(xe.Ay,{spacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(u.A,{children:x})})})})]})};function Ns(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),r=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id}}),a=t.result.filter((e=>null===e||void 0===e?void 0:e.libraryMember)).map((e=>({...e,empName:e.basicInfo}))),l=t.result.filter((e=>!(null!==e&&void 0!==e&&e.libraryMember))).map((e=>({...e,empName:e.basicInfo})));i(a),o(l)}catch(t){console.log(t)}};return(0,l.useEffect)((()=>{r()}),[e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee Library Member"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Employee Member List","Employee Non Member List"]}),(0,re.jsx)(Ct.A,{index:0,value:t,children:(0,re.jsx)(gt.A,{actions:["custom"],tableKeys:Ds,bodyData:n,bodyDataModal:"employee",CustomAction:e=>(0,re.jsx)(Is,{...e,actionType:"remove"}),onUpdate:r})}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(gt.A,{actions:["custom"],tableKeys:Cs,bodyData:s,bodyDataModal:"employee",CustomAction:e=>(0,re.jsx)(Is,{...e,actionType:"add"}),onUpdate:r})})]})}const _s=[{name:"Name",key:"name"},{name:"Library Id",key:"id"},{name:"Title",key:"title"},{name:"Book Id",key:"bookId"},{name:"Issue Date",key:"issueDate"},{name:"Due Date",key:"dueDate"}],Ts=[{name:"Name",key:"name"},{name:"Library Id",key:"id"},{name:"Title",key:"title"},{name:"Book Id",key:"bookId"},{name:"Issue Date",key:"issueDate"},{name:"Due Date",key:"dueDate"}],Ms=[{name:"Name",key:"name"},{name:"Library Id",key:"id"},{name:"Title",key:"title"},{name:"Book Id",key:"bookId"},{name:"Issue Date",key:"issueDate"},{name:"Due Date",key:"dueDate"}],Fs=(0,n.Ay)(ue.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-around"}}));function zs(){const[e,t]=(0,l.useState)(0),[a,n]=(0,l.useState)([]),i=(0,tt.Wx)({initialValues:{fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:console.log("nnnn")});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee Issue & Return"}),(0,re.jsx)(Dt.A,{onChange:(e,a)=>t(a),value:e,labels:["Issue List","Due List","History List"]}),(0,re.jsxs)(Ct.A,{index:0,value:e,children:[(0,re.jsxs)(Fs,{sx:{padding:1},children:[(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",fontSize:16,children:"Total Books: 1"}),(0,re.jsx)(u.A,{variant:"h6",fontWeight:"bold",fontSize:16,children:"Issued: 1"}),(0,re.jsx)(u.A,{variant:"h6",fontSize:16,fontWeight:"bold",children:"Due: 1"})]}),(0,re.jsx)(gt.A,{actions:[],tableKeys:Ms,bodyData:a,bodyDataModal:"employee"})]}),(0,re.jsx)(Ct.A,{index:1,value:e,children:(0,re.jsx)(gt.A,{actions:[],tableKeys:Ts,bodyData:a})}),(0,re.jsxs)(Ct.A,{index:2,value:e,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(Yt.A,{formik:i,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:4,item:!0,children:(0,re.jsx)(Yt.A,{formik:i,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,sx:{alignSelf:"center",mt:1},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsxs)(v.A,{spacing:2,direction:{xs:"column",md:"row"},children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Download"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})})]})}),(0,re.jsx)(gt.A,{actions:[],tableKeys:_s})]})]})}var Es=a(51292);const qs=[{name:"Name",key:"name"},{name:"Leave Category",key:"leaveTypeFor"},{name:"Department",key:"departmentName"},{name:"Total",key:"total"}];var Ys=a(90573);const Ws=(0,n.Ay)(s.A)((()=>({flexWrap:"nowrap",overflowY:"hidden",overflowX:"auto",flexDirection:"column",display:"flex",margin:"10px 10px"}))),Rs=(0,n.Ay)(u.A)((()=>({fontSize:"14px",paddingRight:"5px",paddingLeft:"5px"}))),Ps=(0,n.Ay)(s.A)((()=>({display:"flex",justifyContent:"space-between",backgroundColor:"#f9f9f9",marginRight:"10px",alignItems:"center",borderRadius:"10@s",minWidth:"150px"})));function Js(e){let{}=e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)([]),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)({name:"",leaveTypeFor:"",departments:"",autoEarned:!1,total:0,isSpecial:!1,canResetCarryForward:!1,carryForwardCount:0,autoEarnCount:0});let{name:A,leaveTypeFor:f,departments:b,autoEarned:S,total:k,isSpecial:D,canResetCarryForward:w,carryForwardCount:I,autoEarnCount:N}=g;const _=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.leaveType.list,{params:{schoolId:t._id}});n(e.result.map((e=>({...e,departmentName:null===e||void 0===e?void 0:e.departments.map((e=>e.name)).join(", ")})))),console.log(e.result,"bbbnvghfhfd")}catch(e){console.log(e)}};(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.department.list);s(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),_()}),[t]);const T=()=>{c(!1),r(null)};let M=e=>{const{name:t,value:a}=e.target;"departments"===t?j(a):y({...g,[t]:a})};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Leave Type"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:qs,bodyDataModal:"leave type",bodyData:a,onEditClick:e=>{r(e),y({name:e.name,leaveTypeFor:e.leaveTypeFor,departments:e.departments.map((e=>e._id)),autoEarned:e.autoEarned,total:e.total,isSpecial:e.isSpecial,canResetCarryForward:e.canResetCarryForward,carryForwardCount:e.carryForwardCount,autoEarnCount:e.autoEarnCount}),j(e.departments.map((e=>e._id))),c(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.leaveType.delete+"/"+e);_()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Leave Type",onAddClick:()=>{c(!0)}}),(0,re.jsx)(mt.A,{open:d,onClose:T,PaperProps:{sx:{width:"100%",maxWidth:650}},children:(0,re.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0);let a={name:A,leaveTypeFor:f,departments:p,autoEarned:S,total:k,isSpecial:D,canResetCarryForward:w,carryForwardCount:I,autoEarnCount:N,schoolId:t._id};try{if(u(!0),o){const{data:e}=await(0,Se.yJ)(ke.r.leaveType.update+"/"+o._id,a);_()}else{const{data:e}=await(0,Se.bE)(ke.r.leaveType.create,a);_()}T()}catch(l){console.log(l)}y({name:"",leaveTypeFor:"",departments:"",autoEarned:!1,total:0,isSpecial:!1,canResetCarryForward:!1,carryForwardCount:0,autoEarnCount:0}),j([]),c(!1),u(!1)},children:[(0,re.jsx)(ut.A,{sx:{fontWeight:600},children:o?"Update  Leave Type":"Add  Leave Type"}),(0,re.jsx)(x.A,{}),(0,re.jsx)(xt.A,{p:2,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ta.A,{fullWidth:!0,children:(0,re.jsx)(Ft.A,{required:!0,id:"basic-standard",name:"name",size:"small",value:A,onChange:M,label:"Name",sx:{label:{fontSize:12}}})})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{size:"small",required:!0,children:"Select Leave Type"}),(0,re.jsxs)(Fa.A,{required:!0,label:"Select Leave Types",labelId:"demo-simpless-select-filled-label",id:"demo-simple-select-filled-l",name:"leaveTypeFor",value:f,onChange:M,children:[(0,re.jsx)(C.A,{value:"Student",children:"Student"}),(0,re.jsx)(C.A,{value:"Employee",children:"Employee"})]})]})}),"Employee"===(null===g||void 0===g?void 0:g.leaveTypeFor)&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,mt:2,children:[(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{size:"small",required:!0,children:"Select Department"}),(0,re.jsx)(Fa.A,{label:"Select Departments",labelId:"demo-simpless-select-filled-label",id:"demo-simple-select-filled-l",name:"departments",value:p||"",onChange:M,multiple:!0,children:i.map((e=>(0,re.jsx)(C.A,{value:e.value,children:e.label},e.value)))})]}),(0,re.jsx)(Ws,{children:p.map((e=>{var t;return(0,re.jsxs)(Ps,{children:[(0,re.jsx)(Rs,{component:"span",children:null===(t=i.filter((t=>t.value==e))[0])||void 0===t?void 0:t.label}),(0,re.jsx)(h.A,{color:"error",onClick:()=>(e=>{let t=p.filter((t=>t!=e));j(t)})(e),children:(0,re.jsx)(Ys.A,{fontSize:"small"})})]},e)}))})]}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,re.jsx)(Ta.A,{required:!0,fullWidth:!0,size:"small",children:(0,re.jsxs)(za.A,{size:"small",row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"isSpecial",sx:{display:"flex",alignItems:"center"},value:D,onChange:M,children:[(0,re.jsx)(Es.A,{id:"demo-row-radio-buttons-group-label",sx:{fontSize:"15px",fontWeight:600},children:"Is Special Type:"}),(0,re.jsxs)(v.A,{direction:"row",marginLeft:2,children:[(0,re.jsx)(Ea.A,{value:!0,control:(0,re.jsx)(qa.A,{size:"small"}),label:"Yes"}),(0,re.jsx)(Ea.A,{value:!1,control:(0,re.jsx)(qa.A,{size:"small"}),label:"No"})]})]})})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(Ta.A,{fullWidth:!0,size:"small",children:(0,re.jsx)(Ft.A,{required:!0,id:"basic-standard",size:"small",name:"total",value:k,onChange:M,label:"Total",sx:{label:{fontSize:12}},type:"number"})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,mt:2,children:(0,re.jsx)(Ta.A,{fullWidth:!0,size:"small",children:(0,re.jsxs)(za.A,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"autoEarned",sx:{display:"flex",alignItems:"center"},value:S,onChange:M,children:[(0,re.jsx)(Es.A,{id:"demo-row-radio-buttons-group-label",sx:{fontSize:"15px",fontWeight:600},children:"Is Leave Auto Earned:"}),(0,re.jsxs)(v.A,{direction:"row",marginLeft:2,children:[(0,re.jsx)(Ea.A,{value:!0,control:(0,re.jsx)(qa.A,{size:"small"}),label:"Yes"}),(0,re.jsx)(Ea.A,{size:"small",value:!1,control:(0,re.jsx)(qa.A,{size:"small"}),label:"No"})]})]})})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(Ta.A,{fullWidth:!0,size:"small",children:(0,re.jsx)(Ft.A,{required:!0,id:"basic-standard",size:"small",name:"autoEarnCount",value:N,onChange:M,label:"Enter Auto Earn Count",sx:{label:{fontSize:12}},type:"number"})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,mt:2,children:(0,re.jsx)(Ta.A,{fullWidth:!0,children:(0,re.jsxs)(za.A,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"canResetCarryForward",sx:{display:"flex",alignItems:"center"},value:w,onChange:M,children:[(0,re.jsx)(Es.A,{id:"demo-row-radio-buttons-group-label",sx:{fontSize:"15px",fontWeight:600},children:"Is Carryforward Reset:"}),(0,re.jsxs)(v.A,{direction:"row",marginLeft:2,children:[(0,re.jsx)(Ea.A,{size:"small",value:!0,sx:{fontSize:15},control:(0,re.jsx)(qa.A,{size:"small"}),label:"Yes"}),(0,re.jsx)(Ea.A,{size:"small",value:!1,sx:{fontSize:15},control:(0,re.jsx)(qa.A,{size:"small"}),label:"No"})]})]})})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(Ta.A,{fullWidth:!0,size:"small",children:(0,re.jsx)(Ft.A,{required:!0,id:"basic-standard",size:"small",name:"carryForwardCount",value:I,onChange:M,label:"Enter Carryforward Count",sx:{label:{fontSize:12}},type:"number"})})})]})]})}),(0,re.jsxs)(ht.A,{children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:T,children:"Close"}),(0,re.jsx)(pt.A,{size:"small",loading:m,variant:"contained",type:"submit",children:o?"Update":"Submit"})]})]})})]})}const Vs=[{name:"Name",key:"name"},{name:"Leave Type",key:"leaveType"},{name:"Number Of Days",key:"numberOfDays"},{name:"Start Date",key:"startDate"},{name:"End Date",key:"endDate"},{name:"Status",key:"status"}];function Bs(){const[e,t]=(0,l.useState)([]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Leave"}),(0,re.jsx)(gt.A,{actions:["edit"],tableKeys:Vs,bodyDataModal:"student leave",bodyData:e})]})}const Ls=[{name:"Name",key:"applierRoleName"},{name:"Leave Type",key:"leaveTypeName"},{name:"Number Of Days",key:"totalDays"},{name:"Start Date",key:"startDate",isDate:!0},{name:"End Date",key:"endDate",isDate:!0},{name:"Status",key:"leaveStatus"}],Us=[{name:"Name",key:"applierRoleName"},{name:"Leave Type",key:"leaveTypeName"},{name:"Number Of Days",key:"totalDays"},{name:"Start Date",key:"startDate",isDate:!0},{name:"End Date",key:"endDate",isDate:!0},{name:"Status",key:"leaveStatus"}],Os=(0,n.Ay)(ue.A)((e=>{let{theme:t}=e;return{height:"80px",padding:"20px",textAlign:"center"}})),Hs=(0,n.Ay)(xe.Ay)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px"}})),Gs=[{label:"FullDay",value:"fullday"},{label:"First half",value:"firstHalf"},{label:"Second half",value:"secondHalf"}],Ks=e=>{let{onUpdate:t=(()=>{}),data:a={}}=e;const[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(!1),{selectedSetting:r}=(0,l.useContext)(De.A);return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(v.A,{direction:"row",spacing:1,children:["pending"===a.leaveStatus||"rejected"===a.leaveStatus?(0,re.jsx)(pt.A,{loading:s,size:"small",onClick:async()=>{try{const e={schoolId:r._id};o(!0),await(0,Se.yJ)(ke.r.leaveApplication.approveLeave+"/"+a._id,e),t(),o(!1)}catch(e){console.log(e),o(!1)}},color:"success",variant:"contained",children:"Approve"}):null,"pending"===a.leaveStatus||"approved"===a.leaveStatus?(0,re.jsx)(pt.A,{loading:n,size:"small",onClick:async()=>{try{const e={schoolId:r._id};i(!0),await(0,Se.yJ)(ke.r.leaveApplication.rejectLeave+"/"+a._id,e),t(),i(!1)}catch(e){console.log(e),i(!1)}},color:"error",variant:"contained",children:"Reject"}):null]})})};function Qs(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)(null),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)([]),[h,p]=(0,l.useState)(0),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)([]),[f,b]=(0,l.useState)([]),[v,S]=(0,l.useState)([]),[k,D]=(0,l.useState)([]),C=()=>{r(!1),i(null)},w=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.leaveApplication.list,{params:{schoolId:e._id}});A(t.result.map((e=>({...e,leaveTypeName:e.leaveType.name}))))}catch(t){console.log(t)}},I=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.leaveApplication.listEmployeeApplications,{params:{schoolId:e._id}});b(t.result.map((e=>({...e,leaveTypeName:e.leaveType.name}))))}catch(t){console.log(t)}};(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.leaveType.list,{params:{schoolId:e._id}});g(t.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(t){console.log(t)}})(),w(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.leaveApplication.employeeLeaveCredits,{params:{schoolId:e._id}});D(t.result)}catch(t){console.log(t)}})(),I()}),[e]);const N=(0,tt.Wx)({initialValues:{leaveType:"",startDate:null,endDate:null,subject:"",description:""},onSubmit:async t=>{const a=new FormData;a.append("schoolId",e._id),a.append("leaveTypeId",t.leaveType),a.append("startDate",Le()(t.startDate).format("YYYY-MM-DD")),a.append("endDate",Le()(t.endDate).format("YYYY-MM-DD")),a.append("subject",t.subject),a.append("description",t.description),a.append("totalDays",h),m.forEach((e=>a.append("file",e)));try{c(!0);const{data:e}=await(0,Se.bE)(ke.r.leaveApplication.create,a);I(),C()}catch(l){console.log(l)}c(!1)},enableReinitialize:!0});return(0,l.useEffect)((()=>{let e=0;for(let t of v)t.value&&("fullday"===t.value?e+=1:e+=.5);p(e)}),[v]),(0,l.useEffect)((()=>{if(N.values.endDate&&N.values.startDate){const e=new Date(N.values.startDate),t=new Date(N.values.endDate);if(e<=t){const a=new Date(e);let l=[];for(;a<=t;){let e={value:"",date:new Date(a).toLocaleDateString()};l.push(e),a.setDate(a.getDate()+1)}S(l)}}}),[N.values.endDate,N.values.startDate]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee Leave"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Leave List","Leave Manage"]}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsxs)(Hs,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:4,md:4,lg:2,children:(0,re.jsx)(Os,{children:(0,re.jsx)(u.A,{fontSize:"15px",color:"#196838",children:"Total taken :89"})})}),k.map((e=>(0,re.jsx)(xe.Ay,{item:!0,xs:4,md:4,lg:2,children:(0,re.jsxs)(Os,{children:[(0,re.jsxs)(u.A,{fontSize:"15px",children:[e.name,":",e.total]}),(0,re.jsxs)(u.A,{fontSize:"15px",children:[" ","Total taken :",e.totalTaken?e.totalTaken:0]})]})})))]}),(0,re.jsx)(gt.A,{actions:[],tableKeys:Us,bodyData:f,bodyDataModal:"leave"})]}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(gt.A,{actions:["custom"],tableKeys:Ls,bodyData:y,bodyDataModal:"leave",CustomAction:Ks,onUpdate:w})}),(0,re.jsx)(dt,{title:"Add Employee Leave",onAddClick:()=>{r(!0)}}),(0,re.jsx)(jt,{open:o,formik:N,formTitle:n?"Update Employee Leave":"Add Employee Leave",onClose:C,submitButtonTitle:n?"Update":"Submit",adding:d,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:N,name:"leaveType",label:"Leave Type",required:!0,options:j})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:N,name:"startDate",label:"Start Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:N,name:"endDate",label:"End Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:N,name:"subject",label:"Subject"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:N,name:"description",label:"Description"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"image",label:"Select File",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}x(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:m,onRemove:e=>((e,t)=>{x(m.filter((t=>t.name!=e)))})(e)})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,sx:{margin:"15px 0px"},children:(0,re.jsxs)(u.A,{children:["Number of days : ",h]})}),N.values.endDate?(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(u.A,{required:!0,children:"Information :"}),N.values.endDate?(0,re.jsx)(s.A,{style:{height:"100px",overflow:"scroll"},children:v.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,re.jsx)(u.A,{children:e.date}),(0,re.jsx)(hl,{name:"totalDays",value:e.value,onChange:t=>((e,t)=>{const{name:a,value:l}=e.target,n=v.indexOf(t);let i=v.map(((e,t)=>t==n?{...e,value:l}:e));S(i)})(t,e),options:Gs})]},t)))}):(0,re.jsx)(re.Fragment,{})]}):(0,re.jsx)(re.Fragment,{})]})})]})}const Zs=[{label:"Student",value:"student"},{label:"Employee",value:"employee"}];function $s(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)(!1),[f,b]=(0,l.useState)(!1),v=async t=>{try{A(!0);wl("application/pdf",(await(0,Se.Jt)(ke.r.leaveApplication.downloadPdf,{params:{schoolId:e._id,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD"),userType:t.userType,academicYearId:t.academicYear},responseType:"blob"})).data,"leave_details.pdf"),A(!1)}catch(a){console.log(a),A(!1)}},S=async t=>{try{b(!0);wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,Se.Jt)(ke.r.leaveApplication.downloadExcel,{params:{schoolId:e._id,userType:t.userType,academicYearId:t.academicYear},responseType:"blob"})).data,"leave_details.xlsx"),b(!1)}catch(a){console.log(a),b(!1)}},k=(0,tt.Wx)({initialValues:{academicYear:"",type:"",class:"",section:"",student:"",role:"",employee:""},onSubmit:S}),D=(0,tt.Wx)({initialValues:{academicYear:"",fromDate:Le()(new Date),toDate:Le()(new Date),type:"",userType:"",class:"",section:"",student:"",role:"",employee:""},onSubmit:v});return(0,l.useEffect)((()=>{(k.values.class||D.values.class)&&(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:k.values.class||D.values.class}}});k.setFieldValue("section",null===(t=l.result[0])||void 0===t?void 0:t._id),D.setFieldValue("section",null===(a=l.result[0])||void 0===a?void 0:a._id),d(l.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(l){console.log(l)}})()}),[k.values.class,D.values.class]),(0,l.useEffect)((()=>{(async()=>{try{var e,t;const{data:a}=await(0,Se.Jt)(ke.r.academicYear.list);i(a.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),k.setFieldValue("academicYear",null===(e=a.result[0])||void 0===e?void 0:e._id),D.setFieldValue("academicYear",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});o(t.result.map((e=>({...e,label:e.name,value:e._id})))),k.setFieldValue("class",t.result[0]._id),D.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})(),(async()=>{try{var e,t;const{data:a}=await(0,Se.Jt)(ke.r.role.list);x(a.result.map((e=>({...e,label:e.name,value:e._id})))),k.setFieldValue("role",null===(e=a.result[0])||void 0===e?void 0:e._id),D.setFieldValue("role",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.error(a)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.leaveType.list,{params:{schoolId:e._id}});p(t.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[e._id]),(0,l.useEffect)((()=>{(k.values.academicYear&&k.values.class&&k.values.section||D.values.academicYear&&D.values.class&&D.values.section)&&(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:k.values.academicYear||D.values.academicYear,"academicInfo.class":k.values.class||D.values.class,"academicInfo.section":k.values.section||D.values.section}}});m(l.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),k.setFieldValue("student",null===(t=l.result[0])||void 0===t?void 0:t._id),D.setFieldValue("student",null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(l){console.log(l)}})()}),[k.values.academicYear,k.values.class,k.values.section,D.values.academicYear,D.values.class,D.values.section,e]),(0,l.useEffect)((()=>{(k.values.role||D.values.role)&&(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id,search:{role:k.values.role||D.values.role}}});g(l.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),k.setFieldValue("employee",null===(t=l.result[0])||void 0===t?void 0:t._id),D.setFieldValue("employee",null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(l){console.log(l)}})()}),[k.values.role,D.values.role]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Leave Report"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Summary","Leave Planner"]}),(0,re.jsx)(Ct.A,{index:0,value:t,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:k,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"type",formik:k,label:"Select Type",options:Zs})}),"student"===k.values.type&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:k,label:"Select Class",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:k,label:"Select Section",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:k,label:"Select Student",options:c})})]}),"employee"===k.values.type&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"role",formik:k,label:"Select Role",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"employee",formik:k,label:"Select Employee",options:j})})]}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,sx:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{loading:f,onClick:S,size:"small",variant:"contained",children:"Download"})})]})})}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:D,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:D,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:D,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"type",formik:D,label:"Select Type",options:h})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"userType",formik:D,label:"Select User Type",options:Zs})}),"student"===D.values.userType&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:D,label:"Select Class",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:D,label:"Select Section",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:D,label:"Select Student",options:c})})]}),"employee"===D.values.userType&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"role",formik:D,label:"Select Role",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"employee",formik:D,label:"Select Employee",options:j})})]}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,sx:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{loading:y,onClick:v,size:"small",variant:"contained",children:"Print"})})]})})})]})}const Xs=[{name:"Item Name",key:"name"},{name:"Department",key:"departmentName"},{name:"Item Id",key:"itemId"},{name:"Brand",key:"brand"}];function eo(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(0),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(null),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),j=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.item.list,{params:{schoolId:e._id}});a(t.result.map((e=>{var t;return{...e,departmentName:null===e||void 0===e||null===(t=e.department)||void 0===t?void 0:t.name}})))}catch(t){console.log(t)}},g=(0,tt.Wx)({initialValues:{name:(null===r||void 0===r?void 0:r.name)||"",department:(null===r||void 0===r?void 0:r.department)||"",brand:(null===r||void 0===r?void 0:r.brand)||"",itemId:(null===r||void 0===r?void 0:r.itemId)||"",description:(null===r||void 0===r?void 0:r.description)||""},onSubmit:async t=>{try{const a={...t,schoolId:e._id};if(m(!0),r){const{data:e}=await(0,Se.yJ)(ke.r.item.update+"/"+r._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.item.create,a)}y()}catch(a){console.log(a)}m(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.department.list);o(t.result.map((e=>({label:e.name,value:e._id})))),g.setFieldValue("department",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})(),j()}),[]);const y=()=>{i(0),j(),d(null)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Item"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{i(t)},value:n,labels:["Item List",r&&0!=n?"Edit Item":"Add Item"]}),(0,re.jsxs)(Ct.A,{index:0,value:n,children:[(0,re.jsx)(pt.A,{type:"submit",size:"small",variant:"contained",sx:{my:2},loading:u,onClick:async t=>{x(!0);try{const t=await(0,Se.Jt)(ke.r.item.downloadPdf,{responseType:"blob",params:{schoolId:e._id}}),a=URL.createObjectURL(t.data);window.open(a,"_blank")}catch(a){console.log(a)}x(!1)},children:"PDF"}),(0,re.jsx)(pt.A,{type:"submit",size:"small",variant:"contained",sx:{ml:2,my:2},loading:h,onClick:async t=>{p(!0),console.log("usha");try{const t=await(0,Se.Jt)(ke.r.item.downloadExcel,{responseType:"blob",params:{schoolId:e._id}}),a=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l;const i="InventoryItem.xlsx";n.setAttribute("download",i),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}catch(a){console.error("Error downloading the Excel file:",a),alert("Failed to download the file. Please try again.")}p(!1)},children:"Excel"}),(0,re.jsx)(gt.A,{actions:["edit"],bodyDataModal:"Items",bodyData:t,tableKeys:Xs,onEditClick:e=>{d({...e,department:e.department._id}),i(1)}})]}),(0,re.jsx)(Ct.A,{index:1,value:n,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:g.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:g,label:"Item name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"department",formik:g,label:"Select Department",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"brand",formik:g,label:"Brand"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"itemId",formik:g,label:"item Id"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!1,name:"description",formik:g,label:"Description"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:y,children:"Cancel"}),(0,re.jsx)(pt.A,{type:"submit",size:"small",variant:"contained",loading:c,sx:{ml:2},children:"Submit"})]})]})})}),(0,re.jsx)(Ct.A,{index:2,value:n,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:g,label:"Item name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"department",formik:g,label:"Select Department"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"brand",formik:g,label:"brand"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"id",formik:g,label:"Item Id"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!1,name:"note",formik:g,label:"Description"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2},children:"Update"})]})]})})})]})}const to=[{name:"Name",key:"name"}];function ao(){var e,t,a,n,i,s,o,r,d,c,m,x,h,p,j,g;const{selectedSetting:y}=(0,l.useContext)(De.A),[A,f]=(0,l.useState)(0),[b,v]=(0,l.useState)([]),[S,k]=(0,l.useState)(null),[D,C]=(0,l.useState)(!1),[w,I]=(0,l.useState)([]),N=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.vendor.list,{params:{schoolId:y._id}});console.log(e.result,"firm"),v(e.result.map((e=>{var t,a;return{...e,name:null===e||void 0===e||null===(t=e.addedBy)||void 0===t||null===(a=t.basicInfo)||void 0===a?void 0:a.name}})))}catch(e){console.log(e)}},_=(0,tt.Wx)({initialValues:{category:(null===S||void 0===S||null===(e=S.basicInfo)||void 0===e?void 0:e.category)||"",name:(null===S||void 0===S||null===(t=S.basicInfo)||void 0===t?void 0:t.name)||"",phone:(null===S||void 0===S||null===(a=S.basicInfo)||void 0===a?void 0:a.phone)||"",email:(null===S||void 0===S||null===(n=S.basicInfo)||void 0===n?void 0:n.email)||"",gstNumber:(null===S||void 0===S||null===(i=S.basicInfo)||void 0===i?void 0:i.gstNumber)||"",dealerName:(null===S||void 0===S||null===(s=S.basicInfo)||void 0===s?void 0:s.dealerName)||"",dealerPhoneNumber:(null===S||void 0===S||null===(o=S.basicInfo)||void 0===o?void 0:o.dealerPhoneNumber)||"",website:(null===S||void 0===S||null===(r=S.basicInfo)||void 0===r?void 0:r.website)||"",address:(null===S||void 0===S||null===(d=S.addressInfo)||void 0===d?void 0:d.address)||"",state:(null===S||void 0===S||null===(c=S.addressInfo)||void 0===c?void 0:c.state)||"",city:(null===S||void 0===S||null===(m=S.addressInfo)||void 0===m?void 0:m.city)||"",zipCode:(null===S||void 0===S||null===(x=S.addressInfo)||void 0===x?void 0:x.zipCode)||"",bankName:(null===S||void 0===S||null===(h=S.bankInfo)||void 0===h?void 0:h.bankName)||"",accountNumber:(null===S||void 0===S||null===(p=S.bankInfo)||void 0===p?void 0:p.accountNumber)||"",ifscCode:(null===S||void 0===S||null===(j=S.bankInfo)||void 0===j?void 0:j.ifscCode)||"",branchName:(null===S||void 0===S||null===(g=S.bankInfo)||void 0===g?void 0:g.branchName)||""},onSubmit:async e=>{console.log(e,"values");try{const t={basicInfo:{name:e.name,category:e.category,phone:e.phone,email:e.email,gstNumber:e.gstNumber,dealerName:e.dealerName,dealerPhoneNumber:e.dealerPhoneNumber,website:e.website},addressInfo:{address:e.address,state:e.state,city:e.city,zipCode:e.zipCode},bankInfo:{bankName:e.bankName,accountNumber:e.accountNumber,ifscCode:e.ifscCode,branchName:e.branchName},photo:e.photo,schoolId:y._id};C(!0);const a=new FormData;if(a.append("body",JSON.stringify(t)),w.forEach((e=>a.append("photo",e))),S){const{data:e}=await(0,Se.yJ)(ke.r.vendor.update+"/"+S._id,a,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.vendor.create,a,{headers:{"Content-Type":"multipart/form-data"}})}T()}catch(t){console.log(t)}C(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{N()}),[]);const T=()=>{f(0),N(),k(null)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Vendor"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{f(t)},value:A,labels:["Vendor List",S&&0!=A?"Edit Vendor":"Add Vendor"]}),(0,re.jsxs)(Ct.A,{index:0,value:A,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{my:2},children:"PDF"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2,my:2},children:"Excel"}),(0,re.jsx)(gt.A,{actions:["edit"],bodyDataModal:"Vendor",bodyData:b,tableKeys:to})]}),(0,re.jsx)(Ct.A,{index:1,value:A,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:_.handleSubmit,children:[(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:[(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Logo:"}),(0,re.jsx)(Ul.A,{name:"photo",multi:!1,label:"Select Logo",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"photo"===t&&I(l)}else console.log("No files selected")})(e,"photo"),customOnChange:!0,selectedFiles:w,onRemove:e=>((e,t)=>{I(w.filter((t=>t.name!=e)))})(e),accept:"image/jpeg, image/png"})]}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Basic Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"category",formik:_,label:"Category"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:_,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"phone",formik:_,label:"Phone no."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"email",formik:_,label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"gstNumber",formik:_,label:"GST Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"dealerName",formik:_,label:"Dealer Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"dealerPhoneNumber",formik:_,label:"Dealer Phone No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"website",formik:_,label:"Vendor Website"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Address Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"address",formik:_,label:"Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"city",formik:_,label:"City"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"state",formik:_,label:"State"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"zipCode",formik:_,label:"Zip Code"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Bank Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"bankName",formik:_,label:"Bank Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"accountNumber",formik:_,label:"Account No"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"ifscCode",formik:_,label:"IFSC Code"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"branchName",formik:_,label:"Branch Name"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:T,children:"Cancel"}),(0,re.jsx)(pt.A,{type:"submit",size:"small",variant:"contained",loading:D,sx:{ml:2},children:"Submit"})]})]})})}),(0,re.jsx)(Ct.A,{index:2,value:A,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:[(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:2,fontWeight:"bold"},children:"Logo:"}),(0,re.jsx)(At.A,{required:!0,name:"logo",formik:_,label:"logo",type:"file"})]}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Basic Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"category",formik:_,label:"Category"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:_,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"contactNumber",formik:_,label:"Phone no."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"email",formik:_,label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"gst",formik:_,label:"GST Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"dealerName",formik:_,label:"Dealer Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"dealerContact",formik:_,label:"Dealer Phone No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"vendorWebsite",formik:_,label:"Vendor Website"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Address Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"address",formik:_,label:"Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"city",formik:_,label:"City"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"state",formik:_,label:"State"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"zipCode",formik:_,label:"Zip Code"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Bank Information"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"bankName",formik:_,label:"Bank Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"accountNo",formik:_,label:"Account No"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"ifsc",formik:_,label:"IFSC Code"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"branchName",formik:_,label:"Branch Name"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2},children:"Update"})]})]})})})]})}const lo=[{name:"Item Id",key:"id"},{name:"Item Name",key:"name"},{name:"Total Price",key:"totalPrice"},{name:"Type",key:"type"},{name:"Date",key:"date"},{name:"Status",key:"status"}],no=[{label:"Cash",value:"Cash"},{label:"Upi",value:"Upi"},{label:"Netbanking",value:"Netbanking"},{label:"Cheque",value:"Cheque"},{label:"Card",value:"Card"},{label:"Others",value:"Others"},{label:"Null",value:"Null"}],io=[{label:"In",value:"In"},{label:"Out",value:"Out"}],so=[{label:"Inhouse",value:"Inhouse"},{label:"Damage",value:"Damage"},{label:"Purchase",value:"Purchase"},{label:"Sell",value:"Sell"},{label:"Return",value:"Return"},{label:"InventoryUpdate",value:"InventoryUpdate"}],oo=[{label:"Vendor",value:"Vendor"},{label:"School",value:"School"}],ro=[{label:"School",value:"School"},{label:"Vendor",value:"Vendor"},{label:"Student",value:"Student"},{label:"Employee",value:"Employee"}];function co(){const{settings:e,selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(0),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)([]),[f,b]=(0,l.useState)([]),[v,S]=(0,l.useState)([]),[k,D]=(0,l.useState)([]),[C,w]=(0,l.useState)([]),[I,N]=(0,l.useState)(e.map((e=>({label:e.name,value:e._id})))),_=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.vendor.list,{params:{schoolId:t._id}});console.log(e.result,"firm")}catch(e){console.log(e)}},T=(0,tt.Wx)({initialValues:{item:(null===o||void 0===o?void 0:o.item)||"",pricePerItem:(null===o||void 0===o?void 0:o.pricePerItem)||"",quantity:(null===o||void 0===o?void 0:o.quantity)||"",trasactionMode:(null===o||void 0===o?void 0:o.trasactionMode)||"",type:(null===o||void 0===o?void 0:o.type)||"",purpose:(null===o||void 0===o?void 0:o.purpose)||"",fromType:(null===o||void 0===o?void 0:o.fromType)||"",status:(null===o||void 0===o?void 0:o.status)||"",toType:(null===o||void 0===o?void 0:o.toType)||"",vendor:(null===o||void 0===o?void 0:o.vendor)||"",section:(null===o||void 0===o?void 0:o.section)||"",class:(null===o||void 0===o?void 0:o.class)||"",employee:(null===o||void 0===o?void 0:o.employee)||"",role:(null===o||void 0===o?void 0:o.role)||"",studentName:(null===o||void 0===o?void 0:o.studentName)||"",school:(null===o||void 0===o?void 0:o.school)||"",note:(null===o||void 0===o?void 0:o.note)||""},onSubmit:async e=>{console.log(e,"values");try{const a={...e,from:"vendor"===e.fromType?e.vendor:e.school,schoolId:t._id};c(!0);const l=new FormData;if(l.append("body",JSON.stringify(a)),v.forEach((e=>l.append("invoice",e))),o){const{data:e}=await(0,Se.yJ)(ke.r.vendor.update+"/"+o._id,l,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.vendor.create,l,{headers:{"Content-Type":"multipart/form-data"}})}M()}catch(a){console.log(a)}c(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{_(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.item.list);x(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.vendor.list,{params:{schoolId:t._id}});D(e.result.map((e=>{var t,a;return{label:null===(t=e.addedBy)||void 0===t||null===(a=t.basicInfo)||void 0===a?void 0:a.name,value:e._id}}))),T.setFieldValue("vendor",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:t._id}});A(e.result.map((e=>({label:e.name,value:e._id})))),T.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);w(e.result.map((e=>({label:e.name,value:e._id})))),T.setFieldValue("role",e.result[0]._id)}catch(e){console.log(e)}})()}),[t._id]),(0,l.useEffect)((()=>{T.values.class&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:t._id,search:{class:T.values.class}}});g(e.result.map((e=>({label:e.name,value:e._id})))),T.setFieldValue("section",e.result[0]._id)}catch(e){console.log(e)}})()}),[T.values.class]),(0,l.useEffect)((()=>{T.values.section&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:t._id,search:{"academicInfo.section":T.values.section}}});b(e.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),T.setFieldValue("studentName",e.result[0]._id)}catch(e){console.log(e)}})()}),[T.values.section,t._id]),(0,l.useEffect)((()=>{T.values.role&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:t._id,search:{role:T.values.role}}});p(e.result.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.basicInfo)||void 0===t?void 0:t.name,value:e._id}}))),T.setFieldValue("employee",e.result[0]._id)}catch(e){console.log(e)}})()}),[T.values.role]);const M=()=>{s(0),_(),r(null)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Transaction"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{s(t)},value:i,labels:["Transaction List","Make Transaction","Edit Transaction"]}),(0,re.jsx)(Ct.A,{index:0,value:i,children:(0,re.jsx)(gt.A,{actions:["edit"],bodyDataModal:"Transaction",bodyData:a,tableKeys:lo})}),(0,re.jsx)(Ct.A,{index:1,value:i,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"form",onSubmit:T.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mb:1,fontWeight:"bold"},children:"Item Details"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"item",formik:T,label:"Item",options:m})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"pricePerItem",formik:T,label:"Price Per Item",type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"quantity",formik:T,label:"Quantity"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",fontWeight:"bold"},children:"Transaction Details"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"trasactionMode",formik:T,label:"Mode of Payment",options:no})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"type",formik:T,label:"Type",options:io})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"purpose",formik:T,label:"Purpose",options:so})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",fontWeight:"bold"},children:"Transaction Between"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"fromType",formik:T,label:"From Type",options:oo})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"toType",formik:T,label:"To Type",options:ro})}),("Vendor"===T.values.fromType||"Vendor"===T.values.toType)&&(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vendor",formik:T,label:"Vendors",options:k})}),"Student"===T.values.toType&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:T,label:"Select Class",options:y})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:T,label:"Select Section",options:j})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"studentName",formik:T,label:"Select Student Name",options:f})})]}),("School"===T.values.fromType||"School"===T.values.toType)&&(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"school",formik:T,label:"Select School",options:I})}),"Employee"===T.values.toType&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"role",formik:T,label:"Select Role",options:C})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"employee",formik:T,label:"Select Employees",options:h})})]}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"note",formik:T,label:"Note"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(Ul.A,{name:"invoice",label:"Select Invoice",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"invoice"===t&&S(l)}else console.log("No files selected")})(e,"invoice"),customOnChange:!0,selectedFiles:v,onRemove:e=>((e,t)=>{S(v.filter((t=>t.name!=e)))})(e),accept:"image/*,.pdf"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:M,children:"Cancel"}),(0,re.jsx)(pt.A,{type:"submit",size:"small",variant:"contained",loading:d,sx:{ml:2},children:"Submit"})]})]})})}),(0,re.jsx)(Ct.A,{index:2,value:i,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",mb:1,fontWeight:"bold"},children:"Item Details"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"item",formik:T,label:"Item"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"price",formik:T,label:"Price per Item",type:"number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"quantity",formik:T,label:"Quantity"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",fontWeight:"bold"},children:"Transaction Details"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"mode",formik:T,label:"Mode of Payment"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"type",formik:T,label:"Type"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"purpose",formik:T,label:"Purpose"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"start",sx:{fontSize:"15px",fontWeight:"bold"},children:"Transaction Between"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"fromType",formik:T,label:"From Type"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"status",formik:T,label:"Transaction Status"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vender",formik:T,label:"Venders"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:T,label:"section"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"studentName",formik:T,label:"Student Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"school",formik:T,label:"School"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"note",formik:T,label:"Note"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:12,item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"outlined",sx:{my:2},children:"Upload Invoice"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:M,children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2},children:"Update"})]})]})})})]})}const mo=[{name:"Name",key:"name"},{name:"Description",key:"description"},{name:"Total Price",key:"totalPrice"},{name:"Total Stock",key:"totalStock"}],uo=(0,n.Ay)(ra.A)((e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover,width:"100%"}}})),xo=(0,n.Ay)(da.A)((e=>{let{theme:t}=e;return{border:"1px solid gray",["&.".concat(ba.A.head)]:{backgroundColor:t.palette.common.black,color:t.palette.common.white},["&.".concat(ba.A.body)]:{fontSize:15}}}));function ho(){return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(ia.A,{sx:{display:"grid",justifyContent:"center",my:2},children:[(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"div",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"Overview"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",sx:{display:{xs:"none",sm:"none",md:"inline-block",lg:"inline-block"}},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Purchase"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Issue"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Return"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Inhouse"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Damage"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Sell"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Inventory Quantity"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[0," Qty"]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold",width:300},children:"Total Inventory Amount"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]})]})}),(0,re.jsx)(sa.A,{"aria-label":"customized table",sx:{display:{xs:"none",sm:"inline-block",md:"none",lg:"none"}},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Purchase"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Issue"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Return"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Inhouse"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Damage"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Sell"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Inventory Quantity"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[0,"Qty"]}),(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Inventory Amount"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]})]})}),(0,re.jsx)(sa.A,{"aria-label":"customized table",sx:{display:{xs:"inline-block",sm:"none",md:"none",lg:"none"}},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Purchase"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Issue"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Return"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Inhouse"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Damage"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Sell"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Inventory Quantity"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[0,"  ","Qty"]})]}),(0,re.jsxs)(uo,{children:[(0,re.jsx)(xo,{align:"left",sx:{fontWeight:"bold"},children:"Total Inventory Amount"}),(0,re.jsxs)(xo,{align:"left",width:100,children:[(0,re.jsx)(R.A,{fontSize:"small"}),0]})]})]})})]})})}function po(){const[e,t]=(0,l.useState)([]),a=(0,tt.Wx)({initialValues:{fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:console.log("nnnn")});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Item Stock"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:a,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:a,name:"toDate",label:"To Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,style:{alignSelf:"center"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"secondary",variant:"contained",sx:{mr:2,mt:1},children:"Sell"}),(0,re.jsx)(Xe.A,{size:"small",color:"secondary",variant:"contained",sx:{mr:2,mt:1},children:"Issue"}),(0,re.jsx)(Xe.A,{size:"small",color:"secondary",variant:"contained",sx:{mr:2,mt:1},children:"Add Item"}),(0,re.jsx)(Xe.A,{size:"small",color:"secondary",variant:"contained",sx:{mr:2,mt:1},children:"Add Vendor"})]})]})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,style:{alignSelf:"center"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{mr:2,mt:1},children:"Excel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{mr:2,mt:1},children:"PDF"})]}),(0,re.jsx)(ho,{}),(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"div",textAlign:"start",sx:{fontSize:"15px",mt:1,fontWeight:"bold"},children:"List of Stocks"}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"Item stock",bodyData:e,tableKeys:mo})]})}const jo=[{name:"Item Id",key:"itemId"},{name:"Item Name",key:"itemName"},{name:"Issuer Name",key:"issueName"},{name:"Quantity",key:"quantity"},{name:"Total Price",key:"totalPrice"}],go=[{label:"Returned",value:"Returned"},{label:"Pending",value:"Pending"},{label:"Issued",value:"Issued"},{label:"Deleted",value:"Deleted"}];function yo(){const{settings:e,selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(0),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)(e.map((e=>({label:e.name,value:e._id}))));console.log(x,"selectSchool");const p=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.item.list);u(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}},j=(0,tt.Wx)({initialValues:{item:"",quantity:"",issueStatus:"",fromType:"",school:"",toType:"",employeeName:"",note:""},onSubmit:console.log("nnnn")});(0,l.useEffect)((()=>{p()}),[t._id]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Issue Details"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{s(t)},value:i,labels:["List of Issue","Issue"]}),(0,re.jsxs)(Ct.A,{index:0,value:i,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{my:2},children:"PDF"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2,my:2},children:"Excel"}),(0,re.jsx)(gt.A,{actions:["edit"],bodyDataModal:"Issue",bodyData:a,tableKeys:jo})]}),(0,re.jsx)(Ct.A,{index:1,value:i,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"item",formik:j,label:"Select Item",options:m})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"quantity",formik:j,label:"Quantity"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"status",formik:j,label:"Select Issue Status",options:go})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"fromType",formik:j,label:"Select From Type"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"school",formik:j,label:"Select School"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"toType",formik:j,label:"Select To Type"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"employeeName",formik:j,label:"Select Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"note",formik:j,label:"Note"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>{s(0),p(),r(null)},children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2},children:"Issue"})]})]})})})]})}const Ao=[{name:"Item Id",key:"itemId"},{name:"Item Name",key:"itemName"},{name:"Sellar Name",key:"issueName"},{name:"Total Quantity",key:"quantity"}];function fo(){const[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(0),i=(0,tt.Wx)({initialValues:{item:"",quantity:"",SellStatus:"",fromType:"",school:"",toType:"",employeeName:"",note:""},onSubmit:console.log("nnnn")});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Sell Details"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{n(t)},value:a,labels:["Sold List","Sell"]}),(0,re.jsxs)(Ct.A,{index:0,value:a,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{my:2},children:"PDF"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2,my:2},children:"Excel"}),(0,re.jsx)(gt.A,{actions:["edit"],bodyDataModal:"Sell",bodyData:e,tableKeys:Ao})]}),(0,re.jsx)(Ct.A,{index:1,value:a,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"item",formik:i,label:"Select Item"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"quantity",formik:i,label:"Select Quantity"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"sellStatus",formik:i,label:"Select Sell Status"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"fromType",formik:i,label:"Select From Type"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"school",formik:i,label:"Select School"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"toType",formik:i,label:"Select To Type"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"employeeName",formik:i,label:"Select Employee Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"note",formik:i,label:"Note"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",children:"Cancel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{ml:2},children:"Sell"})]})]})})})]})}const bo=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"center",fontSize:"30px",fontWeight:"bold",marginTop:"40px",textDecoration:"underline"}})),vo=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"25px",padding:"0 5px",display:"inline",fontWeight:"bold",textDecoration:"underline",fontFamily:"Roboto ,sans-serif"}})),So=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{width:"100%",marginTop:"10px",border:"1px solid black",padding:"20px"}})),ko=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"}})),Do=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",padding:"20px",justifyContent:"space-between",alignItems:"center"}})),Co=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{padding:"20px",display:"flex",textIndent:"50px"}}));function wo(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[y,A]=(0,l.useState)({}),[f,b]=(0,l.useState)(Le()(Date.now())),[v,S]=(0,l.useState)(Le()(Date.now())),[k,D]=(0,l.useState)([]),C=async e=>{console.log(e,"bfyy"),p(!0);try{var t,a,l,n,i,s,o,r,m,u,x,h,j,g,y,A,f,b,v,S;c({...d,fatherName:null===e||void 0===e||null===(t=e.student)||void 0===t||null===(a=t.fatherInfo)||void 0===a?void 0:a.name,academicYearFrom:null===e||void 0===e||null===(l=e.student)||void 0===l||null===(n=l.academicYear)||void 0===n?void 0:n.from,academicYearTo:null===e||void 0===e||null===(i=e.student)||void 0===i||null===(s=i.academicYear)||void 0===s?void 0:s.to,academicId:null===e||void 0===e?void 0:e.academicYear,studentName:null===e||void 0===e||null===(o=e.student)||void 0===o?void 0:o.basicInfo.name,studentId:null===e||void 0===e||null===(r=e.student)||void 0===r?void 0:r._id,currentClass:null===e||void 0===e||null===(m=e.student)||void 0===m?void 0:m.academicInfo.class.name,dob:null===e||void 0===e||null===(u=e.student)||void 0===u?void 0:u.basicInfo.dob,grNo:null===e||void 0===e||null===(x=e.student)||void 0===x?void 0:x.basicInfo.grNo,studentPhoto:null===e||void 0===e||null===(h=e.student)||void 0===h?void 0:h.photo,schoolName:null===e||void 0===e||null===(j=e.student)||void 0===j||null===(g=j.school)||void 0===g?void 0:g.name,schoolAddress:null===e||void 0===e||null===(y=e.student)||void 0===y||null===(A=y.school)||void 0===A?void 0:A.address,schoolLogo:null===e||void 0===e||null===(f=e.student)||void 0===f||null===(b=f.school)||void 0===b?void 0:b.logo,category:null===e||void 0===e||null===(v=e.student)||void 0===v?void 0:v.basicInfo.category,address:null===e||void 0===e||null===(S=e.student)||void 0===S?void 0:S.contactInfo.presentAddress})}catch(k){console.log(k)}p(!1)},w=(0,tt.Wx)({initialValues:{academicYear:"",student:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:C}),I=(0,tt.Wx)({initialValues:{academicYear:"",student:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:C});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);w.setFieldValue("academicYear",e.result[0]._id),a(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id}});i(t.result.map((e=>({...e,label:e.basicInfo.name,value:e,id:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});r(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[e._id]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Study Certificate"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:w,label:"Select Academic Year",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:w,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:w,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:w,label:"Select Student",options:n})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",gap:1,item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{x(!0)},children:"Bulk Issue"}),(0,re.jsx)(pt.A,{size:"small",variant:"contained",type:"submit",onClick:w.handleSubmit,loading:h,children:"Issue"})]})]})}),""!=w.values.student&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(So,{children:[(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"space-between",children:[(0,re.jsx)(xe.Ay,{item:!0,xs:6,md:6,lg:3,textAlign:"start",children:(0,re.jsx)("img",{src:d.schoolLogo||"/world-wide-web.png",alt:"loading...",height:100,width:95,style:{objectFit:"contain"}})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:6,md:6,lg:6,textAlign:"center",mt:2,children:[(0,re.jsx)(u.A,{textAlign:"center",fontSize:"20px",children:d.schoolName||"St Pauls High School"}),(0,re.jsx)(u.A,{textAlign:"center",fontSize:"16px",children:d.schoolAddress||"ABC NAGAR"})]}),(0,re.jsx)(xe.Ay,{item:!0,xs:6,md:6,lg:3,textAlign:"end",children:(0,re.jsx)("img",{src:d.studentPhoto||"/studingimg.jpg",alt:"photo",height:120,width:100,style:{objectFit:"contain"}})})]}),(0,re.jsx)(bo,{children:"STUDY CERTIFICATE"}),(0,re.jsx)(Co,{children:(0,re.jsxs)(u.A,{component:"span",sx:{fontSize:"25px",fontFamily:"sans-serif"},children:["This is to certify that Sri./Kum.",(0,re.jsx)(vo,{component:"span",children:d.fatherName||"NA"}),"son/daughter of Mr.",(0,re.jsx)(vo,{component:"span",children:d.studentName||"NA"}),"studying in",(0,re.jsx)(vo,{component:"span",children:d.currentClass||"NA"}),"in our school for the academic year",(0,re.jsx)(vo,{component:"span",children:"".concat(d.academicYearFrom," - ").concat(d.academicYearTo)||"NA"}),".The residential address is as follows:",(0,re.jsx)(vo,{component:"span",children:d.address||"NA"}),". According to our school records his/her date of birth is",(0,re.jsx)(vo,{component:"span",children:Le()(d.dob).format("DD-MM-YYYY")}),". and category is as per our school record G R No is"," ",(0,re.jsx)(vo,{component:"span",children:d.grNo||"NA"}),"."]})}),(0,re.jsxs)(Do,{children:[(0,re.jsxs)(s.A,{children:[(0,re.jsx)(u.A,{gutterBottom:!0,fontSize:"20px",children:Le()().format("DD-MM-YYYY")}),(0,re.jsxs)(u.A,{component:"span",fontSize:"20px",children:["Place:"," "]}),(0,re.jsx)(u.A,{component:"span",fontSize:"20px",children:d.schoolAddress})]}),(0,re.jsx)(u.A,{fontSize:"20px",children:"Sign Of Head Master"})]})]}),(0,re.jsxs)(ko,{children:[(0,re.jsx)(pt.A,{variant:"contained",size:"small",type:"submit",loading:j,onClick:async t=>{g(!0);try{const t=await(0,Se.Jt)(ke.r.certificate.getStudyCertificate,{responseType:"blob",params:{schoolId:e._id,academicYearId:null===d||void 0===d?void 0:d.academicId,studentId:null===d||void 0===d?void 0:d.studentId}}),a=new Blob([t.data],{type:"application/pdf"}),l=document.createElement("a"),n=URL.createObjectURL(a);l.href=n,l.setAttribute("download","studyCertificate.pdf"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}catch(a){console.log(a)}g(!1)},children:"Download"}),(0,re.jsx)(Xe.A,{variant:"contained",size:"small","aria-label":"search",children:"Print"})]})]}),(0,re.jsx)(mt.A,{open:m,onClose:()=>{x(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,sx:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",p:2},children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,re.jsx)(u.A,{id:"modal-modal-title",variant:"h6",component:"h2",textAlign:"center",fontSize:"20px",fontWeight:"bold",children:"Bulk Issue"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:6,children:(0,re.jsx)(et.A,{required:!0,name:"academic",formik:I,label:"Select Academic Year",options:t})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:6,children:(0,re.jsx)(Yt.A,{formik:w,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:6,children:(0,re.jsx)(Yt.A,{formik:w,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:6,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:I,label:"Select Student",options:o})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:6,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:I,label:"Select Student",options:k})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,re.jsxs)(s.A,{display:"flex",gap:2,justifyContent:{xs:"center",sm:"center",md:"flex-end",lg:"flex-end"},children:[(0,re.jsx)(pt.A,{sx:{color:"#fff",background:"#1b3779",":hover":{background:"#1b3779"}},disabled:j,children:"Download"}),(0,re.jsx)(pt.A,{type:"button",sx:{color:"#fff",background:"#1b3779",":hover":{background:"#1b3779"}},"aria-label":"search",children:"Print"})]})})]})})]})}const Io=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"25px",fontWeight:"bold",[t.breakpoints.down("md")]:{fontSize:"25px"},[t.breakpoints.down("sm")]:{fontSize:"21px"}}})),No=(0,n.Ay)(xe.Ay)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",[t.breakpoints.down("lg")]:{flexDirection:"row"},[t.breakpoints.down("md")]:{flexDirection:"row"},[t.breakpoints.down("sm")]:{flexDirection:"column"},[t.breakpoints.down("xs")]:{flexDirection:"column"}}})),_o=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{marginTop:"20px",padding:"40px",[t.breakpoints.down("lg")]:{width:"80%"},[t.breakpoints.down("md")]:{width:"100%"},[t.breakpoints.down("sm")]:{width:"100%"},[t.breakpoints.down("xs")]:{width:"100%"}}})),To=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"25px",fontWeight:"bold",[t.breakpoints.down("md")]:{fontSize:"20px"},[t.breakpoints.down("sm")]:{fontSize:"13px"}}})),Mo=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"18px",width:"48%",[t.breakpoints.down("md")]:{fontSize:"20px",width:"100%"},[t.breakpoints.down("sm")]:{fontSize:"14px",width:"100%"}}})),Fo=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"20px",[t.breakpoints.down("md")]:{fontSize:"20px"},[t.breakpoints.down("sm")]:{fontSize:"14px"}}})),zo=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{fontSize:"25px",fontWeight:500,[t.breakpoints.down("md")]:{fontSize:"25px"},[t.breakpoints.down("sm")]:{fontSize:"18px"}}}));function Eo(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),s=(0,tt.Wx)({initialValues:{academicYear:"",student:""},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);s.setFieldValue("academicYear",e.result[0]._id),a(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id}});i(a.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),s.setFieldValue("student",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e._id]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Study Certificate"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:s,label:"Select Academic Year",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:s,label:"Select Student",options:n})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,display:"flex",alignSelf:"center",justifyContent:"flex-end",gap:1,item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Issue"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Bulk Issue"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})]})}),(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,sx:{textAlign:"center"},children:(0,re.jsx)(u.A,{sx:{fontSize:{xs:"25px",sm:"25px",md:"30px",lg:"30px"},fontWeight:"bold"},children:"Kayaka school"})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,style:{textAlign:"center"},children:[(0,re.jsx)(zo,{children:"ENGLISH MEDIUM PRIMARY AND HIGH SCHOOL"}),(0,re.jsx)(zo,{children:"Kayaka school"})]}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,sx:{textAlign:"center"},children:(0,re.jsx)(Io,{children:"TRANSFER CERTIFICATE"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:(0,re.jsx)(_o,{children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"1] Name of the School:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"schoolName"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"2] Name of the Pupil in full:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"studentName"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"3] G. R. No:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"grNo"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"4] Place of Birth:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"birthPlace"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:" 5] Date of Birth(in figures and words):"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"dobWords"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"6] Sex:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"sex"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"7] Nationality:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"nationality"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"8] Religion:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"religion"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"9] Caste:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"caste"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","10] Whether the candidate belongs to SC and ST:"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"belongs"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"11] Aadhar No.:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"aadhar"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"12] Name of the father:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"fatherName"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"13] Name of the mother:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"motherName"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:" 14] Date of Admission in the Scchool:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"admissionDate"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"15] School Previously Attended:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"prevSchool"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","16] Standard in which admission is granted:"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"admissionGrant"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","17] Standard in which the pupil was studying at the time of leaving the school(in words):"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"currentClass"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"18] Medium of instruction:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"instructions"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","19] Whether the pupil has paid all the free due of the school:"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"fees"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"20] Promoted to/ Detained in:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"proDet"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","21] Whether medically examinated or not ? :"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"medical"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","22] Date of pupil's last attendance at the school:"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"lastAttend"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","23] Date of which the application for the Transfer Certificate was received:"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"transferRecivied"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsxs)(Mo,{children:[" ","24] Date of issue of the Transfer Certificate:"]}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"dateIssue"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"25] Attendance:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"attendance"})]}),(0,re.jsxs)(No,{item:!0,xs:12,sm:12,md:12,lg:12,children:[(0,re.jsx)(Mo,{children:"26] Character & Conduct:"}),(0,re.jsx)(Ft.A,{fullWidth:!0,id:"standard-basic",variant:"standard",name:"character"})]}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,textAlign:"center",children:(0,re.jsx)(Io,{children:"CERTIFICATE"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,sx:{textAlign:"center"},children:(0,re.jsx)(Fo,{children:"Certified that the entries made in this Transfer Certificate are taken from the entries made as per the general egister maintained in the institution. The entries with the original records persented by the parents"})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,sx:{display:"flex",justifyContent:"space-between"},children:[(0,re.jsx)(To,{children:"Prepared By"}),(0,re.jsx)(To,{children:"Checked By"}),(0,re.jsx)(To,{children:"Head Master"})]})]})})})]})]})}const qo=[{name:"Receipt Name",key:"name"}],Yo=[{name:"Details",key:"detail"},{name:"Fee",key:"fee"},{name:"Installments",key:"installment"}];var Wo=a(43845),Ro=a(58390),Po=a(79344),Jo=a(89302);const Vo={class:"Class - (Academic department)",route:"Route - (Transport department)",pickType:"Pick-Type - (Transport department)",stop:"Stop - (Transport department)",room:"Room - (Hostel department)",roomType:"Room Type - (Hostel department)",hostel:"Hostel - (Hostel department)",addedAfter:"Added After - (Student admission date)",addedBefore:"Added Before - (Student admission date)",academicYear:"Academic Year - (Student academic year)",libraryMember:"Library Member - (Human Resource department)"},Bo=[{label:"Monthly",id:1},{label:"Quaterly",id:2},{label:"Half-Yearly",id:3},{label:"Yearly",id:4},{label:"Others",id:5}];function Lo(e){let{selectedReceipt:t="",open:a=!0,setOpen:n=(()=>{})}=e;const{selectedSetting:i}=(0,l.useContext)(De.A),[o,r]=(0,l.useState)(""),[d,c]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),[b,v]=(0,l.useState)([]),[S,k]=(0,l.useState)([]),[D,w]=(0,l.useState)(!1),[I,N]=(0,l.useState)([]),[_,T]=(0,l.useState)({}),[M,F]=(0,l.useState)([]),[z,E]=(0,l.useState)(null),[q,Y]=(0,l.useState)(null);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list,{params:{schoolId:i._id}});h(e.result.map((e=>({...e,label:"".concat(e.from," - ").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:i._id}});c(e.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.route.list,{params:{schoolId:i._id}});j(e.result.map((e=>{var t;return{...e,label:"".concat(null===(t=e.vehicle)||void 0===t?void 0:t.number," ").concat(e.title," (").concat(e.routeStart," To ").concat(e.routeEnd,")"),value:e._id}}))),y(e.result.map((e=>{var t,a;return{label:null===(t=e.stops[0])||void 0===t?void 0:t.name,value:null===(a=e.stops[0])||void 0===a?void 0:a._id}})))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.hostel.list,{params:{schoolId:i._id}});f(e.result.map((e=>({...e,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.roomType.list,{params:{schoolId:i._id}});v(e.result.map((e=>({...e,label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.room.list,{params:{schoolId:i._id}});k(e.result)}catch(e){console.log(e)}})()}),[]);const W=()=>{r(null),n(!1)},R=e=>{const{name:t,value:a}=e.target;T("fee"==t?e=>({...e,[t]:parseInt(a)}):"others"==t?e=>({...e,[t]:Math.ceil(a)}):e=>({...e,[t]:a}))};(0,l.useEffect)((()=>{(()=>{if(!_.installmentsType||!_.fee)return;let e=[];if("Monthly"===_.installmentsType){const t=Math.floor(_.fee/12),a=_.fee-12*t;e=Array.from({length:12}).map(((e,l)=>({id:l+1,amount:t,missing:a,dueDate:Le()()}))),e.length>0&&(e[0].amount+=a)}else if("Quaterly"===_.installmentsType){const t=Math.floor(_.fee/4),a=_.fee-4*t;e=Array.from({length:4}).map(((e,a)=>({id:a+1,amount:t,dueDate:Le()()}))),e.length>0&&(e[0].amount+=a)}else if("Half-Yearly"===_.installmentsType){const t=Math.floor(_.fee/2),a=_.fee-2*t;e=Array.from({length:2}).map(((e,a)=>({id:a+1,amount:t,dueDate:Le()()}))),e.length>0&&(e[0].amount+=a)}else if("Yearly"===_.installmentsType)e=Array.from({length:1}).map(((e,t)=>({id:t,amount:_.fee,dueDate:Le()()})));else{if("Others"!==_.installmentsType)return void F([]);{const t=Math.floor(_.fee/_.others),a=_.fee-t*_.others;e=Array.from({length:_.others}).map(((e,a)=>({id:a+1,amount:t,dueDate:Le()()}))),e.length>0&&(e[0].amount+=a)}}F(e)})()}),[_.installmentsType,_.others,_.fee]);const P=(e,t,a)=>{F((l=>l.map(((l,n)=>{if(n===a)return"amount"===t?{...l,[t]:parseInt(e)}:"dueDate"===t?{...l,[t]:e}:l;if(n>a){let t=n-a;"Quaterly"===_.installmentsType?t*=3:"Half-Yearly"===_.installmentsType?t*=6:"Others"===_.installmentsType&&(t*=1);const i=Le()(e).add(t,"month").format("YYYY-MM-DD");return{...l,dueDate:i}}return l}))))};return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(mt.A,{open:a,onClose:W,onSubmit:async e=>{w(!0),e.preventDefault(),_.pickType||function(e,t){const a=e.indexOf(t);-1!==a&&e.splice(a,1)}(I,"pickType");try{let e={receiptTitleId:t,collectedFrom:"student",dependencies:I,classId:_.class,routeId:_.route,pickType:_.pickType,roomId:_.room,roomTypeId:_.roomType,hostelId:_.hostel,addedAfter:new Date(z),addedBefore:new Date(q),stopId:_.stop,academicYearId:_.academicYear,fee:_.fee,installments:M,schoolId:i._id,libraryMember:""};if(o){const{data:t}=await(0,Se.yJ)(ke.r.feeMap.update+"/"+(null===o||void 0===o?void 0:o._id),e)}else{const{data:t}=await(0,Se.bE)(ke.r.feeMap.create,e)}}catch(a){w(!1),console.error(a)}w(!1)},component:"form",children:[(0,re.jsx)(ut.A,{sx:{fontWeight:600},children:o?"Update Fee Map":"Add Fee Map"}),(0,re.jsx)(x.A,{}),(0,re.jsx)(xt.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsxs)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:[(0,re.jsx)(u.A,{variant:"body",children:"Choose the dependencies that will serve as the basis for the fee calculation."}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:8,item:!0,children:(0,re.jsxs)(Ta.A,{size:"small",sx:{mt:2,width:400},children:[(0,re.jsx)(Ma.A,{id:"demo-multiple-chip-label",children:"Choose the dependencies"}),(0,re.jsx)(Fa.A,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",size:"small",multiple:!0,label:"Choose the dependencies",value:I,onChange:e=>{const{target:{value:t}}=e;N("string"===typeof t?t.split(","):t)},children:Object.keys(Vo).map((e=>(0,re.jsx)(C.A,{value:e,children:Vo[e]},e)))})]})}),I&&(0,re.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,marginLeft:"20px"},children:I.map(((e,t)=>(0,re.jsx)(Wo.A,{sx:{mt:2},label:Vo[e],onDelete:()=>{return t=e,N((e=>e.filter((e=>e!==t)))),"class"==t&&T((e=>({...e,class:""}))),"hostel"===t&&T((e=>({...e,hostel:"",room:""}))),"route"===t&&T((e=>({...e,stop:"",route:""}))),"room"===t&&T((e=>({...e,room:""}))),"pickType"===t&&T((e=>({...e,pickType:""}))),"roomType"===t&&T((e=>({...e,roomType:""}))),"academicYear"===t&&T((e=>({...e,academicYearId:""}))),"addedAfter"===t&&E(null),"addedBefore"===t&&Y(null),void("stop"===t&&T((e=>({...e,stop:""}))));var t}},e)))})]}),I.includes("academicYear")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Academic Year"}),(0,re.jsx)(Fa.A,{size:"small",name:"academicYear",required:!0,value:_.academicYear||"",onChange:R,label:"Select Academic Year",children:m.map((e=>(0,re.jsx)(C.A,{value:e._id,children:e.label},e._id)))})]})}),I.includes("class")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Class"}),(0,re.jsx)(Fa.A,{size:"small",name:"class",required:!0,value:_.class||"",onChange:R,label:"Select Class",children:d.map((e=>(0,re.jsx)(C.A,{value:e._id,children:e.label},e._id)))})]})}),I.includes("route")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Route"}),(0,re.jsx)(Fa.A,{size:"small",name:"route",required:!0,value:_.route||"",onChange:R,label:"Select Route",children:p.map((e=>(0,re.jsx)(C.A,{value:e._id,children:null===e||void 0===e?void 0:e.label},e._id)))})]})}),I.includes("stop")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Stop"}),(0,re.jsx)(Fa.A,{size:"small",name:"stop",required:!0,value:_.stop||"",onChange:R,label:"Select stop",children:null===g||void 0===g?void 0:g.filter((e=>{var t;return _.route?(null===(t=e.route)||void 0===t?void 0:t._id)==_.route:e._id})).map((e=>(0,re.jsx)(C.A,{value:e._id,children:null===e||void 0===e?void 0:e.label},e._id)))})]})}),(I.includes("route")||I.includes("pickType"))&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Pick Type"}),(0,re.jsx)(Fa.A,{size:"small",name:"pickType",value:_.pickType||"",onChange:R,label:"Pick Type",children:["Drop","Pick","Both"].map((e=>(0,re.jsx)(C.A,{value:e,children:e},e)))})]})}),I.includes("hostel")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Hostel"}),(0,re.jsx)(Fa.A,{size:"small",name:"hostel",required:!0,value:_.hostel||"",onChange:R,label:"Select Hostel",children:A.map((e=>(0,re.jsx)(C.A,{value:e._id,children:null===e||void 0===e?void 0:e.label},e._id)))})]})}),I.includes("roomType")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Room Type"}),(0,re.jsx)(Fa.A,{size:"small",name:"roomType",required:!0,value:_.roomType||"",onChange:R,label:"Select Room Type",children:b.map((e=>(0,re.jsx)(C.A,{value:e._id,children:null===e||void 0===e?void 0:e.label},e._id)))})]})}),I.includes("room")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Room"}),(0,re.jsx)(Fa.A,{size:"small",name:"room",required:!0,value:_.room||"",onChange:R,label:"Select Room",children:S.filter((e=>{var t,a,l,n;return _.hostel&&_.roomType?(null===(t=e.hostel)||void 0===t?void 0:t._id)==_.hostel&&(null===(a=e.type)||void 0===a?void 0:a._id)==_.roomType:_.hostel&&!_.roomType?(null===(l=e.hostel)||void 0===l?void 0:l._id)==_.hostel:!_.hostel&&_.roomType?(null===(n=e.type)||void 0===n?void 0:n._id)==_.roomType:e._id})).map((e=>{var t,a;return(0,re.jsxs)(C.A,{value:e._id,children:[null===(t=e.hostel)||void 0===t?void 0:t.name," - ",null===(a=e.type)||void 0===a?void 0:a.name," ","(".concat(e.totalBeds,"-Beds)")]},e._id)}))})]})}),I.includes("addedAfter")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsx)(Ro.$,{dateAdapter:Jo.R,children:(0,re.jsx)(Po.l,{label:"Added After",inputFormat:"DD-MM-YYYY",value:z,onChange:e=>E(e),renderInput:e=>(0,re.jsx)(Ft.A,{...e,size:"small",fullWidth:!0})})})}),I.includes("addedBefore")&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsx)(Ro.$,{dateAdapter:Jo.R,children:(0,re.jsx)(Po.l,{label:"Added Before",inputFormat:"DD-MM-YYYY",value:q,onChange:e=>Y(e),renderInput:e=>(0,re.jsx)(Ft.A,{...e,size:"small",fullWidth:!0})})})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsx)(Ft.A,{fullWidth:!0,size:"small",label:"Fee",type:"number",required:!0,name:"fee",value:_.fee||"",onChange:R})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Installment Type"}),(0,re.jsx)(Fa.A,{size:"small",name:"installmentsType",value:_.installmentsType||"",onChange:R,label:"Select Installment Type",children:Bo.map((e=>(0,re.jsx)(C.A,{value:e.label,children:e.label},e.id)))})]})}),"Others"==_.installmentsType&&(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,mt:2,children:(0,re.jsx)(Ft.A,{fullWidth:!0,label:"Number of installments",size:"small",name:"others",type:"number",value:_.others||"",onChange:R})}),M.map(((e,t)=>(0,re.jsxs)(l.Fragment,{children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:6,md:6,mt:2,children:(0,re.jsx)(Ft.A,{fullWidth:!0,type:"number",label:"installment ".concat(t+1),value:e.amount,size:"small",onChange:e=>P(e.target.value,"amount",t)})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:6,md:6,mt:2,children:(0,re.jsx)(Ro.$,{dateAdapter:Jo.R,children:(0,re.jsx)(Po.l,{inputFormat:"DD-MM-YYYY",enabled:o,label:"Due Date",form:!0,value:e.dueDate,onChange:e=>P(e,"dueDate",t),renderInput:e=>(0,re.jsx)(Ft.A,{fullWidth:!0,enabled:o,...e,size:"small"})})})})]},t)))]})}),(0,re.jsxs)(ht.A,{children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:W,children:"Close"}),(0,re.jsx)(pt.A,{size:"small",loading:D,variant:"contained",type:"submit",children:o?"Update":"Submit"})]})]})})}const Uo=e=>{let t=[];for(let r of e.dependencies)if("academicYear"===r)t.push("[".concat(e.academicYearId.from,"-").concat(e.academicYearId.to,"]-Academic Year"));else if("class"===r){var a;let l="[".concat(null===(a=e.class)||void 0===a?void 0:a.name,"]-Class");t.push(l)}else if("hostel"===r){var l;let a="[".concat(null===(l=e.hostel)||void 0===l?void 0:l.name,"]-Hostel");t.push(a)}else if("roomType"===r)t.push("[".concat(e.roomType.name,"]-Room_Type"));else if("room"===r){var n,i,s,o;let a="[".concat(null===(n=e.room)||void 0===n?void 0:n.hostel.name,"]+[").concat(null===(i=e.room)||void 0===i?void 0:i.totalBeds," Beds]+[").concat(null===(s=e.room)||void 0===s||null===(o=s.type)||void 0===o?void 0:o.name,"]-Room");t.push(a)}else if("route"==r){let a="[".concat(e.route.vehicle.number,"]+[").concat(e.route.title,"]-Route");t.push(a)}else if("pickType"==r){let a="[".concat(e.pickType,"]-Pick_Type");t.push(a)}else if("stop"===r){let a="[".concat(e.stop.name,"]-Stop");t.push(a)}return t.join(" | ")},Oo=e=>{let{onUpdate:t=(()=>{}),data:a={},onEditClick:n=(()=>{}),onNavigateFeeMap:i=(()=>{})}=e;const[s,o]=(0,l.useState)(!1);return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(v.A,{direction:"row",spacing:1,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>n(a),children:"Edit"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>i(a._id),children:"Fee Map"}),(0,re.jsx)(pt.A,{loading:s,size:"small",onClick:async()=>{try{o(!0),await(0,Se.yJ)("".concat(ke.r.receiptTitle.toggleActiveStatus,"/").concat(a._id)),t(),o(!1)}catch(e){console.log(e),o(!1)}},color:a.active?"success":"error",variant:"contained",children:a.active?"Activate":"DeActivate"})]})})};function Ho(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(0),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(null),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[y,A]=(0,l.useState)(""),[f,b]=(0,l.useState)(y||""),v=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.receiptTitle.list,{params:{schoolId:e._id}});a(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{f&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.feeMap.list,{params:{schoolId:e._id,Search:{receiptTitle:f}}});i(t.result.map((e=>({...e,detail:Uo(e)}))))}catch(t){console.error(t)}})()}),[f]),(0,l.useEffect)((()=>{v(),(async()=>{try{const{data:t,status:a}=await(0,Se.Jt)(ke.r.receiptTitle.list,{params:{schoolId:e._id}});x(t.result),t.result.length>0&&b(f||t.result[0]._id)}catch(t){console.log(t)}})()}),[e]);const S=()=>{d(!1),m(null)},k=(0,tt.Wx)({initialValues:{name:(null===c||void 0===c?void 0:c.name)||"",active:(null===c||void 0===c?void 0:c.active)||!0},onSubmit:async t=>{try{const a={...t,schoolId:e._id};if(p(!0),c){const{data:e}=await(0,Se.yJ)(ke.r.receiptTitle.update+"/"+c._id,a);v()}else{const{data:e}=await(0,Se.bE)(ke.r.receiptTitle.create,a);v()}S()}catch(a){console.log(a)}p(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Receipt Book"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>{o(t)},value:s,labels:["Receipt Book","Fee Map"]}),(0,re.jsxs)(Ct.A,{index:0,value:s,children:[(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>{d(!0)},startIcon:(0,re.jsx)(hs.A,{}),sx:{mt:1,mb:2},children:"Add Receipt"}),(0,re.jsx)(gt.A,{actions:["custom"],bodyDataModal:"Receipt Book",bodyData:t,tableKeys:qo,feeMapTableKeys:!0,onEditClick:e=>{m(e),d(!0)},onNavigateFeeMap:e=>{A(e),o(1)},CustomAction:Oo,onUpdate:v}),(0,re.jsx)(jt,{open:r,formik:k,formTitle:c?"Update Receipt Book":"Add Receipt Book",onClose:S,submitButtonTitle:c?"Update":"Submit",adding:h,children:(0,re.jsx)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:k,name:"name",label:"Receipt Name",required:!0})})})})]}),(0,re.jsxs)(Ct.A,{index:1,value:s,children:[(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",mb:1},children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsxs)(Ta.A,{fullWidth:!0,size:"small",children:[(0,re.jsx)(Ma.A,{children:"Select Receipt"}),(0,re.jsx)(Fa.A,{required:!0,fullWidth:!0,value:f||"",onChange:e=>b(e.target.value),label:"Select Receipt",children:u.map((e=>(0,re.jsx)(C.A,{value:e._id,children:e.name},e._id||"")))})]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Xe.A,{variant:"contained",startIcon:(0,re.jsx)(hs.A,{}),onClick:()=>{g(!0)},children:"Add Fee Map"})})]}),(0,re.jsx)(gt.A,{actions:["edit","switch"],bodyDataModal:"Fee Map",bodyData:n,tableKeys:Yo,CustomAction:Oo,onEditClick:(e,t)=>{m({...t})}}),(0,re.jsx)(Lo,{open:j,Formik:k,dataToEdit:c,setOpen:g,loading:h,selectedReceipt:f})]})]})}const Go=[{name:"Name",key:"name"},{name:"Description",key:"description"},{name:"Amount\t",key:"amount"}];function Ko(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(null),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),h=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.feeMap.list,{params:{schoolId:e._id,search:{active:!0}}});o(t.result.map((e=>({label:e.name,value:e._id})))),p.setFieldValue("feeMap",t.result[0]._id)}catch(t){}},p=(0,tt.Wx)({initialValues:{name:"",feeMap:""},onSubmit:console.log("nnnn")}),j=(0,tt.Wx)({initialValues:{name:(null===r||void 0===r?void 0:r.name)||"",description:(null===r||void 0===r?void 0:r.description)||"",amount:(null===r||void 0===r?void 0:r.amount)||"",feeMapId:""},onSubmit:async t=>{try{const a={...t,schoolId:e._id};if(x(!0),r){const{data:e}=await(0,Se.yJ)(ke.r.feeMapCategory.update+"/"+r._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.feeMapCategory.create,a)}g()}catch(a){console.log(a)}x(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.receiptTitle.list,{params:{schoolId:e._id}});i(t.result.map((e=>({label:e.name,value:e._id})))),p.setFieldValue("name",t.result[0]._id)}catch(t){console.log(t)}})(),h()}),[]),(0,l.useEffect)((()=>{p.values.name&&h()}),[p.values.name]);const g=()=>{m(!1),d(null)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Fee Map Category"}),(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",mb:1},children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"name",formik:p,label:"Select Receipt Name",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"feeMap",formik:p,label:"Select Fee Maps"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Xe.A,{variant:"contained",startIcon:(0,re.jsx)(hs.A,{}),onClick:()=>m(!0),children:"Add Fee Category"})})]}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyDataModal:"Fee Map Category",bodyData:t,tableKeys:Go,feeMapTableKeys:!0}),(0,re.jsx)(jt,{open:c,formik:j,formTitle:r?"Update Fee Map Category":"Add Fee Map Category",onClose:g,submitButtonTitle:r?"Update":"Submit",adding:u,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:4,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"name",label:"Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:4,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"description",label:"Description"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:4,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"amount",label:"Amount",type:"number",required:!0})})]})})]})}const Qo=e=>{let t=[];for(let o of e.dependencies)if("class"===o){var a;let l="[".concat(null===(a=e.class)||void 0===a?void 0:a.className,"]-Class");t.push(l)}else if("room"===o){var l,n,i,s;let a="[".concat(null===(l=e.room)||void 0===l?void 0:l.hostel.name,"]+[").concat(null===(n=e.room)||void 0===n?void 0:n.totalSeats," Beds]+[").concat(null===(i=e.room)||void 0===i||null===(s=i.type)||void 0===s?void 0:s.name,"]-Room");t.push(a)}else if("route"==o){let a="[".concat(e.route.vehicleNumber.vehicleNumber,"]+[").concat(e.route.transportRouteTitle,"]+[").concat(e.route.routeStart,"-").concat(e.route.routeEnd,"]");t.push(a)}else if("pickType"==o){let a="[".concat(e.pickType,"]-Pick_Type");t.push(a)}return t.join(" | ")};function Zo(){const[e,t]=(0,l.useState)([]),{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(null),[y,A]=(0,l.useState)({}),[f,b]=(0,l.useState)(0),[v,S]=(0,l.useState)([]),[k,D]=(0,l.useState)(!1),[C,w]=(0,l.useState)([]),[I,N]=(0,l.useState)(!1),_=(0,tt.Wx)({initialValues:{receiptName:"",feeMap:"",class:"",section:"",student:"",installmentId:""},onSubmit:async e=>{N(!0);try{var t;const{data:e,status:a}=await(0,Se.Jt)(ke.r.receipt.getFeeDetails,{params:{feeMapId:_.values.feeMap,studentId:h._id,receiptTitleId:_.values.receiptName,installmentId:_.values.installmentId||(null===(t=s.filter((e=>e._id==_.values.feeMap))[0])||void 0===t?void 0:t.installments[0]._id)}});g(e.result),w(e.result.feeMapCategories.map((e=>({name:e.name,amount:Number(e.amount),description:e.description}))))}catch(a){console.log(a)}N(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.receiptTitle.list,{params:{search:{active:!0}}});i(e.result.map((e=>({...e,label:e.name,value:e._id})))),_.setFieldValue("receiptName",e.result[0]?e.result[0]._id:"")}catch(e){console.log(e)}})()}),[a._id]);(0,l.useEffect)((()=>{_.values.receiptName&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.feeMap.list,{params:{search:{active:!0},schoolId:a._id}});o(e.result.map((e=>({...e,name:Qo(e),value:e._id})))),_.setFieldValue("feeMap",e.result[0]?e.result[0]._id:"")}catch(e){console.log(e)}})()}),[_.values.receiptName,a._id]);(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});if(d(t.result.map((e=>({...e,label:e.name,value:e._id})))),_.values.feeMap){let t=s.filter((e=>e._id==_.values.feeMap))[0];var e;if(t.dependencies.includes("class"))return _.setFieldValue("class",null===(e=t.class)||void 0===e?void 0:e._id)}_.setFieldValue("class",t.result[0]?t.result[0]._id:"")}catch(t){console.log(t)}})()}),[a._id,_.values.feeMap]);(0,l.useEffect)((()=>{_.values.class&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{search:{class:_.values.class}}});m(e.result.map((e=>({...e,label:e.name,value:e._id})))),_.setFieldValue("section",e.result[0]?e.result[0]._id:"")}catch(e){console.log(e)}})()}),[_.values.class]);(0,l.useEffect)((()=>{_.values.feeMap&&_.values.class&&_.values.section?(async()=>{try{let e=s.filter((e=>e._id==_.values.feeMap))[0],t=e.dependencies,l={};t.includes("class")&&(l["academicInfo.class"]=_.values.class),t.includes("room")&&(l["hostelInfo.room"]=e.room._id),t.includes("route")&&(l["transportInfo.route"]=e.route._id),t.includes("pickType")&&(l["transportInfo.pickType"]=e.pickType),_.values.section&&(l["academicInfo.section"]=_.values.section);const{data:n}=await(0,Se.Jt)(ke.r.student.list,{params:{search:l},schoolId:a._id});p(null),x(n.result.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(e){console.log(e)}})():(x([]),p(null))}),[_.values.section,_.values.feeMap]);return(0,l.useEffect)((()=>{_.values.installmentId&&_.handleSubmit()}),[_.values.installmentId]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Collect Fees"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"receiptName",formik:_,label:"Select Receipt Name",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"feeMap",formik:_,label:"Select Fee Map",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:_,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:_,label:"Select Section",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:_,label:"Select Students"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:(0,re.jsx)(pt.A,{loading:I,onClick:_.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})})]})}const $o=[{name:"Receipt",key:"receipt"},{name:"Roll No",key:"roleNo"},{name:"Class",key:"class"},{name:"Section",key:"section"},{name:"Name",key:"name"},{name:"Father",key:"father"},{name:"Phone",key:"phone"},{name:"Amount",key:"amount"},{name:"Concession",key:"concession"},{name:"Fine",key:"fine"},{name:"Paid",key:"paid"},{name:"Balance",key:"balance"}];function Xo(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);u.setFieldValue("academicYear",e.result[0]._id),i(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.receiptTitle.list,{params:{schoolId:e._id}});o(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});d(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]);const u=(0,tt.Wx)({initialValues:{academicYear:"",receiptName:"",feeMap:"",class:"",section:""},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{u.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:u.values.class}}});u.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id),m(a.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(a){console.log(a)}})()}),[u.values.class]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Balance Fee Report"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:u,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"receiptName",formik:u,label:"Select Receipt Name",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"feeMap",formik:u,label:"Select Fee Map"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:u,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:u,label:"Select Section",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center",marginTop:"10px"},item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"Balance Fee Report",bodyData:t,tableKeys:$o})]})}const er=[{name:"Payment",key:"payment"},{name:"Total",key:"total"},{name:"Cash",key:"cash"},{name:"Cheque",key:"cheque"},{name:"DD",key:"dd"},{name:"Chalan",key:"chalan"},{name:"NetBanking",key:"netBanking"},{name:"Online",key:"online"}],tr=[{name:"Receipt No",key:"receiptNo"},{name:"Paid Date",key:"paidDate"},{name:"Amount",key:"amount"},{name:"Payment Mode",key:"paymentMode"},{name:"Name",key:"name"},{name:"Class",key:"class"},{name:"Section",key:"section"},{name:"Admission No",key:"admissionNo"},{name:"View",key:"view"}];function ar(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);u.setFieldValue("academicYear",e.result[0]._id),i(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.receiptTitle.list,{params:{schoolId:e._id}});o(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});d(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]);const u=(0,tt.Wx)({initialValues:{academicYear:"",collected:"",feeReceipt:"",feeMap:"",class:"",section:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{u.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:u.values.class}}});u.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id),m(a.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(a){console.log(a)}})()}),[u.values.class]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Fee Overview"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:3},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",mb:1},children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:u,label:"Select Academic Year",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"collected",formik:u,label:"Select Collected By"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"feeReceipt",formik:u,label:"Select Fee Receipt",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"feeMap",formik:u,label:"Select Fee Map"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:u,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:u,label:"Select Section",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:u,name:"fromDate",label:"From Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:u,name:"toDate",label:"To Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Xe.A,{variant:"contained",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"data",bodyData:t,tableKeys:er}),(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,sx:{display:"flex",alignItems:"center",my:1},children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"addmisionNo",formik:u,label:"Select Addmision No"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"search",label:"Search..."})})]}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"data",bodyData:t,tableKeys:tr})]})}const lr=[{name:"Receipt Number",key:"receipt"},{name:"Name",key:"name"},{name:"Roll No",key:"roleNo"},{name:"Amount",key:"amount"},{name:"Bank Name",key:"bankName"},{name:"Bank Branch",key:"branch"},{name:"Cheque Number",key:"chequeNo"},{name:"Date",key:"date"}];function nr(){const[e,t]=(0,l.useState)([]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Fee Reconciliation"}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"Fee Reconciliation",bodyData:e,tableKeys:lr})]})}const ir=[{name:"Hostel Name",key:"name"},{name:"Hostel Type",key:"type"},{name:"Address",key:"address"}],sr=(0,n.Ay)(ra.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",color:a?"#fff":"#000","&:nth-of-type(odd)":{backgroundColor:a?"transparent":"#F0F8FF"}}})),or=(0,n.Ay)(da.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",border:"1px solid gray",color:a?"#fff":"#000",["&.".concat(ba.A.head)]:{backgroundColor:a?"transparent":"blue",color:a?"#fff":"#000"},["&.".concat(ba.A.body)]:{fontSize:15}}}));function rr(e){let{title:t="",onClose:a=(()=>{}),open:n=!0,tableData:i,schoolName:s}=e;const{isDarkMode:o}=(0,l.useContext)(ot.A);return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ka,{title:t,onClose:a,open:n,children:(0,re.jsx)(sa.A,{"aria-label":"customized table",children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(sr,{isDarkMode:o,children:[(0,re.jsx)(or,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"School Name"}),(0,re.jsx)(or,{align:"left",width:100,isDarkMode:o,children:s})]}),(0,re.jsxs)(sr,{isDarkMode:o,children:[(0,re.jsx)(or,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Hostel Name"}),(0,re.jsx)(or,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.name})]}),(0,re.jsxs)(sr,{isDarkMode:o,children:[(0,re.jsxs)(or,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:["Hostel Type"," "]}),(0,re.jsx)(or,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.type})]}),(0,re.jsxs)(sr,{isDarkMode:o,children:[(0,re.jsx)(or,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Address"}),(0,re.jsx)(or,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.address})]}),(0,re.jsxs)(sr,{isDarkMode:o,children:[(0,re.jsx)(or,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Note"}),(0,re.jsx)(or,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.note})]}),(0,re.jsxs)(sr,{isDarkMode:o,children:[(0,re.jsx)(or,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Created"}),(0,re.jsx)(or,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.createdAt})]})]})})})})}const dr=[{label:"Boys",value:"Boys"},{label:"Girls",value:"Girls"},{label:"Combined",value:"Combined"}];function cr(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)([]),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)(null),[x,h]=(0,l.useState)({open:!1,tableData:"",action:()=>{}}),p=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.hostel.list);n(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{p(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:t._id}}),a=e.result.filter((e=>"WARDEN"===e.role.name));s(a.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(e){console.log(e)}})()}),[t]);const j=(0,tt.Wx)({initialValues:{name:(null===m||void 0===m?void 0:m.name)||"",type:(null===m||void 0===m?void 0:m.type)||"",warden:(null===m||void 0===m||null===(e=m.warden)||void 0===e?void 0:e._id)||"",address:(null===m||void 0===m?void 0:m.address)||"",contactNumber:(null===m||void 0===m?void 0:m.contactNumber)||"",note:(null===m||void 0===m?void 0:m.note)||""},onSubmit:async e=>{try{if(c(!0),m){const{data:t}=await(0,Se.yJ)(ke.r.hostel.update+"/"+m._id,e)}else{const{data:t}=await(0,Se.bE)(ke.r.hostel.create,e)}u(null),g()}catch(t){console.log(t),c(!1)}c(!1)},enableReinitialize:!0}),g=()=>{r(!1),p(),u(null)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Hostel"}),(0,re.jsx)(gt.A,{actions:["edit","delete","view"],tableKeys:ir,bodyDataModal:"hostel",bodyData:a,onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.hostel.delete+"/"+e);p()}catch(t){console.log(t)}},onEditClick:e=>{r(!0),u(e)},onViewClick:e=>{console.log(e,"vvvvvb"),h({...x,open:!0,tableData:e,schoolName:null===t||void 0===t?void 0:t.name})}}),(0,re.jsx)(dt,{title:"Add Hostel",onAddClick:()=>{r(!0)}}),(0,re.jsx)(jt,{open:o,formik:j,formTitle:m?"Update Hostel":"Add Hostel",onClose:g,submitButtonTitle:m?"Update":"Submit",adding:d,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"name",label:"Hostel Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"contactNumber",label:"Phone No.",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:j,name:"type",label:"Hostel Type",required:!0,options:dr})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:j,name:"warden",label:"Select Warden",required:!0,options:i})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"address",label:"Address",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"note",label:"Note"})})]})}),(0,re.jsx)(rr,{title:"Hostel Information",open:null===x||void 0===x?void 0:x.open,tableData:null===x||void 0===x?void 0:x.tableData,schoolName:null===x||void 0===x?void 0:x.schoolName,onClose:()=>{h({...x,open:!1})}})]})}const mr=[{name:"Room Name",key:"name"},{name:"Specification",key:"specification"}];function ur(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(null),[s,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)(!1),c=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.roomType.list);a(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{c()}),[e]);const m=(0,tt.Wx)({initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",specification:(null===n||void 0===n?void 0:n.specification)||""},onSubmit:async e=>{try{if(o(!0),n){const{data:t}=await(0,Se.yJ)(ke.r.roomType.update+"/"+n._id,e)}else{const{data:t}=await(0,Se.bE)(ke.r.roomType.create,e)}o(!1),c(),u()}catch(t){console.log(t),o(!1)}},enableReinitialize:!0}),u=()=>{d(!1),i(null)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Hostel Room Type"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:mr,bodyDataModal:"room",bodyData:t,onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.roomType.delete+"/"+e);c()}catch(t){console.log(t)}},onEditClick:e=>{console.log(e,"iiii"),d(!0),i(e)}}),(0,re.jsx)(dt,{title:"Add Room Type",onAddClick:()=>{d(!0)}}),(0,re.jsx)(jt,{open:r,formik:m,formTitle:n?"Update Room Type":"Add Room Type",onClose:u,submitButtonTitle:n?"Update":"Submit",adding:s,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:m,name:"name",label:"Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:m,name:"specification",label:"Specification",required:!0})})]})})]})}const xr=[{name:"Room no",key:"number"},{name:"Room Type",key:"roomType"},{name:"Total Seat",key:"totalBeds"},{name:"Hostel Name",key:"hostelName"}],hr=(0,n.Ay)(ra.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",color:a?"#fff":"#000","&:nth-of-type(odd)":{backgroundColor:a?"transparent":"#F0F8FF"}}})),pr=(0,n.Ay)(da.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"300px",border:"1px solid gray",color:a?"#fff":"#000",["&.".concat(ba.A.head)]:{backgroundColor:a?"transparent":"blue",color:a?"#fff":"#000"},["&.".concat(ba.A.body)]:{fontSize:15}}}));function jr(e){var t;let{title:a="",onClose:n=(()=>{}),open:i=!0,tableData:o,schoolName:r}=e;const{isDarkMode:d}=(0,l.useContext)(ot.A);return console.log(o,"tableData"),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(ka,{title:a,onClose:n,open:i,children:(0,re.jsx)(sa.A,{"aria-label":"customized table",children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"School Name"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:r})]}),(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Room No"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.number})]}),(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Seat Total"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.totalBeds})]}),(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Bed"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o||null===(t=o.beds)||void 0===t?void 0:t.map((e=>(0,re.jsxs)(s.A,{sx:{width:"100%",display:"flex",flexDirection:"column",my:1},children:[(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Bed Name"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.name)||"NA"})]}),(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Bed Position"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.position)||"NA"})]}),(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:600,width:"200px"},isDarkMode:d,children:"Bed Allocated"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:null!==e&&void 0!==e&&e.allocated?"Yes":"No"})]})]},e.name)))})]}),(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Note"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.note})]}),(0,re.jsxs)(hr,{isDarkMode:d,children:[(0,re.jsx)(pr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Created"}),(0,re.jsx)(pr,{align:"left",width:100,isDarkMode:d,children:null===o||void 0===o?void 0:o.createdAt})]})]})})})})}function gr(){var e,t;const{selectedSetting:a}=(0,l.useContext)(De.A),{isDarkMode:n}=(0,l.useContext)(ot.A),[i,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(!1),[p,j]=(0,l.useState)(null),[g,y]=(0,l.useState)(!1),[A,f]=(0,l.useState)(!1),[b,v]=(0,l.useState)(!1),[S,k]=(0,l.useState)({open:!1,tableData:"",action:()=>{}}),D=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.room.list);o(e.result.map((e=>{var t,a;return{...e,hostelName:null===e||void 0===e||null===(t=e.hostel)||void 0===t?void 0:t.name,roomType:null===(a=e.type)||void 0===a?void 0:a.name}})))}catch(e){console.log(e)}};(0,l.useEffect)((()=>{D(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.roomType.list);d(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.hostel.list);m(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[a]);const C=(0,tt.Wx)({initialValues:{number:(null===p||void 0===p?void 0:p.number)||"",type:(null===p||void 0===p||null===(e=p.type)||void 0===e?void 0:e._id)||"",totalBeds:(null===p||void 0===p?void 0:p.totalBeds)||0,hostel:(null===p||void 0===p||null===(t=p.hostel)||void 0===t?void 0:t._id)||"",note:(null===p||void 0===p?void 0:p.note)||"",beds:(null===p||void 0===p?void 0:p.beds)||[{id:1,name:"",position:"",allocated:!1}]},onSubmit:async e=>{try{if(h(!0),p){delete e.beds;const{data:t}=await(0,Se.yJ)(ke.r.room.update+"/"+p._id,e)}else{let t={...e,totalBeds:e.beds.length};const{data:a}=await(0,Se.bE)(ke.r.room.create,t)}w(),D(),h(!1)}catch(t){console.log(t),h(!1)}},enableReinitialize:!0}),w=()=>{v(!1),j(null),C.resetForm()},I=(e,t)=>{C.setFieldValue("beds",C.values.beds.map((a=>a.id===t.id?{...a,[e.target.name]:e.target.value}:a)))};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Hostel Room & Beds"}),(0,re.jsx)(gt.A,{actions:["edit","delete","view"],tableKeys:xr,bodyDataModal:"room",bodyData:i,onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.room.delete+"/"+e);D()}catch(t){console.log(t)}},onEditClick:e=>{v(!0),j(e)},onViewClick:e=>{k({...S,open:!0,tableData:e,schoolName:a.name}),D()}}),(0,re.jsx)(dt,{title:"Add Room & Bed",onAddClick:()=>{v(!0)}}),(0,re.jsx)(jt,{open:b,formik:C,formTitle:p?"Update Room & Bed":"Add Room & Bed",onClose:w,submitButtonTitle:p?"Update":"Submit",adding:x,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:C,name:"number",label:"Room No.",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:C,name:"type",label:"Room Type",required:!0,options:r})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:C,name:"hostel",label:"Hostel Name",required:!0,options:c})}),(0,re.jsxs)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:[(0,re.jsxs)(s.A,{style:{display:"flex",justifyContent:"space-between",padding:"10px",alignItems:"center",fontSize:"14px",fontWeight:"bold"},children:[(0,re.jsx)(u.A,{children:"Bed Name"}),(0,re.jsx)(u.A,{children:"Bed Position"}),(0,re.jsx)(u.A,{children:"Is Alloted"})]}),C.values.beds.map(((e,t)=>(0,re.jsxs)(xe.Ay,{container:!0,gap:1,sx:{backgroundColor:n?"transparent":"#F0F8FF",borderRadius:"5px",padding:"20px 15px 30px 15px",border:"1px solid lightgrey",my:2},children:[(0,re.jsx)(xe.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.name,name:"name",label:"Bed Name",required:!0,onChange:t=>I(t,e)})}),(0,re.jsx)(xe.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.position,name:"position",label:"Bed Position",required:!0,onChange:t=>I(t,e)})}),(0,re.jsxs)(xe.Ay,{xs:12,sm:3,md:3,item:!0,sx:{fontSize:16,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,re.jsx)(Xe.A,{onClick:()=>(()=>{let e=[...C.values.beds],t={id:e.length+1,name:"",position:"",allocated:!1};C.setFieldValue("beds",[...e,t])})(),children:(0,re.jsx)(rt.A,{})}),(0,re.jsx)(Xe.A,{color:"error",onClick:()=>(e=>{let t=[...C.values.beds];t.splice(e,1),C.setFieldValue("beds",t)})(t),children:(0,re.jsx)(ws.A,{color:"error"})})]})]},t)))]}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:C,name:"note",label:"Note"})})]})}),(0,re.jsx)(jr,{title:"Room Information",open:S.open,tableData:S.tableData,schoolName:S.schoolName,onClose:()=>{k({...S,open:!1})}})]})}const yr=[{name:"Name",key:"name",path:"studentName"},{name:"Admisson No",key:"admissionNumber",path:"admission"},{name:"Room",key:"number"}],Ar=[{name:"Name",key:"name",path:"studentName"},{name:"Admisson No",key:"admissionNumber",path:"admission"}],fr=e=>{var t,a;let{onUpdate:n=(()=>{}),data:i={}}=e;const[s,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)(!1),{selectedSetting:c}=(0,l.useContext)(De.A),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.hostel.list);u(e.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[c]);const p=()=>{d(!1)},j=(0,tt.Wx)({initialValues:{name:(null===i||void 0===i||null===(t=i.basicInfo)||void 0===t?void 0:t.name)||"",hostel:"",room:"",bed:""},onSubmit:async e=>{try{const t={...e,schoolId:c._id,hostel:e.hostel,room:e.room,bed:e.bed};o(!0),await(0,Se.yJ)(ke.r.student.updateHostelMember+"/"+i._id,t),n(),p(),o(!1)}catch(t){console.log(t),o(!1)}}});return(0,l.useEffect)((()=>{j.values.hostel&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.room.list,{params:{schoolId:c._id,search:{hostel:j.values.hostel}}});h(e.result.map((e=>({...e,label:String(e.number),value:e._id}))))}catch(e){console.log(e)}})()}),[j.values.hostel,c]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(v.A,{direction:"row",spacing:1,children:(0,re.jsx)(Xe.A,{size:"small",startIcon:(0,re.jsx)(hs.A,{}),variant:"contained",onClick:()=>{d(!0)},children:"Member"})}),(0,re.jsx)(jt,{open:r,formik:j,formTitle:"Add Member",onClose:p,submitButtonTitle:"Submit",adding:s,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"name",label:"Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:j,name:"hostel",label:"Hostel",required:!0,options:m})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:j,name:"room",label:"Room No",required:!0,options:x})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:j,name:"bed",label:"Beds",required:!0,options:(null===(a=x.find((e=>e._id===j.values.room)))||void 0===a?void 0:a.beds.map((e=>({label:e.name,value:e._id}))))||[]})})]})})]})};function br(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),h=async t=>{try{if("all"===t.section){const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class}}});console.log(a.result,"=================");const l=a.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.hostelMember})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo}))),n=a.result.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.otherInfo)&&void 0!==t&&t.hostelMember)})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo})));m(l),x(n)}else{const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section}}}),l=a.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.hostelMember})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo}))),n=a.result.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.otherInfo)&&void 0!==t&&t.hostelMember)})).map((e=>({...e,studentName:e.basicInfo,admission:e.academicInfo})));m(l),x(n)}}catch(a){console.log(a)}},p=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:h,enableReinitialize:!0}),j=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:h,enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);d(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),p.setFieldValue("academicYear",e.result[0]._id),j.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});i(l.result.map((e=>({label:e.name,value:e._id})))),p.setFieldValue("class",null===(t=l.result[0])||void 0===t?void 0:t._id),j.setFieldValue("class",null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(l){console.log(l)}})()}),[e._id]),(0,l.useEffect)((()=>{(p.values.class||j.values.class)&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:j.values.class||p.values.class}}}),a=[{label:"All",value:"all"},...t.result.map((e=>({label:e.name,value:e._id})))];o(a),p.setFieldValue("section","all"),j.setFieldValue("section","all")}catch(t){console.log(t)}})()}),[p.values.class,j.values.class,e]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Hostel Member"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Member List","Non Member List"]}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)("form",{onSubmit:p.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:p,label:"Select Academic Year",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:p,label:"Select Class",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:p,label:"Select Section",options:s})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})]})]})}),(0,re.jsx)(gt.A,{actions:["delete"],onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.student.removeHostelMember+"/"+e);p.handleSubmit()}catch(t){console.error(t)}},tableKeys:yr,bodyData:c,bodyDataModal:"hostel member"})]}),(0,re.jsxs)(Ct.A,{index:1,value:t,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:j.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:j,label:"Select Academic Year",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:j,label:"Select Class",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:j,label:"Select Section",options:s})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})]})})}),(0,re.jsx)(gt.A,{actions:"custom",tableKeys:Ar,bodyData:u,bodyDataModal:"hostel member",CustomAction:fr,onUpdate:j.handleSubmit})]})]})}const vr=[{name:"Vehicle Number",key:"number"},{name:"Driver",key:"driverName"},{name:"Contact",key:"driverContactNumber"},{name:"Total Passengers",key:"totalSeats"},{name:"Tracking Id",key:"trackingId"},{name:"Vehicle Model",key:"model"},{name:"Insurance Name",key:"insuranceName"}],Sr=(0,n.Ay)(ra.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px","&:nth-of-type(odd)":{backgroundColor:a?"transparent":"#F0F8FF",color:a?"#fff":"#000"}}})),kr=(0,n.Ay)(da.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",border:"1px solid gray",["&.".concat(ba.A.head)]:{backgroundColor:a?"transparent":"blue",color:a?"#fff":"#000"},["&.".concat(ba.A.body)]:{fontSize:15}}}));function Dr(e){let{title:t="",onClose:a=(()=>{}),open:n=!0,tableData:i,schoolName:s}=e;const{isDarkMode:o}=(0,l.useContext)(ot.A);return(0,re.jsx)(ka,{title:t,onClose:a,open:n,children:(0,re.jsx)(sa.A,{"aria-label":"customized table",children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"School Name"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:s})]}),(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Vehicle Number"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.number})]}),(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Vehicle Model"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.model})]}),(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Driver"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.driverName})]}),(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Vehicle License"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.licenseNumber})]}),(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Driver Contact Number"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.driverContactNumber})]}),(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Note"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.note})]}),(0,re.jsxs)(Sr,{isDarkMode:o,children:[(0,re.jsx)(kr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:o,children:"Created"}),(0,re.jsx)(kr,{align:"left",width:100,isDarkMode:o,children:null===i||void 0===i?void 0:i.createdAt})]})]})})})}function Cr(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(null),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)({open:!1,tableData:"",schoolName:"",action:()=>{}}),p=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.vehicle.list,{params:{schoolId:t._id}});n(e.result.map((e=>{var t,a;return{...e,driverName:null===e||void 0===e||null===(t=e.driver)||void 0===t||null===(a=t.basicInfo)||void 0===a?void 0:a.name,id:e._id}})))}catch(e){console.log(e)}},j=()=>{c(!1),s(null),p()};(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:a}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:t._id}});u(null===(e=a.result)||void 0===e?void 0:e.filter((e=>e.role.name.toLowerCase().match(new RegExp("Driver","i")))).map((e=>({label:e.basicInfo.name,value:e._id}))))}catch(a){console.log(a)}})(),p()}),[t]);const g=(0,tt.Wx)({initialValues:{number:(null===i||void 0===i?void 0:i.number)||"",model:(null===i||void 0===i?void 0:i.model)||"",driver:(null===i||void 0===i||null===(e=i.driver)||void 0===e?void 0:e._id)||"",licenseNumber:(null===i||void 0===i?void 0:i.licenseNumber)||"",driverContactNumber:(null===i||void 0===i?void 0:i.driverContactNumber)||"",trackingId:(null===i||void 0===i?void 0:i.trackingId)||"",insuranceName:(null===i||void 0===i?void 0:i.insuranceName)||"",insuranceId:(null===i||void 0===i?void 0:i.insuranceId)||"",totalSeats:(null===i||void 0===i?void 0:i.totalSeats)||"",note:(null===i||void 0===i?void 0:i.note)||""},onSubmit:async e=>{try{const a={...e,schoolId:t._id};if(r(!0),i){const{data:e}=await(0,Se.yJ)(ke.r.vehicle.update+"/"+i._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.vehicle.create,a)}j()}catch(a){console.log(a)}r(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Vehicle"}),(0,re.jsx)(gt.A,{actions:["view","edit","delete"],tableKeys:vr,bodyDataModal:"vehicle",bodyData:a,onEditClick:e=>{c(!0),s(e)},onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.vehicle.delete+"/"+e);p()}catch(t){console.log(t)}},onViewClick:e=>{h({...x,open:!0,tableData:e,schoolName:null===t||void 0===t?void 0:t.name})}}),(0,re.jsx)(dt,{title:"Add Vehicle",onAddClick:()=>{c(!0)}}),(0,re.jsx)(jt,{open:d,formik:g,formTitle:i?"Update Vehicle":"Add Vehicle",onClose:j,submitButtonTitle:i?"Update":"Submit",adding:o,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"number",label:"Number",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:g,name:"driver",label:"Driver",options:m,required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"model",label:"Model"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"licenseNumber",label:"License Number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"driverContactNumber",label:"Driver Contact Number",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"trackingId",label:"Tracking Id"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"insuranceName",label:"Insurance Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"insuranceId",label:"Insurance Id",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"totalSeats",label:"Total Seats",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:g,name:"note",label:"Note"})})]})}),(0,re.jsx)(Dr,{title:"Vehicle Information",open:null===x||void 0===x?void 0:x.open,tableData:null===x||void 0===x?void 0:x.tableData,schoolName:null===x||void 0===x?void 0:x.schoolName,onClose:()=>{h({...x,open:!1})}})]})}const wr=[{name:"Route Title",key:"title"},{name:"Route Start",key:"routeStart"},{name:"Route End",key:"routeEnd"},{name:"Vehicle For Route",key:"vehicleForRoute"},{name:"Stop Name",key:"stopName"}],Ir=(0,n.Ay)(ra.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",color:a?"#fff":"#000","&:nth-of-type(odd)":{backgroundColor:a?"transparent":"#F0F8FF"}}})),Nr=(0,n.Ay)(da.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"300px",border:"1px solid gray",color:a?"#fff":"#000",["&.".concat(ba.A.head)]:{backgroundColor:a?"transparent":"blue",color:a?"#fff":"#000"},["&.".concat(ba.A.body)]:{fontSize:15}}}));function _r(e){var t,a;let{title:n="",onClose:i=(()=>{}),open:s=!0,tableData:o,schoolName:r}=e;const{isDarkMode:d}=(0,l.useContext)(ot.A);return(0,re.jsx)(ka,{title:n,onClose:i,open:s,children:(0,re.jsx)(sa.A,{"aria-label":"customized table",children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"School Name"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:r||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Route Title"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===o||void 0===o?void 0:o.title)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Route Start"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===o||void 0===o?void 0:o.routeStart)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Route End"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===o||void 0===o?void 0:o.routeEnd)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsxs)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:["Vehicle For Route"," "]}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===o||void 0===o||null===(t=o.vehicle)||void 0===t?void 0:t.number)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Stops"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:null===(a=o.stops)||void 0===a?void 0:a.map(((e,t)=>(0,re.jsx)(sa.A,{"aria-label":"stop details",children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Stop Name"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.name)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Stop KM"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.stopKM)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold",width:"200px"},isDarkMode:d,children:"Pick Start Time"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.pickTime)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold",width:"200px"},isDarkMode:d,children:"Pick End Time"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.pickEndTime)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold",width:"200px"},isDarkMode:d,children:"Drop Start Time"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.dropTime)||"NA"})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold",width:"200px"},isDarkMode:d,children:"Drop End Time"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===e||void 0===e?void 0:e.dropEndTime)||"NA"})]})]})},t)))})]}),(0,re.jsxs)(Ir,{isDarkMode:d,children:[(0,re.jsx)(Nr,{align:"left",sx:{fontWeight:"bold"},isDarkMode:d,children:"Note"}),(0,re.jsx)(Nr,{align:"left",width:100,isDarkMode:d,children:(null===o||void 0===o?void 0:o.note)||"NA"})]})]})})})}const Tr=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{padding:"20px 8px",borderRadius:"10px",margin:"10px 0px",borderRight:"10px",border:"1px solid lightGrey",position:"relative",backgroundColor:"dark"===t.palette.mode?"":"whitesmoke"}}));function Mr(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[p,j]=(0,l.useState)({open:!1,tableData:"",action:()=>{}}),g=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.route.list,{params:{schoolId:e._id}});a(t.result.map((e=>{var t,a;return{...e,stopName:null===(t=e.stops)||void 0===t?void 0:t.map((e=>e.name)),vehicleForRoute:null===(a=e.vehicle)||void 0===a?void 0:a.number}})))}catch(t){console.log(t)}},y=()=>{d(!1),o(null),g()},A=(0,tt.Wx)({initialValues:{title:(null===s||void 0===s?void 0:s.title)||"",vehicle:(null===s||void 0===s?void 0:s.vehicle._id)||"",routeStart:(null===s||void 0===s?void 0:s.routeStart)||"",routeEnd:(null===s||void 0===s?void 0:s.routeEnd)||"",pickStart:(null===s||void 0===s?void 0:s.pickStart)||"",pickEnd:(null===s||void 0===s?void 0:s.pickEnd)||"",dropStart:(null===s||void 0===s?void 0:s.dropStart)||"",dropEnd:(null===s||void 0===s?void 0:s.dropEnd)||"",stops:(null===s||void 0===s?void 0:s.stops)||[{id:1,name:"",stopKM:"",pickTime:"",pickEndTime:"",dropTime:"",dropEndTime:""}],note:(null===s||void 0===s?void 0:s.note)||""},onSubmit:async t=>{try{const a={...t,schoolId:e._id};if(m(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.route.update+"/"+s._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.route.create,a)}y()}catch(a){console.log(a)}m(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.vehicle.list);i(e.result.map((e=>({...e,label:e.number,value:e._id}))))}catch(e){console.log(e)}})(),g()}),[e]);const f=(e,t)=>{A.setFieldValue("stops",A.values.stops.map((a=>a.id===t.id?{...a,[e.target.name]:e.target.value}:a)))};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Manage Route & Trips"}),(0,re.jsx)(gt.A,{actions:["edit","view","delete"],tableKeys:wr,bodyDataModal:"route",bodyData:t,onViewClick:t=>{j({...p,open:!0,tableData:t,schoolName:e.name}),g()},onEditClick:e=>{console.log(e,"eee"),d(!0),o(e)},onDeleteClick:async e=>{try{const{data:t}=await(0,Se.yH)(ke.r.route.delete+"/"+e);g()}catch(t){console.log(t)}}}),(0,re.jsx)(dt,{title:"Add Route & Trips",onAddClick:()=>{d(!0)}}),(0,re.jsxs)(jt,{open:r,formik:A,formTitle:s?"Update Route & Trips":"Add Route & Trips",onClose:y,submitButtonTitle:s?"Update":"Submit",adding:c,children:[(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,name:"title",label:"Title",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:A,name:"vehicle",label:"Vehicle",required:!0,options:n})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,name:"routeStart",label:"Route Start",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,name:"routeEnd",label:"Route End",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,type:"time",name:"pickStart",required:!0,label:"Pick Start"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,type:"time",name:"pickEnd",required:!0,label:"Pick End"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,type:"time",name:"dropStart",required:!0,label:"Drop Start"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:A,type:"time",name:"dropEnd",required:!0,label:"Drop End"})})]}),A.values.stops.map(((e,t)=>(console.log(e,"gg"),(0,re.jsxs)(Tr,{children:[(0,re.jsx)(h.A,{color:"error",sx:{position:"absolute",right:0,top:0},onClick:()=>(e=>{let t=[...A.values.stops];t.splice(e,1),A.setFieldValue("stops",t)})(t),children:(0,re.jsx)(Pt.A,{})}),(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.name,name:"name",label:"Name",required:!0,onChange:t=>f(t,e)})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.stopKM,name:"stopKM",label:"Stop KM",onChange:t=>f(t,e)})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.pickTime,name:"pickTime",type:"time",label:"Pick Time",onChange:t=>f(t,e),required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.pickEndTime,type:"time",name:"pickEndTime",label:"Pick End Time",onChange:t=>f(t,e),required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.dropTime,type:"time",name:"dropTime",label:"Drop Time",onChange:t=>f(t,e),required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.dropEndTime,type:"time",name:"dropEndTime",label:"Drop End Time",onChange:t=>f(t,e),required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(Xe.A,{variant:"contained",size:"small",onClick:()=>(async e=>{console.log(e,"stopId");let t=A.values.stops.find((t=>t._id===e));console.log(t,"stopData");try{x(!0);const{data:a}=await(0,Se.yJ)(ke.r.route.updateStop+"/"+e,t);x(!1)}catch(a){console.log(a),x(!1)}})(e._id),children:"Update"})})]})]},t)))),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",onClick:()=>{let e=[...A.values.stops];A.setFieldValue("stops",[...A.values.stops,{id:e.length+1,name:"",stopKM:"",pickTime:"",pickEndTime:"",dropTime:"",dropEndTime:""}])},children:"Add"}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:A,name:"note",label:"Note"})})})]}),(0,re.jsx)(_r,{title:"Trasport Route Information",onClose:()=>{j({...p,open:!1})},open:p.open,tableData:p.tableData,schoolName:p.schoolName})]})}const Fr=[{name:"Photo",key:"photo",type:"image"},{name:"Name",key:"name",path:"basicInfo"},{name:"Class",key:"name",path:"className"},{name:"Section",key:"name",path:"sectionName"},{name:"Roll No",key:"rollNumber",path:"rollNo"}],zr=[{name:"Name",key:"name",path:"basicInfo"},{name:"Roll No",key:"rollNumber",path:"rollNo"},{name:"Stop Name",key:"name",path:"stopName"},{name:"Pick Type",key:"pickType",path:"pickType"},{name:"Route Start",key:"routeStart",path:"routeStart"},{name:"Route End",key:"routeEnd",path:"routeEnd"}],Er=[{label:"Pick",value:"Pick"},{label:"Drop",value:"Drop"},{label:"Both",value:"Both"}],qr=e=>{var t,a;let{onUpdate:n=(()=>{}),data:i={}}=e;const[s,o]=(0,l.useState)(!1),[r,d]=(0,l.useState)(!1),{selectedSetting:c}=(0,l.useContext)(De.A),[m,u]=(0,l.useState)([]);console.log(m,"mmmmmmmmmmm"),(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.route.list);u(e.result.map((e=>({...e,label:e.title,value:e._id})))),console.log(e.result,"vvbvbbbbv vbfv vhvbfvvc")}catch(e){console.log(e)}})()}),[c]);const x=()=>{d(!1)},h=(0,tt.Wx)({initialValues:{name:(null===i||void 0===i||null===(t=i.basicInfo)||void 0===t?void 0:t.name)||"",route:"",stop:"",type:""},onSubmit:async e=>{try{const t={...e,schoolId:c._id,routeId:e.route,stopId:e.stop,pickType:e.type};o(!0),await(0,Se.yJ)(ke.r.student.updateTransportMember+"/"+i._id,t),n(),x(),o(!1)}catch(t){console.log(t),o(!1)}}});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(v.A,{direction:"row",spacing:1,children:(0,re.jsx)(Xe.A,{size:"small",startIcon:(0,re.jsx)(hs.A,{}),variant:"contained",onClick:()=>{d(!0)},children:"Member"})}),(0,re.jsx)(jt,{open:r,formik:h,formTitle:"Add Member",onClose:x,submitButtonTitle:"Submit",adding:s,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"name",label:"Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:h,name:"route",label:"Route",required:!0,options:m})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:h,name:"stop",label:"Stop",required:!0,options:(null===(a=m.find((e=>e._id===h.values.route)))||void 0===a?void 0:a.stops.map((e=>({label:e.name,value:e._id}))))||[]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(et.A,{name:"type",formik:h,label:"Pick Type",options:Er})})]})})]})};function Yr(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),h=async t=>{try{if("all"===t.section){const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class}}}),l=a.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.transportMember})).map((e=>{var t,a,l;return{...e,rollNo:e.academicInfo,pickType:e.transportInfo,routeStart:null===e||void 0===e||null===(t=e.transportInfo)||void 0===t?void 0:t.route,routeEnd:null===e||void 0===e||null===(a=e.transportInfo)||void 0===a?void 0:a.route,stopName:null===e||void 0===e||null===(l=e.transportInfo)||void 0===l?void 0:l.stop}})),n=a.result.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.otherInfo)&&void 0!==t&&t.transportMember)})).map((e=>({...e,rollNo:e.academicInfo,className:e.academicInfo.class,sectionName:e.academicInfo.section})));i(l),x(n),console.log(n,"kkkkk")}else{const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section}}}),l=a.result.filter((e=>{var t;return null===e||void 0===e||null===(t=e.otherInfo)||void 0===t?void 0:t.transportMember})).map((e=>{var t,a,l;return{...e,rollNo:e.academicInfo,pickType:e.transportInfo,routeStart:null===e||void 0===e||null===(t=e.transportInfo)||void 0===t?void 0:t.route,routeEnd:null===e||void 0===e||null===(a=e.transportInfo)||void 0===a?void 0:a.route,stopName:null===e||void 0===e||null===(l=e.transportInfo)||void 0===l?void 0:l.stop}})),n=a.result.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.otherInfo)&&void 0!==t&&t.transportMember)})).map((e=>({...e,rollNo:e.academicInfo,className:e.academicInfo.class,sectionName:e.academicInfo.section})));i(l),x(n)}}catch(a){console.log(a)}},p=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:h,enableReinitialize:!0}),j=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:h,enableReinitialize:!0});(0,l.useEffect)((()=>{(p.values.class||j.values.class)&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:p.values.class||j.values.class}}}),a=[{label:"All",value:"all"},...t.result.map((e=>({label:e.name,value:e._id})))];m(a),p.setFieldValue("section","all"),j.setFieldValue("section","all")}catch(t){console.log(t)}})()}),[j.values.class,p.values.class,e._id]),(0,l.useEffect)((()=>{(async()=>{try{var e,t;const{data:a}=await(0,Se.Jt)(ke.r.academicYear.list);o(a.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),p.setFieldValue("academicYear",null===(e=a.result[0])||void 0===e?void 0:e._id),j.setFieldValue("academicYear",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})(),(async()=>{try{var t,a;const{data:l}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});d(l.result.map((e=>({...e,label:e.name,value:e._id})))),p.setFieldValue("class",null===(t=l.result[0])||void 0===t?void 0:t._id),j.setFieldValue("class",null===(a=l.result[0])||void 0===a?void 0:a._id)}catch(l){console.log(l)}})()}),[e._id]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Transport Member"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Member List","Add Member"]}),(0,re.jsxs)(Ct.A,{index:0,value:t,children:[(0,re.jsxs)("form",{onSubmit:p.handleSubmit,children:[" ",(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:p,label:"Select Academic Year",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:p,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:p,label:"Select Section",options:c})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})]})})]}),(0,re.jsx)(gt.A,{actions:["delete"],tableKeys:zr,bodyData:n,bodyDataModal:"transport member",onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.student.removeTransportMember+"/"+e);p.handleSubmit()}catch(t){console.error(t)}}})]}),(0,re.jsxs)(Ct.A,{index:1,value:t,children:[(0,re.jsx)("form",{onSubmit:j.handleSubmit,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:j,label:"Select Academic Year",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:j,label:"Select Class",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:j,label:"Select Section",options:c})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})]})})}),(0,re.jsx)(gt.A,{actions:"custom",tableKeys:Fr,bodyData:u,bodyDataModal:"transport member",CustomAction:qr,onUpdate:j.handleSubmit})]})]})}const Wr=[{name:"Vehicle",key:"vehicle"},{name:"Route",key:"route"},{name:"Pick Start",key:"pickStart"},{name:"Pick End",key:"pickEnd"},{name:"Drop Start",key:"dropStart"},{name:"Drop End",key:"dropEnd"}];function Rr(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(0);return(0,l.useEffect)((()=>{if(t){const e=t.map((e=>parseInt(e.totalSeats)));let a=0;for(let t=0;t<e.length;t++)a+=e[t];i(a)}}),[t,e]),console.log(n,"sumOfSeat"),(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.route.list,{params:{schoolId:e._id}});console.log(t,"herere"),a(t.result.map((e=>{var t,a;return{...e,route:"".concat(e.routeStart," - ").concat(e.routeEnd),vehicle:null===(t=e.vehicle)||void 0===t?void 0:t.number,totalSeats:null===(a=e.vehicle)||void 0===a?void 0:a.totalSeats}})))}catch(t){console.log(t)}})()}),[e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Trips"}),(0,re.jsxs)(me.A,{style:{padding:10,paddingLeft:"1rem",display:"flex",gap:"20px",borderRadius:0},children:[(0,re.jsxs)(u.A,{children:["Vehicle: ",t.length]}),(0,re.jsxs)(u.A,{children:["Total Seats: ",n]})]}),(0,re.jsx)(gt.A,{actions:[],tableKeys:Wr,bodyDataModal:"trips",bodyData:t})]})}const Pr=[{name:"Date",key:"date",isDate:!0},{name:"Departure Time",key:"departureTime"},{name:"Reading At Departure",key:"reading",path:"readingAtDepartureReading"},{name:"Arrival Time",key:"arrivalTime"},{name:"Reading At Arrival",key:"reading",path:"readingAtArrival"},{name:"Total KM Run",key:"totalDistanceTravelled"}],Jr=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{padding:"20px 8px",borderRadius:"10px",margin:"10px 0px",borderRight:"10px",border:"1px solid lightGrey",backgroundColor:"dark"===t.palette.mode?"":"whitesmoke"}})),Vr=[{label:"Yes",value:!0},{label:"No",value:!1}];function Br(){var e,t,a,n,i,s;const{selectedSetting:o}=(0,l.useContext)(De.A),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(null),[u,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)([]),[y,A]=(0,l.useState)([]),[f,b]=(0,l.useState)([]),[v,S]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.vehicle.list,{params:{schoolId:o._id}});b(t.result.map((e=>({...e,label:e.number,value:e._id})))),C.setFieldValue("vehicle",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[o]);const k=()=>{x(!1),m(null)},D=(0,tt.Wx)({initialValues:{route:(null===c||void 0===c?void 0:c.route._id)||"",vehicle:(null===c||void 0===c?void 0:c.vehicle._id)||"",departureTime:(null===c||void 0===c?void 0:c.departureTime)||"",readingAtDeparture:(null===c||void 0===c||null===(e=c.readingAtDeparture)||void 0===e?void 0:e.reading)||"",arrivalTime:(null===c||void 0===c?void 0:c.arrivalTime)||"",readingAtArrival:(null===c||void 0===c||null===(t=c.readingAtArrival)||void 0===t?void 0:t.reading)||"",distance:(null===c||void 0===c||null===(a=c.spareUse)||void 0===a?void 0:a.distance)||"",date:(null===c||void 0===c?void 0:c.date)||null,reason:(null===c||void 0===c||null===(n=c.spareUse)||void 0===n?void 0:n.reason)||"",totalDistanceTravelled:(null===c||void 0===c?void 0:c.totalDistanceTravelled)||0,tripCompleted:(null===c||void 0===c?void 0:c.tripCompleted)||!1},onSubmit:async e=>{try{p(!0);const t=new FormData,a=new FormData;if(t.append("schoolId",o._id),t.append("route",e.route),t.append("vehicle",e.vehicle),t.append("date",Le()(e.date).format("YYYY-MM-DD")),t.append("departureTime",e.departureTime),t.append("readingAtDeparture",e.readingAtDeparture),t.append("totalDistanceTravelled",e.totalDistanceTravelled),j.forEach((e=>t.append("departureImage",e))),a.append("arrivalTime",e.arrivalTime),a.append("readingAtArrival",e.readingAtArrival),a.append("spareUse",JSON.stringify({distance:e.distance,reason:e.reason})),y.forEach((e=>a.append("arrivalImage",e))),c){const{data:e}=await(0,Se.yJ)(ke.r.vehicleLog.update+"/"+c._id,a,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.vehicleLog.create,t,{headers:{"Content-Type":"multipart/form-data"}})}k()}catch(t){console.log(t)}p(!1)},enableReinitialize:!0}),C=(0,tt.Wx)({initialValues:{vehicle:"",route:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async e=>{try{const{data:t}=await(0,Se.Jt)(ke.r.vehicleLog.list,{params:{schoolId:o._id,search:{vehicle:e.vehicle,route:e.route,fromDate:Le()(e.fromDate).format("YYYY/MM/DD"),toDate:Le()(e.toDate).format("YYYY/MM/DD")}}});d(t.result.map((e=>({...e,readingAtDepartureReading:null===e||void 0===e?void 0:e.readingAtDeparture,readingAtArrival:null===e||void 0===e?void 0:e.readingAtArrival})))),console.log(t.result,"kkkkkkk")}catch(t){console.log(t)}}}),w=(e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"departureImage"===t?g(l):A(l)}else console.log("No files selected")},I=(e,t)=>{g(j.filter((t=>t.name!=e))),A(y.filter((t=>t.name!=e)))};(0,l.useEffect)((()=>{(C.values.vehicle||D.values.vehicle)&&(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.route.list,{params:{schoolId:o._id,search:{vehicle:C.values.vehicle||D.values.vehicle}}});S(t.result.map((e=>({...e,label:e.title,value:e._id})))),C.setFieldValue("route",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[C.values.vehicle,D.values.vehicle,o]),(0,l.useEffect)((()=>{C.values.vehicle&&C.values.route&&C.handleSubmit()}),[C.values.vehicle,C.values.route,o]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Vehicle Log"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)("form",{onSubmit:C.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vehicle",formik:C,label:"Select Vehicle",options:f})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"route",formik:C,label:"Select Route",options:v})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:C,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:C,label:"To Date",name:"toDate"})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",alignSelf:"center",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",onClick:async()=>{try{wl("application/pdf",(await(0,Se.Jt)(ke.r.vehicleLog.downloadPdf,{params:{schoolId:o._id,search:{vehicle:C.values.vehicle,route:C.values.route,fromDate:Le()(C.values.fromDate).format("YYYY/MM/DD"),toDate:Le()(C.values.toDate).format("YYYY/MM/DD")}}})).data,"vehiclelog.pdf")}catch(e){console.log(e)}},variant:"contained",children:"Print"})]})]})]})}),(0,re.jsx)(dt,{title:"Add Vehicle Log",onAddClick:()=>{x(!0)}}),(0,re.jsxs)(jt,{open:u,formik:D,formTitle:c?"Update Vehicle Log":"Add Vehicle log",onClose:k,submitButtonTitle:c?"Update":"Submit",adding:h,children:[(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:D,name:"vehicle",label:"Vehicle",required:!0,options:f})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:D,name:"route",label:"Route",required:!0,options:v})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:D,name:"date",label:"Date"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,type:"time",name:"departureTime",label:"Departure Time"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"totalDistanceTravelled",label:"Total Distance Travelled"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:D,name:"tripCompleted",label:"Trip Completed",options:Vr})})]}),(0,re.jsx)(Jr,{children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"readingAtDeparture",label:"Reading At Departure"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"departureImage",label:"Select File",onChange:e=>w(e,"departureImage"),customOnChange:!0,selectedFiles:j,onRemove:e=>I(e),accept:"image/*,.pdf"})}),null!==c&&void 0!==c&&c.readingAtDeparture&&null!==(i=c.readingAtDeparture)&&void 0!==i&&i.image?(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{var e;const t=null===c||void 0===c||null===(e=c.readingAtDeparture)||void 0===e?void 0:e.image;t&&window.open(t,"_blank")},children:"Download File"})}):null]})}),c?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,type:"time",name:"arrivalTime",label:"Arrival Time"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"distance",label:"Distance"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"reason",label:"Reason"})})]}),(0,re.jsx)(Jr,{children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"readingAtArrival",label:"Reading At Arrivale"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"arrivalImage",label:"Select File",onChange:e=>w(e,"arrivalImage"),customOnChange:!0,selectedFiles:y,onRemove:e=>I(e),accept:"image/*,.pdf"})}),null!==c&&void 0!==c&&c.readingAtArrival&&null!==(s=c.readingAtArrival)&&void 0!==s&&s.image?(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:async()=>{var e;const t=null===c||void 0===c||null===(e=c.readingAtArrival)||void 0===e?void 0:e.image;t&&window.open(t,"_blank")},children:"Download File"})}):null]})})]}):null]}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:Pr,bodyDataModal:"vehicle log",bodyData:r,onEditClick:e=>{m(e),x(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.vehicleLog.delete+"/"+e);C.handleSubmit()}catch(t){console.error(t)}}})]})}const Lr=[{name:"Name",key:"name"},{name:"Phone Number",key:"contactNumber"},{name:"Email",key:"email"}];function Ur(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),c=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.firm.list,{params:{schoolId:e._id}});a(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{c()}),[e]);const m=()=>{i(!1),o(null)},u=(0,tt.Wx)({initialValues:{name:(null===s||void 0===s?void 0:s.name)||"",contactNumber:(null===s||void 0===s?void 0:s.contactNumber)||"",email:(null===s||void 0===s?void 0:s.email)||"",GSTNumber:(null===s||void 0===s?void 0:s.GSTNumber)||"",website:(null===s||void 0===s?void 0:s.website)||"",address:(null===s||void 0===s?void 0:s.address)||"",city:(null===s||void 0===s?void 0:s.city)||"",state:(null===s||void 0===s?void 0:s.state)||"",zipCode:(null===s||void 0===s?void 0:s.zipCode)||""},onSubmit:async t=>{try{const a={...t,schoolId:e._id};if(d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.firm.update+"/"+s._id,a);c()}else{const{data:e}=await(0,Se.bE)(ke.r.firm.create,a);c()}m()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>{i(!0)},startIcon:(0,re.jsx)(hs.A,{}),sx:{mt:1,mb:2},children:"Add"}),(0,re.jsx)(gt.A,{tableKeys:Lr,bodyData:t,bodyDataModal:"firm",actions:["edit","delete"],onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.firm.delete+"/"+e);c()}catch(t){console.error(t)}}}),(0,re.jsx)(jt,{open:n,formik:u,formTitle:s?"Update Firm":"Add Firm",onClose:m,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"name",label:"Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"contactNumber",label:"Contact Number",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"email",label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"GSTNumber",label:"GST Number"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"website",label:"Website"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"address",label:"Address"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"city",label:"City"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"state",label:"State"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:u,name:"zipCode",label:"Zip Code"})})]})})]})}const Or=[{name:"Date",key:"date",isDate:!0},{name:"Firm",key:"name",path:"firmName"},{name:"Bill No",key:"billNo"},{name:"Amount",key:"amount"},{name:"Km",key:"kiloMeter"}];function Hr(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),j=()=>{i(!1),o(null)},g=(0,tt.Wx)({initialValues:{vehicle:"",firm:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async t=>{try{const{data:l}=await(0,Se.Jt)(ke.r.maintenanceFuel.list,{params:{schoolId:e._id,search:{vehicle:t.vehicle,firm:t.firm,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")}}});console.log(l.result,"firm"),a(l.result.map((e=>({...e,firmName:e.firm}))))}catch(l){console.log(l)}}});(0,l.useEffect)((()=>{(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.vehicle.list,{params:{schoolId:e._id}});x(a.result.map((e=>({...e,label:e.number,value:e._id})))),g.setFieldValue("vehicle",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.firm.list,{params:{schoolId:e._id}});p(a.result.map((e=>({...e,label:e.name,value:e._id})))),g.setFieldValue("firm",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e]);const y=(0,tt.Wx)({initialValues:{vehicle:(null===s||void 0===s?void 0:s.vehicle._id)||"",firm:(null===s||void 0===s?void 0:s.firm._id)||"",date:(null===s||void 0===s?void 0:s.date)||"",billNo:(null===s||void 0===s?void 0:s.billNo)||"",fuelQuantity:(null===s||void 0===s?void 0:s.fuelQuantity)||"",rate:(null===s||void 0===s?void 0:s.rate)||"",amount:(null===s||void 0===s?void 0:s.amount)||"",kiloMeter:(null===s||void 0===s?void 0:s.kiloMeter)||""},onSubmit:async t=>{try{d(!0);const a=new FormData;if(a.append("schoolId",e._id),a.append("vehicle",t.vehicle),a.append("firm",t.firm),a.append("date",Le()(t.date).format("YYYY-MM-DD")),a.append("billNo",t.billNo),a.append("fuelQuantity",t.fuelQuantity),a.append("rate",t.rate),a.append("amount",t.amount),a.append("kiloMeter",t.kiloMeter),c.forEach((e=>a.append("file",e))),s){const{data:e}=await(0,Se.yJ)(ke.r.maintenanceFuel.update+"/"+s._id,a,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.maintenanceFuel.create,a,{headers:{"Content-Type":"multipart/form-data"}})}j()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{g.values.vehicle&&g.values.firm&&g.handleSubmit()}),[g.values.vehicle,g.values.firm,e]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:g.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vehicle",formik:g,label:"Select Vehicle",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"firm",formik:g,label:"Select Firm",options:h})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:g,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:g,label:"To Date",name:"toDate"})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",alignSelf:"center",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})]})})}),(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>{i(!0)},startIcon:(0,re.jsx)(hs.A,{}),sx:{mt:1,mb:2},children:"Add"}),(0,re.jsx)(gt.A,{tableKeys:Or,bodyData:t,bodyDataModal:"fuel",actions:["edit","delete"],onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.maintenanceFuel.delete+"/"+e);g.handleSubmit()}catch(t){console.error(t)}}}),(0,re.jsx)(jt,{open:n,formik:y,formTitle:s?"Update Fuel":"Add Fuel",onClose:j,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:y,name:"vehicle",label:"Vehicle",required:!0,options:u})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:y,name:"firm",label:"Firm",required:!0,options:h})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:y,name:"date",label:"Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:y,name:"billNo",label:"Bill No",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:y,name:"fuelQuantity",label:"Fuel Quantity",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:y,name:"rate",label:"Rate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:y,name:"amount",label:"Amount",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:y,name:"kiloMeter",label:"Kilo Meter",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"receipt",label:"Select File",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}m(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:c,onRemove:e=>((e,t)=>{m(c.filter((t=>t.name!=e)))})(e)})}),s&&null!==s&&void 0!==s&&s.receipt?(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{const e=null===s||void 0===s?void 0:s.receipt;e&&window.open(e,"_blank")},children:"Download File"})}):null]})})]})}const Gr=[{name:"Date",key:"date",isDate:!0},{name:"Particulars",key:"particulars"},{name:"Amount",key:"amount"}];function Kr(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),h=()=>{i(!1),o(null)};(0,l.useEffect)((()=>{(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.vehicle.list,{params:{schoolId:e._id}});m(a.result.map((e=>({...e,label:e.number,value:e._id})))),p.setFieldValue("vehicle",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.firm.list,{params:{schoolId:e._id}});x(a.result.map((e=>({...e,label:e.name,value:e._id})))),p.setFieldValue("firm",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e]);const p=(0,tt.Wx)({initialValues:{vehicle:"",firm:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async t=>{try{const{data:l}=await(0,Se.Jt)(ke.r.maintenanceRepair.list,{params:{schoolId:e._id,search:{vehicle:t.vehicle,firm:t.firm,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")}}});a(l.result)}catch(l){console.log(l)}}}),j=(0,tt.Wx)({initialValues:{vehicle:(null===s||void 0===s?void 0:s.vehicle._id)||"",firm:(null===s||void 0===s?void 0:s.firm._id)||"",date:(null===s||void 0===s?void 0:s.date)||"",particulars:null===s||void 0===s?void 0:s.particulars,amount:null===s||void 0===s?void 0:s.amount},onSubmit:async t=>{try{const a={...t,schoolId:e._id,date:Le()(t.date).format("YYYY/MM/DD")};if(console.log(a,"kkkkkk"),d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.maintenanceRepair.update+"/"+s._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.maintenanceRepair.create,a)}h()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});return(0,l.useEffect)((()=>{p.values.vehicle&&p.values.firm&&p.handleSubmit()}),[p.values.vehicle,p.values.firm,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:p.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vehicle",formik:p,label:"Select Vehicle",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"firm",formik:p,label:"Select Firm",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"To Date",name:"toDate"})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",alignSelf:"center",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})]})})}),(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>{i(!0)},startIcon:(0,re.jsx)(hs.A,{}),sx:{mt:1,mb:2},children:"Add"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyData:t,tableKeys:Gr,bodyDataModal:"Repair Maintenance",onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.maintenanceRepair.delete+"/"+e);p.handleSubmit()}catch(t){console.error(t)}}}),(0,re.jsx)(jt,{open:n,formik:j,formTitle:s?"Update Repair Maintenance":"Add Repair Maintenance",onClose:h,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vehicle",formik:j,label:"Select Vehicle",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"firm",formik:j,label:"Select Firm",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:j,name:"date",label:"Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"particulars",label:"Particulars",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"amount",label:"Amount",required:!0})})]})})]})}const Qr=[{name:"Date",key:"date",isDate:!0},{name:"Firm",key:"name",path:"firmName"},{name:"Km Reading",key:"kmReading"},{name:"Km Run",key:"kmRun"},{name:"Tyre",key:"tyre"},{name:"Amount",key:"amount"}];function Zr(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),h=()=>{i(!1),o(null)};(0,l.useEffect)((()=>{(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.vehicle.list,{params:{schoolId:e._id}});m(a.result.map((e=>({...e,label:e.number,value:e._id})))),p.setFieldValue("vehicle",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.firm.list,{params:{schoolId:e._id}});x(a.result.map((e=>({...e,label:e.name,value:e._id})))),p.setFieldValue("firm",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e]);const p=(0,tt.Wx)({initialValues:{vehicle:"",firm:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async t=>{try{const{data:l}=await(0,Se.Jt)(ke.r.maintenanceTyre.list,{params:{schoolId:e._id,search:{vehicle:t.vehicle,firm:t.firm,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")}}});a(l.result.map((e=>({...e,firmName:e.firm}))))}catch(l){console.log(l)}}}),j=(0,tt.Wx)({initialValues:{vehicle:(null===s||void 0===s?void 0:s.vehicle._id)||"",firm:(null===s||void 0===s?void 0:s.firm._id)||"",kmReading:(null===s||void 0===s?void 0:s.kmReading)||"",kmRun:(null===s||void 0===s?void 0:s.kmRun)||"",tyre:(null===s||void 0===s?void 0:s.tyre)||"",date:(null===s||void 0===s?void 0:s.date)||null,amount:(null===s||void 0===s?void 0:s.amount)||"",rate:(null===s||void 0===s?void 0:s.rate)||"",tyreNo:(null===s||void 0===s?void 0:s.tyreNo)||""},onSubmit:async t=>{try{const a={...t,schoolId:e._id,date:Le()(t.date).format("YYYY/MM/DD")};if(d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.maintenanceTyre.update+"/"+s._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.maintenanceTyre.create,a)}h()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});return(0,l.useEffect)((()=>{p.values.vehicle&&p.values.firm&&p.handleSubmit()}),[p.values.vehicle,p.values.firm,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:p.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vehicle",formik:p,label:"Select Vehicle",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"firm",formik:p,label:"Select Firm",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"To Date",name:"toDate"})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",alignSelf:"center",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})]})})}),(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>{i(!0)},startIcon:(0,re.jsx)(hs.A,{}),sx:{mt:1,mb:2},children:"Add"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:Qr,bodyData:t,bodyDataModal:"tyre/resole",onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.maintenanceTyre.delete+"/"+e);p.handleSubmit()}catch(t){console.error(t)}}}),(0,re.jsx)(jt,{open:n,formik:j,formTitle:s?"Update Vehicle Tyre/Resole":"Add  Vehicle Tyre/Resole",onClose:h,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vehicle",formik:j,label:"Select Vehicle",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"firm",formik:j,label:"Select Firm",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:j,name:"date",label:"Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"kmReading",label:"Km Reading",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"kmRun",label:"Km Run",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"tyre",label:"Tyre",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"amount",label:"Amount",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"rate",label:"Rate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:j,name:"tyreNo",label:"Tyre No",required:!0})})]})})]})}const $r=[{name:"Date",key:"date",isDate:!0},{name:"Amount",key:"amount"}];function Xr(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]),u=()=>{i(!1),o(null)};(0,l.useEffect)((()=>{(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.vehicle.list,{params:{schoolId:e._id}});m(a.result.map((e=>({...e,label:e.number,value:e._id})))),x.setFieldValue("vehicle",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e]);const x=(0,tt.Wx)({initialValues:{vehicle:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async t=>{try{const{data:l}=await(0,Se.Jt)(ke.r.maintenanceGreecing.list,{params:{schoolId:e._id,search:{vehicle:t.vehicle,fromDate:Le()(t.fromDate).format("YYYY/MM/DD"),toDate:Le()(t.toDate).format("YYYY/MM/DD")}}});a(l.result),console.log(l.result,"kkkkkkk")}catch(l){console.log(l)}}}),h=(0,tt.Wx)({initialValues:{vehicle:(null===s||void 0===s?void 0:s.vehicle._id)||"",date:(null===s||void 0===s?void 0:s.date)||null,amount:null===s||void 0===s?void 0:s.amount},onSubmit:async t=>{try{const a={...t,schoolId:e._id,date:Le()(t.date).format("YYYY/MM/DD")};if(d(!0),s){const{data:e}=await(0,Se.yJ)(ke.r.maintenanceGreecing.update+"/"+s._id,a)}else{const{data:e}=await(0,Se.bE)(ke.r.maintenanceGreecing.create,a)}u()}catch(a){console.log(a)}d(!1)},enableReinitialize:!0});return(0,l.useEffect)((()=>{x.values.vehicle&&x.handleSubmit()}),[x.values.vehicle,e]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:x.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"vehicle",formik:x,label:"Select Vehicle",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:x,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:x,label:"To Date",name:"toDate"})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",alignSelf:"center",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})]})})}),(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>{i(!0)},startIcon:(0,re.jsx)(hs.A,{}),sx:{mt:1,mb:2},children:"Add"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],bodyData:t,tableKeys:$r,bodyDataModal:"greecing",onEditClick:e=>{o(e),i(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.maintenanceGreecing.delete+"/"+e);x.handleSubmit()}catch(t){console.error(t)}}}),(0,re.jsx)(jt,{open:n,formik:h,formTitle:s?"Update Greecing":"Add Greecing",onClose:u,submitButtonTitle:s?"Update":"Submit",adding:r,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(et.A,{formik:h,name:"vehicle",label:"Vehicle",required:!0,options:c})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Yt.A,{formik:h,name:"date",label:"Date",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"amount",label:"Amount",required:!0})})]})})]})}function ed(){const[e,t]=(0,l.useState)(0);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Vehicle Maintenance:"}),(0,re.jsx)(Dt.A,{onChange:(e,a)=>t(a),value:e,labels:["Firm","Vehicle Fuel","Repair Maintenance","New Tyre/Resole","Greecing"]}),(0,re.jsx)(Ct.A,{index:0,value:e,children:(0,re.jsx)(Ur,{})}),(0,re.jsx)(Ct.A,{index:1,value:e,children:(0,re.jsx)(Hr,{})}),(0,re.jsx)(Ct.A,{index:2,value:e,children:(0,re.jsx)(Kr,{})}),(0,re.jsx)(Ct.A,{index:3,value:e,children:(0,re.jsx)(Zr,{})}),(0,re.jsx)(Ct.A,{index:4,value:e,children:(0,re.jsx)(Xr,{})})]})}const td=[{name:"Grade Id",key:"gradeCode"},{name:"Grade",key:"grade"},{name:"From",key:"from"},{name:"To",key:"to"},{name:"Active",key:"active"}],ad=[{label:"Active",value:!0},{label:"Inactive",value:!1}];function ld(){const{selectedSetting:e}=(0,l.useContext)(De.A),{isDarkMode:t}=(0,l.useContext)(ot.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(null),[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),m=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.salaryGrade.list,{params:{schoolId:e._id}});n(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{m()}),[e]);const x=()=>{r(!1),s(null)},h=(0,tt.Wx)({initialValues:{grade:(null===i||void 0===i?void 0:i.grade)||"",active:(null===i||void 0===i?void 0:i.active)||!0,from:(null===i||void 0===i?void 0:i.from)||"",to:(null===i||void 0===i?void 0:i.to)||"",breakups:(null===i||void 0===i?void 0:i.breakups)||[{id:1,name:"",percentage:""}],deduction:(null===i||void 0===i?void 0:i.deduction)||[{id:1,name:"",percentage:""}]},onSubmit:async t=>{try{const a={...t,schoolId:e._id};if(c(!0),i){const{data:e}=await(0,Se.yJ)(ke.r.salaryGrade.update+"/"+i._id,a);m()}else{const{data:e}=await(0,Se.bE)(ke.r.salaryGrade.create,a);m()}x()}catch(a){console.log(a)}c(!1)},enableReinitialize:!0}),p=(e,t,a)=>{h.setFieldValue(a,h.values[a].map((a=>a.id===t.id?{...a,[e.target.name]:e.target.value}:a)))},j=e=>{const t=[...h.values[e]],a={id:t.length+1,name:"",percentage:""};h.setFieldValue(e,[...t,a])},g=(e,t)=>{const a=[...h.values[t]];a.splice(e,1),h.setFieldValue(t,a)};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Salary Grade"}),(0,re.jsx)(gt.A,{actions:["edit","delete"],tableKeys:td,bodyDataModal:"salary grade",bodyData:a,onEditClick:e=>{s(e),r(!0)},onDeleteClick:async e=>{try{await(0,Se.yH)(ke.r.salaryGrade.delete+"/"+e);m()}catch(t){console.error(t)}}}),(0,re.jsx)(dt,{title:"Add Salary grade",onAddClick:()=>{r(!0)}}),(0,re.jsxs)(jt,{open:o,formik:h,formTitle:i?"Update Salary Grade":"Add Salary Grade",onClose:x,submitButtonTitle:i?"Update":"Submit",adding:d,children:[(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"grade",label:"Grade",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"from",label:"From"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:h,name:"to",label:"To"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"active",formik:h,label:"Status",options:ad})})]}),h.values.breakups.map(((e,a)=>(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(u.A,{fontWeight:"bold",mt:1,children:"Breakups:"}),(0,re.jsxs)(xe.Ay,{container:!0,gap:1,sx:{backgroundColor:t?"transparent":"#F0F8FF",borderRadius:"5px",padding:"20px 15px 30px 15px",border:"1px solid lightgrey",my:1.5},children:[(0,re.jsx)(xe.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.name,name:"name",label:"Name",required:!0,onChange:t=>p(t,e,"breakups")})}),(0,re.jsx)(xe.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.percentage,name:"percentage",label:"Percentage",required:!0,onChange:t=>p(t,e,"breakups")})}),(0,re.jsxs)(xe.Ay,{xs:12,sm:3,md:3,item:!0,sx:{fontSize:16,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,re.jsx)(Xe.A,{onClick:()=>j("breakups"),children:(0,re.jsx)(rt.A,{})}),(0,re.jsx)(Xe.A,{color:"error",onClick:()=>g(a,"breakups"),children:(0,re.jsx)(ws.A,{color:"error"})})]})]},a)]}))),h.values.deduction.map(((e,a)=>(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(u.A,{fontWeight:"bold",mt:1,children:"Deduction:"}),(0,re.jsxs)(xe.Ay,{container:!0,gap:1,sx:{backgroundColor:t?"transparent":"#F0F8FF",borderRadius:"5px",padding:"20px 15px 30px 15px",border:"1px solid lightgrey",my:1.5},children:[(0,re.jsx)(xe.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.name,name:"name",label:"Name",required:!0,onChange:t=>p(t,e,"deduction")})}),(0,re.jsx)(xe.Ay,{xs:12,sm:4,md:4,item:!0,children:(0,re.jsx)(di,{value:null===e||void 0===e?void 0:e.percentage,name:"percentage",label:"Percentage",required:!0,onChange:t=>p(t,e,"deduction")})}),(0,re.jsxs)(xe.Ay,{xs:12,sm:3,md:3,item:!0,sx:{fontSize:16,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,re.jsx)(Xe.A,{onClick:()=>j("deduction"),children:(0,re.jsx)(rt.A,{})}),(0,re.jsx)(Xe.A,{color:"error",onClick:()=>g(a,"deduction"),children:(0,re.jsx)(ws.A,{color:"error"})})]})]},a)]})))]})]})}const nd=[{name:"Month",key:"month"},{name:"Year",key:"year"}];function id(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.salaryGrade.list,{params:{schoolId:e._id}});let a=[];for(let e of t.result){let t=e.deduction.map((e=>({...e,label:e.name,value:e.name})));a=[...a,...t]}x(a)}catch(t){console.log(t)}})()}),[e]);const h=(0,tt.Wx)({initialValues:{month:new Date,year:new Date},onSubmit:async t=>{d(!0);try{const a=Le()(t.month).format("MMMM"),{data:l}=await(0,Se.Jt)(ke.r.paymentHistory.downloadPdf,{params:{month:a,year:t.year,schoolId:e._id},responseType:"blob"});wl("application/pdf",l,"Salary_Slip_".concat(a)),j()}catch(a){console.log(a)}d(!1)}}),p=(0,tt.Wx)({initialValues:{type:new Date,date:new Date},onSubmit:async t=>{t.date;const a=t.type;m(!0);try{const l=Le()(t.month).format("MMMM"),{data:n}=await(0,Se.Jt)(ke.r.paymentHistory.downloadDeductionPdf,{params:{month:l,deduction:a,schoolId:e._id},responseType:"blob"});wl("application/pdf",n,"Deductions-".concat(l))}catch(l){console.log(l)}m(!1)}}),j=async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.paymentHistory.list,{params:{schoolId:e._id}});o(t.result)}catch(t){console.log(t)}};(0,l.useEffect)((()=>{1===t&&j()}),[t]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Salary Sheet","History","Salary Deduction"]}),(0,re.jsx)(Ct.A,{index:0,value:t,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:h,label:"Month",name:"month",openTo:"month",inputFormat:"MM",views:["month"]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:h,label:"Year",name:"year",openTo:"year",inputFormat:"YYYY",views:["year"]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:3,style:{alignSelf:"center"},children:(0,re.jsx)(pt.A,{loading:r,onClick:h.handleSubmit,size:"small",variant:"contained",children:"Process"})})]})})}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(gt.A,{actions:["download"],tableKeys:nd,bodyData:s,bodyDataModal:"history",onDownloadClick:e=>{window.open(e.data)}})}),(0,re.jsx)(Ct.A,{index:2,value:t,children:(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"type",formik:p,label:"Select Deduction Type",options:u})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Date",openTo:"month",inputFormat:"MM/yyyy",views:["month","year"],name:"date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,style:{alignSelf:"center"},item:!0,children:(0,re.jsx)(pt.A,{onClick:p.handleSubmit,loading:c,size:"small",variant:"contained",children:"Find"})})]})})})]})}const sd=[{name:"Group By Data",key:"groupByData",isDate:!0},{name:"Issue Total",key:"totalIssues"},{name:"Return Total",key:"totalReturns"}];var od=a(28994),rd=a(60163),dd=a(4240),cd=a(17869);const md=[{name:"Issue",value:400},{name:"Return",value:300},{name:"Remain",value:300}],ud=["#FFBB28","#00C49F","#32CD32"],xd=[{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Class",value:"class"}],hd=(0,n.Ay)(xe.Ay)((()=>({display:"flex",justifyContent:"center",alignItems:"center"}))),pd=(0,n.Ay)(s.A)((()=>({display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"})));function jd(){const[e,t]=(0,l.useState)(0),[a,n]=(0,l.useState)([]),{selectedSetting:i}=(0,l.useContext)(De.A),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),m=(0,tt.Wx)({initialValues:{academicYear:"",groupByData:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:async e=>{try{const{data:t}=await(0,Se.Jt)(ke.r.report.groupedLibraryData,{params:{schoolId:i._id,groupByData:e.groupByData,fromDate:Le()(e.fromDate).format("YYYY/MM/DD"),toDate:Le()(e.toDate).format("YYYY/MM/DD")}});n(t.result),console.log(t.result,"data999999999999999999=======")}catch(t){}}}),x=(0,tt.Wx)({initialValues:{academicYear:"",fromDate:Le()(new Date),toDate:Le()(new Date)},onSubmit:console.log("nnnn")});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);r(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),c(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),m.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})()}),[i]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Library Report"}),(0,re.jsx)(Dt.A,{onChange:(e,a)=>t(a),value:e,labels:["Tabular Report","Grapical Report"]}),(0,re.jsxs)(Ct.A,{index:0,value:e,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)("form",{onSubmit:m.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:m,label:"Select Academic Year",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"groupByData",formik:m,label:"Select Group By Data",options:xd})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:m,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:m,label:"To Date",name:"toDate"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",alignSelf:"center",gap:1,item:!0,children:[(0,re.jsx)(Xe.A,{type:"submit",size:"small",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:async()=>{try{wl("application/pdf",(await(0,Se.Jt)(ke.r.report.downloadGroupedLibraryData,{params:{schoolId:i._id,academicYear:m.values.academicYear,groupByData:m.values.groupByData,fromDate:Le()(m.values.fromDate).format("YYYY/MM/DD"),toDate:Le()(m.values.toDate).format("YYYY/MM/DD")},responseType:"blob"})).data,"libraryReport.pdf")}catch(e){console.log(e)}},children:"Print"})]})]})]})}),(0,re.jsx)(gt.A,{tableKeys:sd,bodyData:a,bodyDataModal:"library report",actions:[]})]}),(0,re.jsxs)(Ct.A,{index:1,value:e,children:[(0,re.jsx)(ue.A,{sx:{padding:2,mb:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:x,label:"Select Academic Year",options:d})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:x,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:x,label:"To Date",name:"toDate"})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,display:"flex",alignSelf:"center",gap:1,item:!0,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})]})}),(0,re.jsx)(hd,{container:!0,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,re.jsxs)(ue.A,{sx:{padding:2,mt:2},children:[(0,re.jsx)("img",{src:i.logo,height:60,width:60,style:{display:"block",margin:"auto"}}),(0,re.jsx)(u.A,{fontSize:18,textAlign:"center",children:i.name}),(0,re.jsx)(u.A,{gutterBottom:!0,fontSize:12,textAlign:"center",children:i.address}),(0,re.jsxs)(pd,{children:[" ",(0,re.jsx)(od.A,{sx:{color:Ue.A.darkPalette.primary.main}}),(0,re.jsx)(u.A,{textAlign:"center",color:"error",children:"Libary Report"})]})]})})}),(0,re.jsx)(s.A,{display:"flex",justifyContent:"center",mt:2,children:(0,re.jsxs)(rd.r,{width:1e3,height:380,children:[(0,re.jsx)(fe.s,{wrapperStyle:{textAlign:"center"},formatter:e=>e}),(0,re.jsx)(dd.F,{dataKey:"value",isAnimationActive:!1,data:md,outerRadius:150,label:!0,children:md.map(((e,t)=>(0,re.jsx)(cd.f,{fill:ud[t%ud.length]},t)))}),(0,re.jsx)(Ae.m,{})]})})]})]})}function gd(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(null),[u,x]=(0,l.useState)(!1),h=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},onSubmit:async t=>{try{x(!0);const{data:a}=await(0,Se.Jt)(ke.r.report.getStudentAttendanceReport,{params:{schoolId:e._id,academicYearId:t.academicYear,studentId:t.student}});m(a.result),x(!1)}catch(a){console.log(a),x(!1)}}});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);d(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),h.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});a(t.result.map((e=>({...e,label:e.name,value:e._id})))),h.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e]),(0,l.useEffect)((()=>{h.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:h.values.class}}});i(t.result.map((e=>({...e,label:e.name,value:e._id})))),h.setFieldValue("section",t.result[0]._id)}catch(t){console.log(t)}})()}),[h.values.class,e]),(0,l.useEffect)((()=>{h.values.academicYear&&h.values.class&&h.values.section&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:h.values.academicYear,"academicInfo.class":h.values.class,"academicInfo.section":h.values.section}}});o(a.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),h.setFieldValue("student",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[h.values.academicYear,h.values.class,h.values.section,e]);const p=[];for(let l=1;l<=31;l++)p.push((0,re.jsx)(da.A,{sx:{color:"white",display:"inline"},children:l},l));const j=(e,t,a)=>{const l=e["".concat(t,"-").concat(String(a).padStart(2,"0"))];return"present"===l?"P":"absent"===l?"A":"-"};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Yearly Attendance"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:h,label:"Select Academic Year",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:h,label:"Select Class",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:h,label:"Select Section",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:h,label:"Select Student",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(pt.A,{loading:u,onClick:h.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"Month"}),(0,re.jsx)(da.A,{align:"center",children:"Working Days"}),(0,re.jsx)(da.A,{align:"center",children:"Present Days"}),(0,re.jsx)(da.A,{align:"center",children:"Absent Days"}),p.map((e=>(0,re.jsx)(da.A,{align:"center",children:e.key},e.key)))]})}),(0,re.jsx)(ma.A,{children:c&&Object.keys(c).map((e=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:e}),(0,re.jsx)(da.A,{align:"center",children:c[e].totalWorkingDays}),(0,re.jsx)(da.A,{align:"center",children:c[e].totalPresentDays}),(0,re.jsx)(da.A,{align:"center",children:c[e].totalAbsentDays}),p.map((t=>(0,re.jsx)(da.A,{align:"center",children:j(c[e].attendance,e,t.key)},t.key)))]},e)))})]})]})}function yd(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),c=(0,tt.Wx)({initialValues:{academicYear:"",employee:""},onSubmit:async t=>{try{d(!0);const{data:a}=await(0,Se.Jt)(ke.r.report.getEmployeeAttendanceReport,{params:{schoolId:e._id,academicYearId:t.academicYear,employeeId:t.employee}});o(a.result),d(!1)}catch(a){console.log(a),d(!1)}}});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);c.setFieldValue("academicYear",e.result[0]._id),a(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id}});i(a.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),c.setFieldValue("employee",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[e._id]);const m=[];for(let l=1;l<=31;l++)m.push((0,re.jsx)(da.A,{sx:{color:"white",display:"inline"},children:l},l));const u=(e,t,a)=>{const l=e["".concat(t,"-").concat(String(a).padStart(2,"0"))];return"present"===l?"P":"absent"===l?"A":"late"===l?"L":"-"};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee Yearly Attendance"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:c,label:"Select Academic Year",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"employee",formik:c,label:"Select Employee",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,alignSelf:"center",children:(0,re.jsx)(pt.A,{loading:r,onClick:c.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"Month"}),(0,re.jsx)(da.A,{align:"center",children:"Working Days"}),(0,re.jsx)(da.A,{align:"center",children:"Present Days"}),(0,re.jsx)(da.A,{align:"center",children:"Absent Days"}),m.map((e=>(0,re.jsx)(da.A,{align:"center",children:e.key},e.key)))]})}),(0,re.jsx)(ma.A,{children:s&&Object.keys(s).map((e=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:e}),(0,re.jsx)(da.A,{align:"center",children:s[e].totalWorkingDays}),(0,re.jsx)(da.A,{align:"center",children:s[e].totalPresentDays}),(0,re.jsx)(da.A,{align:"center",children:s[e].totalAbsentDays}),m.map((t=>(0,re.jsx)(da.A,{align:"center",children:u(s[e].attendance,e,t.key)},t.key)))]},e)))})]})]})}const Ad=[{name:"Student",key:"studentName"},{name:"Section",key:"sectionName"},{name:"Activity",key:"activityName"},{name:"Activity Date",key:"activityDate",isDate:!0}];function fd(){const[e,t]=(0,l.useState)([]),{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),c=(0,tt.Wx)({initialValues:{academicYear:"",class:"",student:""},onSubmit:async e=>{try{const{data:l}=await(0,Se.Jt)(ke.r.report.getStudentActivityReport,{params:{schoolId:a._id,academicYearId:e.academicYear,studentId:e.student}});t(l.result)}catch(l){}}});return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);d(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),c.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:a._id}});i(e.result.map((e=>({...e,label:e.name,value:e._id})))),c.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})()}),[a]),(0,l.useEffect)((()=>{c.values.academicYear&&c.values.class&&(async()=>{try{var e;const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:a._id,search:{academicYear:c.values.academicYear,"academicInfo.class":c.values.class}}});o(t.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),c.setFieldValue("student",null===(e=t.result[0])||void 0===e?void 0:e._id)}catch(t){console.log(t)}})()}),[c.values.academicYear,c.values.class,a]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Activity Report"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)("form",{onSubmit:c.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:c,label:"Select Academic Year",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:c,label:"Select Class",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:c,label:"Select Student",options:s})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,item:!0,display:"flex",gap:1,alignSelf:"center",children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",type:"submit",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:async()=>{try{wl("application/pdf",(await(0,Se.Jt)(ke.r.report.getStudentActivityReportPdf,{params:{schoolId:a._id,academicYearId:c.values.academicYear,studentId:c.values.student},responseType:"blob"})).data,"studentActivityReport.pdf")}catch(e){console.log(e)}},children:"Print"})]})]})]})}),(0,re.jsx)(gt.A,{actions:[],tableKeys:Ad,bodyDataModal:"student activity report",bodyData:e})]})}function bd(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(""),[c,m]=(0,l.useState)([]),[u,x]=(0,l.useState)(!1),h=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",month:Le()(new Date)},onSubmit:async t=>{try{x(!0);const{data:t}=await(0,Se.Jt)(ke.r.report.getAllStudentsAttendanceReportForParticularMonth,{params:{schoolId:e._id,month:new Date(h.values.month).getMonth()+1,year:new Date(h.values.month).getFullYear(),academicYearId:h.values.academicYear,classId:h.values.class,sectionId:h.values.section}});o(t.result),d(Le()(h.values.month).format("YYYY-MM")),x(!1)}catch(a){console.log(a),x(!1)}}});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);m(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),h.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});a(t.result.map((e=>({...e,label:e.name,value:e._id})))),h.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e]),(0,l.useEffect)((()=>{h.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:h.values.class}}});i(t.result.map((e=>({...e,label:e.name,value:e._id})))),h.setFieldValue("section",t.result[0]._id)}catch(t){console.log(t)}})()}),[h.values.class,e]);const p=[];for(let l=1;l<=31;l++)p.push((0,re.jsx)(da.A,{sx:{color:"white",display:"inline"},children:l},l));const j=(e,t,a)=>{const l=e["".concat(t,"-").concat(String(a).padStart(2,"0"))];return"present"===l?"P":"absent"===l?"A":"-"};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Attendance Report"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:h,options:c,label:"Select Academic Year"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:h,label:"Select Class",options:t})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:h,label:"Select Section",options:n})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:h,label:"Month",name:"month",openTo:"month",inputFormat:"MM",views:["month"]})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(pt.A,{loading:u,onClick:h.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"Student Name"}),(0,re.jsx)(da.A,{align:"center",children:"Working Days"}),(0,re.jsx)(da.A,{align:"center",children:"Present Days"}),(0,re.jsx)(da.A,{align:"center",children:"Absent Days"}),p.map((e=>(0,re.jsx)(da.A,{align:"center",children:e.key},e.key)))]})}),(0,re.jsx)(ma.A,{children:s.map((e=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:e.studentName}),(0,re.jsx)(da.A,{align:"center",children:e.totalWorkingDays}),(0,re.jsx)(da.A,{align:"center",children:e.totalPresentDays}),(0,re.jsx)(da.A,{align:"center",children:e.totalAbsentDays}),p.map((t=>(0,re.jsx)(da.A,{align:"center",children:j(e.attendance,r,t.key)},t.key)))]},e.studentId)))})]})]})}function vd(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[s,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(""),c=(0,tt.Wx)({initialValues:{academicYear:"",month:Le()(new Date)},onSubmit:async t=>{try{i(!0);const{data:t}=await(0,Se.Jt)(ke.r.report.getAllEmployeesAttendanceReportForParticularMonth,{params:{schoolId:e._id,month:new Date(c.values.month).getMonth()+1,year:new Date(c.values.month).getFullYear(),academicYearId:c.values.academicYear}});a(t.result),d(Le()(c.values.month).format("YYYY-MM")),i(!1)}catch(l){console.log(l),i(!1)}}});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);o(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),c.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})()}),[e]);const m=[];for(let l=1;l<=31;l++)m.push((0,re.jsx)(da.A,{sx:{color:"white",display:"inline"},children:l},l));const u=(e,t,a)=>{const l=e["".concat(t,"-").concat(String(a).padStart(2,"0"))];return"present"===l?"P":"absent"===l?"A":"late"===l?"L":"-"};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Employee Attendance"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:c,label:"Select Academic Year",options:s})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:c,label:"Month",name:"month",openTo:"month",inputFormat:"MM",views:["month"]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,alignSelf:"center",children:(0,re.jsx)(pt.A,{loading:n,onClick:c.handleSubmit,size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"Employee Name"}),(0,re.jsx)(da.A,{align:"center",children:"Working Days"}),(0,re.jsx)(da.A,{align:"center",children:"Present Days"}),(0,re.jsx)(da.A,{align:"center",children:"Absent Days"}),m.map((e=>(0,re.jsx)(da.A,{align:"center",children:e.key},e.key)))]})}),(0,re.jsx)(ma.A,{children:t.map((e=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:e.employeeName}),(0,re.jsx)(da.A,{align:"center",children:e.totalWorkingDays}),(0,re.jsx)(da.A,{align:"center",children:e.totalPresentDays}),(0,re.jsx)(da.A,{align:"center",children:e.totalAbsentDays}),m.map((t=>(0,re.jsx)(da.A,{align:"center",children:u(e.attendance,r,t.key)},t.key)))]},e.employeeId)))})]})]})}const Sd=[{name:"Name",key:"name"},{name:"Phone",key:"phone"},{name:"To Meet",key:"toMeetUserName"},{name:"ReasonToMeet",key:"reasonToMeet"},{name:"CheckIn",key:"checkIn"},{name:"Check Out",key:"checkOut"}],kd=(0,n.Ay)(ra.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px","&:nth-of-type(odd)":{backgroundColor:"dark"===t.palette.mode?"rgb(81 81 81)":"#F0F8FF"}}})),Dd=(0,n.Ay)(da.A)((e=>{let{theme:t,isDarkMode:a}=e;return{width:"200px",border:"1px solid gray",["&.".concat(ba.A.head)]:{backgroundColor:a?"transparent":"blue"},["&.".concat(ba.A.body)]:{fontSize:15}}}));function Cd(e){var t,a,n,i;let{open:s=!0,title:o="",tableData:r,onClose:d=(()=>{})}=e;const{isDarkMode:c}=(0,l.useContext)(ot.A);return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(mt.A,{onClose:d,"aria-labelledby":"customized-dialog-title",open:s,children:[(0,re.jsx)(ut.A,{sx:{m:0,p:2,backgroundColor:c?"#333":"#fff",color:c?"#fff":"#000"},id:"customized-dialog-title",children:o}),(0,re.jsx)(h.A,{"aria-label":"close",onClick:d,sx:{position:"absolute",right:8,top:8,color:c?"#fff":"#000"},children:(0,re.jsx)(Sa.A,{})}),(0,re.jsx)(xt.A,{sx:{backgroundColor:c?"#333":"#fff",color:c?"#fff":"#000"},children:(0,re.jsx)(sa.A,{"aria-label":"customized table",children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"School Name"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r||null===(t=r.school)||void 0===t?void 0:t.name)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"Name"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r?void 0:r.name)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"Phone"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r?void 0:r.phone)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"Coming From"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r?void 0:r.comingForm)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"User Type"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r||null===(a=r.toMeetUserType)||void 0===a?void 0:a.name)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"To Meet"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r?void 0:r.toMeetUserName)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"Reason To Meet"}),(0,re.jsx)(Dd,{align:"left",width:100,isDarkMode:c,children:(null===r||void 0===r||null===(n=r.reasonToMeet)||void 0===n?void 0:n.charAt(0).toUpperCase())+(null===r||void 0===r||null===(i=r.reasonToMeet)||void 0===i?void 0:i.slice(1))})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"Check In"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r?void 0:r.checkIn)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"Check Out"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r?void 0:r.checkOut)||"NA"})]}),(0,re.jsxs)(kd,{isDarkMode:c,children:[(0,re.jsx)(Dd,{align:"left",sx:{fontWeight:"bold"},isDarkMode:c,children:"Note"}),(0,re.jsx)(Dd,{align:"left",width:100,children:(null===r||void 0===r?void 0:r.note)||"NA"})]})]})})})]})})}const wd=[{label:"Vendor",value:"vendor"},{label:"Relative",value:"relative"},{label:"Friend",value:"friend"},{label:"Guardian",value:"guardian"},{label:"Family",value:"family"},{label:"Interview",value:"interview"},{label:"Meeting",value:"meeting"},{label:"Other",value:"other"}];function Id(){var e,t,a;const{selectedSetting:n}=(0,l.useContext)(De.A),[i,s]=(0,l.useState)([]),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),[b,v]=(0,l.useState)([]),[S,k]=(0,l.useState)({open:!1,tableData:"",action:()=>{}}),D=(0,tt.Wx)({initialValues:{name:(null===o||void 0===o?void 0:o.name)||"",phone:(null===o||void 0===o?void 0:o.phone)||"",comingForm:(null===o||void 0===o?void 0:o.comingForm)||"",toMeetUserType:(null===o||void 0===o?void 0:o.toMeetUserType._id)||"",toMeetUser:(null===o||void 0===o||null===(e=o.toMeetUser)||void 0===e?void 0:e._id)||"",reasonToMeet:(null===o||void 0===o?void 0:o.reasonToMeet)||"",note:(null===o||void 0===o?void 0:o.note)||"",checkOut:null!==o&&void 0!==o&&o.checkOut?Ui()(o.checkOut,"DD/MM/YYYY, HH:mm:ss").format("YYYY-MM-DDTHH:mm"):"",class:(null===o||void 0===o||null===(t=o.class)||void 0===t?void 0:t._id)||"",section:(null===o||void 0===o||null===(a=o.section)||void 0===a?void 0:a._id)||"",roleName:(null===o||void 0===o?void 0:o.roleName)||""},onSubmit:async e=>{try{const t={...e,schoolId:n._id};if(c(!0),o){const{data:e}=await(0,Se.yJ)(ke.r.visitorInfo.update+"/"+o._id,t)}else{const{data:e}=await(0,Se.bE)(ke.r.visitorInfo.create,t)}C()}catch(t){console.log(t)}c(!1)},enableReinitialize:!0}),C=()=>{r(null),u(!1)};(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);h(e.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(e){console.error(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:n._id}});j(e.result.map((e=>({label:e.name,value:e._id})))),D.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.visitorInfo.list);s(e.result.map((e=>({...e,toMeetUserName:e.toMeetUser.basicInfo.name,checkIn:new Date(e.checkIn).toLocaleString(),checkOut:e.checkOut?new Date(e.checkOut).toLocaleString():""}))))}catch(e){console.error(e)}})()}),[n]),(0,l.useEffect)((()=>{D.values.class&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:n._id,search:{class:D.values.class}}});y(e.result.map((e=>({label:e.name,value:e._id})))),D.setFieldValue("section",e.result[0]._id)}catch(e){console.log(e)}})()}),[D.values.class]),(0,l.useEffect)((()=>{if(D.values.toMeetUserType){var e;let t=null===(e=x.find((e=>e._id===D.values.toMeetUserType)))||void 0===e?void 0:e.name;D.setFieldValue("roleName",t),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:n._id,search:{role:D.values.toMeetUserType}}});v(e.result.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(e){console.log(e)}})()}}),[D.values.toMeetUserType]),(0,l.useEffect)((()=>{if(D.values.toMeetUserType,D.values.class,D.values.section){var e;let t=null===(e=x.find((e=>e._id===D.values.toMeetUserType)))||void 0===e?void 0:e.name;D.setFieldValue("roleName",t),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:n._id,search:{"academicInfo.class":D.values.class,"academicInfo.section":D.values.section}}});f(e.result.map((e=>({...e,label:e.basicInfo.name,value:e._id}))))}catch(e){console.log(e)}})()}}),[D.values.toMeetUserType,D.values.class,D.values.section]);return console.log(i,"mmmmmm"),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Visitor Info"}),(0,re.jsx)(xe.Ay,{container:!0,mb:1,children:(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",justifyContent:"flex-start",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Excel"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})}),(0,re.jsx)(gt.A,{actions:["view","edit"],tableKeys:Sd,bodyDataModal:"visitor info",bodyData:i,onEditClick:e=>{r(e),u(!0)},onViewClick:e=>{k({...S,open:!0,tableData:e})}}),(0,re.jsx)(Cd,{title:"Visitor Information",open:null===S||void 0===S?void 0:S.open,tableData:null===S||void 0===S?void 0:S.tableData,onClose:e=>{k({...S,open:!1})}}),(0,re.jsx)(dt,{title:"Add visitor info",onAddClick:()=>{u(!0)}}),(0,re.jsx)(jt,{open:m,formik:D,formTitle:o?"Update Visitor Info":"Add Visitor Info",onClose:C,submitButtonTitle:o?"Update":"Submit",adding:d,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"name",label:"Name",required:!0,disabled:null!=o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"phone",label:"Phone",required:!0,disabled:null!=o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"comingForm",label:"Coming Form",required:!0,disabled:null!=o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"toMeetUserType",formik:D,label:"Select To Meet User Type",options:x,disabled:null!=o})}),"STUDENT"===D.values.roleName&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"class",formik:D,label:"Select Class",options:p,disabled:null!=o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"section",formik:D,label:"Select Section",options:g,disabled:null!=o})})]}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"toMeetUser",formik:D,label:"Select To Meet User",options:"STUDENT"===D.values.roleName?A:b,disabled:null!=o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(et.A,{name:"reasonToMeet",formik:D,label:"Select Reason To Meet",options:wd,disabled:null!=o})}),null!=o&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(Ft.A,{value:null===o||void 0===o?void 0:o.checkIn.toLocaleString(),fullWidth:!0,label:"Check In",name:"checkIn",disabled:null!=o,sx:{mt:2,borderWidth:1,borderRadius:e=>e.shape.borderRadius},InputProps:{style:{borderWidth:1,height:"42px",borderRadius:e=>e.shape.borderRadius}}})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,children:(0,re.jsx)(At.A,{formik:D,label:"Check Out",name:"checkOut",type:"datetime-local",InputLabelProps:{shrink:!0}})})]}),(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:12,item:!0,children:(0,re.jsx)(At.A,{formik:D,name:"note",label:"Note"})})]})})]})}const Nd=[{name:"Name",key:"name"},{name:"Class",key:"class"},{name:"Section",key:"section"},{name:"Check Out",key:"checkOut"},{name:"Parent Name",key:"parentName"},{name:"Relation",key:"relation"},{name:"Visitor Contact Number",key:"visitorContactNumber"}],_d=[{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Sister",value:"Sister"},{label:"Brother",value:"Brother"},{label:"Uncle",value:"Uncle"},{label:"Other Relative",value:"Other Relative"}];function Td(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(!1),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(!1),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),[b,v]=(0,l.useState)([]),S=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.studentCheckout.list,{params:{schoolId:t._id}});n(e.result)}catch(e){console.log(e)}},k=()=>{s(!1),r(null)},D=async()=>{try{var e;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:t._id,search:{class:C.values.class}}});C.setFieldValue("section",null===(e=a.result[0])||void 0===e?void 0:e._id),v(a.result.map((e=>({...e,label:e.name,value:e._id}))))}catch(a){console.log(a)}},C=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},enableReinitialize:!0});(0,l.useEffect)((()=>{C.values.class&&D()}),[C.values.class]),(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);C.setFieldValue("academicYear",e.result[0]._id),j(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:t._id}});f(e.result.map((e=>({...e,label:e.name,value:e._id})))),C.setFieldValue("class",e.result[0]._id)}catch(e){console.log(e)}})()}),[t._id]),(0,l.useEffect)((()=>{C.values.academicYear&&C.values.class&&C.values.section&&t&&(async()=>{try{var e;const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:t._id,search:{academicYear:C.values.academicYear,"academicInfo.class":C.values.class,"academicInfo.section":C.values.section}}});y(a.result.map((e=>({...e,label:e.basicInfo.name,value:e._id})))),C.setFieldValue("student",null===(e=a.result[0])||void 0===e?void 0:e._id)}catch(a){console.log(a)}})()}),[C.values.academicYear,C.values.class,C.values.section,t]),(0,l.useEffect)((()=>{C.values.class&&D()}),[C.values.class]),(0,l.useEffect)((()=>{C.values.academicYear&&S()}),[C.values.academicYear]);const w=(0,tt.Wx)({initialValues:{student:(null===(e=g.find((e=>e._id===C.values.student)))||void 0===e?void 0:e.basicInfo.name)||"",relationship:"",reason:"",visitorName:"",visitorContactNumber:""},onSubmit:async e=>{try{const a={...e,schoolId:t._id,student:C.values.student};c(!0);const{data:l}=await(0,Se.yJ)(ke.r.studentCheckout.update,a);S(),k()}catch(a){console.log(a)}c(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Checkout"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:C.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:C,label:"Select Academic Year",options:p})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:C,label:"Select Class",options:A})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:C,label:"Select Section",options:b})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"student",formik:C,label:"Select Student",options:g})}),(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,display:"flex",justifyContent:"flex-end",gap:1,children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",type:"submit",children:"Find"}),(0,re.jsx)(pt.A,{size:"small",loading:m,onClick:async()=>{try{u(!0);wl("application/pdf",(await(0,Se.Jt)(ke.r.studentCheckout.downloadPdf,{params:{schoolId:t._id},responseType:"blob"})).data,"student_checkout.pdf"),u(!1)}catch(e){console.log(e),u(!1)}},variant:"contained",children:"Print"}),(0,re.jsx)(Xe.A,{size:"small",onClick:async()=>{try{wl("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",(await(0,Se.Jt)(ke.r.studentCheckout.donwloadExcel,{params:{schoolId:t._id},responseType:"blob"})).data,"student_checkout.xlsx")}catch(e){console.log(e)}},variant:"contained",children:"Excel"})]})]})})}),(0,re.jsx)(dt,{title:"Student Checkout",onAddClick:()=>{s(!0)},disabled:!C.values.student}),(0,re.jsx)(jt,{open:i,formik:w,formTitle:o?"Update Student Checkout":"Add Student Checkout",onClose:k,submitButtonTitle:o?"Update":"Submit",adding:d,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:12,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:w,name:"student",label:"Student Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(et.A,{name:"relationship",formik:w,label:"Relation With Student",options:_d})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(At.A,{name:"reason",formik:w,label:"Enter Reason"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(At.A,{name:"visitorName",formik:w,label:"Enter Visitor Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(At.A,{name:"visitorContactNumber",formik:w,label:"Enter Visitor Phone"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,lg:12,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",mt:2},children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",sx:{color:"#fff"},children:"Send OTP"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,item:!0,children:(0,re.jsx)(At.A,{name:"otp",formik:w,label:"Enter Otp"})})]})}),(0,re.jsx)(gt.A,{actions:["view"],tableKeys:Nd,bodyDataModal:"student checkout",bodyData:a})]})}const Md=[{name:"Subject",key:"subject"},{name:"Description",key:"description"},{name:"Status",key:"status"}];function Fd(){const[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(!1),[i,s]=(0,l.useState)(!1),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)(null),m=(0,tt.Wx)({initialValues:{title:(null===d||void 0===d?void 0:d.title)||"",examType:(null===d||void 0===d?void 0:d.examType)||"",marksAssignmentAllowed:(null===d||void 0===d?void 0:d.marksAssignmentAllowed)||!1,note:(null===d||void 0===d?void 0:d.note)||"",isPublic:(null===d||void 0===d?void 0:d.isPublic)||!1},onSubmit:console.log("lll"),enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Tickets"}),(0,re.jsx)(gt.A,{actions:[],bodyDataModal:"Tickets",bodyData:e,tableKeys:Md}),(0,re.jsx)(dt,{title:"Add Tickets",onAddClick:()=>{n(!0)}}),(0,re.jsx)(jt,{open:a,formik:m,formTitle:d?"Update Report Problem":"Add Report Problem",onClose:()=>{n(!1),c(null)},submitButtonTitle:d?"Update":"Submit",adding:i,children:(0,re.jsxs)(xe.Ay,{rowSpacing:0,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:m,name:"title",label:"Subject",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(At.A,{formik:m,name:"description",label:"Description",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:6,item:!0,children:(0,re.jsx)(Ul.A,{name:"receipt",label:"Select Files",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}r(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:o,onRemove:e=>((e,t)=>{r(o.filter((t=>t.name!=e)))})(e),multi:!0})})]})})]})}const zd=[{name:"Parent Name",key:"parentName"},{name:"Student Name",key:"studentName"},{name:"Feedback",key:"feedback"}],Ed=(0,n.Ay)(s.A)({display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"20px"}),qd=e=>{let{onUpdate:t=(()=>{}),data:a={}}=e;const[n,i]=(0,l.useState)(!1),s=async e=>{try{i(!0),await(0,Se.yJ)(ke.r.guardianFeedback.update+"/"+a._id,{status:e}),i(!1),t()}catch(l){console.log(l),i(!1)}};return(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(v.A,{direction:"row",spacing:2,children:[["pending","approved"].includes(a.status)&&(0,re.jsx)(pt.A,{loading:n,onClick:()=>s("rejected"),disableElevation:!0,size:"small",color:"error",variant:"contained",children:"Reject"}),["pending","rejected"].includes(a.status)&&(0,re.jsx)(pt.A,{loading:n,onClick:()=>s("approved"),disableElevation:!0,size:"small",color:"success",variant:"contained",children:"Approve"})]})})};function Yd(){var e;const{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[r,d]=(0,l.useState)("pending"),[c,m]=(0,l.useState)({open:!1,contents:"",action:()=>{}}),x=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.guardianFeedback.list,{params:{schoolId:t._id}});n(e.result),o(e.result.filter((e=>e.status===r)))}catch(e){console.log(e)}};(0,l.useEffect)((()=>{x()}),[t._id]),(0,l.useEffect)((()=>{o(a.filter((e=>e.status===r)))}),[r]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Guardian Feedback"}),(0,re.jsx)(Ed,{children:(0,re.jsx)(va.A,{variant:"outlined","aria-label":"outlined button group",children:["pending","approved","rejected"].map((e=>(0,re.jsxs)(Xe.A,{variant:"outlined",sx:{background:r===e?Ue.A.lightPalette.primary.main:"",":hover":{background:r===e?Ue.A.darkPalette.primary.main:""},color:r===e?"#fff":e=>"dark"===e.palette.mode?"#fff":"#18488"},onClick:()=>{d(e)},children:[e,":",a.filter((t=>t.status===e)).length]},e)))})}),(0,re.jsx)(gt.A,{actions:["custom","delete","view"],bodyDataModal:"feedback",bodyData:i,tableKeys:zd,onDeleteClick:async e=>{try{const{data:t}=await(0,Se.Jt)(ke.r.guardianFeedback.delete+"/"+e);x()}catch(t){console.log(t)}},CustomAction:qd,onUpdate:x,onViewClick:e=>{m({...c,open:!0,contents:e})}}),(0,re.jsx)(ka,{title:"Guardian Feedback",open:null===c||void 0===c?void 0:c.open,tableData:null===c||void 0===c?void 0:c.contents,onClose:e=>{m({...c,open:!1})},children:(0,re.jsx)(s.A,{sx:{minWidth:300,p:1},children:(0,re.jsx)(u.A,{id:"modal-modal-description",sx:{wordBreak:"break-word"},children:null===c||void 0===c||null===(e=c.contents)||void 0===e?void 0:e.feedback})})})]})}const Wd=[{name:"Roll No",key:"rollNo"},{name:"Name",key:"name"},{name:"Photo",key:"image"},{name:"File",key:"file"}];function Rd(){const[e,t]=(0,l.useState)([]),a=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:"",student:""},onSubmit:console.log("nnnn")});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Bulk Photo"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:a,label:"Select Academic Year"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:a,label:"Select Class"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"sectiion",formik:a,label:"Select Section"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,display:"flex",justifyContent:"flex-end",children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Find"})})]})}),(0,re.jsx)(gt.A,{actions:["edit"],tableKeys:Wd,bodyDataModal:"student bulk photo",bodyData:e})]})}const Pd=(0,n.Ay)(xe.Ay)((()=>({display:"flex",justifyContent:"center",alignItems:"center"}))),Jd=(0,n.Ay)(s.A)((()=>({display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"}))),Vd=[{label:"Gender",value:"gender"},{label:"Vehicle",value:"vehicle"},{label:"Library",value:"library"},{label:"Hostel",value:"hostel"},{label:"Class",value:"class"}],Bd=e=>e.map((e=>({name:null===e||void 0===e?void 0:e.className,male:null===e||void 0===e?void 0:e.maleCount,female:null===e||void 0===e?void 0:e.femaleCount,total:null===e||void 0===e?void 0:e.totalCount}))),Ld=e=>e.map((e=>({name:"gender",male:null===e||void 0===e?void 0:e.maleCount,female:null===e||void 0===e?void 0:e.femaleCount,total:null===e||void 0===e?void 0:e.totalCount}))),Ud=e=>e.map((e=>({name:"library",male:null===e||void 0===e?void 0:e.maleCount,female:null===e||void 0===e?void 0:e.femaleCount,total:null===e||void 0===e?void 0:e.totalCount}))),Od=e=>e.map((e=>({name:null===e||void 0===e?void 0:e.vehicleNumber,male:null===e||void 0===e?void 0:e.maleCount,female:null===e||void 0===e?void 0:e.femaleCount,total:null===e||void 0===e?void 0:e.totalCount}))),Hd=e=>e.map((e=>({name:null===e||void 0===e?void 0:e.hostelName,male:null===e||void 0===e?void 0:e.maleCount,female:null===e||void 0===e?void 0:e.femaleCount,total:null===e||void 0===e?void 0:e.totalCount})));function Gd(){const e=(0,l.useRef)(),{selectedSetting:t}=(0,l.useContext)(De.A),[a,n]=(0,l.useState)(0),[i,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),[b,v]=(0,l.useState)(""),[S,k]=(0,l.useState)(""),[D,C]=l.useState(0),[w,I]=l.useState(10),N=Bd(c),_=Ld(x),T=Ud(p),M=Od(g),F=Hd(A),[z,E]=(0,l.useState)(!1),[q,Y]=(0,l.useState)(!1);let W=0,R=0;const P=(0,Vt.useReactToPrint)({content:()=>e.current}),J=(0,tt.Wx)({initialValues:{academicYear:"",groupByData:""},onSubmit:async e=>{try{E(!0);const{data:a}=await(0,Se.Jt)(ke.r.report.getStudentReport,{params:{schoolId:t._id,groupBy:e.groupByData,academicYearId:e.academicYear}});o(a.result),v(e.groupByData),E(!1)}catch(a){console.log(a),E(!1)}}}),V=(0,tt.Wx)({initialValues:{academicYear:"",groupByData:""},onSubmit:async e=>{try{Y(!0);const{data:a}=await(0,Se.Jt)(ke.r.report.getStudentReport,{params:{schoolId:t._id,groupBy:e.groupByData,academicYearId:e.academicYear}});k(e.groupByData),"class"===e.groupByData&&m(a.result),"gender"===e.groupByData&&h(a.result),"library"===e.groupByData&&j(a.result),"vehicle"===e.groupByData&&y(a.result),"hostel"===e.groupByData&&f(a.result),Y(!1)}catch(a){console.log(a),Y(!1)}}});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);d(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),J.setFieldValue("academicYear",e.result[0]._id),V.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})()}),[t]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Student Report"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>n(t),value:a,labels:["Tabular Report","Grapical Report"]}),(0,re.jsxs)(Ct.A,{index:0,value:a,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)("form",{onSubmit:J.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:J,label:"Select Academic Year",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"groupByData",formik:J,label:"Select Group By Data",options:Vd})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,alignSelf:"center",display:"flex",gap:1,item:!0,children:[(0,re.jsx)(pt.A,{loading:z,size:"small",variant:"contained",type:"submit",children:"Find"}),(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Print"})]})]})]})}),(0,re.jsxs)(ia.A,{component:ue.A,children:["class"===b&&(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"SL"}),(0,re.jsx)(da.A,{align:"center",children:"Class"}),(0,re.jsx)(da.A,{align:"center",children:"Male"}),(0,re.jsx)(da.A,{align:"center",children:"Female"}),(0,re.jsx)(da.A,{align:"center",children:"Total"})]})}),(0,re.jsxs)(ma.A,{children:[i.map(((e,t)=>(W+=e.maleCount,R+=e.femaleCount,(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:e.className}),(0,re.jsx)(da.A,{align:"center",children:e.maleCount}),(0,re.jsx)(da.A,{align:"center",children:e.femaleCount}),(0,re.jsx)(da.A,{align:"center",children:e.totalCount})]},t)))),(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"start",colSpan:2,sx:{fontWeight:"bold"},children:"Total:"}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:W}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:R}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:W+R})]})]})]}),"gender"===b&&(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"SL"}),(0,re.jsx)(da.A,{align:"center",children:"Male"}),(0,re.jsx)(da.A,{align:"center",children:"Female"}),(0,re.jsx)(da.A,{align:"center",children:"Total"})]})}),(0,re.jsx)(ma.A,{children:i.map(((e,t)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:e.maleCount}),(0,re.jsx)(da.A,{align:"center",children:e.femaleCount}),(0,re.jsx)(da.A,{align:"center",children:e.totalCount})]},t)))})]}),"vehicle"===b&&(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"SL"}),(0,re.jsx)(da.A,{align:"center",children:"Vehicle Number"}),(0,re.jsx)(da.A,{align:"center",children:"Male"}),(0,re.jsx)(da.A,{align:"center",children:"Female"}),(0,re.jsx)(da.A,{align:"center",children:"Total"})]})}),(0,re.jsxs)(ma.A,{children:[i.map(((e,t)=>(W+=e.maleCount,R+=e.femaleCount,(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:e.vehicleNumber}),(0,re.jsx)(da.A,{align:"center",children:e.maleCount}),(0,re.jsx)(da.A,{align:"center",children:e.femaleCount}),(0,re.jsx)(da.A,{align:"center",children:e.totalCount})]},t)))),(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{sx:{fontWeight:"bold"},align:"start",colSpan:2,children:"Total:"}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:W}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:R}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:W+R})]})]})]}),"library"===b&&(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"SL"}),(0,re.jsx)(da.A,{align:"center",children:"Male"}),(0,re.jsx)(da.A,{align:"center",children:"Female"}),(0,re.jsx)(da.A,{align:"center",children:"Total"})]})}),(0,re.jsx)(ma.A,{children:i.map(((e,t)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsxs)(da.A,{align:"center",children:[" ",t+1]}),(0,re.jsx)(da.A,{align:"center",children:e.maleCount}),(0,re.jsx)(da.A,{align:"center",children:e.femaleCount}),(0,re.jsx)(da.A,{align:"center",children:e.totalCount})]},t)))})]}),"hostel"===b&&(0,re.jsxs)(sa.A,{size:"small",children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"SL"}),(0,re.jsx)(da.A,{align:"center",children:"Hostel Name"}),(0,re.jsx)(da.A,{align:"center",children:"Male"}),(0,re.jsx)(da.A,{align:"center",children:"Female"}),(0,re.jsx)(da.A,{align:"center",children:"Total"})]})}),(0,re.jsxs)(ma.A,{children:[i.map(((e,t)=>(W+=e.maleCount,R+=e.femaleCount,(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:t+1}),(0,re.jsx)(da.A,{align:"center",children:e.hostelName}),(0,re.jsx)(da.A,{align:"center",children:e.maleCount}),(0,re.jsx)(da.A,{align:"center",children:e.femaleCount}),(0,re.jsx)(da.A,{align:"center",children:e.totalCount})]},t)))),(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"start",colSpan:2,sx:{fontWeight:"bold"},children:"Total:"}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:W}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:R}),(0,re.jsx)(da.A,{align:"center",sx:{fontWeight:"bold"},children:W+R})]})]})]})]}),(0,re.jsx)(Oa.A,{size:"small",component:"div",count:i&&i.length?i.length:0,page:D,onPageChange:(e,t)=>{C(t)},rowsPerPage:w,onRowsPerPageChange:e=>{I(+e.target.value),C(0)}})]}),(0,re.jsxs)(Ct.A,{index:1,value:a,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)("form",{onSubmit:V.handleSubmit,children:[" ",(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:V,label:"Select Academic Year",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"groupByData",formik:V,label:"Select Group By Data",options:Vd})}),(0,re.jsxs)(xe.Ay,{xs:12,md:6,lg:3,alignSelf:"center",display:"flex",gap:1,item:!0,children:[(0,re.jsx)(pt.A,{loading:q,size:"small",variant:"contained",type:"submit",children:"Find"}),(0,re.jsx)(Bt(),{trigger:()=>(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:P,children:"Print"}),content:()=>e.current})]})]})]})}),(0,re.jsxs)(s.A,{ref:e,children:[(0,re.jsx)(Pd,{container:!0,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,re.jsxs)(ue.A,{sx:{padding:2,mt:2},children:[(0,re.jsx)("img",{src:t.logo,height:60,width:60,style:{display:"block",margin:"auto"}}),(0,re.jsx)(u.A,{fontSize:18,textAlign:"center",children:t.name}),(0,re.jsx)(u.A,{gutterBottom:!0,fontSize:12,textAlign:"center",children:t.address}),(0,re.jsxs)(Jd,{children:[" ",(0,re.jsx)(od.A,{sx:{color:Ue.A.darkPalette.primary.main}}),(0,re.jsx)(u.A,{textAlign:"center",color:"error",children:"Student Report"})]})]})})}),"class"===S&&(0,re.jsx)(s.A,{display:"flex",justifyContent:"center",mt:3,children:(0,re.jsx)(he.u,{width:700,height:300,children:(0,re.jsxs)(pe.E,{data:N,children:[(0,re.jsx)(je.d,{strokeDasharray:"3 3"}),(0,re.jsx)(ge.W,{dataKey:"name"}),(0,re.jsx)(ye.h,{}),(0,re.jsx)(Ae.m,{}),(0,re.jsx)(fe.s,{wrapperStyle:{textAlign:"center"},formatter:e=>e,layout:"horizontal",align:"center"}),(0,re.jsx)(be.y,{dataKey:"male",fill:"#8884d8"}),(0,re.jsx)(be.y,{dataKey:"female",fill:"#82ca9d"}),(0,re.jsx)(be.y,{dataKey:"total",fill:"#ff7f50"})]})})}),"gender"===S&&(0,re.jsx)(s.A,{display:"flex",justifyContent:"center",mt:3,children:(0,re.jsx)(he.u,{width:700,height:300,children:(0,re.jsxs)(pe.E,{data:_,children:[(0,re.jsx)(je.d,{strokeDasharray:"3 3"}),(0,re.jsx)(ge.W,{dataKey:"name"}),(0,re.jsx)(ye.h,{}),(0,re.jsx)(Ae.m,{}),(0,re.jsx)(fe.s,{wrapperStyle:{textAlign:"center"},formatter:e=>e,layout:"horizontal",align:"center"}),(0,re.jsx)(be.y,{dataKey:"male",fill:"#8884d8"}),(0,re.jsx)(be.y,{dataKey:"female",fill:"#82ca9d"}),(0,re.jsx)(be.y,{dataKey:"total",fill:"#ff7f50"})]})})}),"vehicle"===S&&(0,re.jsx)(s.A,{display:"flex",justifyContent:"center",mt:3,children:(0,re.jsx)(he.u,{width:700,height:300,children:(0,re.jsxs)(pe.E,{data:M,children:[(0,re.jsx)(je.d,{strokeDasharray:"3 3"}),(0,re.jsx)(ge.W,{dataKey:"name"}),(0,re.jsx)(ye.h,{}),(0,re.jsx)(Ae.m,{}),(0,re.jsx)(fe.s,{wrapperStyle:{textAlign:"center"},formatter:e=>e,layout:"horizontal",align:"center"}),(0,re.jsx)(be.y,{dataKey:"male",fill:"#8884d8"}),(0,re.jsx)(be.y,{dataKey:"female",fill:"#82ca9d"}),(0,re.jsx)(be.y,{dataKey:"total",fill:"#ff7f50"})]})})}),"hostel"===S&&(0,re.jsx)(s.A,{display:"flex",justifyContent:"center",mt:3,children:(0,re.jsx)(he.u,{width:700,height:300,children:(0,re.jsxs)(pe.E,{data:F,children:[(0,re.jsx)(je.d,{strokeDasharray:"3 3"}),(0,re.jsx)(ge.W,{dataKey:"name"}),(0,re.jsx)(ye.h,{}),(0,re.jsx)(Ae.m,{}),(0,re.jsx)(fe.s,{wrapperStyle:{textAlign:"center"},formatter:e=>e,layout:"horizontal",align:"center"}),(0,re.jsx)(be.y,{dataKey:"male",fill:"#8884d8"}),(0,re.jsx)(be.y,{dataKey:"female",fill:"#82ca9d"}),(0,re.jsx)(be.y,{dataKey:"total",fill:"#ff7f50"})]})})}),"library"===S&&(0,re.jsx)(s.A,{display:"flex",justifyContent:"center",mt:3,children:(0,re.jsx)(he.u,{width:700,height:300,children:(0,re.jsxs)(pe.E,{data:T,children:[(0,re.jsx)(je.d,{strokeDasharray:"3 3"}),(0,re.jsx)(ge.W,{dataKey:"name"}),(0,re.jsx)(ye.h,{}),(0,re.jsx)(Ae.m,{}),(0,re.jsx)(fe.s,{wrapperStyle:{textAlign:"center"},formatter:e=>e,layout:"horizontal",align:"center"}),(0,re.jsx)(be.y,{dataKey:"male",fill:"#8884d8"}),(0,re.jsx)(be.y,{dataKey:"female",fill:"#82ca9d"}),(0,re.jsx)(be.y,{dataKey:"total",fill:"#ff7f50"})]})})})]})]})]})}var Kd=a(88084);const Qd=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),Zd=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),$d=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),Xd=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),ec=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),tc=[{label:"Male",value:"male"},{label:"Female",value:"female"}],ac=[{label:"A+",value:"a"},{label:"A-",value:"a-"},{label:"B+",value:"b+"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}],lc=[{label:"Active",value:!0},{label:"Inactive",value:!1}],nc=[{label:"Yes",value:!0},{label:"No",value:!1}],ic=[{label:"Yes",value:!0},{label:"No",value:!1}],sc=[{label:"Yes",value:!0},{label:"No",value:!1}],oc=[{label:"Monthly",value:"monthly"},{label:"Hourly",value:"hourly"}];function rc(){var e,t;const{selectedSetting:a}=(0,l.useContext)(De.A),{id:n}=(0,_.g)(),i=(0,_.Zp)(),[o,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),[b,S]=(0,l.useState)([]);(0,l.useEffect)((()=>{n&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.employee.getEmpById+"/"+n);r(e.result)}catch(e){console.log(e)}})()}),[n,a]);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.designation.list);u(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.department.list);h(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);j(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.salaryGrade.list,{params:{schoolId:a._id}});S(e.result.map((e=>({label:e.grade,value:e._id}))))}catch(e){console.log(e)}})()}),[a._id]);const k=(0,tt.Wx)({initialValues:{name:(null===o||void 0===o?void 0:o.basicInfo.name)||"",empId:(null===o||void 0===o?void 0:o.basicInfo.empId)||"",responsibility:(null===o||void 0===o?void 0:o.basicInfo.responsibility)||"",designation:(null===o||void 0===o?void 0:o.basicInfo.designation._id)||"",contactNumber:(null===o||void 0===o?void 0:o.contactNumber)||"",secMobileNo:(null===o||void 0===o?void 0:o.basicInfo.secMobileNo)||"",gender:(null===o||void 0===o?void 0:o.basicInfo.gender)||"",bloodGroup:(null===o||void 0===o?void 0:o.basicInfo.bloodGroup)||"",religion:(null===o||void 0===o?void 0:o.basicInfo.religion)||"",presentAddress:(null===o||void 0===o?void 0:o.basicInfo.presentAddress)||"",permanentAddress:(null===o||void 0===o?void 0:o.basicInfo.permanentAddress)||"",dob:null!==o&&void 0!==o&&null!==(e=o.basicInfo)&&void 0!==e&&e.dob?Le()(o.basicInfo.dob).format("YYYY/MM/DD"):null,fatherName:(null===o||void 0===o?void 0:o.basicInfo.fatherName)||"",spouseName:(null===o||void 0===o?void 0:o.basicInfo.spouseName)||"",aadharNo:(null===o||void 0===o?void 0:o.basicInfo.aadharNo)||"",fatherOccupation:(null===o||void 0===o?void 0:o.basicInfo.fatherOccupation)||"",spouseOccupation:(null===o||void 0===o?void 0:o.basicInfo.spouseOccupation)||"",qualification:(null===o||void 0===o?void 0:o.academicInfo.qualification)||"",workExperience:(null===o||void 0===o?void 0:o.academicInfo.workExperience)||"",salaryGrade:(null===o||void 0===o?void 0:o.academicInfo.salaryGrade)||"",email:(null===o||void 0===o?void 0:o.academicInfo.email)||"",salaryType:(null===o||void 0===o?void 0:o.academicInfo.salaryType)||"",role:(null===o||void 0===o?void 0:o.role._id)||"",department:(null===o||void 0===o?void 0:o.academicInfo.department._id)||"",joiningDate:null!==o&&void 0!==o&&null!==(t=o.academicInfo)&&void 0!==t&&t.joiningDate?Le()(o.academicInfo.joiningDate).format("YYYY/MM/DD"):null,libraryMember:(null===o||void 0===o?void 0:o.libraryMember)||!1,username:(null===o||void 0===o?void 0:o.username)||"",password:(null===o||void 0===o?void 0:o.otherInfo.password)||"",public:(null===o||void 0===o?void 0:o.otherInfo.public)||!1,showDetailsForWeb:(null===o||void 0===o?void 0:o.otherInfo.showDetailsForWeb)||!1,active:(null===o||void 0===o?void 0:o.active)||!0},onSubmit:async e=>{try{const t={basicInfo:{name:e.name,empId:e.empId,designation:e.designation,secMobileNo:e.secMobileNo,gender:e.gender,religion:e.religion,presentAddress:e.presentAddress,permanentAddress:e.permanentAddress,dob:e.dob,fatherName:e.fatherName,spouseName:e.spouseName,aadharNo:e.aadharNo,fatherOccupation:e.fatherOccupation,spouseOccupation:e.spouseOccupation,responsibility:e.responsibility},academicInfo:{workExperience:e.workExperience,salaryGrade:e.salaryGrade,email:e.email,salaryType:e.salaryType,department:e.department,joiningDate:e.joiningDate,resume:e.resume},otherInfo:{public:e.public||!1,showDetailsForWeb:e.showDetailsForWeb||!1},contactNumber:e.contactNumber,role:e.role,username:e.username,password:e.password,active:e.active,photo:e.photo,libraryMember:e.libraryMember,schoolId:a._id};c(!0);const l=new FormData;if(l.append("body",JSON.stringify(t)),g.forEach((e=>l.append("employeePhoto",e))),A.forEach((e=>l.append("resume",e))),console.log(l,"mmmmmmm"),o){await(0,Se.yJ)(ke.r.employee.update+"/"+o._id,l,{headers:{"Content-Type":"multipart/form-data"}});console.log(l,"mmmmmmm111")}else{const{data:e}=await(0,Se.bE)(ke.r.employee.create,l,{headers:{"Content-Type":"multipart/form-data"}})}i("/sch/human-resource/employee")}catch(t){console.log(t)}c(!1)},enableReinitialize:!0}),D=(e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"resume"===t?f(l):y(l)}else console.log("No files selected")},C=(e,t)=>{y(g.filter((t=>t.name!=e))),f(A.filter((t=>t.name!=e)))};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Add Employee",showTextField:!1}),(0,re.jsxs)(ec,{children:[(0,re.jsx)(Xd,{children:(0,re.jsx)("img",{src:g.length>0?URL.createObjectURL(g[0]):null!==o&&void 0!==o&&o.photo?null===o||void 0===o?void 0:o.photo:Kd,style:{width:"100px",height:"100px",objectFit:"contain"},alt:"photo"})}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{name:"employeePhoto",multi:!1,label:"Select Photo",onChange:e=>D(e,"employeePhoto"),customOnChange:!0,selectedFiles:g,onRemove:e=>C(e),accept:"image/jpeg, image/png"})})})]}),(0,re.jsxs)("form",{onSubmit:k.handleSubmit,children:[(0,re.jsxs)(Zd,{children:[(0,re.jsx)($d,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:k,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"empId",formik:k,label:"Employee Id"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"responsibility",formik:k,label:"Responsibility"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"designation",formik:k,label:"Designation",options:m})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"contactNumber",formik:k,label:"Contact Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"secMobileNo",formik:k,label:"Secondary Contact Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"gender",formik:k,label:"Select Gender",options:tc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"bloodGroup",formik:k,label:"Select Blood Group",options:ac})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"religion",formik:k,label:"Religon"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:k,label:"Date of Birth",name:"dob",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"presentAddress",formik:k,label:"Present Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"permanentAddress",formik:k,label:"Permanent Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherName",formik:k,label:"Father Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"spouseName",formik:k,label:"Spouse Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"aadharNo",formik:k,label:"Aadhar No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherOccupation",formik:k,label:"Father Occupation"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"spouseOccupation",formik:k,label:"Spouse Occupation"})})]})})]}),(0,re.jsxs)(Zd,{children:[(0,re.jsx)($d,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"qualification",formik:k,label:"Qualification              "})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"workExperience",formik:k,label:"Work Experience"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"salaryGrade",formik:k,label:"Select Salary Grade",options:b})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"email",formik:k,label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"salaryType",formik:k,label:"Select Salary Type",options:oc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"role",formik:k,label:"Select Role",options:p})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"department",formik:k,label:"Select Department",options:x})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"joiningDate",formik:k,label:"Joining Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"resume",label:"Select File",onChange:e=>D(e,"resume"),customOnChange:!0,selectedFiles:A,onRemove:e=>C(e),accept:"image/*,.pdf"})})]})})]}),(0,re.jsxs)(Zd,{children:[(0,re.jsx)($d,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Log In Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"username",formik:k,label:"User Name"})}),!o&&(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"password",formik:k,label:"Password"})})]})})]}),(0,re.jsxs)(Zd,{children:[(0,re.jsx)($d,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"public",formik:k,label:"Is public",options:nc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"showDetailsForWeb",formik:k,label:"Show Details For Web",options:ic})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"libraryMember",formik:k,label:"Library Member",options:sc})})]})})]}),(0,re.jsxs)(Zd,{sx:{marginBottom:"60px"},children:[(0,re.jsx)($d,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Profile Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"active",formik:k,label:"Status",options:lc})})})})]}),(0,re.jsx)(xe.Ay,{container:!0,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,children:(0,re.jsx)(Qd,{children:(0,re.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>i(-1),children:"Cancel"}),(0,re.jsx)(pt.A,{loading:d,type:"submit",size:"small",variant:"contained",children:"Submit"})]})})})})]})]})}const dc=[{name:"School Name",key:"name"},{name:"Logo",type:"image",key:"logo"}];function cc(){const[e,t]=(0,l.useState)(),a=(0,_.Zp)(),n=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.school.list);t(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{n()}),[]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Manage Institute"}),(0,re.jsx)(gt.A,{actions:["edit","switch"],bodyDataModal:"manage institute",bodyData:e,tableKeys:dc,toggleStatus:"active",onToggleSwitch:async e=>{try{const{data:t}=await(0,Se.yJ)(ke.r.school.toggleActiveStatus+"/"+e._id);n()}catch(t){console.log(t)}},onEditClick:e=>{a("/sch/manage-institute/edit-institute/".concat(e._id))}}),(0,re.jsx)(dt,{title:"Add Institute",onAddClick:e=>{a("/sch/manage-institute/add-institute")}})]})}var mc=a(70877),uc=a(21732);function xc(e){let{dataToEdit:t,title:a,onUpdate:n=(()=>{}),styles:o={}}=e;const[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[p,j]=(0,l.useState)([]),g=(0,i.A)();let y=(0,ct.A)(g.breakpoints.down("sm"));const A=()=>d(!1);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Xe.A,{fullWidth:!0,onClick:()=>d(!0),size:"small",variant:"contained",sx:{mt:2},children:a}),(0,re.jsxs)(mt.A,{fullScreen:y,open:r,onClose:A,PaperProps:{sx:{width:"100%",maxWidth:650,...o}},children:[(0,re.jsx)(ut.A,{children:"Add/Update Banner images"}),(0,re.jsx)(x.A,{}),(0,re.jsx)(xt.A,{sx:{padding:"10px"},children:(0,re.jsxs)(s.A,{sx:{margin:"20px 0"},children:[(0,re.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,re.jsx)(u.A,{sx:{fontWeight:"bold"},children:"Add Files"}),(0,re.jsx)(Ft.A,{name:"images",label:"Select files",fullWidth:!0,onChange:e=>{const t=e.target.files;if(t.length>0){let e=[];for(let a=0;a<t.length;a++){const l=t[a];e.push(l)}j([...e])}else console.log("No files selected")},sx:{borderWidth:1,borderRadius:g.shape.borderRadius,maxWidth:"300px"},variant:"outlined",InputLabelProps:{shrink:!0},inputProps:{type:"file",multiple:!0},InputProps:{style:{borderWidth:1,height:"40px",borderRadius:g.shape.borderRadius}}})]}),p.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",background:"#5fa5f661",borderRadius:"5px",marginTop:"5px"},children:[(0,re.jsx)(u.A,{children:e.name}),(0,re.jsx)(h.A,{onClick:e=>(e=>{j(p.filter(((t,a)=>a!==e)))})(t),children:(0,re.jsx)(Sa.A,{fontSize:"small"})})]},e.name+t.toString())))]})}),(0,re.jsxs)(ht.A,{children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:A,children:"Cancel"}),(0,re.jsx)(pt.A,{disabled:!p.length,size:"small",loading:c,variant:"contained",onClick:async e=>{e.preventDefault();try{m(!0);const e=new FormData;p.forEach((t=>e.append("bannerImages",t))),console.log(p,"imageeeee");const{data:a}=await(0,Se.yJ)(ke.r.school.addFiles+"/"+t._id,e,{headers:{"Content-Type":"multipart/form-data"}});n(a.result),A(),j([]),m(!1)}catch(a){m(!1),console.log(a)}},children:"Add"})]})]})]})}var hc=a(48475),pc=a.n(hc);const jc=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),gc=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),yc=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),Ac=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),fc=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),bc=[{label:"Manual",value:"manual"},{label:"Auto ascending name",value:"autoAscendingName"},{label:"Auto ascending name female",value:"autoAscendingNameFemale"}],vc=[{label:"Class wise",value:"classWise"},{label:"Subject wise",value:"subjectWise"},{label:"Session wise",value:"sessionWise"}],Sc=[{label:"Manual",value:"manual"},{label:"Auto Ascending No.",value:"autoAscendingNo"}];function kc(e){var t;let{initialValue:a=null}=e;const n=(0,_.Zp)(),{id:i}=(0,_.g)(),[o,r]=(Object.keys(pc()),(0,l.useState)(a)),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)([]),[x,p]=(0,l.useState)([]),{isDarkMode:j}=(0,l.useContext)(ot.A),g=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.school.details+"/"+i);r(e.result)}catch(e){console.log(e)}};(0,l.useEffect)((()=>{i&&g()}),[i]);const[y,A]=(0,l.useState)(null),f=uc.p.map((e=>({label:"".concat(e.currency," - ").concat(e.code),value:e.code}))),b=(0,tt.Wx)({initialValues:{name:(null===o||void 0===o?void 0:o.name)||"",address:(null===o||void 0===o?void 0:o.address)||"",phone:(null===o||void 0===o?void 0:o.phone)||"",regDate:null!==o&&void 0!==o&&o.regDate?Le()(o.regDate).format("YYYY/MM/DD"):null,email:(null===o||void 0===o?void 0:o.email)||"",fax:(null===o||void 0===o?void 0:o.fax)||"",websiteFooter:(null===o||void 0===o?void 0:o.websiteFooter)||"",description:(null===o||void 0===o?void 0:o.description)||"",currency:(null===o||void 0===o?void 0:o.currency)||"",currencySymbol:(null===o||void 0===o?void 0:o.currencySymbol)||"",sessionStartMonth:o&&o.sessionStartMonth?o.sessionStartMonth:null,sessionEndMonth:o&&o.sessionEndMonth?o.sessionEndMonth:null,rollNumberType:(null===o||void 0===o?void 0:o.rollNumberType)||"",studentAttendenceType:(null===o||void 0===o?void 0:o.studentAttendenceType)||"",admissionNo:(null===o||void 0===o?void 0:o.admissionNo)||"",latitude:(null===o||void 0===o?void 0:o.latitude)||"",longitude:(null===o||void 0===o?void 0:o.longitude)||"",defaultTimeZone:(null===o||void 0===o?void 0:o.defaultTimeZone)||"",googleAnalyticsId:(null===o||void 0===o?void 0:o.googleAnalyticsId)||"",teacherActivityFeedbackEnabled:(null===o||void 0===o?void 0:o.teacherActivityFeedbackEnabled)||!1,facebookUrl:(null===o||void 0===o?void 0:o.facebookUrl)||"",twitterUrl:(null===o||void 0===o?void 0:o.twitterUrl)||"",linkedinUrl:(null===o||void 0===o?void 0:o.linkedinUrl)||"",gplusUrl:(null===o||void 0===o?void 0:o.gplusUrl)||"",youtubeUrl:(null===o||void 0===o?void 0:o.youtubeUrl)||"",instagramUrl:(null===o||void 0===o?void 0:o.instagramUrl)||"",pinterestUrl:(null===o||void 0===o?void 0:o.pinterestUrl)||"",location:(null===o||void 0===o?void 0:o.location)||""},onSubmit:async e=>{try{const t={...e};c(!0);const a=new FormData;if(a.append("bodyData",JSON.stringify(t)),m.forEach((e=>a.append("logo",e))),o){const{data:e}=await(0,Se.yJ)(ke.r.school.update+"/"+o._id,a,{headers:{"Content-Type":"multipart/form-data"}});console.log(e.result,"updateschool")}else{const{data:e}=await(0,Se.bE)(ke.r.school.create,a,{headers:{"Content-Type":"multipart/form-data"}})}b.resetForm(),u([]),n(-1)}catch(t){console.log(t)}c(!1)},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Add Institute",showTextField:!1}),(0,re.jsxs)("form",{onSubmit:b.handleSubmit,children:[(0,re.jsxs)(Ac,{children:[(0,re.jsx)(jc,{children:(0,re.jsx)("img",{src:m.length>0?URL.createObjectURL(m[0]):null!==o&&void 0!==o&&o.logo?null===o||void 0===o?void 0:o.logo:Kd,style:{width:"100px",height:"100px",objectFit:"contain"},alt:"loogo"})}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"logo",label:"Select Logo",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"logo"===t?u(l):"bannerImages"===t&&p(l)}else console.log("No files selected")})(e,"logo"),customOnChange:!0,selectedFiles:m,onRemove:e=>((e,t)=>{u(m.filter((t=>t.name!=e))),p(x.filter((t=>t.name!=e)))})(e),accept:"image/jpeg, image/png"})})})]}),(0,re.jsxs)(gc,{style:{position:"relative",zIndex:"1"},children:[(0,re.jsx)(yc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:b,label:"School Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"address",formik:b,label:"Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"phone",formik:b,label:"Phone number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:b,label:"Registration Date",name:"regDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"email",formik:b,label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fax",formik:b,label:"Fax"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"location",formik:b,label:"Location"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"websiteFooter",formik:b,label:"Website Footer"})}),(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{name:"description",formik:b,label:"Note"})})]})})]}),(0,re.jsxs)(gc,{sx:{overflow:"visible"},children:[(0,re.jsx)(yc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Setting Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"currency",formik:b,label:"Currency",options:f,onChange:e=>{const t=e.target.value;b.setFieldValue("currency",t),b.setFieldValue("currencySymbol",pc()[t])}})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"currencySymbol",formik:b,label:"Currency Symbol",disabled:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:b,label:"Session Start Month",name:"sessionStartMonth",openTo:"month",inputFormat:"MM",views:["month"],required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:b,label:"Session End Month",name:"sessionEndMonth",openTo:"month",inputFormat:"MM",views:["month"],required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"rollNumberType",formik:b,label:"Roll Number",options:bc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"studentAttendenceType",formik:b,label:"Attendence Type ",options:vc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"admissionNo",formik:b,label:"Admission Number",options:Sc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"latitude",formik:b,label:"Latitude"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"longitude",formik:b,label:"Longitude"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,mt:2,children:(0,re.jsx)(mc.Ay,{styles:{control:(e,t)=>({...e,height:"42px",backgroundColor:j?"black":"white"}),menu:(e,t)=>({...e,zIndex:1e3}),option:(e,t)=>({...e,zIndex:1e3,backgroundColor:j?"black":"white",color:j?"white":"black","&:hover":{backgroundColor:j?"lightgray":"white",color:j?"black":""}})},placeholder:"Default Timezone",name:"defaultTimeZone",value:b.values.defaultTimeZone,onChange:e=>b.setFieldValue("defaultTimeZone",e),label:"Time Zone"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"googleAnalyticsId",formik:b,label:"Google Analytics Id"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"teacherActivityFeedbackEnabled",formik:b,label:"Teacher Activity Feedack Enable",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})})]})})]}),(0,re.jsxs)(gc,{sx:{marginBottom:o?"20px":"60px"},children:[(0,re.jsx)(yc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Social Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"facebookUrl",formik:b,label:"Facebook URL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"twitterUrl",formik:b,label:"TwitterURL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"linkedinUrl",formik:b,label:"Linkedin Url"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"gplusUrl",formik:b,label:"Google Plus Url"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"youtubeUrl",formik:b,label:"Youtube URL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"instagramUrl",formik:b,label:"Instagram URL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"pinterestUrl",formik:b,label:"Pinterest URL"})})]})})]}),o?(0,re.jsxs)(gc,{sx:{marginBottom:"60px"},children:[(0,re.jsx)(yc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Banner Image"}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{container:!0,item:!0,xs:12,sm:12,md:12,justifyContent:"flex-end",children:(0,re.jsx)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginRight:"10px"},children:(0,re.jsx)(xc,{dataToEdit:o,title:"Upload Banner",onUpdate:g})})})}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:12,m:2,gap:2,sx:{display:"flex",overflowX:"auto"},children:null===o||void 0===o||null===(t=o.bannerImages)||void 0===t?void 0:t.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{justifyContent:"center",backgroundSize:"cover","&:hover":{position:"relative",display:"inline-block"}},children:[(0,re.jsx)("img",{src:e,alt:"image",style:{width:"150px",height:"100px",borderRadius:"5px",boxShadow:"0px 0px 2px 0px gray"}}),(0,re.jsx)(h.A,{color:"error","aria-label":"delete",onClick:()=>(async e=>{try{const{data:t}=await(0,Se.yJ)(ke.r.school.removeFile+"/"+o._id,{file:e});g()}catch(t){console.log(t)}})(e),sx:{position:"absolute",top:0,right:0,borderRadius:"50px",padding:"2px",cursor:"pointer",background:"#DEE0E2"},children:(0,re.jsx)(Pt.A,{color:"error"})})]},t)))})})]}):null,(0,re.jsx)(xe.Ay,{container:!0,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,children:(0,re.jsx)(fc,{children:(0,re.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>n(-1),children:"Cancel"}),(0,re.jsx)(pt.A,{loading:d,type:"submit",size:"small",variant:"contained",children:o?"Update":"Submit"})]})})})})]})]})}var Dc=a(78218);const Cc=(0,n.Ay)(ra.A)((e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:"#44628561"}}})),wc=(0,n.Ay)(da.A)((e=>{let{theme:t}=e;return{width:200,padding:"13px 5px",border:"1px solid gray",["&.".concat(ba.A.head)]:{backgroundColor:t.palette.common.black,color:t.palette.common.white},["&.".concat(ba.A.body)]:{fontSize:15}}}));function Ic(e){let{employee:t}=e;const a=e=>{window.open(e,"_blank")};return(0,re.jsxs)(re.Fragment,{children:[null!==t&&void 0!==t&&t.photo?(0,re.jsx)("img",{src:t.photo,height:75,width:75,style:{borderRadius:"50%",alignSelf:"center"},alt:"Employee Photo"}):(0,re.jsx)(k.A,{sx:{height:75,width:75},src:"/broken-image.jpg"}),(0,re.jsx)(sa.A,{"aria-label":"customized table",sx:{width:660,my:2,display:{xs:"none",sm:"block",md:"block",lg:"block"},borderRadius:"5px"},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.name||"NA"}),(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"National Id"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.aadharNo||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.designation.name||"NA"}),(0,re.jsxs)(wc,{align:"left",sx:{fontWeight:"bold"},children:["Phone"," "]}),(0,re.jsx)(wc,{align:"left",children:t.contactNumber||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Present Address"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.presentAddress||"NA"}),(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Permanent Address"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.permanentAddress||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Gender"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.gender||"NA"}),(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Blood Group"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.bloodGroup.toUpperCase()||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsxs)(wc,{align:"left",sx:{fontWeight:"bold"},children:["Religion"," "]}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.religion||"NA"}),(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Birth Date"}),(0,re.jsx)(wc,{align:"left",children:Le()(t.basicInfo.dob||"NA").format("DD-MM-YYYY")})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Email"}),(0,re.jsx)(wc,{align:"left",children:t.academicInfo.email||"NA"}),(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Role"}),(0,re.jsx)(wc,{align:"left",children:t.role.name||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Joining Date"}),(0,re.jsx)(wc,{align:"left",children:Le()(t.academicInfo.joiningDate||"NA").format("DD-MM-YYYY")}),(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Resume"}),(0,re.jsx)(wc,{align:"center",children:t.academicInfo.resume?(0,re.jsx)(h.A,{color:"primary",children:(0,re.jsx)(Dc.A,{onClick:()=>a(t.academicInfo.resume)})}):"NA"})]})]})}),(0,re.jsx)(sa.A,{"aria-label":"customized table",sx:{width:"100%",mx:2,my:2,display:{xs:"visible",sm:"none",md:"none",lg:"none"}},children:(0,re.jsxs)(ma.A,{children:[(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Name"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.name||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"National Id"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.aadharNo||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Designation"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.designation.name||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Phone"}),(0,re.jsx)(wc,{align:"left",children:t.contactNumber||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsxs)(wc,{align:"left",sx:{fontWeight:"bold"},children:["Present Address"," "]}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.presentAddress||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Permanent Address"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.permanentAddress||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Gender"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.gender||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Blood Group"}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.bloodGroup.toUpperCase()||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Birth Date"}),(0,re.jsx)(wc,{align:"left",children:Le()(t.basicInfo.dob||"NA").format("DD-MM-YYYY")})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsxs)(wc,{align:"left",sx:{fontWeight:"bold"},children:["Religion"," "]}),(0,re.jsx)(wc,{align:"left",children:t.basicInfo.religion||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Email"}),(0,re.jsx)(wc,{align:"left",children:t.academicInfo.email||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Role"}),(0,re.jsx)(wc,{align:"left",children:t.role.name||"NA"})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Joining Date"}),(0,re.jsx)(wc,{align:"left",children:Le()(t.academicInfo.joiningDate||"NA").format("DD-MM-YYYY")})]}),(0,re.jsxs)(Cc,{children:[(0,re.jsx)(wc,{align:"left",sx:{fontWeight:"bold"},children:"Resume"}),(0,re.jsx)(wc,{align:"center",children:t.academicInfo.resume?(0,re.jsx)(h.A,{color:"primary",children:(0,re.jsx)(Dc.A,{onClick:()=>a(t.academicInfo.resume)})}):"NA"})]})]})})]})}const Nc=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),_c=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"50px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),Tc=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),Mc=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),Fc=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),zc=[{label:"Male",value:"male"},{label:"Female",value:"female"}],Ec=[{label:"A+",value:"a+"},{label:"B+",value:"b+"},{label:"A-",value:"a-"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}];function qc(e){var t,a,n;let{handleCreateOrUpdate:i=(()=>{}),employee:o="",setSelectValue:r=0}=e;(0,_.Zp)();const[d,c]=(0,l.useState)(null),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.designation.list);u(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.error(e)}})()}),[]);const p=(0,tt.Wx)({initialValues:{name:(null===o||void 0===o||null===(t=o.basicInfo)||void 0===t?void 0:t.name)||"",aadharNo:o.basicInfo.aadharNo||"",designation:(null===(a=o.basicInfo)||void 0===a||null===(n=a.designation)||void 0===n?void 0:n._id)||"",gender:(null===o||void 0===o?void 0:o.basicInfo.gender)||"",bloodGroup:(null===o||void 0===o?void 0:o.basicInfo.bloodGroup)||"",religion:(null===o||void 0===o?void 0:o.basicInfo.religion)||"",dob:null!==o&&void 0!==o&&o.basicInfo.dob?Le()(o.dob):null,presentAddress:(null===o||void 0===o?void 0:o.basicInfo.presentAddress)||"",permanentAddress:(null===o||void 0===o?void 0:o.basicInfo.permanentAddress)||"",email:(null===o||void 0===o?void 0:o.academicInfo.email)||"",joiningDate:o.academicInfo.joiningDate?Le()(o.academicInfo.joiningDate):null,resume:(null===o||void 0===o?void 0:o.academicInfo.resume)||"",facebookUrl:(null===o||void 0===o?void 0:o.otherInfo.facebookUrl)||"",twitterUrl:(null===o||void 0===o?void 0:o.otherInfo.twitterUrl)||"",linkedinUrl:(null===o||void 0===o?void 0:o.otherInfo.linkedinUrl)||"",gplusUrl:(null===o||void 0===o?void 0:o.otherInfo.gplusUrl)||"",youtubeUrl:(null===o||void 0===o?void 0:o.otherInfo.youtubeUrl)||"",instagramUrl:(null===o||void 0===o?void 0:o.otherInfo.instagramUrl)||"",pinterestUrl:(null===o||void 0===o?void 0:o.otherInfo.pinterestUrl)||"",username:(null===o||void 0===o?void 0:o.username)||"",contactNumber:(null===o||void 0===o?void 0:o.contactNumber)||"",photo:(null===o||void 0===o?void 0:o.photo)||""},onSubmit:i,enableReinitialize:!1});return console.log(p.values,"entryFormik"),(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)("form",{onSubmit:p.handleSubmit,children:[(0,re.jsxs)(Mc,{children:[(0,re.jsx)(Nc,{children:(0,re.jsx)("img",{src:d||Kd,style:{width:"100px",height:"100px",objectFit:"contain"},alt:"Preview"})}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"logo",formik:p,label:"Logo",type:"file",onChange:e=>(async e=>{const t=new FormData;console.log(e,"hawa"),t.append("files",e.target.files[0]);try{const e=await(0,Se.bE)(ke.r.fileUpload.create,t);console.log(e,"fafa")}catch(a){console.error(a)}})(e),inputProps:{accept:"image/*"}})})})]}),(0,re.jsxs)(_c,{children:[(0,re.jsx)(Tc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:p,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"aadharNo",formik:p,label:"National Id"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"designation",formik:p,label:"Designation",options:m})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"contactNumber",formik:p,label:"Phone No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"gender",formik:p,label:"Gender",options:zc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"bloodGroup",formik:p,label:"Blood Group",options:Ec})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"religion",formik:p,label:"Religion"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Date of Birth",name:"dob",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"presentAddress",formik:p,label:"Present Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"permanentAddress",formik:p,label:"Permanent Address"})})]})})]}),(0,re.jsxs)(_c,{children:[(0,re.jsx)(Tc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"email",formik:p,label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"username",formik:p,label:"User Name",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:p,label:"Date of Joining",name:"joiningDate",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"resume",formik:p,label:"Upload Resume",type:"file"})})]})})]}),(0,re.jsxs)(_c,{children:[(0,re.jsx)(Tc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"facebookUrl",formik:p,label:"Facebook URL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"twitterUrl",formik:p,label:"TwitterURL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"linkedinUrl",formik:p,label:"Linkedin Url"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"gplusUrl",formik:p,label:"Google Plus Url"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"youtubeUrl",formik:p,label:"Youtube URL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"instagramUrl",formik:p,label:"Instagram URL"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"pinterestUrl",formik:p,label:"Pinterest URL"})})]})})]}),(0,re.jsx)(Fc,{children:(0,re.jsxs)(v.A,{spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>r(0),children:"Cancel"}),(0,re.jsx)(pt.A,{loading:x,type:"submit",size:"small",variant:"contained",children:"Update"})]})})]})})}function Yc(){const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)(0),[n,i]=(0,l.useState)(!1),[o,r]=(0,l.useState)(null);console.log(e,"selectedSetting"),console.log(o,"employee");const d=async()=>{const e=window.localStorage.getItem("current_ecs_user");r(JSON.parse(e))};(0,l.useEffect)((()=>{d()}),[]);return o?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Profile"}),(0,re.jsx)(Dt.A,{onChange:(e,t)=>a(t),value:t,labels:["Profile","Update Profile"]}),(0,re.jsx)(Ct.A,{index:0,value:t,children:(0,re.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mt:3},children:(0,re.jsx)(Ic,{employee:o})})}),(0,re.jsx)(Ct.A,{index:1,value:t,children:(0,re.jsx)(qc,{handleCreateOrUpdate:async t=>{try{const a={schoolId:e._id,basicInfo:{name:t.name,designation:t.designation,gender:t.gender,bloodGroup:t.bloodGroup,religion:t.religion,dob:t.dob,presentAddress:t.presentAddress,permanentAddress:t.permanentAddress,aadharNo:t.aadharNo},academicInfo:{email:t.email,joiningDate:t.joiningDate,resume:t.resume},otherInfo:{facebookUrl:null===t||void 0===t?void 0:t.facebookUrl,twitterUrl:null===t||void 0===t?void 0:t.twitterUrl,linkedinUrl:null===t||void 0===t?void 0:t.linkedinUrl,googlePlusUrl:null===t||void 0===t?void 0:t.googlePlusUrl,youtubeUrl:null===t||void 0===t?void 0:t.youtubeUrl,instagramUrl:null===t||void 0===t?void 0:t.instagramUrl,pinterestUrl:null===t||void 0===t?void 0:t.pinterestUrl},username:t.username,photo:t.photo,contactNumber:t.contactNumber};if(i(!0),o){const{data:e}=await(0,Se.yJ)(ke.r.employee.update+"/"+o._id,a);d()}else{const{data:e}=await(0,Se.bE)(ke.r.employee.create,a);console.log(e,"gg"),d()}}catch(a){console.error(a)}i(!1)},employee:o,setSelectValue:a})})]}):null}const Wc=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),Rc=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),Pc=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),Jc=(0,n.Ay)(s.A)({background:"#ececec",width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",backgroundPosition:"center"}),Vc=(0,n.Ay)(s.A)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"15px",padding:"15px 0px"}),Bc=[{label:"Male",value:"male"},{label:"Female",value:"female"}],Lc=[{label:"A+",value:"a"},{label:"A-",value:"a-"},{label:"B+",value:"b+"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}],Uc=[{label:"Active",value:!0},{label:"Inactive",value:!1}],Oc=[{label:"Yes",value:!0},{label:"No",value:!1}],Hc=[{label:"Yes",value:!0},{label:"No",value:!1}],Gc=[{label:"Monthly",value:"monthly"},{label:"Hourly",value:"hourly"}];function Kc(){const e=(0,_.zy)(),t=e.state&&e.state.data,{selectedSetting:a}=(0,l.useContext)(De.A),[n,i]=(0,l.useState)(!1),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)(null),p=(0,_.Zp)();(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.designation.list);r(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.department.list);c(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);u(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[]);const j=(0,tt.Wx)({initialValues:{name:t?t.basicInfo.name:"",empId:t?t.basicInfo.empId:"",responsibility:t?t.basicInfo.responsibility:"",designation:t?t.basicInfo.designation._id:"",contactNumber:t?t.contactNumber:"",secMobileNo:t?t.basicInfo.secMobileNo:"",gender:t?t.basicInfo.gender:"",bloodGroup:t?t.basicInfo.bloodGroup:"",religion:t?t.basicInfo.religion:"",presentAddress:t?t.basicInfo.presentAddress:"",permanentAddress:t?t.basicInfo.permanentAddress:"",dob:t?Le()(t.basicInfo.dob):Le()(new Date),fatherName:t?t.basicInfo.fatherName:"",spouseName:t?t.basicInfo.spouseName:"",aadharNo:t?t.basicInfo.aadharNo:"",fatherOccupation:t?t.basicInfo.fatherOccupation:"",spouseOccupation:t?t.basicInfo.spouseOccupation:"",qualification:t?t.academicInfo.qualification:"",workExperience:t?t.academicInfoworkExperience:"",salaryGrade:t?t.academicInfosalaryGrade:"",email:t?t.academicInfo.email:"",salaryType:t?t.academicInfo.salaryType:"",role:t?t.role._id:"",department:t?t.academicInfo.department._id:"",joiningDate:t?Le()(t.academicInfo.joiningDate):Le()(new Date),resume:t?t.resume:"",username:t?t.username:"",password:t?t.password:"",public:t?t.public:"",showDetailsForWeb:!!t&&t.showDetailsForWeb,photo:t?t.photo:"",active:t?t.active:""},onSubmit:async e=>{try{i(!0);const l={basicInfo:{name:e.name,empId:e.empId,designation:e.designation,secMobileNo:e.secMobileNo,gender:e.gender,religion:e.religion,presentAddress:e.presentAddress,permanentAddress:e.permanentAddress,dob:Le()(e.dob),fatherName:e.fatherName,spouseName:e.spouseName,aadharNo:e.aadharNo,fatherOccupation:e.fatherOccupation,spouseOccupation:e.spouseOccupation},academicInfo:{workExperience:e.workExperience,salaryGrade:e.salaryGrade,email:e.email,salaryType:e.salaryType,department:e.department,joiningDate:Le()(e.joiningDate),resume:e.resume},otherInfo:{public:e.public,showDetailsForWeb:e.showDetailsForWeb||!1},contactNumber:e.contactNumber,role:e.role,username:e.username,password:e.password,active:e.active,schoolId:a._id},{data:n}=await(0,Se.yJ)(ke.r.employee.update+"/"+t._id,l);console.log(n,"erttfyuygiu"),p("/sch/human-resource/employee"),i(!1)}catch(l){console.log(l)}i(!1)}});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Update Employee",showTextField:!1}),(0,re.jsxs)(Vc,{children:[(0,re.jsx)(Jc,{children:(0,re.jsx)("img",{src:x||Kd,style:{width:"100px",height:"100px",objectFit:"contain"},alt:"Preview"})}),(0,re.jsx)(xe.Ay,{container:!0,spacing:2,display:"flex",justifyContent:"center",children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"photo",formik:j,label:"Photo",type:"file",onChange:e=>{const t=e.target.files[0];if(t){const e=URL.createObjectURL(t);h(e)}}})})})]}),(0,re.jsxs)("form",{onSubmit:j.handleSubmit,children:[(0,re.jsxs)(Rc,{children:[(0,re.jsx)(Pc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:j,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"empId",formik:j,label:"Employee Id"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"responsibility",formik:j,label:"Responsibility"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"designation",formik:j,label:"Designation",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"contactNumber",formik:j,label:"Contact Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"secMobileNo",formik:j,label:"Secondary Contact Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"gender",formik:j,label:"Select Gender",options:Bc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"bloodGroup",formik:j,label:"Select Blood Group",options:Lc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"religion",formik:j,label:"Religon"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:j,label:"Date of Birth",name:"dob",required:!0})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"presentAddress",formik:j,label:"Present Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"permanentAddress",formik:j,label:"Permanent Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherName",formik:j,label:"Father Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"spouseName",formik:j,label:"Spouse Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"aadharNo",formik:j,label:"Aadhar No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherOccupation",formik:j,label:"Father Occupation"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"spouseOccupation",formik:j,label:"Spouse Occupation"})})]})})]}),(0,re.jsxs)(Rc,{children:[(0,re.jsx)(Pc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"qualification",formik:j,label:"Qualification              "})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"workExperience",formik:j,label:"Work Experience"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"salaryGrade",formik:j,label:"Select Salary Grade"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"email",formik:j,label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"salaryType",formik:j,label:"Select Salary Type",options:Gc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"role",formik:j,label:"Select Role",options:m})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"department",formik:j,label:"Select Department",options:d})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"joiningDate",formik:j,label:"Joining Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"resume",formik:j,label:"Resume",type:"file"})})]})})]}),(0,re.jsxs)(Rc,{children:[(0,re.jsx)(Pc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Log In Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"username",formik:j,label:"User Name"})})})})]}),(0,re.jsxs)(Rc,{children:[(0,re.jsx)(Pc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"public",formik:j,label:"Is public",options:Oc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"showDetailsForWeb",formik:j,label:"Show Details For Web",options:Hc})})]})})]}),(0,re.jsxs)(Rc,{sx:{marginBottom:"60px"},children:[(0,re.jsx)(Pc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Profile Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"active",formik:j,label:"Status",options:Uc})})})})]}),(0,re.jsx)(xe.Ay,{container:!0,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,children:(0,re.jsx)(Wc,{children:(0,re.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>p(-1),children:"Cancel"}),(0,re.jsx)(pt.A,{loading:n,type:"submit",size:"small",variant:"contained",children:"Update"})]})})})})]})]})}const Qc=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{border:"1px solid",borderColor:"lightgray",marginBottom:"20px",borderRadius:t.shape.borderRadius,overflow:"hidden"}})),Zc=(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}})),$c=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-end",gap:t.spacing(2),position:"fixed",bottom:0,right:0,left:0,background:"whitesmoke",padding:t.spacing(2),zIndex:1e3}})),Xc=[{label:"Male",value:"male"},{label:"Female",value:"female"}],em=[{label:"A+",value:"a+"},{label:"B+",value:"b+"},{label:"A-",value:"a-"},{label:"B-",value:"b-"},{label:"O+",value:"o+"},{label:"O-",value:"o-"},{label:"AB+",value:"ab+"},{label:"AB-",value:"ab-"}],tm=[{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Sister",value:"Sister"},{label:"Brother",value:"Brother"},{label:"Uncle",value:"Uncle"},{label:"Other Relative",value:"Other Relative"}],am=[{label:"Yes",value:"yes"},{label:"No",value:"no"}];function lm(){var e,t,a,n,i,o,r,d,c,m,x,h,p,j,g,y,A,f,b,S,k,D,C,w,I,N,T,M;const{selectedSetting:F}=(0,l.useContext)(De.A),z=(0,_.Zp)(),[E,q]=(0,l.useState)(null),[Y,W]=(0,l.useState)(!1),[R,P]=(0,l.useState)([]),[J,V]=(0,l.useState)([]),[B,L]=(0,l.useState)([]),[U,O]=(0,l.useState)([]),[H,G]=(0,l.useState)([]),[K,Q]=(0,l.useState)([]),[Z,$]=(0,l.useState)([]),[X,ee]=(0,l.useState)(""),{id:te}=(0,_.g)();(0,l.useEffect)((()=>{te&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.student.details+"/"+te);console.log(e.result,"=========="),q(e.result)}catch(e){console.log(e)}})()}),[te,F]);const ae=(0,tt.Wx)({initialValues:{academicYear:(null===E||void 0===E?void 0:E.academicYear._id)||"",name:(null===E||void 0===E?void 0:E.basicInfo.name)||"",admissionDate:null!==E&&void 0!==E&&null!==(e=E.basicInfo)&&void 0!==e&&e.admissionDate?Le()(E.basicInfo.admissionDate).format("YYYY/MM/DD"):null,motherTongue:(null===E||void 0===E?void 0:E.basicInfo.motherTongue)||"",dob:null!==E&&void 0!==E&&null!==(t=E.basicInfo)&&void 0!==t&&t.dob?Le()(E.basicInfo.dob).format("YYYY/MM/DD"):null,gender:(null===E||void 0===E?void 0:E.basicInfo.gender)||"",bloodGroup:(null===E||void 0===E?void 0:E.basicInfo.bloodGroup)||"",cicn:(null===E||void 0===E?void 0:E.basicInfo.cicn)||"",religion:(null===E||void 0===E?void 0:E.basicInfo.religion)||"",caste:(null===E||void 0===E?void 0:E.basicInfo.caste)||"",rte:(null===E||void 0===E?void 0:E.basicInfo.rte)||"",aadharNo:(null===E||void 0===E?void 0:E.basicInfo.aadharNo)||"",satNo:(null===E||void 0===E?void 0:E.basicInfo.satNo)||"",grNo:(null===E||void 0===E?void 0:E.basicInfo.grNo)||"",birthPlace:(null===E||void 0===E?void 0:E.basicInfo.birthPlace)||"",class:(null===E||void 0===E||null===(a=E.academicInfo)||void 0===a||null===(n=a.class)||void 0===n?void 0:n._id)||"",section:(null===E||void 0===E||null===(i=E.academicInfo)||void 0===i||null===(o=i.section)||void 0===o?void 0:o._id)||"",rollNumber:(null===E||void 0===E||null===(r=E.academicInfo)||void 0===r?void 0:r.rollNumber)||"",admissionNumber:(null===E||void 0===E||null===(d=E.academicInfo)||void 0===d?void 0:d.admissionNumber)||"",contactNumber:(null===E||void 0===E?void 0:E.contactNumber)||"",guardianName:(null===E||void 0===E||null===(c=E.contactInfo)||void 0===c?void 0:c.guardianName)||"",guardianContactNumber:(null===E||void 0===E||null===(m=E.contactInfo)||void 0===m?void 0:m.guardianContactNumber)||"",guardianContactNumberSecondary:(null===E||void 0===E||null===(x=E.contactInfo)||void 0===x?void 0:x.guardianContactNumberSecondary)||"",guardianRelation:(null===E||void 0===E||null===(h=E.contactInfo)||void 0===h?void 0:h.guardianRelation)||"",nationId:(null===E||void 0===E||null===(p=E.contactInfo)||void 0===p?void 0:p.nationId)||"",presentAddress:(null===E||void 0===E||null===(j=E.contactInfo)||void 0===j?void 0:j.presentAddress)||"",permanentAddress:(null===E||void 0===E||null===(g=E.contactInfo)||void 0===g?void 0:g.permanentAddress)||"",prevSchName:(null===E||void 0===E||null===(y=E.prevSchInfo)||void 0===y?void 0:y.name)||"",tcNo:(null===E||void 0===E||null===(A=E.prevSchInfo)||void 0===A?void 0:A.tcNo)||"",prevClass:(null===E||void 0===E||null===(f=E.prevSchInfo)||void 0===f?void 0:f.prevClass)||"",email:(null===E||void 0===E||null===(b=E.otherInfo)||void 0===b?void 0:b.email)||"",healthCondition:(null===E||void 0===E||null===(S=E.otherInfo)||void 0===S?void 0:S.healthCondition)||"",transportMember:(null===E||void 0===E||null===(k=E.otherInfo)||void 0===k?void 0:k.transportMember)||"",hostelMember:(null===E||void 0===E||null===(D=E.otherInfo)||void 0===D?void 0:D.hostelMember)||"",libraryMember:(null===E||void 0===E||null===(C=E.otherInfo)||void 0===C?void 0:C.libraryMember)||"",busStop:(null===E||void 0===E||null===(w=E.otherInfo)||void 0===w?void 0:w.busStop)||"",extraInfo:(null===E||void 0===E||null===(I=E.otherInfo)||void 0===I?void 0:I.extraInfo)||"",active:(null===E||void 0===E?void 0:E.active)||!0,fatherName:(null===E||void 0===E?void 0:E.fatherInfo.name)||"",fatherPhone:(null===E||void 0===E?void 0:E.fatherInfo.contactNumber)||"",fatherEdu:(null===E||void 0===E?void 0:E.fatherInfo.education)||"",fatherProfession:(null===E||void 0===E?void 0:E.fatherInfo.profession)||"",fatherDesignation:(null===E||void 0===E?void 0:E.fatherInfo.designation)||"",motherName:(null===E||void 0===E?void 0:E.motherInfo.name)||"",motherPhone:(null===E||void 0===E?void 0:E.motherInfo.contactNumber)||"",motherEdu:(null===E||void 0===E?void 0:E.motherInfo.education)||"",motherProfession:(null===E||void 0===E?void 0:E.motherInfo.profession)||"",motherDesignation:(null===E||void 0===E?void 0:E.motherInfo.designation)||""},onSubmit:async e=>{try{const t={basicInfo:{name:e.name,admissionDate:Le()(e.admissionDate).format("YYYY/MM/DD"),dob:Le()(e.dob).format("YYYY/MM/DD"),gender:e.gender,bloodGroup:e.bloodGroup,religion:e.religion,rte:e.rte||"no",caste:e.caste,motherTongue:e.motherTongue,birthPlace:e.birthPlace,aadharNo:e.aadharNo,cicn:e.cicn,satNo:e.satNo,grNo:e.grNo},motherInfo:{name:e.motherName,contactNumber:e.motherPhone,education:e.motherEdu,profession:e.motherProfession,designation:e.motherDesignation},fatherInfo:{name:e.fatherName,contactNumber:e.fatherPhone,education:e.fatherEdu,profession:e.fatherProfession,designation:e.fatherDesignation},academicInfo:{class:e.class,section:e.section,rollNumber:e.rollNumber,admissionNumber:e.admissionNumber},otherInfo:{email:e.email,healthCondition:e.healthCondition,hostelMember:e.hostelMember||!1,transportMember:e.transportMember||!1,libraryMember:e.libraryMember||!1,busStop:e.busStop,extraInfo:e.extraInfo},contactInfo:{guardianName:e.guardianName,guardianContactNumber:e.guardianContactNumber,guardianContactNumberSecondary:e.guardianContactNumberSecondary,guardianRelation:e.guardianRelation,nationId:e.nationId,presentAddress:e.presentAddress,permanentAddress:e.permanentAddress},prevSchInfo:{name:e.prevSchName,tcNo:e.tcNo,prevClass:e.prevClass},academicYear:e.academicYear,schoolId:F._id,contactNumber:e.contactNumber,active:e.active||!0},a=new FormData;if(a.append("body",JSON.stringify(t)),R.forEach((e=>a.append("studentPhoto",e))),B.forEach((e=>a.append("fatherPhoto",e))),J.forEach((e=>a.append("motherPhoto",e))),U.forEach((e=>a.append("transferCertificate",e))),W(!0),E){const{data:e}=await(0,Se.yJ)(ke.r.student.update+"/"+E._id,a,{headers:{"Content-Type":"multipart/form-data"}});console.log(a,"kkkkkk"),z("/sch/student/admit-student")}else{const{data:e}=await(0,Se.bE)(ke.r.student.create,a,{headers:{"Content-Type":"multipart/form-data"}});z("/sch/student/admit-student")}}catch(t){console.log(t)}W(!1)},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);G(e.result.map((e=>({label:"".concat(e.from,"-").concat(e.to),value:e._id}))))}catch(e){console.log(e)}})(),(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:F._id}});Q(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[]),(0,l.useEffect)((()=>{ae.values.class&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:F._id,search:{class:ae.values.class}}});$(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[ae.values.class,F]);const le=(e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}"fatherPhoto"===t?L(l):"motherPhoto"===t?V(l):"transferCertificate"===t?O(l):P(l)}else console.log("No files selected")},ne=(e,t)=>{P(R.filter((t=>t.name!=e))),L(B.filter((t=>t.name!=e))),V(J.filter((t=>t.name!=e))),O(U.filter((t=>t.name!=e)))};return console.log(F,"sssssssssssss"),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Admit Student"}),(0,re.jsxs)("form",{onSubmit:ae.handleSubmit,children:[(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,children:[(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:[(0,re.jsxs)(u.A,{component:"span",color:"red",fontWeight:"bold",sx:{display:"inline"},children:["Note:"," "]}),(0,re.jsx)(u.A,{variant:"h6",component:"span",fontWeight:"bold",sx:{display:"inline"},children:"Student will be admited to session"})]}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:ae,label:"Select Academic Year",options:H})})]})}),(0,re.jsxs)(Qc,{children:[(0,re.jsx)(Zc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Basic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"name",formik:ae,label:"Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"admissionNumber",formik:ae,label:"Admission No.",disabled:"manual"!==(null===F||void 0===F?void 0:F.admissionNo)})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"admissionDate",formik:ae,label:"Admission Date"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Yt.A,{required:!0,name:"dob",formik:ae,label:"Date Of Birth"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"gender",formik:ae,label:"Select Gender",options:Xc})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"bloodGroup",formik:ae,label:"Select Blood Group",options:em})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"religion",formik:ae,label:"Religion"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"rte",formik:ae,label:"Select RTE",options:am})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"caste",formik:ae,label:"Cast"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"cicn",formik:ae,label:"Cast Income Certificate No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherTongue",formik:ae,label:"Mother Tongue"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"birthPlace",formik:ae,label:"Birth Place"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"aadharNo",formik:ae,label:"Aadhar No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"satNo",formik:ae,label:"SAT No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"grNo",formik:ae,label:"GR No."})})]})})]}),(0,re.jsxs)(Qc,{children:[(0,re.jsx)(Zc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Contact Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"contactNumber",formik:ae,label:"Contact Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"guardianName",formik:ae,label:"Guardian Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"guardianContactNumber",formik:ae,label:"Guardian Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"guardianContactNumberSecondary",formik:ae,label:"Alternate Number"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"guardianRelation",formik:ae,label:"Select Relation With Guardian",options:tm})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"nationId",formik:ae,label:"Select National Id"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"presentAddress",formik:ae,label:"Present Address"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"permanentAddress",formik:ae,label:"Permanent Address"})})]})})]}),(0,re.jsxs)(Qc,{children:[(0,re.jsx)(Zc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Academic Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:ae,label:"Select Class",options:K})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:ae,label:"Select Section",options:Z})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"rollNumber",formik:ae,label:"Roll No",disabled:"manual"!==(null===F||void 0===F?void 0:F.rollNumberType)})})]})})]}),(0,re.jsxs)(Qc,{children:[(0,re.jsx)(Zc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Previous School Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"prevSchName",formik:ae,label:"Previous School"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"prevClass",formik:ae,label:"Previous Class"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"tcNo",formik:ae,label:"TC No."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"transferCertificate",label:"Select File",onChange:e=>le(e,"transferCertificate"),customOnChange:!0,selectedFiles:U,onRemove:e=>ne(e),accept:"image/*,.pdf"})}),null!==E&&void 0!==E&&E.prevSchInfo&&null!==(N=E.prevSchInfo)&&void 0!==N&&N.transferCertificate?(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{const e=null===E||void 0===E?void 0:E.prevSchInfo.transferCertificate;e&&window.open(e,"_blank")},children:"Download File"})}):null]})})]}),(0,re.jsxs)(Qc,{children:[(0,re.jsx)(Zc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Father Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherName",formik:ae,label:"Father Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherPhone",formik:ae,label:"Father Phone"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherEdu",formik:ae,label:"Father Education."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherProfession",formik:ae,label:"Father Profession"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"fatherDesignation",formik:ae,label:"Father Designation"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{name:"fatherPhoto",multi:!1,label:"Select Photo",onChange:e=>le(e,"fatherPhoto"),customOnChange:!0,selectedFiles:B,onRemove:e=>ne(e),accept:"image/jpeg, image/png"})}),null!==E&&void 0!==E&&E.fatherInfo&&null!==(T=E.fatherInfo)&&void 0!==T&&T.photo?(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{var e;const t=null===E||void 0===E||null===(e=E.fatherInfo)||void 0===e?void 0:e.photo;t&&window.open(t,"_blank")},children:"Download Photo"})}):null]})})]}),(0,re.jsxs)(Qc,{children:[(0,re.jsx)(Zc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Mother Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherName",formik:ae,label:"Mother Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherPhone",formik:ae,label:"Mother Phone"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherEdu",formik:ae,label:"Mother Education."})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherProfession",formik:ae,label:"Mother Profession"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"motherDesignation",formik:ae,label:"Mother Designation"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{label:"Select Photo",multi:!1,name:"motherPhoto",onChange:e=>le(e,"motherPhoto"),customOnChange:!0,selectedFiles:J,onRemove:e=>ne(e),accept:"image/jpeg, image/png"})}),null!==E&&void 0!==E&&E.motherInfo&&null!==(M=E.motherInfo)&&void 0!==M&&M.photo?(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{var e;const t=null===E||void 0===E||null===(e=E.motherInfo)||void 0===e?void 0:e.photo;t&&window.open(t,"_blank")},children:"Download Photo"})}):null]})})]}),(0,re.jsxs)(Qc,{sx:{marginBottom:"60px"},children:[(0,re.jsx)(Zc,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Other Information"}),(0,re.jsx)(s.A,{sx:{padding:"10px"},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"email",formik:ae,label:"Email"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"healthCondition",formik:ae,label:"Health Condition"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"active",formik:ae,label:"Select Status",options:[{label:"Inactive",value:!1},{label:"Active",value:!0}]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"hostelMember",formik:ae,label:"Select Hostel Member",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"transportMember",formik:ae,label:"Select Transport Member",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{name:"libraryMember",formik:ae,label:"Select Library Member",options:[{label:"Yes",value:!0},{label:"No",value:!1}]})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"busStop",formik:ae,label:"Bus Stop"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(At.A,{name:"extraInfo",formik:ae,label:"Other Info"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{name:"studentPhoto",multi:!1,label:"Select Photo",onChange:e=>le(e,"studentPhoto"),customOnChange:!0,selectedFiles:R,onRemove:e=>ne(e),accept:"image/jpeg, image/png"})}),E&&null!==E&&void 0!==E&&E.photo?(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:6,item:!0,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{size:"small",variant:"contained",onClick:()=>{const e=null===E||void 0===E?void 0:E.photo;e&&window.open(e,"_blank")},children:"Download Photo"})}):null]})})]}),(0,re.jsx)(xe.Ay,{container:!0,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,children:(0,re.jsx)($c,{children:(0,re.jsxs)(v.A,{spacing:2,direction:"row",children:[(0,re.jsx)(Xe.A,{size:"small",color:"error",variant:"contained",onClick:()=>z(-1),children:"Cancel"}),(0,re.jsx)(pt.A,{loading:Y,type:"submit",size:"small",variant:"contained",children:"Submit"})]})})})})]})]})}var nm=a(69413),im=a(97062);const sm=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{padding:"20px 8px",borderRadius:"10px",margin:"10px 0px",borderRight:"10px",border:"1px solid lightGrey",backgroundColor:"dark"===t.palette.mode?"":"whitesmoke"}}));(0,n.Ay)(u.A)((e=>{let{theme:t}=e;return{textAlign:"start",fontSize:"14px",padding:"5px 10px",borderBottom:"1px solid",borderBottomColor:"lightgray",fontWeight:"bold",color:"white",background:t.palette.secondary.main}}));function om(){const{selectedSetting:e}=(0,l.useContext)(De.A),{id:t}=(0,_.g)(),[a,n]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(null),[u,x]=(0,l.useState)(!1),{isDarkMode:h}=(0,l.useContext)(ot.A),p=(0,_.Zp)(),[j,g]=(0,l.useState)((null===c||void 0===c?void 0:c.benefits)||[{point:""}]),[y,A]=(0,l.useState)((null===c||void 0===c?void 0:c.benefits)||[{point:""}]),f=(0,tt.Wx)({initialValues:{class:[],subject:"",title:"",description:"",isTrending:!1,overview:[],benefits:[]},onSubmit:async t=>{try{const a={description:t.description,classIds:t.class,subject:t.subject,title:t.title,isTrending:t.isTrending,courseDetails:{overview:j,benefits:y}},l=new FormData;if(l.append("bodyData",JSON.stringify(a)),l.append("schoolId",e._id),i.forEach((e=>l.append("file",e))),c){const{data:e}=await(0,Se.yJ)(ke.r.course.update+"/"+c._id,l,{headers:{"Content-Type":"multipart/form-data"}})}else{const{data:e}=await(0,Se.bE)(ke.r.course.create,l,{headers:{"Content-Type":"multipart/form-data"}});p("/sch/lms/courses")}}catch(a){console.log(a)}},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});n(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[e]),(0,l.useEffect)((()=>{f.values.class&&(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:e._id,search:{class:f.values.class}}});d(t.result.map((e=>({label:e.name,value:e._id}))))}catch(t){console.log(t)}})()}),[f.values.class,e]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Add Course"}),(0,re.jsxs)("form",{onSubmit:f.handleSubmit,children:[(0,re.jsx)(sm,{children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{multiple:!0,required:!0,name:"class",formik:f,label:"Select Class",options:a})}),f.values.class.length<=1&&(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:f,label:"Select Subject",options:r})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"title",formik:f,label:"Enter Course Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"thumbnailImage",label:"Select Thumbnail Image",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}o(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:i,onRemove:e=>((e,t)=>{o(i.filter((t=>t.name!=e)))})(e)})})]})}),(0,re.jsx)(sm,{children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"description",formik:f,label:"Enter  Description"})})})}),(0,re.jsx)(sm,{children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:[j.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[(0,re.jsx)(im.A,{fontSize:"small",sx:{color:"#1b3779",mt:1}}),(0,re.jsx)(Ft.A,{size:"small",placeholder:"Enter Overview",label:"Enter Overview",variant:"outlined",fullWidth:!0,sx:{mb:"5px",mt:1},value:e.point||"",InputLabelProps:{shrink:!0},name:"overview",inputProps:{maxLength:200},onChange:e=>((e,t)=>{const{value:a}=e.target;let l=[...j].map(((e,l)=>l===t?{...e,point:a}:{...e}));g(l)})(e,t)}),(0,re.jsx)(S.A,{title:"Delete",children:(0,re.jsx)(Ya.A,{fontSize:"small",onClick:()=>(e=>{const t=[...j];t.splice(e,1),g(t)})(t),color:"error"})})]},t))),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",sx:{mt:1},onClick:()=>{g([...j,{point:""}])},children:(0,re.jsx)(rt.A,{})})]})})}),(0,re.jsx)(sm,{children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:[y.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[(0,re.jsx)(im.A,{fontSize:"small",sx:{color:"#1b3779",mt:1}}),(0,re.jsx)(Ft.A,{size:"small",placeholder:"Enter What You Will Learn",label:"Enter What You Will Learn",variant:"outlined",sx:{mb:"5px",mt:1},InputLabelProps:{shrink:!0},fullWidth:!0,name:"benefits",value:e.point||"",inputProps:{maxLength:200},onChange:e=>((e,t)=>{const{value:a}=e.target;let l=[...y].map(((e,l)=>l===t?{...e,point:a}:{...e}));A(l)})(e,t)}),(0,re.jsx)(S.A,{title:"Delete",children:(0,re.jsx)(Ya.A,{sx:{cursor:"pointer"},fontSize:"small",color:"error",onClick:()=>(e=>{const t=[...y];t.splice(e,1),A(t)})(t)})})]},t))),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",sx:{mt:1},onClick:()=>{A([...y,{point:""}])},children:(0,re.jsx)(rt.A,{})})]})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,sx:{marginBottom:"60px"},children:(0,re.jsx)(nm.A,{children:(0,re.jsx)(Ea.A,{control:(0,re.jsx)(ca.A,{checked:f.values.isTrending}),name:"isTrending",onChange:e=>{f.setFieldValue("isTrending",e.target.checked)},label:"This course is trending?"})})}),(0,re.jsx)(Kl,{content:(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,sx:{display:"flex",justifyContent:"flex-end",gap:"5px"},children:[(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>p(-1),color:"error",size:"small",children:"Cancel"}),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",onClick:f.handleSubmit,children:"Submit"})]})})]})]})}const rm=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{padding:"20px 8px",borderRadius:"10px",margin:"10px 0px",borderRight:"10px",border:"1px solid lightGrey",backgroundColor:"whitesmoke"}}));function dm(){var e,t,a;const{selectedSetting:n}=(0,l.useContext)(De.A),[i,o]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),u=(0,_.Zp)(),x=(0,_.zy)(),h=x.state&&x.state.courseData||null;console.log(h,"mmmmmmmmm==============");const[p,j]=(0,l.useState)((null===h||void 0===h||null===(e=h.courseDetails)||void 0===e?void 0:e.overview)||[{point:""}]),[g,y]=(0,l.useState)((null===h||void 0===h||null===(t=h.courseDetails)||void 0===t?void 0:t.benefits)||[{point:""}]),A=(0,tt.Wx)({initialValues:{class:h?null===(a=h.class)||void 0===a?void 0:a.map((e=>e._id)):[],subject:"",title:h?h.title:"",description:h?h.description:"",isTrending:(null===h||void 0===h?void 0:h.isTrending)||!1,overview:(null===h||void 0===h?void 0:h.courseDetails.overview)||[],benefits:(null===h||void 0===h?void 0:h.courseDetails.benefits)||[]},onSubmit:async e=>{try{const t={description:e.description,classIds:e.class,subject:e.subject,title:e.title,isTrending:e.isTrending,courseDetails:{overview:p,benefits:g}},a=new FormData;a.append("bodyData",JSON.stringify(t)),a.append("schoolId",n._id),r.forEach((e=>a.append("thumbnailImage",e)));const{data:l}=await(0,Se.yJ)(ke.r.course.update+"/"+h._id,a,{headers:{"Content-Type":"multipart/form-data"}});u("/sch/lms/courses")}catch(t){console.log(t)}},enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:n._id}});o(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[n]),(0,l.useEffect)((()=>{A.values.class&&(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.subject.list,{params:{schoolId:n._id,search:{class:A.values.class}}});m(e.result.map((e=>({label:e.name,value:e._id}))))}catch(e){console.log(e)}})()}),[A.values.class,n]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Add Course"}),(0,re.jsxs)("form",{onSubmit:A.handleSubmit,children:[(0,re.jsx)(rm,{children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{multiple:!0,required:!0,name:"class",formik:A,label:"Select Class",options:i})}),A.values.class.length<=1&&(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"subject",formik:A,label:"Select Subject",options:c})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:4,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"title",formik:A,label:"Enter Course Name"})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(Ul.A,{multi:!1,name:"thumbnailImage",label:"Select Thumbnail Image",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}d(l)}else console.log("No files selected")})(e),customOnChange:!0,selectedFiles:r,onRemove:e=>((e,t)=>{d(r.filter((t=>t.name!=e)))})(e)})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)("img",{src:null===h||void 0===h?void 0:h.thumbnailImage,style:{maxHeight:"100px"}})})]})}),(0,re.jsx)(rm,{children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:(0,re.jsx)(At.A,{required:!0,name:"description",formik:A,label:"Enter  Description"})})})}),(0,re.jsx)(rm,{children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:[p.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[(0,re.jsx)(im.A,{fontSize:"small",sx:{color:"#1b3779",mt:1}}),(0,re.jsx)(Ft.A,{size:"small",placeholder:"Enter Overview",label:"Enter Overview",variant:"outlined",fullWidth:!0,sx:{mb:"5px",mt:1},value:e.point||"",InputLabelProps:{shrink:!0},name:"overview",inputProps:{maxLength:200},onChange:e=>((e,t)=>{const{value:a}=e.target;let l=[...p].map(((e,l)=>l===t?{...e,point:a}:{...e}));j(l)})(e,t)}),(0,re.jsx)(S.A,{title:"Delete",children:(0,re.jsx)(Ya.A,{fontSize:"small",onClick:()=>(e=>{const t=[...p];t.splice(e,1),j(t)})(t),color:"error"})})]},t))),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",sx:{mt:1},onClick:()=>{j([...p,{point:""}])},children:(0,re.jsx)(rt.A,{})})]})})}),(0,re.jsx)(rm,{children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsxs)(xe.Ay,{xs:12,md:12,lg:12,item:!0,children:[g.map(((e,t)=>(0,re.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[(0,re.jsx)(im.A,{fontSize:"small",sx:{color:"#1b3779",mt:1}}),(0,re.jsx)(Ft.A,{size:"small",placeholder:"Enter What You Will Learn",label:"Enter What You Will Learn",variant:"outlined",sx:{mb:"5px",mt:1},InputLabelProps:{shrink:!0},fullWidth:!0,name:"benefits",value:e.point||"",inputProps:{maxLength:200},onChange:e=>((e,t)=>{const{value:a}=e.target;let l=[...g].map(((e,l)=>l===t?{...e,point:a}:{...e}));y(l)})(e,t)}),(0,re.jsx)(S.A,{title:"Delete",children:(0,re.jsx)(Ya.A,{fontSize:"small",color:"error",onClick:()=>(e=>{const t=[...g];t.splice(e,1),y(t)})(t)})})]},t))),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",sx:{mt:1},onClick:()=>{y([...g,{point:""}])},children:(0,re.jsx)(rt.A,{})})]})})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:12,sx:{marginBottom:"60px"},children:(0,re.jsx)(nm.A,{children:(0,re.jsx)(Ea.A,{control:(0,re.jsx)(ca.A,{checked:A.values.isTrending}),name:"isTrending",onChange:e=>{A.setFieldValue("isTrending",e.target.checked)},label:"This course is trending?"})})}),(0,re.jsx)(Kl,{content:(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,sx:{display:"flex",justifyContent:"flex-end",gap:"5px"},children:[(0,re.jsx)(Xe.A,{variant:"contained",onClick:()=>u(-1),color:"error",size:"small",children:"Cancel"}),(0,re.jsx)(Xe.A,{variant:"contained",size:"small",onClick:A.handleSubmit,children:"Submit"})]})})]})]})}var cm=a(20987),mm=a(19252);function um(e){let{message:t="Loading... Please wait!"}=e;return(0,re.jsx)(s.A,{sx:{display:"flex",height:"90vh",width:"100%",justifyContent:"center",alignItems:"center"},children:(0,re.jsx)(u.A,{sx:{fontWeight:"bold",fontSize:"14px"},children:t})})}const xm=(0,n.Ay)(mm.A)((e=>{let{theme:t}=e;return{display:"flex",height:"90vh",justifyContent:"center",alignItems:"center",borderRadius:t.shape.borderRadius,overflow:"hidden",width:"100%",marginTop:"10px"}})),hm=(0,n.Ay)(s.A)((()=>({display:"flex",flex:1,width:"100%",height:"100%"}))),pm=["OneONoneCall","GroupCall","LiveStreaming"],jm={OneONoneCall:{appId:914808192,serverSecret:"6f4bc5c4a35f3979a591bf2c534f335a"},GroupCall:{appId:914808192,serverSecret:"6f4bc5c4a35f3979a591bf2c534f335a"},LiveStreaming:{appId:206971782,serverSecret:"212d4d9408c30ced21273b86754371f2"}};function gm(){const{selectedSetting:e}=(0,l.useContext)(De.A),{roomID:t}=(0,_.g)();console.log(t,"rooooooommmmmmmmmmmid");const a=(0,_.Zp)(),n=(0,_.zy)(),[i,s]=l.useState(!1),[o,r]=l.useState(""),[d,c]=l.useState(!1),[m,u]=l.useState(null),{state:x}=n;console.log(x,"ssssssssssssssssssssssssssssssssssssssssssssssssss");l.useEffect((()=>{(async()=>{try{const{data:a}=await(0,Se.Jt)(ke.r.meeting.join,{params:{schoolId:e._id,roomID:t}})}catch(o){r("Invalid meeting link!"),c(!0)}s(!0)})()}),[e,t]);l.useEffect((()=>()=>{if(m)try{m.destroy()}catch(o){console.log(o,"error while stopping zegocloud")}}),[m]);const h=()=>{a("/live",{replace:!0})};return i?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xm,{maxWidth:"xl",children:(0,re.jsx)(hm,{component:"div",ref:async e=>{var a,l;let n=x?x.meetingType:pm[0];const i=null===(a=jm[n])||void 0===a?void 0:a.appId,s=null===(l=jm[n])||void 0===l?void 0:l.serverSecret;console.log(i,s,"==============================================");let r=window.localStorage.getItem("current_ecs_user");console.log(r);let d=JSON.parse(r);console.log(d);const c=cm.ZegoUIKitPrebuilt.generateKitTokenForTest(i,s,t,d._id,d.basicInfo.name);try{const t=cm.ZegoUIKitPrebuilt.create(c);t.joinRoom({container:e,autoHideFooter:!0,layout:"Auto",enableUserSearch:!0,showMyMicrophoneToggleButton:!0,showRoomTimer:!0,showRemoveUserButton:!0,scenario:{config:{role:cm.ZegoUIKitPrebuilt.Host},mode:cm.ZegoUIKitPrebuilt[n]}}),u(t)}catch(o){cm.ZegoUIKitPrebuilt.ConsoleError(),console.log(o,"Error while joining room")}}})}),(0,re.jsxs)(mt.A,{open:d,onClose:h,"aria-labelledby":"alert-live-session-error","aria-describedby":"alert-live-session-error-dialog-description",children:[(0,re.jsx)(ut.A,{id:"alert-live-session-error",children:o}),(0,re.jsx)(xt.A,{children:(0,re.jsx)(pi.A,{id:"alert-live-session-error-dialog-description",children:"The link you are trying to access either expired || does not exist || you are not permitted to see the link"})}),(0,re.jsx)(ht.A,{children:(0,re.jsx)(Xe.A,{size:"small",onClick:h,autoFocus:!0,children:"Ok"})})]})]}):(0,re.jsx)(um,{message:"Getting room details..., Please wait!"})}var ym=a(36930),Am=a(29760),fm=a(12900),bm=a(95622),vm=a(17564),Sm=a(1130),km=a(34109),Dm=a(26581);const Cm=(0,re.jsx)(km.A,{fontSize:"small"}),wm=(0,re.jsx)(Dm.A,{fontSize:"small"}),Im={PaperProps:{style:{maxHeight:224,width:250}}},Nm=(0,n.Ay)(ym.A)((e=>{let{theme:t}=e;return{height:25,borderRadius:15,["&.".concat(Am.A.colorPrimary)]:{backgroundColor:t.palette.grey[(t.palette.mode,800)]},["& .".concat(Am.A.bar)]:{borderRadius:15,backgroundColor:"light"===t.palette.mode?"#f42323":"#308fe8"}}})),_m=(0,n.Ay)(fm.Ay)((e=>{let{theme:t}=e;return{padding:10,width:"100%",borderBottom:"1px solid ".concat("light"===t.palette.mode?"#eaecef":"#30363d"),"& input":{borderRadius:4,backgroundColor:"light"===t.palette.mode?"#fff":"#0d1117",padding:8,transition:t.transitions.create(["border-color","box-shadow"]),border:"1px solid ".concat("light"===t.palette.mode?"#eaecef":"#30363d"),fontSize:14,"&:focus":{boxShadow:"0px 0px 0px 3px ".concat("light"===t.palette.mode?"rgba(3, 102, 214, 0.3)":"rgb(12, 45, 107)"),borderColor:"light"===t.palette.mode?"#0366d6":"#388bfd"}}}})),Tm=()=>{const{selectedSetting:e}=(0,l.useContext)(De.A),{state:t}=(0,_.zy)(),[a,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)([]),[r,d]=(0,l.useState)(""),[c,m]=(0,l.useState)([]),[x,h]=(0,l.useState)({sms:t?t.message:"Dear {{VAR}}, We would like to inform you {{VAR1}},{{VAR2}},{{VAR3}},{{VAR4}},{{VAR5}} Regards EXCELLENT SCHOOL VIJAYAPURA."}),[p,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[A,f]=(0,l.useState)([]),[v,S]=(0,l.useState)(!1),[k,D]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),[T,M]=(0,l.useState)([]),[F,z]=(0,l.useState)(!1),[E,q]=(0,l.useState)(""),[Y,W]=(0,l.useState)(""),[R,P]=(0,l.useState)(""),[J,V]=(0,l.useState)(0),[B,L]=(0,l.useState)(""),[U,O]=(0,l.useState)([]),[H,G]=(0,l.useState)([]),[K,Q]=(0,l.useState)([]),[Z,$]=(0,l.useState)([]),[X,ee]=(0,l.useState)(!1),[te,ae]=(0,l.useState)([]),[le,ne]=(0,l.useState)(0),[ie,se]=(0,l.useState)([]),[oe,de]=(0,l.useState)("");(0,l.useEffect)((()=>{G([]),W(""),P(""),Q([])}),[U,e._id]),(0,l.useEffect)((()=>{P(""),Q([])}),[H,e._id]),(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);o(e.result)}catch(e){console.log(e)}})()}),[]);(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});y(t.result)}catch(t){console.log(t)}})()}),[e._id]);const ue=e=>{const{name:t,value:a}=e.target;h({...x,[t]:a})};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Compose"}),(0,re.jsxs)("form",{children:[(0,re.jsxs)(me.A,{sx:{padding:"10px",mb:1},children:[(0,re.jsxs)(s.A,{sx:{paddingLeft:"1rem",display:"flex",gap:"5px"},children:[(0,re.jsxs)(s.A,{children:["Total SMS :"," ",(0,re.jsx)(u.A,{component:"span",fontWeight:"bold",children:"79875"})]}),(0,re.jsxs)(s.A,{children:["Consumed SMS :"," ",(0,re.jsx)(u.A,{component:"span",fontWeight:"bold",children:79875-oe})]}),(0,re.jsxs)(s.A,{children:["Balance SMS :"," ",(0,re.jsx)(u.A,{component:"span",fontWeight:"bold",children:oe})]})]}),(0,re.jsx)(s.A,{sx:{padding:"1rem"},children:(0,re.jsx)(Nm,{variant:"determinate",value:100*(79875-oe)/79875})})]}),(0,re.jsx)(me.A,{sx:{padding:"10px",mb:1},children:(0,re.jsx)(s.A,{sx:{flexFlow:1},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:1,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,re.jsxs)(Ta.A,{size:"small",fullWidth:!0,children:[(0,re.jsx)(Ma.A,{id:"demo-simple-select-filrlccled-label",children:"Receiver Type"}),(0,re.jsxs)(Fa.A,{label:"Receiver Type",labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"receiverType",value:r,onChange:e=>d(e.target.value),children:[(0,re.jsx)(C.A,{value:"role",sx:{fontSize:12,fontWeight:500},children:"Role"}),(0,re.jsx)(C.A,{value:"user",sx:{fontSize:12,fontWeight:500},children:"User"}),(0,re.jsx)(C.A,{value:"students",sx:{fontSize:12,fontWeight:500},children:"Students"}),(0,re.jsx)(C.A,{value:"All Students",sx:{fontSize:12,fontWeight:500},children:"All Students"}),(0,re.jsx)(C.A,{value:"file",sx:{fontSize:12,fontWeight:500},children:"File"})]})]})}),"file"===r&&(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:8,sx:{alignSelf:"center",display:"flex",justifyContent:"flex-start"},children:[(0,re.jsx)(Xe.A,{size:"small",variant:"contained",children:"Sample File"}),(0,re.jsx)(Ul.A,{name:"file",onChange:e=>((e,t)=>{const{files:a}=e.target;let l=[];if(a.length>0){for(let e=0;e<a.length;e++){const t=a[e];l.push(t)}$(l)}else console.log("No files selected")})(e),customOnChange:!0,label:"Select File",selectedFiles:Z})]})}),"students"===r&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,re.jsx)(Ft.A,{value:E,fullWidth:!0,"aria-describedby":"classPopper",onFocus:e=>{S(v?null:e.currentTarget)},variant:"outlined",size:"small",label:"Class"}),(0,re.jsx)(bm.A,{id:"classPopper",open:!!v,anchorEl:v,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,re.jsx)(vm.A,{onBlur:()=>S(null),open:!0,value:U,multiple:!0,onChange:async(t,a)=>{const l=a.map((e=>e._id)),n=a.map((e=>e.name));O(a),q(n.join(","));try{if(a.length){const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:{$in:l}}}}),a=t.result.sort(((e,t)=>e.name.localeCompare(t.name)));f(a)}else f([])}catch(i){console.log(i)}},isOptionEqualToValue:(e,t)=>e._id===t._id,options:g,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:Cm,checkedIcon:wm,checked:l}),"".concat(t.name)]})},renderInput:e=>(0,re.jsx)(_m,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Class",autoFocus:!0})})})})]}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,re.jsx)(Ft.A,{value:Y,"aria-describedby":"sectionPopper",fullWidth:!0,onFocus:e=>{D(k?null:e.currentTarget)},variant:"outlined",size:"small",label:"Section"}),(0,re.jsx)(bm.A,{id:"sectionPopper",open:!!k,anchorEl:k,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,re.jsx)(vm.A,{multiple:!0,onBlur:()=>D(null),open:!0,value:H,onChange:async(t,a)=>{const l=a.map((e=>e._id)),n=a.map((e=>e.name)),i=a.map((e=>e.class.name));G(a),W(n.map(((e,t)=>"".concat(e," (").concat(i[t],")"))).join(", "));try{if(a.length){const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.section":l}}});M(t.result)}else M([])}catch(s){console.log(s)}},isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:A.sort(((e,t)=>e.class.name.localeCompare(t.class.name))),disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name,"(class:").concat(e.class.name,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:Cm,checkedIcon:wm,style:{marginRight:8},checked:l}),"".concat(t.name,"(class:").concat(t.class.name,")")]})},renderInput:e=>(0,re.jsx)(_m,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Section",autoFocus:!0})})})})]}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,re.jsx)(Ft.A,{value:R,"aria-describedby":"contactsPopper",fullWidth:!0,onFocus:e=>{N(w?null:e.currentTarget)},variant:"outlined",size:"small",label:"Students",InputProps:{endAdornment:(0,re.jsxs)(zt.A,{position:"start",children:["All Total-",J]})}}),(0,re.jsx)(bm.A,{id:"contactsPopper",open:!!w,anchorEl:w,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,re.jsx)(vm.A,{multiple:!0,onBlur:()=>N(null),open:!0,value:K,onChange:(e,t)=>{if(t.some((e=>"all"===e._id))){const e=T.map((e=>e._id));j(e),V(T.length),P("All")}else{const e=t.map((e=>e.basicInfo.name)),a=t.map((e=>e._id));j(a),V(t.length),P(e.join(", "))}Q(t)},isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:[{_id:"all",basicInfo:{name:"All"},contactNumber:""},...T],disableCloseOnSelect:!0,getOptionLabel:e=>"all"===e._id?"All":"".concat(e.basicInfo.name," (").concat(e.contactNumber,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:Cm,checkedIcon:wm,style:{marginRight:8},checked:l}),"".concat(t.basicInfo.name," (").concat(t.contactNumber,")")]})},renderInput:e=>(0,re.jsx)(_m,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Students",autoFocus:!0})})})})]})]}),"role"===r&&(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:3,lg:3,children:(0,re.jsxs)(Ta.A,{size:"small",fullWidth:!0,children:[(0,re.jsx)(Ma.A,{sx:{fontSize:12},children:"Role"}),(0,re.jsx)(Fa.A,{label:"Role",labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:c,onChange:e=>{const{target:{value:t}}=e;m("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:e=>e.join(", "),MenuProps:Im,children:i&&i.map(((e,t)=>(0,re.jsxs)(C.A,{value:e.name,sx:{fontSize:12},children:[(0,re.jsx)(ca.A,{checked:c.indexOf(e.name)>-1}),(0,re.jsx)(b.A,{primary:e.name})]},e._id)))})]})}),"user"===r&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:3,lg:3,children:(0,re.jsxs)(Ta.A,{size:"small",fullWidth:!0,children:[(0,re.jsx)(Ma.A,{sx:{fontSize:12},children:"Role"}),(0,re.jsx)(Fa.A,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"role",sx:{marginBottom:"15px"},multiple:!0,label:"Role",size:"small",onChange:async t=>{try{const{target:{value:a}}=t;m("string"===typeof a?a.split(","):a);const{data:l}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id,search:{role:{$in:a}}}});ae(l.result)}catch(a){}},value:c,children:i&&i.map(((e,t)=>(0,re.jsx)(C.A,{value:e._id,sx:{fontSize:12,fontWeight:500},children:e.name},e._id)))})]})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:3,lg:3,children:[(0,re.jsx)(Ft.A,{fullWidth:!0,value:B,"aria-describedby":"employeePopper",onFocus:e=>{ee(X?null:e.currentTarget)},variant:"outlined",size:"small",label:"Employees",InputProps:{endAdornment:(0,re.jsxs)(zt.A,{position:"end",children:["All Total- ",le]})}}),(0,re.jsx)(bm.A,{id:"employeePopper",open:!!X,anchorEl:X,children:(0,re.jsx)(Ta.A,{variant:"outlined",fullWidth:!0,size:"small",children:(0,re.jsx)(vm.A,{onBlur:()=>ee(null),open:!0,value:ie,multiple:!0,onChange:(e,t)=>{if(se(t),t.filter((e=>"all"==e._id)).length)return L("All"),void ne(te.length);const a=t.filter((e=>"all"!==e._id));ne(a.length),a.length===te.length?L("All"):L(a.map((e=>e.basicInfo.name)).join(", ")),se(t)},isOptionEqualToValue:(e,t)=>e._id===t._id,options:[{_id:"all",basicInfo:{name:"All"}},...te],disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(null===e||void 0===e?void 0:e.basicInfo.name," (").concat(null===e||void 0===e?void 0:e.contactNumber,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:Cm,checkedIcon:wm,checked:l}),"".concat(null===t||void 0===t?void 0:t.basicInfo.name," (").concat(null===t||void 0===t?void 0:t.contactNumber,")")]})},renderInput:e=>(0,re.jsx)(_m,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Employees",autoFocus:!0})})})})]})]})]})})}),(0,re.jsx)(me.A,{sx:{padding:"10px",mb:1},children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:1,children:[(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsxs)(Ta.A,{required:!0,size:"small",fullWidth:!0,children:[(0,re.jsx)(Ma.A,{sx:{fontSize:12},children:"SMS Type"}),(0,re.jsxs)(Fa.A,{label:"SMS Type",id:"demo-simple-select-filled",name:"smsType",value:x.smsType||"",onChange:ue,children:[(0,re.jsx)(C.A,{value:"general",style:{fontSize:12,fontWeight:500},children:"General"}),(0,re.jsx)(C.A,{value:"attendance",style:{fontSize:12,fontWeight:500},children:"Attendence"}),(0,re.jsx)(C.A,{value:"fee",style:{fontSize:12,fontWeight:500},children:"Fee"}),(0,re.jsx)(C.A,{value:"credential",style:{fontSize:12,fontWeight:500},children:"Credential"}),(0,re.jsx)(C.A,{value:"exam",style:{fontSize:12,fontWeight:500},children:"Exam"}),(0,re.jsx)(C.A,{value:"leave",style:{fontSize:12,fontWeight:500},children:"Leave"}),(0,re.jsx)(C.A,{value:"library",style:{fontSize:12,fontWeight:500},children:"Library"}),(0,re.jsx)(C.A,{value:"transport",style:{fontSize:12,fontWeight:500},children:"Transport"}),(0,re.jsx)(C.A,{value:"hostel",style:{fontSize:12,fontWeight:500},children:"Hostel"}),(0,re.jsx)(C.A,{value:"preaddmission",style:{fontSize:12,fontWeight:500},children:"Preaddmission"}),(0,re.jsx)(C.A,{value:"parentMeeting",style:{fontSize:12,fontWeight:500},children:"Parent Meeting"}),(0,re.jsx)(C.A,{value:"schoolTiming",style:{fontSize:12,fontWeight:500},children:"School Timing"}),(0,re.jsx)(C.A,{value:"notice",style:{fontSize:12,fontWeight:500},children:"Notice"}),(0,re.jsx)(C.A,{value:"schoolOpen",style:{fontSize:12,fontWeight:500},children:"School Open"}),(0,re.jsx)(C.A,{value:"education",style:{fontSize:12,fontWeight:500},children:"Education"})]})]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsx)(Ft.A,{required:!0,size:"small",label:"Subject",fullWidth:!0,name:"subject",value:x.subject||"",onChange:ue})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,re.jsxs)(s.A,{style:{display:"flex",justifyContent:"flex-start"},children:[(0,re.jsx)(u.A,{component:"span",children:"Dynamic Tag: "}),(0,re.jsxs)(s.A,{children:["[name],[school_name] - wil get autoreplaced,",(0,re.jsxs)(u.A,{component:"span",color:"error",children:["replace - ","{{var}}"," with your content, variable fields may vary in length. Space consumed for 1 variable is 30 char and avoid double space."]})]})]})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,re.jsx)(Sm.h,{maxRows:4,"aria-label":"maximum height",placeholder:"Text Message",style:{width:"100%",height:"120px",padding:"10px",borderRadius:"5px"},name:"sms",fullWidth:!0,value:x.sms,onChange:ue})}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)("span",{children:"Click here to Notify Via SMS"}),(0,re.jsx)(I.A,{onChange:e=>{z(e.target.checked)},checked:F})]})]})}),(0,re.jsx)(me.A,{sx:{padding:"10px",mb:1},children:(0,re.jsx)(s.A,{sx:{flexGrow:1},children:(0,re.jsx)(xe.Ay,{container:!0,spacing:2,children:(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:12,style:{display:"flex",justifyContent:"flex-end"},children:(0,re.jsx)(pt.A,{loading:a,size:"small",variant:"contained",type:"submit",children:"Submit"})})})})})]})]})},Mm=[{name:"Subject",key:"subject"},{name:"Type",key:"type"},{name:"Message",key:"message"},{name:"Total SMS",key:"totalSms"},{name:"Time/Date",key:"createdAt"}],Fm=[{label:"Manual",value:"manual"},{label:"Automatic",value:"automatic"}];function zm(){const[e,t]=(0,l.useState)([]),a=(0,tt.Wx)({initialValues:{type:"",fromDate:null,toDate:null},onSubmit:async e=>{},enableReinitialize:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Report"}),(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(xe.Ay,{xs:12,md:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"type",formik:a,label:"Type",options:Fm})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:a,label:"From Date",name:"fromDate"})}),(0,re.jsx)(xe.Ay,{xs:12,sm:6,md:3,item:!0,children:(0,re.jsx)(Yt.A,{formik:a,label:"To Date",name:"toDate"})}),(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:3,lg:3,display:"flex",alignSelf:"center",children:(0,re.jsx)(Xe.A,{size:"small",type:"submit",variant:"contained",children:"Find"})})]}),(0,re.jsx)(gt.A,{actions:["delete"],bodyData:e,bodyDataModal:"report",tableKeys:Mm})]})}const Em=(0,n.Ay)(fm.Ay)((e=>{let{theme:t}=e;return{padding:10,width:"100%",borderBottom:"1px solid ".concat("light"===t.palette.mode?"#eaecef":"#30363d"),"& input":{borderRadius:4,backgroundColor:"light"===t.palette.mode?"#fff":"#0d1117",padding:8,transition:t.transitions.create(["border-color","box-shadow"]),border:"1px solid ".concat("light"===t.palette.mode?"#eaecef":"#30363d"),fontSize:14,"&:focus":{boxShadow:"0px 0px 0px 3px ".concat("light"===t.palette.mode?"rgba(3, 102, 214, 0.3)":"rgb(12, 45, 107)"),borderColor:"light"===t.palette.mode?"#0366d6":"#388bfd"}}}})),qm=(0,re.jsx)(km.A,{fontSize:"small"}),Ym=(0,re.jsx)(Dm.A,{fontSize:"small"}),Wm=()=>{const{selectedSetting:e}=(0,l.useContext)(De.A),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[o,r]=(0,l.useState)(""),[d,c]=(0,l.useState)([]),[m,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)([]),[p,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[A,f]=(0,l.useState)(""),[b,v]=(0,l.useState)([]),[S,k]=(0,l.useState)(!1),[D,w]=(0,l.useState)([]),[I,N]=(0,l.useState)(""),[_,T]=(0,l.useState)(""),[M,F]=(0,l.useState)([]),[z,E]=(0,l.useState)([]),[q,Y]=(0,l.useState)([]),[W,R]=(0,l.useState)([]),[P,J]=(0,l.useState)([]),[V,B]=(0,l.useState)(0),[L,U]=(0,l.useState)(0);(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.role.list);a(e.result)}catch(e){console.log(e)}})()}),[]),(0,l.useEffect)((()=>{(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});v(t.result)}catch(t){console.log(t)}})()}),[e._id]);const O=async(t,a)=>{const l=a.map((e=>e._id)),n=a.map((e=>e.name));F(a),f(n.join(","));try{if(a.length){const{data:t}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:{$in:l}}}}),a=t.result.sort(((e,t)=>e.name.localeCompare(t.name)));w(a)}else w([])}catch(i){console.log(i)}},H=async(t,a)=>{const l=a.map((e=>e._id)),n=a.map((e=>e.name)),i=a.map((e=>e.class.name));E(a),N(n.map(((e,t)=>"".concat(e," (").concat(i[t],")"))).join(", "));try{if(a.length){const{data:t}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{"academicInfo.section":l}}});Y(t.result)}else Y([])}catch(s){console.log(s)}},G=(e,t)=>{if(t.some((e=>"all"===e._id))){const e=q.map((e=>e._id));J(e),B(q.length),T("All")}else{const e=t.map((e=>e.basicInfo.name)),a=t.map((e=>e._id));J(a),B(t.length),T(e.join(", "))}R(t)},K=(e,t)=>{if(h(t),t.filter((e=>"all"==e._id)).length)return r("All"),void U(n.length);const a=t.filter((e=>"all"!==e._id));U(a.length),a.length===n.length?r("All"):r(a.map((e=>e.basicInfo.name)).join(", ")),h(t)},Q=d.some((e=>{const a=t.find((t=>t._id===e));return a&&a.name.includes("STUDENT")}));return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Credentials"}),(0,re.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,re.jsx)(me.A,{sx:{padding:"15px",width:{xs:"100%",sm:"100%",md:"70%",lg:"50%"}},children:(0,re.jsx)("form",{children:(0,re.jsxs)(xe.Ay,{container:!0,spacing:2,children:[(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsxs)(Ta.A,{variant:"outlined",fullWidth:!0,required:!0,children:[(0,re.jsx)(Ma.A,{id:"demo-simple-select-filled-label",sx:{fontSize:12},children:"User Type"}),(0,re.jsx)(Fa.A,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"role",sx:{marginBottom:"15px"},multiple:!0,label:"User Type",size:"small",onChange:async t=>{try{const{target:{value:a}}=t;c("string"===typeof a?a.split(","):a);const{data:l}=await(0,Se.Jt)(ke.r.employee.list,{params:{schoolId:e._id,search:{role:{$in:a}}}});i(l.result)}catch(a){}},value:d,children:t&&t.map(((e,t)=>(0,re.jsx)(C.A,{value:e._id,sx:{fontSize:12,fontWeight:500},children:e.name},e._id)))})]}),d.some((e=>{const a=t.find((t=>t._id===e));return a&&a.name.includes("STUDENT")}))&&1==d.length?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{value:A,fullWidth:!0,sx:{marginBottom:"15px"},"aria-describedby":"classPopper",onFocus:e=>{j(p?null:e.currentTarget)},variant:"outlined",size:"small",label:"Class"}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"classPopper",open:!!p,anchorEl:p,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",fullWidth:!0,sx:{m:1,width:"100%"},children:(0,re.jsx)(vm.A,{onBlur:()=>j(null),open:!0,value:M,multiple:!0,onChange:O,isOptionEqualToValue:(e,t)=>e._id===t._id,options:b,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,checked:l}),"".concat(t.name)]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Class",autoFocus:!0})})})})]}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{value:I,"aria-describedby":"sectionPopper",sx:{marginBottom:"15px"},fullWidth:!0,onFocus:e=>{y(g?null:e.currentTarget)},variant:"outlined",size:"small",label:"Section"}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"sectionPopper",open:!!g,anchorEl:g,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",fullWidth:!0,sx:{m:1,width:"100%"},children:(0,re.jsx)(vm.A,{multiple:!0,onBlur:()=>y(null),open:!0,value:z,onChange:H,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:D.sort(((e,t)=>e.class.name.localeCompare(t.class.name))),disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name,"(class:").concat(e.class.name,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,style:{marginRight:8},checked:l}),"".concat(t.name,"(class:").concat(t.class.name,")")]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Section",autoFocus:!0})})})})]}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{value:_,"aria-describedby":"contactsPopper",fullWidth:!0,onFocus:e=>{k(S?null:e.currentTarget)},variant:"outlined",size:"small",label:"Students",InputProps:{endAdornment:(0,re.jsxs)(zt.A,{position:"start",children:["All Total-",V]})}}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"contactsPopper",open:!!S,anchorEl:S,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",sx:{m:1,width:"100%"},children:(0,re.jsx)(vm.A,{multiple:!0,onBlur:()=>k(null),open:!0,value:W,onChange:G,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:[{_id:"all",basicInfo:{name:"All"},contactNumber:""},...q],disableCloseOnSelect:!0,getOptionLabel:e=>"all"===e._id?"All":"".concat(e.basicInfo.name," (").concat(e.contactNumber,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,style:{marginRight:8},checked:l}),"".concat(t.basicInfo.name," (").concat(t.contactNumber,")")]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Students",autoFocus:!0})})})})]})]}):null]}),Q?null:(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{fullWidth:!0,value:o,"aria-describedby":"employeePopper",onFocus:e=>{u(m?null:e.currentTarget)},variant:"outlined",size:"small",label:"Employees",InputProps:{endAdornment:(0,re.jsxs)(zt.A,{position:"end",children:["All Total- ",L]})}}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"employeePopper",open:!!m,anchorEl:m,children:(0,re.jsx)(Ta.A,{variant:"outlined",fullWidth:!0,size:"small",children:(0,re.jsx)(vm.A,{onBlur:()=>u(null),open:!0,value:x,multiple:!0,onChange:K,isOptionEqualToValue:(e,t)=>e._id===t._id,options:[{_id:"all",basicInfo:{name:"All"}},...n],disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(null===e||void 0===e?void 0:e.basicInfo.name," (").concat(null===e||void 0===e?void 0:e.contactNumber,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,checked:l}),"".concat(null===t||void 0===t?void 0:t.basicInfo.name," (").concat(null===t||void 0===t?void 0:t.contactNumber,")")]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Employees",autoFocus:!0})})})})]}),d.length>=2&&d.some((e=>{const a=t.find((t=>t._id===e));return a&&a.name.includes("STUDENT")}))?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{value:A,fullWidth:!0,"aria-describedby":"classPopper",onFocus:e=>{j(p?null:e.currentTarget)},variant:"outlined",size:"small",label:"Class"}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"classPopper",open:!!p,anchorEl:p,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,re.jsx)(vm.A,{onBlur:()=>j(null),open:!0,value:M,multiple:!0,onChange:O,isOptionEqualToValue:(e,t)=>e._id===t._id,options:b,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,checked:l}),"".concat(t.name)]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Class",autoFocus:!0})})})})]}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{value:I,"aria-describedby":"sectionPopper",fullWidth:!0,onFocus:e=>{y(g?null:e.currentTarget)},variant:"outlined",size:"small",label:"Section"}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"sectionPopper",open:!!g,anchorEl:g,children:(0,re.jsx)(Ta.A,{variant:"outlined",size:"small",fullWidth:!0,children:(0,re.jsx)(vm.A,{multiple:!0,onBlur:()=>y(null),open:!0,value:z,onChange:H,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:D.sort(((e,t)=>e.class.name.localeCompare(t.class.name))),disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.name,"(class:").concat(e.class.name,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,style:{marginRight:8},checked:l}),"".concat(t.name,"(class:").concat(t.class.name,")")]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Section",autoFocus:!0})})})})]}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{value:_,"aria-describedby":"contactsPopper",fullWidth:!0,onFocus:e=>{k(S?null:e.currentTarget)},variant:"outlined",size:"small",label:"Students",InputProps:{endAdornment:(0,re.jsxs)(zt.A,{position:"start",children:["All Total-",V]})}}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"contactsPopper",open:!!S,anchorEl:S,children:(0,re.jsx)(Ta.A,{variant:"outlined",fullWidth:!0,size:"small",children:(0,re.jsx)(vm.A,{multiple:!0,onBlur:()=>k(null),open:!0,value:W,onChange:G,isOptionEqualToValue:(e,t)=>e._id===t._id,id:"checkboxes-tags-demo",options:[{_id:"all",basicInfo:{name:"All"},contactNumber:""},...q],disableCloseOnSelect:!0,getOptionLabel:e=>"all"===e._id?"All":"".concat(e.basicInfo.name," (").concat(e.contactNumber,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,style:{marginRight:8},checked:l}),"".concat(t.basicInfo.name," (").concat(t.contactNumber,")")]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Students",autoFocus:!0})})})})]}),(0,re.jsxs)(xe.Ay,{item:!0,xs:12,md:12,lg:12,children:[(0,re.jsx)(Ft.A,{fullWidth:!0,value:o,"aria-describedby":"employeePopper",onFocus:e=>{u(m?null:e.currentTarget)},variant:"outlined",size:"small",label:"Employees",InputProps:{endAdornment:(0,re.jsxs)(zt.A,{position:"end",children:["All Total- ",L]})}}),(0,re.jsx)(bm.A,{style:{width:"70%"},id:"employeePopper",open:!!m,anchorEl:m,children:(0,re.jsx)(Ta.A,{variant:"outlined",fullWidth:!0,size:"small",children:(0,re.jsx)(vm.A,{onBlur:()=>u(null),open:!0,value:x,multiple:!0,onChange:K,isOptionEqualToValue:(e,t)=>e._id===t._id,options:[{_id:"all",basicInfo:{name:"All"}},...n],disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(null===e||void 0===e?void 0:e.basicInfo.name," (").concat(null===e||void 0===e?void 0:e.contactNumber,")"),renderOption:(e,t,a)=>{let{selected:l}=a;return(0,re.jsxs)("li",{...e,children:[(0,re.jsx)(ca.A,{icon:qm,checkedIcon:Ym,checked:l}),"".concat(null===t||void 0===t?void 0:t.basicInfo.name," (").concat(null===t||void 0===t?void 0:t.contactNumber,")")]})},renderInput:e=>(0,re.jsx)(Em,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Employees",autoFocus:!0})})})})]})]}):"",(0,re.jsx)(xe.Ay,{item:!0,xs:12,md:12,lg:6,container:!0,children:(0,re.jsx)(Xe.A,{variant:"contained",size:"small",type:"submit",children:"Send Credentials"})})]})})})})]})};function Rm(){const{selectedSetting:e}=(0,l.useContext)(De.A),t=(0,_.Zp)(),[a,n]=(0,l.useState)([]),[i,s]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),m=async t=>{try{const{data:a}=await(0,Se.Jt)(ke.r.student.list,{params:{schoolId:e._id,search:{academicYear:t.academicYear,"academicInfo.class":t.class,"academicInfo.section":t.section}}});c(a.result)}catch(a){console.log(a)}},u=(0,tt.Wx)({initialValues:{academicYear:"",class:"",section:""},onSubmit:m,enableReinitialize:!0});(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);n(e.result.map((e=>({...e,label:"".concat(e.from,"-").concat(e.to),value:e._id})))),u.setFieldValue("academicYear",e.result[0]._id)}catch(e){console.log(e)}})(),(async()=>{try{const{data:t}=await(0,Se.Jt)(ke.r.class.list,{params:{schoolId:e._id}});s(t.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("class",t.result[0]._id)}catch(t){console.log(t)}})()}),[e._id]),(0,l.useEffect)((()=>{u.values.class&&(async()=>{try{var t;const{data:a}=await(0,Se.Jt)(ke.r.section.list,{params:{schoolId:e._id,search:{class:u.values.class}}});r(a.result.map((e=>({...e,label:e.name,value:e._id})))),u.setFieldValue("section",null===(t=a.result[0])||void 0===t?void 0:t._id)}catch(a){console.log(a)}})()}),[u.values.class,e]),(0,l.useEffect)((()=>{u.values.academicYear&&u.values.class&&u.values.section&&m(u.values)}),[u.values.academicYear,u.values.class,u.values.section,e]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ce.A,{title:"Bulk Photo"}),(0,re.jsx)(ue.A,{sx:{padding:2,marginBottom:2},children:(0,re.jsx)("form",{onSubmit:u.handleSubmit,children:(0,re.jsxs)(xe.Ay,{rowSpacing:1,columnSpacing:2,container:!0,component:"div",onSubmit:u.handleSubmit,children:[(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"academicYear",formik:u,label:"Select Academic Year",options:a})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"class",formik:u,label:"Select Class",options:i})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,children:(0,re.jsx)(et.A,{required:!0,name:"section",formik:u,label:"Select Section",options:o})}),(0,re.jsx)(xe.Ay,{xs:12,md:6,lg:3,item:!0,sx:{alignSelf:"center"},children:(0,re.jsx)(Xe.A,{type:"submit",variant:"contained",size:"small",children:"Find"})})]})})}),(0,re.jsx)(ia.A,{component:ue.A,children:(0,re.jsxs)(sa.A,{children:[(0,re.jsx)(oa.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:"SL"}),(0,re.jsx)(da.A,{align:"center",children:"Roll No"}),(0,re.jsx)(da.A,{align:"center",children:"Name"}),(0,re.jsx)(da.A,{align:"center",children:"Photo"}),(0,re.jsx)(da.A,{align:"center",children:"File"}),(0,re.jsx)(da.A,{align:"center",children:"Action"})]})}),(0,re.jsx)(ma.A,{children:d.map(((e,a)=>(0,re.jsxs)(ra.A,{children:[(0,re.jsx)(da.A,{align:"center",children:a+1}),(0,re.jsx)(da.A,{align:"center",children:e.academicInfo.rollNumber}),(0,re.jsx)(da.A,{align:"center",children:e.basicInfo.name}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(k.A,{src:e.photo,sx:{margin:"auto"}})}),(0,re.jsx)(da.A,{align:"center",sx:{maxWidth:"100px"},children:(0,re.jsx)(Ul.A,{multi:!1,onChange:t=>(async(e,t)=>{const{files:a}=e.target;if(a.length>0){const e=new FormData;e.append("photo",a[0]);try{await(0,Se.yJ)(ke.r.student.updatePhoto+"/"+t,e,{headers:{"Content-Type":"multipart/form-data"}}),m(u.values)}catch(l){console.log(l)}}})(t,e._id),customOnChange:!0,label:"Select Image"})}),(0,re.jsx)(da.A,{align:"center",children:(0,re.jsx)(S.A,{title:"Edit",children:(0,re.jsx)(h.A,{onClick:()=>(e=>{t("/sch/student/edit-student/".concat(e._id))})(e),children:(0,re.jsx)(Ga.A,{color:"primary",fontSize:"small"})})})})]},e._id)))})]})})]})}const Pm=250,Jm=e=>({width:Pm,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),Vm=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)"),[e.breakpoints.up("sm")]:{width:"calc(".concat(e.spacing(8)," + 1px)")}}),Bm=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1),...t.mixins.toolbar}})),Lm=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(0,1),...t.mixins.toolbar,justifyContent:"flex-start"}})),Um=(0,n.Ay)(r.A,{shouldForwardProp:e=>"open"!==e})((e=>{let{theme:t,open:a}=e;return{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),...a&&{marginLeft:Pm,width:"calc(100% - ".concat(Pm,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})}}})),Om=(0,n.Ay)(o.Ay,{shouldForwardProp:e=>"open"!==e})((e=>{let{theme:t,open:a}=e;return{width:Pm,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...a&&{...Jm(t),"& .MuiDrawer-paper":Jm(t)},...!a&&{...Vm(t),"& .MuiDrawer-paper":Vm(t)}}}));function Hm(){const e=(0,i.A)(),{selectedSetting:t}=l.useContext(De.A),[a,n]=l.useState(!0),[o,r]=l.useState([]),E=(0,_.Zp)(),[q,Y]=l.useState(null),W=Boolean(q),[R,P]=l.useState([]),J=()=>{Y(null)},{isDarkMode:V,setIsDarkMode:B}=l.useContext(ot.A),[L,U]=l.useState(""),[O,H]=l.useState(null),{SIDE_MENU_DATA:G}=de;l.useEffect((()=>{r(G),K()}),[]);const K=async()=>{try{const{data:e}=await(0,Se.Jt)(ke.r.academicYear.list);P(e.result[0])}catch(e){console.log(e)}};l.useEffect((()=>{(()=>{let e=window.location.pathname,t=null;for(let a of G)if(a.subMenus.length){a.subMenus.map((e=>e.path)).includes(e)&&(t=G.indexOf(a))}t&&(H(t),n(!0))})()}),[]);return(0,re.jsxs)(s.A,{sx:{display:"flex"},children:[(0,re.jsx)(m.Ay,{}),(0,re.jsx)(Um,{position:"fixed",open:a,children:(0,re.jsxs)(d.A,{children:[(0,re.jsx)(h.A,{color:"inherit","aria-label":"open drawer",onClick:()=>{n(!0)},edge:"start",sx:{marginRight:5,...a&&{display:"none"}},children:(0,re.jsx)(p.A,{})}),(0,re.jsxs)(u.A,{variant:"h6",component:"div",color:"white",textAlign:"center",fontSize:"18px",sx:{display:{xs:"none",md:"block"}},children:[null===t||void 0===t?void 0:t.name," [",R?null===R||void 0===R?void 0:R.from:"-"," -"," ",R?null===R||void 0===R?void 0:R.to:"-","]"]}),(0,re.jsx)(s.A,{sx:{display:"flex",width:"100%",flex:1,justifyContent:"flex-end",alignItems:"center"},children:(0,re.jsxs)(v.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},spacing:1,direction:"row",children:[(0,re.jsx)(S.A,{title:"Notification",children:(0,re.jsx)(N.N_,{to:"/sch/notifications",children:(0,re.jsx)(h.A,{children:(0,re.jsx)(T.A,{sx:{width:26,height:26,color:"#BDBDBD"}})})})}),(0,re.jsx)(S.A,{title:"Account Settings",children:(0,re.jsx)(h.A,{onClick:e=>{Y(e.currentTarget)},"aria-controls":W?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":W?"true":void 0,children:(0,re.jsx)(k.A,{sx:{width:26,height:26}})})}),(0,re.jsx)(S.A,{title:"websites",children:(0,re.jsx)(N.N_,{to:"/",children:(0,re.jsx)(h.A,{children:(0,re.jsx)(k.A,{src:"/world-wide-web.png",alt:"loading...",sx:{width:26,height:26}})})})})]})})]})}),(0,re.jsxs)(D.A,{anchorEl:q,id:"account-menu",open:W,onClose:J,onClick:J,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&::before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,re.jsx)(C.A,{onClick:J,children:(0,re.jsxs)(N.N_,{to:"/sch/profile",style:{display:"flex",textDecoration:"none"},children:[(0,re.jsx)(f.A,{children:(0,re.jsx)(z.A,{fontSize:"small"})}),(0,re.jsx)(b.A,{style:{color:"black"},children:"Profile"})]})}),(0,re.jsx)(C.A,{onClick:J,children:(0,re.jsxs)(N.N_,{to:"/sch/administrator/reset-password",style:{display:"flex",textDecoration:"none"},children:[(0,re.jsx)(f.A,{children:(0,re.jsx)(M.A,{fontSize:"small"})}),(0,re.jsx)(b.A,{style:{color:"black"},children:"Reset Password"})]})})]}),(0,re.jsxs)(Om,{variant:"permanent",open:a,children:[(0,re.jsxs)(Bm,{sx:{justifyContent:"space-between",position:"sticky",top:0,zIndex:1,backgroundColor:V?"#000":"#fff",overflow:"hidden"},children:[(0,re.jsx)(s.A,{}),(0,re.jsx)("img",{style:{height:"50px",width:"80px",objectFit:"contain"},src:null===t||void 0===t?void 0:t.logo}),(0,re.jsx)(h.A,{onClick:()=>{n(!1)},children:"rtl"===e.direction?(0,re.jsx)(g.A,{color:"primary"}):(0,re.jsx)(j.A,{color:"primary"})})]}),(0,re.jsx)(x.A,{}),(0,re.jsx)(c.A,{children:o.map(((e,t)=>e.subMenus.length?(0,re.jsxs)("div",{children:[(0,re.jsx)(y.Ay,{sx:{padding:0},children:(0,re.jsxs)(A.A,{selected:O===t||window.location.pathname===e.path,onClick:()=>(e=>{if(O===e)return H(null);H(e)})(t),children:[(0,re.jsx)(f.A,{children:e.icon}),(0,re.jsx)(b.A,{primary:e.name}),O===t?(0,re.jsx)(nt.A,{}):(0,re.jsx)(it.A,{})]})},e.path),(0,re.jsx)(w.A,{timeout:"auto",unmountOnExit:!0,in:O===t,sx:{width:"100%"},children:(0,re.jsx)(c.A,{children:e.subMenus.map((e=>(0,re.jsx)(y.Ay,{sx:{width:"100%"},children:(0,re.jsx)(N.N_,{to:e.path,style:{textDecoration:"none",display:"flex",flex:1,color:"red"},children:(0,re.jsxs)(A.A,{onClick:()=>U(e.path),sx:{"& .MuiListItemText-root":{whiteSpace:"normal",wordWrap:"wrap"},"& .MuiListItemIcon-root":{}},selected:L===e.path||window.location.pathname===e.path,children:[(0,re.jsx)(f.A,{children:e.icon}),(0,re.jsx)(b.A,{primary:e.name})]})})},e.name)))})})]},e.path+e.name):(0,re.jsx)("div",{children:(0,re.jsx)(y.Ay,{disablePadding:!0,children:(0,re.jsx)(N.N_,{to:e.path,style:{textDecoration:"none",display:"flex",flex:1},children:(0,re.jsxs)(A.A,{onClick:()=>H(t),selected:O===t||window.location.pathname===e.path,children:[(0,re.jsx)(f.A,{children:e.icon}),(0,re.jsx)(b.A,{primary:e.name})]})})})},e.path)))}),(0,re.jsx)(x.A,{}),(0,re.jsx)(y.Ay,{disablePadding:!0,children:(0,re.jsxs)(A.A,{sx:{paddingLeft:0,"& .MuiListItemText-root":{whiteSpace:"normal",wordWrap:"wrap"},"& .MuiListItemIcon-root":{}},children:[(0,re.jsx)(I.A,{sx:{marginRight:"20px"},checked:V,onChange:()=>{B(!V),window.localStorage.setItem("isDarkMode",!V)}}),(0,re.jsx)(b.A,{primary:V?"Dark Mode":"Light Mode"})]})}),(0,re.jsx)(x.A,{sx:{marginBottom:"20px"}}),(0,re.jsx)(Lm,{children:(0,re.jsx)(c.A,{sx:{width:"100%"},children:(0,re.jsx)(y.Ay,{disablePadding:!0,children:(0,re.jsxs)(A.A,{sx:{"& .MuiListItemText-root":{whiteSpace:"normal",wordWrap:"wrap"},"& .MuiListItemIcon-root":{}},onClick:()=>{E("/")},children:[(0,re.jsx)(f.A,{children:(0,re.jsx)(F.A,{fontSize:"small",color:"primary"})}),(0,re.jsx)(b.A,{primary:"Logout"})]})})})})]}),(0,re.jsxs)(s.A,{component:"main",sx:{flexGrow:1,p:3,overflowX:"hidden",overflowY:"auto"},children:[(0,re.jsx)(Bm,{}),(0,re.jsxs)(_.BV,{children:[(0,re.jsx)(_.qh,{path:"dashboard",element:(0,re.jsx)(lt,{})}),(0,re.jsx)(_.qh,{path:"manage-institute",element:(0,re.jsx)(cc,{})}),(0,re.jsx)(_.qh,{path:"administrator/academicYear",element:(0,re.jsx)(ft,{})}),(0,re.jsx)(_.qh,{path:"administrator/role-permission",element:(0,re.jsx)(ja,{})}),(0,re.jsx)(_.qh,{path:"administrator/user-role",element:(0,re.jsx)(ya,{})}),(0,re.jsx)(_.qh,{path:"administrator/reset-password",element:(0,re.jsx)(Aa,{})}),(0,re.jsx)(_.qh,{path:"human-resource/manage-designation",element:(0,re.jsx)(vt,{})}),(0,re.jsx)(_.qh,{path:"human-resource/manage-department",element:(0,re.jsx)(kt,{})}),(0,re.jsx)(_.qh,{path:"human-resource/employee",element:(0,re.jsx)(Et,{})}),(0,re.jsx)(_.qh,{path:"human-resource/update-employee/:id",element:(0,re.jsx)(Kc,{})}),(0,re.jsx)(_.qh,{path:"human-resource/offer-letter",element:(0,re.jsx)(Ut,{})}),(0,re.jsx)(_.qh,{path:"human-resource/relieving-letter",element:(0,re.jsx)(Ht,{})}),(0,re.jsx)(_.qh,{path:"human-resource/off-boarding",element:(0,re.jsx)($t,{})}),(0,re.jsx)(_.qh,{path:"human-resource/experience-letter",element:(0,re.jsx)(ea,{})}),(0,re.jsx)(_.qh,{path:"human-resource/teacher-activity",element:(0,re.jsx)(aa,{})}),(0,re.jsx)(_.qh,{path:"pre-admission/enquiries",element:(0,re.jsx)(Na,{})}),(0,re.jsx)(_.qh,{path:"pre-admission/exams",element:(0,re.jsx)(Ua,{})}),(0,re.jsx)(_.qh,{path:"pre-admission/exam-schedules",element:(0,re.jsx)(al,{})}),(0,re.jsx)(_.qh,{path:"pre-admission/result",element:(0,re.jsx)(il,{})}),(0,re.jsx)(_.qh,{path:"academic/class",element:(0,re.jsx)(dl,{})}),(0,re.jsx)(_.qh,{path:"academic/section",element:(0,re.jsx)(gl,{})}),(0,re.jsx)(_.qh,{path:"academic/subject",element:(0,re.jsx)(bl,{})}),(0,re.jsx)(_.qh,{path:"attendence/student-attendance",element:(0,re.jsx)(Nl,{})}),(0,re.jsx)(_.qh,{path:"attendence/employee-attendance",element:(0,re.jsx)(Ml,{})}),(0,re.jsx)(_.qh,{path:"class-routine",element:(0,re.jsx)(Fl,{})}),(0,re.jsx)(_.qh,{path:"student/overview",element:(0,re.jsx)(Pl,{})}),(0,re.jsx)(_.qh,{path:"student/admit-student",element:(0,re.jsx)(Gl,{})}),(0,re.jsx)(_.qh,{path:"student/add-student",element:(0,re.jsx)(lm,{})}),(0,re.jsx)(_.qh,{path:"student/edit-student/:id",element:(0,re.jsx)(lm,{})}),(0,re.jsx)(_.qh,{path:"student/reshuffle",element:(0,re.jsx)(Xl,{})}),(0,re.jsx)(_.qh,{path:"student/promotion",element:(0,re.jsx)(tn,{})}),(0,re.jsx)(_.qh,{path:"student/bulk-admission",element:(0,re.jsx)(ln,{})}),(0,re.jsx)(_.qh,{path:"student/credential",element:(0,re.jsx)(sn,{})}),(0,re.jsx)(_.qh,{path:"student/quick-admit",element:(0,re.jsx)(dn,{})}),(0,re.jsx)(_.qh,{path:"student/bulk-photo",element:(0,re.jsx)(Rm,{})}),(0,re.jsx)(_.qh,{path:"student/student-activity",element:(0,re.jsx)(mn,{})}),(0,re.jsx)(_.qh,{path:"student/student-bulk-photo",element:(0,re.jsx)(Rd,{})}),(0,re.jsx)(_.qh,{path:"assignment",element:(0,re.jsx)(hn,{})}),(0,re.jsx)(_.qh,{path:"announcement/notice",element:(0,re.jsx)(gn,{})}),(0,re.jsx)(_.qh,{path:"announcement/news",element:(0,re.jsx)(fn,{})}),(0,re.jsx)(_.qh,{path:"announcement/holiday",element:(0,re.jsx)(Sn,{})}),(0,re.jsx)(_.qh,{path:"announcement/awardsAndAchievements",element:(0,re.jsx)(Cn,{})}),(0,re.jsx)(_.qh,{path:"announcement/splashNews",element:(0,re.jsx)(Mn,{})}),(0,re.jsx)(_.qh,{path:"gallery",element:(0,re.jsx)(zn,{})}),(0,re.jsx)(_.qh,{path:"notifications",element:(0,re.jsx)(qn,{})}),(0,re.jsx)(_.qh,{path:"event",element:(0,re.jsx)(Wn,{})}),(0,re.jsx)(_.qh,{path:"exam/exam-grade",element:(0,re.jsx)(Jn,{})}),(0,re.jsx)(_.qh,{path:"exam/exam-term",element:(0,re.jsx)(On,{})}),(0,re.jsx)(_.qh,{path:"exam/exam-schedule",element:(0,re.jsx)($n,{})}),(0,re.jsx)(_.qh,{path:"exam/exam-hall-ticket",element:(0,re.jsx)(Xn,{})}),(0,re.jsx)(_.qh,{path:"exam-Mark/exam-Attendance",element:(0,re.jsx)(xi,{})}),(0,re.jsx)(_.qh,{path:"exam-Mark/manage-mark",element:(0,re.jsx)(mi,{})}),(0,re.jsx)(_.qh,{path:"exam-Mark/exam-result",element:(0,re.jsx)(ri,{})}),(0,re.jsx)(_.qh,{path:"exam-Mark/marks-card",element:(0,re.jsx)(ii,{})}),(0,re.jsx)(_.qh,{path:"exam-Mark/consolidated-marks-sheet",element:(0,re.jsx)(li,{})}),(0,re.jsx)(_.qh,{path:"exam-Mark/subject-wise-report",element:(0,re.jsx)(ti,{})}),(0,re.jsx)(_.qh,{path:"exam-Mark/division-wise-report",element:(0,re.jsx)(ei,{})}),(0,re.jsx)(_.qh,{path:"lms/storage",element:(0,re.jsx)(ns,{})}),(0,re.jsx)(_.qh,{path:"lms/courses",element:(0,re.jsx)(Ai,{})}),(0,re.jsx)(_.qh,{path:"lms/add-courses",element:(0,re.jsx)(om,{})}),(0,re.jsx)(_.qh,{path:"lms/edit-courses/:id",element:(0,re.jsx)(dm,{})}),(0,re.jsx)(_.qh,{path:"lms/course-content",element:(0,re.jsx)(Vi,{})}),(0,re.jsx)(_.qh,{path:"lms/live",element:(0,re.jsx)(ts,{})}),(0,re.jsx)(_.qh,{path:"lms/room/:roomID",element:(0,re.jsx)(gm,{})}),(0,re.jsx)(_.qh,{path:"library/books",element:(0,re.jsx)(ds,{})}),(0,re.jsx)(_.qh,{path:"library/periodical",element:(0,re.jsx)(ms,{})}),(0,re.jsx)(_.qh,{path:"library/student-library-member",element:(0,re.jsx)(gs,{})}),(0,re.jsx)(_.qh,{path:"library/student-issue-return",element:(0,re.jsx)(ks,{})}),(0,re.jsx)(_.qh,{path:"library/employee-library-member",element:(0,re.jsx)(Ns,{})}),(0,re.jsx)(_.qh,{path:"library/employee-issue-return",element:(0,re.jsx)(zs,{})}),(0,re.jsx)(_.qh,{path:"leave-management/leave-type",element:(0,re.jsx)(Js,{})}),(0,re.jsx)(_.qh,{path:"leave-management/student-leave",element:(0,re.jsx)(Bs,{})}),(0,re.jsx)(_.qh,{path:"leave-management/employee-leave",element:(0,re.jsx)(Qs,{})}),(0,re.jsx)(_.qh,{path:"leave-management/leave-report",element:(0,re.jsx)($s,{})}),(0,re.jsx)(_.qh,{path:"inventory/item",element:(0,re.jsx)(eo,{})}),(0,re.jsx)(_.qh,{path:"inventory/vendor",element:(0,re.jsx)(ao,{})}),(0,re.jsx)(_.qh,{path:"inventory/transaction",element:(0,re.jsx)(co,{})}),(0,re.jsx)(_.qh,{path:"inventory/stockList",element:(0,re.jsx)(po,{})}),(0,re.jsx)(_.qh,{path:"inventory/issue",element:(0,re.jsx)(yo,{})}),(0,re.jsx)(_.qh,{path:"inventory/sell",element:(0,re.jsx)(fo,{})}),(0,re.jsx)(_.qh,{path:"certificate/study-certificate",element:(0,re.jsx)(wo,{})}),(0,re.jsx)(_.qh,{path:"certificate/transfer-certificate",element:(0,re.jsx)(Eo,{})}),(0,re.jsx)(_.qh,{path:"fees/receipt-book",element:(0,re.jsx)(Ho,{})}),(0,re.jsx)(_.qh,{path:"fees/feeMap-category",element:(0,re.jsx)(Ko,{})}),(0,re.jsx)(_.qh,{path:"fees/collect-fees",element:(0,re.jsx)(Zo,{})}),(0,re.jsx)(_.qh,{path:"fees/balance-fee",element:(0,re.jsx)(Xo,{})}),(0,re.jsx)(_.qh,{path:"fees/fee-overview",element:(0,re.jsx)(ar,{})}),(0,re.jsx)(_.qh,{path:"fees/re-conciliation",element:(0,re.jsx)(nr,{})}),(0,re.jsx)(_.qh,{path:"hostel/manage-hostel",element:(0,re.jsx)(cr,{})}),(0,re.jsx)(_.qh,{path:"hostel/manage-room-type",element:(0,re.jsx)(ur,{})}),(0,re.jsx)(_.qh,{path:"hostel/manage-room-bed",element:(0,re.jsx)(gr,{})}),(0,re.jsx)(_.qh,{path:"hostel/hostel-member",element:(0,re.jsx)(br,{})}),(0,re.jsx)(_.qh,{path:"transport/vehicle",element:(0,re.jsx)(Cr,{})}),(0,re.jsx)(_.qh,{path:"transport/manage-route",element:(0,re.jsx)(Mr,{})}),(0,re.jsx)(_.qh,{path:"transport/routes",element:(0,re.jsx)(Rr,{})}),(0,re.jsx)(_.qh,{path:"transport/trasport-member",element:(0,re.jsx)(Yr,{})}),(0,re.jsx)(_.qh,{path:"transport/vehicle-log",element:(0,re.jsx)(Br,{})}),(0,re.jsx)(_.qh,{path:"transport/vehicle-maintenance",element:(0,re.jsx)(ed,{})}),(0,re.jsx)(_.qh,{path:"payroll/salary-grade",element:(0,re.jsx)(ld,{})}),(0,re.jsx)(_.qh,{path:"payroll/make-payment",element:(0,re.jsx)(id,{})}),(0,re.jsx)(_.qh,{path:"report/library-report",element:(0,re.jsx)(jd,{})}),(0,re.jsx)(_.qh,{path:"report/student-attendance",element:(0,re.jsx)(bd,{})}),(0,re.jsx)(_.qh,{path:"report/student-yearly-attendane",element:(0,re.jsx)(gd,{})}),(0,re.jsx)(_.qh,{path:"report/employee-attendance",element:(0,re.jsx)(vd,{})}),(0,re.jsx)(_.qh,{path:"report/employee-yearly-attendance",element:(0,re.jsx)(yd,{})}),(0,re.jsx)(_.qh,{path:"report/student-report",element:(0,re.jsx)(Gd,{})}),(0,re.jsx)(_.qh,{path:"report/student-activity-report",element:(0,re.jsx)(fd,{})}),(0,re.jsx)(_.qh,{path:"visitorInfo/visitor-info",element:(0,re.jsx)(Id,{})}),(0,re.jsx)(_.qh,{path:"visitorInfo/student-checkout",element:(0,re.jsx)(Td,{})}),(0,re.jsx)(_.qh,{path:"help-desk",element:(0,re.jsx)(Fd,{})}),(0,re.jsx)(_.qh,{path:"guardian-feedback",element:(0,re.jsx)(Yd,{})}),(0,re.jsx)(_.qh,{path:"human-resource/add-employee",element:(0,re.jsx)(rc,{})}),(0,re.jsx)(_.qh,{path:"communication_compose",element:(0,re.jsx)(Tm,{})}),(0,re.jsx)(_.qh,{path:"communication_report",element:(0,re.jsx)(zm,{})}),(0,re.jsx)(_.qh,{path:"communication_credentials",element:(0,re.jsx)(Wm,{})}),(0,re.jsx)(_.qh,{path:"human-resource/edit-employee/:id",element:(0,re.jsx)(rc,{})}),(0,re.jsx)(_.qh,{path:"manage-institute/add-institute",element:(0,re.jsx)(kc,{})}),(0,re.jsx)(_.qh,{path:"manage-institute/add-institute",element:(0,re.jsx)(kc,{})}),(0,re.jsx)(_.qh,{path:"manage-institute/edit-institute/:id",element:(0,re.jsx)(kc,{})}),(0,re.jsx)(_.qh,{path:"profile",element:(0,re.jsx)(Yc,{})})]}),(0,re.jsx)(_.sv,{})]})]})}},29541:(e,t,a)=>{a.d(t,{A:()=>j});var l=a(96446),n=a(65043),i=a(34535),s=a(85865),o=a(88911),r=a(53193),d=a(18356),c=a(72221),m=a(32143),u=a(54536),x=a(81728),h=a(70579);const p=(0,i.Ay)(l.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",marginBottom:"20px",borderBottom:"1px solid",borderBottomColor:t.palette.primary.light}}));function j(e){let{title:t="",showTextField:a=!0}=e;const{settings:l,setSettings:i,selectedSetting:j,setSelectedSetting:g}=(0,n.useContext)(x.A);return(0,h.jsxs)(p,{children:[(0,h.jsx)(s.A,{component:"h1",sx:{fontWeight:"bold"},children:t}),a&&(0,h.jsx)(o.A,{direction:"row",spacing:2,children:(0,h.jsxs)(r.A,{fullWidth:!0,size:"small",sx:{minWidth:"200px"},children:[(0,h.jsx)(d.A,{id:"demo-simple-select-label",children:"Select School"}),(0,h.jsx)(c.A,{labelId:"demo-simpless-select-filled-label",id:"demo-simple-select-filled-l",value:null===j||void 0===j?void 0:j._id,name:"setting",onChange:e=>{const{name:t,value:a}=e.target;g({...l.filter((e=>e._id==a))[0]})},IconComponent:e=>(0,h.jsx)(u.A,{...e,fontSize:"medium"}),label:"Select school",children:null===l||void 0===l?void 0:l.map((e=>(0,h.jsx)(m.A,{value:e._id,children:e.name},e._id)))})]})})]})}},20486:(e,t,a)=>{a.d(t,{A:()=>_});var l=a(79650),n=a(63336),i=a(71806),s=a(84882),o=a(28076),r=a(39652),d=a(73460),c=a(96446),m=a(81045),u=a(77739),x=a(17392),h=a(42518),p=a(4598),j=a(19090),g=a(73368),y=a(85865),A=a(65043),f=a(63471),b=a(95540),v=a(79306),S=a(93851),k=a(95915),D=a(3341),C=a(47968),w=a(70579);const I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:2},N=(e,t)=>"boolean"===typeof e[t.key]?!0===e[t.key]?"Yes":"No":t.path&&Object.keys(e[t.path]||{}).length>0?e[t.path][t.key]||"NA":t.isDate?e[t.key]?new Date(e[t.key]).toDateString():"NA":e[t.key];function _(e){let{bodyData:t=[],bodyDataModal:a="",tableKeys:_=[],actions:T=["edit","delete","view","card","switch"],onEditClick:M=(()=>{}),onDeleteClick:F=(()=>{}),onViewClick:z=(()=>{}),onCardClick:E=(()=>{}),onNavigateFeeMap:q=(()=>{}),onToggleSwitch:Y=(()=>{}),toggleStatus:W=!1,isDataReady:R=!0,module:P="",CustomAction:J=(()=>{}),onUpdate:V=(()=>{}),onDownloadClick:B=(()=>{})}=e;const[L,U]=A.useState(0),[O,H]=A.useState(10),[G,K]=(0,A.useState)(!1),[Q,Z]=(0,A.useState)(null),$=()=>{K(!1)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(l.A,{component:n.A,children:[(0,w.jsxs)(i.A,{children:[(0,w.jsx)(s.A,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.dark:e.palette.primary.light},children:(0,w.jsxs)(o.A,{children:[(0,w.jsx)(r.A,{align:"center",children:"S.No"}),_.map(((e,t)=>(0,w.jsx)(r.A,{sx:{fontWeight:"bold"},align:"center",children:e.name},t+e.name))),T.length?(0,w.jsx)(r.A,{sx:{fontWeight:"bold"},align:"center",children:"Action"}):null]})}),(0,w.jsx)(d.A,{children:t.length&&R?t.slice(L*O,L*O+O).map(((e,t)=>(0,w.jsxs)(o.A,{children:[(0,w.jsx)(r.A,{align:"center",children:t+1}),_.map(((t,a)=>"image"===t.type?(0,w.jsx)(r.A,{align:"center",children:(0,w.jsx)(c.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,w.jsx)(m.A,{sx:{alignSelf:"center",objectFit:"contain"},src:e[t.key]})})},a):(0,w.jsx)(r.A,{align:"center",children:N(e,t)},a))),T.length?(0,w.jsxs)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",columnGap:"5px"},children:[T.includes("edit")&&(0,w.jsx)(u.A,{title:"Edit",children:(0,w.jsx)(x.A,{onClick:()=>M(e),children:(0,w.jsx)(b.A,{color:"primary",fontSize:"small"})})}),T.includes("delete")&&(0,w.jsx)(u.A,{title:"Delete",children:(0,w.jsx)(x.A,{onClick:()=>(e=>{Z(e),K(!0)})(e),children:(0,w.jsx)(f.A,{fontSize:"small",color:"error"})})}),T.includes("view")&&(0,w.jsx)(u.A,{title:"View",children:(0,w.jsx)(x.A,{onClick:()=>z(e),children:(0,w.jsx)(S.A,{fontSize:"small",color:"primary"})})}),T.includes("card")&&(0,w.jsx)(u.A,{title:"Unbundle",children:(0,w.jsx)(h.A,{size:"small",variant:"contained",onClick:()=>E(e),children:"Card"})}),T.includes("switch")&&(0,w.jsx)(u.A,{title:W,children:(0,w.jsx)(x.A,{size:"small",onClick:()=>Y(e),children:(0,w.jsx)(p.A,{size:"small",checked:!0===e[W]})})}),T.includes("custom")&&(0,w.jsx)(J,{onEditClick:M,data:e,onUpdate:V,onNavigateFeeMap:q}),T.includes("download")&&(0,w.jsx)(x.A,{size:"small",onClick:()=>B(e),children:(0,w.jsx)(C.A,{fontSize:"small"})})]}):null]},e._id||t))):null})]}),R?null:(0,w.jsx)(c.A,{sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"20px"},children:(0,w.jsx)(k.A,{size:30,color:"dodgerblue"})}),R?(0,w.jsx)(v.A,{dataPresent:t.length,title:a}):null,(0,w.jsx)(j.A,{size:"small",component:"div",count:t&&t.length?t.length:0,page:L,onPageChange:(e,t)=>{U(t)},rowsPerPage:O,onRowsPerPageChange:e=>{H(parseInt(e.target.value,10)),U(0)}})]}),(0,w.jsx)(g.A,{open:G,onClose:$,children:(0,w.jsxs)(c.A,{sx:I,children:[(0,w.jsx)(c.A,{sx:{textAlign:"center",margin:"10px auto"},children:(0,w.jsx)("img",{src:D,width:50,height:50})}),(0,w.jsx)(y.A,{textAlign:"center",sx:{fontSize:"18px",fontWeight:700},children:"Delete Confirmation"}),(0,w.jsx)(y.A,{sx:{mt:2,textAlign:"center"},children:"Are you sure want to delete this item?"}),(0,w.jsxs)(c.A,{my:3,sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px"},children:[(0,w.jsx)(h.A,{size:"small",color:"error",variant:"contained",onClick:$,children:"Cancel"}),(0,w.jsx)(h.A,{color:"primary",size:"small",variant:"contained",onClick:()=>{F(Q._id),K(!1)},children:"Delete"})]})]})})]})}},79306:(e,t,a)=>{a.d(t,{A:()=>i});var l=a(85865),n=(a(65043),a(70579));function i(e){let{dataPresent:t,title:a}=e;return t?null:(0,n.jsxs)(l.A,{variant:"h6",sx:{textAlign:"center",margin:"5px",padding:"5px"},children:[a.charAt(0).toUpperCase()+a.slice(1)," not found!"]})}},15737:(e,t,a)=>{a.d(t,{A:()=>i});var l=a(96446),n=a(70579);const i=function(e){const{children:t,value:a,index:i,...s}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:a!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),...s,children:a===i&&(0,n.jsx)(l.A,{children:t})})}},4599:(e,t,a)=>{a.d(t,{A:()=>d});var l=a(96446),n=a(63336),i=a(69869),s=a(24056),o=(a(65043),a(70579));function r(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function d(e){let{labels:t=[],onChange:a=(()=>{}),value:d=0}=e;return(0,o.jsx)(l.A,{component:n.A,sx:{marginBottom:"10px"},children:(0,o.jsx)(i.A,{value:d,onChange:a,"aria-label":"basic tabs example",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:t.map(((e,t)=>(0,o.jsx)(s.A,{sx:{fontWeight:"bold",fontSize:"12px"},label:e,...r(t)},e)))})})}},95855:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(65043),n=a(96446),i=a(26240),s=a(85865),o=a(42518),r=a(45903),d=a(83462),c=a(29347),m=a(35316),u=a(26600),x=a(30344),h=a(39336),p=a(17392),j=a(33438),g=a(70579);function y(e){let{open:t=!1,onClose:a=(()=>{}),styles:l={},selectedFiles:r=[],setSelectFiles:y=(()=>{}),customOnChage:A=!1,onRemove:f=(()=>{})}=e;const b=(0,i.A)();let v=(0,x.A)(b.breakpoints.down("sm"));return(0,g.jsxs)(d.A,{fullScreen:v,open:t,onClose:a,PaperProps:{sx:{width:"100%",maxWidth:650,...l}},children:[(0,g.jsx)(u.A,{children:r.length>1?"Selected files":"Selected file"}),(0,g.jsx)(h.A,{}),(0,g.jsx)(m.A,{sx:{padding:"10px"},children:r.map(((e,t)=>(console.log(e.name,"gg"),(0,g.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)(s.A,{children:e.name}),(0,g.jsx)(p.A,{size:"small",onClick:A?()=>f(e.name):()=>{return t=e.name,void y(r.filter((e=>e.name!==t)));var t},children:(0,g.jsx)(j.A,{fontSize:"small"})})]},t))))}),(0,g.jsx)(c.A,{children:(0,g.jsx)(o.A,{onClick:a,size:"small",variant:"contained",children:"Close"})})]})}var A=a(93851);const f=(0,r.A)(n.A)((()=>({display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",columnGap:"5px"})));function b(e){let{name:t,multi:a=!0,label:r="default label",required:d=!1,onChange:c=(()=>{}),value:m,selectedFiles:u=[],disabled:x=!1,setSelectedFiles:h=(()=>{}),customOnChange:p=!1,onRemove:j=(()=>{}),accept:b="",...v}=e;(0,i.A)();const[S,k]=(0,l.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(f,{mt:1,children:[(0,g.jsxs)(n.A,{component:"div",onClick:()=>k(!0),sx:{borderRadius:"5px",padding:"5px",backgroundColor:"white",border:"1px solid lightgray",height:"30px",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:[(0,g.jsx)(s.A,{component:"div",onClick:()=>k(!0),sx:{fontWeight:"bold",borderRadius:"5px",padding:"5px",backgroundColor:"white",color:"black",height:"30px",width:"30px",textAlign:"center"},children:u.length}),(0,g.jsx)(A.A,{fontSize:"small"})]}),(0,g.jsxs)(o.A,{fullWidth:!0,component:"label",size:"small",variant:"outlined",children:[(0,g.jsx)("input",{type:"file",multiple:a,accept:b,hidden:!0,onChange:p?e=>c(e):e=>{const t=e.target.files;if(t.length>0){let e=[];for(let a=0;a<t.length;a++){const l=t[a];e.push(l)}h([...e])}else console.log("No files selected")}}),r]})]}),(0,g.jsx)(y,{open:S,selectedFiles:u,setSelectFiles:h,onClose:()=>k(!1),customOnChage:p,onRemove:j})]})}},83094:(e,t,a)=>{a.d(t,{A:()=>d});a(65043);var l=a(60446),n=a.n(l),i=a(58390),s=a(79344),o=a(89302),r=a(70579);const d=function(e){let{name:t,label:a,formik:l,openTo:d="day",inputFormat:c="DD-MM-YYYY",views:m=["year","month","day"],disabled:u=!1,disableFutureDates:x=!1}=e;return(0,r.jsx)(i.$,{dateAdapter:o.R,children:(0,r.jsx)(s.l,{disableFuture:x,sx:{"& .MuiInputBase-input":{height:"8px"},marginTop:"16px",width:"100%"},name:t,variant:"outlined",size:"small",label:a,disabled:u,slotProps:{textField:{InputLabelProps:{fontSize:"90px"}}},openTo:d,closeOnSelect:!0,views:m,inputFormat:c,value:n()(l.values[t])||null,onChange:e=>l.setFieldValue(t,n()(e))})})}},61327:()=>{},3341:(e,t,a)=>{e.exports=a.p+"static/media/deleteicon.60b6f90a465370fb216b.png"}}]);
//# sourceMappingURL=2542.54dc469d.chunk.js.map